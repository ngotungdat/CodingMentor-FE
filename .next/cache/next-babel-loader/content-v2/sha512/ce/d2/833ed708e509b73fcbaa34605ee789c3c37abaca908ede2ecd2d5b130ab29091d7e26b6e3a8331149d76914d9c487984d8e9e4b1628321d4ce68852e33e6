{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\NewsFeed\\\\CreateNewsFeed.tsx\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { FileImageFilled, GroupOutlined } from '@ant-design/icons';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { Form, Modal, Popover, Skeleton, Spin, Tooltip } from 'antd';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { SketchPicker } from 'react-color';\nimport { Edit2, Image, Send } from 'react-feather';\nimport { useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport SelectField from '~/components/FormControl/SelectField';\nimport TextAreaField from '~/components/FormControl/TextAreaField';\nimport UploadFileField from '~/components/FormControl/UploadFileField';\nimport { optionCommonPropTypes } from '~/utils/proptypes';\nCreateNewsFeed.propTypes = {\n  isLoading: PropTypes.shape({\n    type: PropTypes.string.isRequired,\n    status: PropTypes.bool.isRequired\n  }),\n  isUpdate: PropTypes.bool,\n  dataUser: PropTypes.object,\n  handleUploadFile: PropTypes.func,\n  handleSubmit: PropTypes.func,\n  fetchBackgroundNewsFeed: PropTypes.func,\n  backgroundList: PropTypes.arrayOf(PropTypes.shape({\n    ID: PropTypes.number,\n    FileName: PropTypes.string\n  })),\n  optionList: PropTypes.shape({\n    teamOptionList: optionCommonPropTypes,\n    groupOptionList: optionCommonPropTypes\n  }),\n  itemUpdate: PropTypes.shape({\n    ID: PropTypes.number,\n    UserInformationID: PropTypes.number,\n    FullNameUnicode: PropTypes.string,\n    Color: PropTypes.string,\n    Avatar: PropTypes.string,\n    RoleID: PropTypes.number,\n    RoleName: PropTypes.string,\n    GroupNewsFeedID: PropTypes.number,\n    GroupNewsFeedName: PropTypes.string,\n    Content: PropTypes.string,\n    TypeFile: PropTypes.number,\n    isComment: PropTypes.bool,\n    CommentCount: PropTypes.number,\n    isLike: PropTypes.bool,\n    LikeCount: PropTypes.number,\n    NewsFeedFile: PropTypes.arrayOf(PropTypes.shape({\n      ID: PropTypes.number,\n      NameFile: PropTypes.string,\n      Type: PropTypes.number,\n      TypeName: PropTypes.string,\n      UID: PropTypes.string,\n      Thumnail: PropTypes.string\n    })),\n    NewsFeedBranch: PropTypes.arrayOf(PropTypes.shape({\n      ID: PropTypes.number,\n      BranchID: PropTypes.number,\n      BranchName: PropTypes.string\n    }))\n  }),\n  filtersData: PropTypes.shape({\n    name: PropTypes.string,\n    idTeam: PropTypes.number,\n    idGroup: PropTypes.number\n  })\n};\nCreateNewsFeed.defaultProps = {\n  isLoading: {\n    type: '',\n    status: false\n  },\n  isUpdate: false,\n  dataUser: {},\n  handleUploadFile: null,\n  handleSubmit: null,\n  fetchBackgroundNewsFeed: null,\n  backgroundList: [],\n  optionList: {\n    teamOptionList: [],\n    groupOptionList: []\n  },\n  itemUpdate: {\n    ID: 0,\n    UserInformationID: 0,\n    FullNameUnicode: '',\n    Color: '#000',\n    Avatar: '',\n    RoleID: 0,\n    RoleName: '',\n    GroupNewsFeedID: 0,\n    GroupNewsFeedName: '',\n    Content: '',\n    TypeFile: 0,\n    isComment: false,\n    CommentCount: 0,\n    isLike: false,\n    LikeCount: 0,\n    NewsFeedFile: [],\n    NewsFeedBranch: []\n  },\n  filtersData: {\n    name: '',\n    idTeam: 0,\n    idGroup: 0\n  }\n};\nvar colorList = ['#D0021B', '#F5A623', '#F8E71C', '#8B572A', '#7ED321', '#417505', '#BD10E0', '#9013FE', '#4A90E2', '#50E3C2', '#B8E986', '#4A4A4A', '#9B9B9B', '#000', '#FFF'];\n\nfunction CreateNewsFeed(props) {\n  _s();\n\n  var _this = this;\n\n  var _useState = useState(false),\n      isVisibleModal = _useState[0],\n      setIsVisibleModal = _useState[1];\n\n  var _useState2 = useState(false),\n      isOpenUploadFile = _useState2[0],\n      setIsOpenUploadFile = _useState2[1];\n\n  var _useState3 = useState('team'),\n      chooseArea = _useState3[0],\n      setChooseArea = _useState3[1];\n\n  var _useState4 = useState(false),\n      isShowBackgroundList = _useState4[0],\n      setIsShowBackgroundList = _useState4[1];\n\n  var _useState5 = useState(''),\n      backgroundUrl = _useState5[0],\n      setBackgroundUrl = _useState5[1];\n\n  var _useState6 = useState('#000'),\n      color = _useState6[0],\n      setColor = _useState6[1];\n\n  var isLoading = props.isLoading,\n      isUpdate = props.isUpdate,\n      itemUpdate = props.itemUpdate,\n      dataUser = props.dataUser,\n      handleUploadFile = props.handleUploadFile,\n      handleSubmit = props.handleSubmit,\n      backgroundList = props.backgroundList,\n      fetchBackgroundNewsFeed = props.fetchBackgroundNewsFeed,\n      optionList = props.optionList,\n      filtersData = props.filtersData;\n  var teamOptionList = optionList.teamOptionList,\n      groupOptionList = optionList.groupOptionList;\n  var name = filtersData.name,\n      idTeam = filtersData.idTeam,\n      idGroup = filtersData.idGroup;\n  var defaultValuesInit = {\n    Content: '',\n    Color: '',\n    TypeFile: 0,\n    NewsFeedFile: null,\n    BranchList: undefined,\n    //TEAM\n    GroupNewsFeedID: null //GROUP\n\n  };\n  var schemaBase = yup.object().shape({\n    Content: yup.string().nullable(),\n    Color: yup.string().nullable(),\n    TypeFile: yup.number().nullable(),\n    NewsFeedFile: yup.array().nullable()\n  });\n\n  var checkSchema = function checkSchema() {\n    if (chooseArea === 'team') {\n      return yup.object().shape({\n        BranchList: yup.array().min(1, 'Bạn phải chọn ít nhất 1 trung tâm').nullable().required('Bạn không được để trống')\n      }).concat(schemaBase);\n    }\n\n    if (chooseArea === 'group') {\n      return yup.object().shape({\n        GroupNewsFeedID: yup.number().nullable().min(1, 'Bạn phải chọn ít nhất 1 nhóm').required('Bạn không được để trống')\n      }).concat(schemaBase);\n    }\n  };\n\n  var form = useForm({\n    defaultValues: defaultValuesInit,\n    resolver: yupResolver(checkSchema())\n  });\n\n  var showModal = function showModal() {\n    setIsVisibleModal(true);\n  };\n\n  var closeModal = function closeModal() {\n    setIsVisibleModal(false);\n  };\n\n  var checkFetchBackgroundNewsFeed = function checkFetchBackgroundNewsFeed() {\n    if (!fetchBackgroundNewsFeed) return;\n    fetchBackgroundNewsFeed();\n  };\n\n  var onToggleUploadImage = function onToggleUploadImage() {\n    showModal();\n    setIsOpenUploadFile(true);\n  };\n\n  var onToggleBackgroundList = function onToggleBackgroundList() {\n    if (!isShowBackgroundList) {\n      checkFetchBackgroundNewsFeed();\n    } else {\n      form.setValue('TypeFile', 0);\n      form.setValue('NewsFeedFile', null);\n    }\n\n    setIsShowBackgroundList(!isShowBackgroundList);\n    setIsOpenUploadFile(false);\n  }; // UPLOAD WITH BACKGROUND DO NOT ACCEPT FILE\n\n\n  var toggleUploadFile = function toggleUploadFile() {\n    setIsOpenUploadFile(!isOpenUploadFile);\n    setIsShowBackgroundList(false);\n  };\n\n  var checkHandleUploadFile = function checkHandleUploadFile(arrFile) {\n    if (!handleUploadFile) return;\n    return handleUploadFile(arrFile);\n  };\n\n  var setChooseAreaFunc = function setChooseAreaFunc(branch, value) {\n    if (branch === 'group') {\n      form.setValue('BranchList', undefined);\n    }\n\n    if (branch === 'team') {\n      form.setValue('GroupNewsFeedID', null);\n    }\n\n    setChooseArea(branch);\n  };\n\n  var activeChooseBtn = function activeChooseBtn(branch, chooseBranch) {\n    if (isUpdate && chooseBranch !== branch) return 'disable';\n    if (chooseBranch === branch) return 'active';\n  };\n\n  var onChangeColor = function onChangeColor(color) {\n    setColor(color.hex);\n  };\n\n  var onToggleSelectBranch = function onToggleSelectBranch() {\n    showModal();\n    setChooseAreaFunc('group');\n  };\n\n  var resetOption = function resetOption() {\n    closeModal();\n    setIsOpenUploadFile(false);\n    setIsShowBackgroundList(false); // NEED TO STONE INFO IN TEAM OR GROUP\n\n    if (idTeam || idGroup) {\n      form.reset(_objectSpread(_objectSpread({}, defaultValuesInit), {}, {\n        BranchList: form.getValues('BranchList'),\n        GroupNewsFeedID: form.getValues('GroupNewsFeedID')\n      }));\n    } else {\n      form.reset(_objectSpread({}, defaultValuesInit));\n      setChooseAreaFunc('team');\n    }\n  };\n\n  var checkHandleSubmit = function checkHandleSubmit(data) {\n    if (!handleSubmit) return;\n\n    if (isUpdate) {\n      handleSubmit(data).then(function (res) {\n        if ((res === null || res === void 0 ? void 0 : res.status) === 200) {\n          closeModal();\n        }\n      });\n      return;\n    }\n\n    handleSubmit(data).then(function (res) {\n      if ((res === null || res === void 0 ? void 0 : res.status) === 200) {\n        resetOption();\n      }\n    });\n  };\n\n  useEffect(function () {\n    var newValues = {\n      BranchList: undefined,\n      //TEAM\n      GroupNewsFeedID: null //GROUP\n\n    }; // CREATE NEWS FEED IN TEAM OR GROUP DO NOT TO SELECT AGAIN\n\n    if (idTeam) {\n      newValues.BranchList = [idTeam];\n      newValues.GroupNewsFeedID = null;\n      setChooseAreaFunc('team');\n    }\n\n    if (idGroup) {\n      newValues.GroupNewsFeedID = idGroup;\n      newValues.BranchList = undefined;\n      setChooseAreaFunc('group');\n    }\n\n    form.reset(newValues);\n  }, [filtersData]);\n  useEffect(function () {\n    if (isShowBackgroundList) {\n      var _form$getValues;\n\n      form.setValue('Content', (_form$getValues = form.getValues('Content')) === null || _form$getValues === void 0 ? void 0 : _form$getValues.slice(0, 191));\n\n      if (backgroundUrl) {\n        form.setValue('TypeFile', 1);\n        form.setValue('NewsFeedFile', [{\n          url: backgroundUrl,\n          NameFile: backgroundUrl,\n          UID: Math.floor(Math.random() * 130698)\n        }]);\n      }\n    }\n\n    if (isOpenUploadFile) {\n      form.setValue('TypeFile', 2);\n    }\n\n    if (color) {\n      form.setValue('Color', color);\n    }\n  }, [isOpenUploadFile, isShowBackgroundList, backgroundUrl, color]);\n  useEffect(function () {\n    if (isUpdate && typeof itemUpdate === 'object' && itemUpdate !== null) {\n      var Content = itemUpdate.Content,\n          TypeFile = itemUpdate.TypeFile,\n          Color = itemUpdate.Color,\n          NewsFeedFile = itemUpdate.NewsFeedFile,\n          GroupNewsFeedID = itemUpdate.GroupNewsFeedID,\n          NewsFeedBranch = itemUpdate.NewsFeedBranch;\n      var newValues = {\n        ID: itemUpdate.ID,\n        Content: Content,\n        TypeFile: TypeFile,\n        Color: Color\n      }; // COLOR\n\n      if (Color) {\n        setColor(Color);\n      } // BACKGROUND\n\n\n      if (TypeFile === 1) {\n        var NameFile = NewsFeedFile[0].NameFile;\n        newValues.NewsFeedFile = [_objectSpread(_objectSpread({}, NewsFeedFile[0]), {}, {\n          url: NameFile\n        })];\n        onToggleBackgroundList();\n        setBackgroundUrl(NameFile);\n      } // FILE LIST\n\n\n      if (TypeFile === 2 && Array.isArray(NewsFeedFile) && NewsFeedFile.length) {\n        var typeName = {\n          2: 'image/*',\n          3: 'audio/*',\n          4: 'video/*'\n        };\n        newValues.NewsFeedFile = NewsFeedFile.map(function (f) {\n          return _objectSpread(_objectSpread({}, f), {}, {\n            uid: f.UID,\n            url: f.NameFile,\n            name: f.NameFile ? f.NameFile.slice(f.NameFile.lastIndexOf('/')) : '',\n            type: typeName[f.Type]\n          });\n        });\n        toggleUploadFile();\n      } // BRACH\n\n\n      if (Array.isArray(NewsFeedBranch) && NewsFeedBranch.length) {\n        newValues.BranchList = NewsFeedBranch.map(function (b) {\n          return b.BranchID;\n        });\n        setChooseAreaFunc('team');\n      } // GROUP\n\n\n      if (GroupNewsFeedID) {\n        newValues.GroupNewsFeedID = GroupNewsFeedID;\n        setChooseAreaFunc('group');\n      }\n\n      form.reset(newValues);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [isUpdate ? /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn\",\n      onClick: showModal,\n      children: [/*#__PURE__*/_jsxDEV(Edit2, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 6\n      }, this), \"Ch\\u1EC9nh s\\u1EEDa b\\xE0i vi\\u1EBFt\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 5\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"create-newsfeed\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"top-nf\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"avatar\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: (dataUser === null || dataUser === void 0 ? void 0 : dataUser.Avatar) || '/images/user.png',\n            alt: \"avatar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"box-newsfeed\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-thinking\",\n            onClick: showModal,\n            children: \"B\\u1EA1n \\u0111ang ngh\\u0129 g\\xEC ?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bottom-nf\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"item-func\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-light\",\n            onClick: onToggleUploadImage,\n            children: [/*#__PURE__*/_jsxDEV(Image, {\n              color: \"#10ca93\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u1EA2nh/Video\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"item-func\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-light\",\n            onClick: showModal,\n            children: [/*#__PURE__*/_jsxDEV(Send, {\n              color: \"#00afef\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u0110\\u0103ng b\\xE0i\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      style: {\n        top: 50\n      },\n      title: \"T\\u1EA1o b\\xE0i vi\\u1EBFt\",\n      visible: isVisibleModal,\n      footer: null,\n      onCancel: closeModal,\n      className: \"modal-create-nf\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrap-create-nf\",\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          layout: \"vertical\",\n          onFinish: form.handleSubmit(checkHandleSubmit),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"info-current-user\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"avatar\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: (dataUser === null || dataUser === void 0 ? void 0 : dataUser.Avatar) || '/images/user.png',\n                    alt: \"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 420,\n                    columnNumber: 11\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 419,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"name-user\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"name\",\n                    children: dataUser === null || dataUser === void 0 ? void 0 : dataUser.FullNameUnicode\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 423,\n                    columnNumber: 11\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 422,\n                  columnNumber: 10\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 418,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 newsfeed-control \".concat(isShowBackgroundList ? 'have-bg' : ''),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"\".concat(isShowBackgroundList ? 'bg' : ''),\n                style: {\n                  backgroundImage: \"\".concat(isShowBackgroundList ? 'url(' + backgroundUrl + ')' : '')\n                },\n                children: /*#__PURE__*/_jsxDEV(TextAreaField, {\n                  style: {\n                    color: color\n                  },\n                  form: form,\n                  name: \"Content\",\n                  className: \"text-area-nf\",\n                  placeholder: \"B\\u1EA1n \\u0111ang ngh\\u0129 g\\xEC ?\" // rows={4}\n                  // autoSize={true}\n                  ,\n                  allowClear: false,\n                  maxLength: isShowBackgroundList ? 190 : null\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 434,\n                  columnNumber: 10\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 428,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"select-color-nf\",\n                children: /*#__PURE__*/_jsxDEV(Popover, {\n                  overlayClassName: \"select-color-nf-popover\" // trigger=\"focus\"\n                  ,\n                  content: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"list-color-nf\",\n                    children: /*#__PURE__*/_jsxDEV(SketchPicker, {\n                      colors: colorList,\n                      color: color,\n                      triangle: \"hide\",\n                      onChange: onChangeColor\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 452,\n                      columnNumber: 13\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 451,\n                    columnNumber: 12\n                  }, this),\n                  placement: \"bottomRight\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"btn-color-nf\",\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: \"/images/icon-text-newsfeed.png\",\n                      alt: \"icon\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 458,\n                      columnNumber: 12\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 457,\n                    columnNumber: 11\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 447,\n                  columnNumber: 10\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 446,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"select-background-nf\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"btn-bg-nf \".concat(isShowBackgroundList ? 'active' : '', \" \").concat(isUpdate ? 'disable' : ''),\n                  onClick: onToggleBackgroundList,\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: \"/images/icon-background-newsfeed.png\",\n                    alt: \"icon\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 469,\n                    columnNumber: 11\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 465,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: isShowBackgroundList ? 'list-bg-nf' : 'hide',\n                  children: backgroundList.length ? backgroundList.map(function (bg, index) {\n                    return /*#__PURE__*/_jsxDEV(\"li\", {\n                      style: {\n                        backgroundImage: \"url(\".concat(bg.FileName, \")\")\n                      },\n                      onClick: function onClick(e) {\n                        return setBackgroundUrl(bg.FileName);\n                      },\n                      className: \"item-bg-nf \".concat(backgroundUrl === bg.FileName ? 'active' : '')\n                    }, index, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 474,\n                      columnNumber: 13\n                    }, _this);\n                  }) : /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"loading-bg-nf\",\n                    children: [/*#__PURE__*/_jsxDEV(Skeleton.Avatar, {\n                      active: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 483,\n                      columnNumber: 13\n                    }, this), /*#__PURE__*/_jsxDEV(Skeleton.Avatar, {\n                      active: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 484,\n                      columnNumber: 13\n                    }, this), /*#__PURE__*/_jsxDEV(Skeleton.Avatar, {\n                      active: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 485,\n                      columnNumber: 13\n                    }, this), /*#__PURE__*/_jsxDEV(Skeleton.Avatar, {\n                      active: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 486,\n                      columnNumber: 13\n                    }, this), /*#__PURE__*/_jsxDEV(Skeleton.Avatar, {\n                      active: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 487,\n                      columnNumber: 13\n                    }, this), /*#__PURE__*/_jsxDEV(Skeleton.Avatar, {\n                      active: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 488,\n                      columnNumber: 13\n                    }, this), /*#__PURE__*/_jsxDEV(Skeleton.Avatar, {\n                      active: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 489,\n                      columnNumber: 13\n                    }, this), /*#__PURE__*/_jsxDEV(Skeleton.Avatar, {\n                      active: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 490,\n                      columnNumber: 13\n                    }, this), /*#__PURE__*/_jsxDEV(Skeleton.Avatar, {\n                      active: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 491,\n                      columnNumber: 13\n                    }, this), /*#__PURE__*/_jsxDEV(Skeleton.Avatar, {\n                      active: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 492,\n                      columnNumber: 13\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 482,\n                    columnNumber: 12\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 471,\n                  columnNumber: 10\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 464,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 8\n            }, this), isOpenUploadFile && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: /*#__PURE__*/_jsxDEV(UploadFileField, {\n                form: form,\n                name: \"NewsFeedFile\",\n                max: 5,\n                handleUploadFile: checkHandleUploadFile\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 501,\n                columnNumber: 10\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"option-for-nf\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"option-for-nf--header\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: \"Th\\xEAm v\\xE0o b\\xE0i vi\\u1EBFt\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 508,\n                      columnNumber: 12\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 507,\n                    columnNumber: 11\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"list-option\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"item-option\",\n                      children: /*#__PURE__*/_jsxDEV(Tooltip, {\n                        title: \"Th\\xEAm \\u1EA2nh/Video\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"btn \".concat(isOpenUploadFile ? 'active' : '', \" \").concat(isUpdate ? 'disable' : ''),\n                          onClick: toggleUploadFile,\n                          children: /*#__PURE__*/_jsxDEV(FileImageFilled, {\n                            style: {\n                              color: '#10ca93'\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 517,\n                            columnNumber: 15\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 513,\n                          columnNumber: 14\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 512,\n                        columnNumber: 13\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 511,\n                      columnNumber: 12\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"item-option\",\n                      children: /*#__PURE__*/_jsxDEV(Tooltip, {\n                        title: \"Chia s\\u1EBB v\\xE0o trung t\\xE2m\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          // FILTER NEWS FEED => DISABLE BUTTON IF DO NOT HAVE ID TEAM\n                          className: \"btn \".concat(activeChooseBtn('team', chooseArea), \" \").concat(!idTeam && !idGroup ? '' : idGroup ? 'disable' : ''),\n                          onClick: function onClick() {\n                            return setChooseAreaFunc('team');\n                          },\n                          children: /*#__PURE__*/_jsxDEV(GroupOutlined, {\n                            style: {\n                              color: '#ffc107'\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 528,\n                            columnNumber: 15\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 523,\n                          columnNumber: 14\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 522,\n                        columnNumber: 13\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 521,\n                      columnNumber: 12\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 510,\n                    columnNumber: 11\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 506,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"option-for-nf--body\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"choose-branch\",\n                    children: chooseArea === 'team' ? /*#__PURE__*/_jsxDEV(SelectField, {\n                      form: form,\n                      name: \"BranchList\",\n                      mode: \"multiple\",\n                      placeholder: \"Ch\\u1ECDn trung t\\xE2m\",\n                      optionList: idTeam ? teamOptionList.filter(function (t) {\n                        return t.value === idTeam;\n                      }) : teamOptionList\n                    }, \"BranchList\", false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 537,\n                      columnNumber: 13\n                    }, this) : /*#__PURE__*/_jsxDEV(SelectField, {\n                      form: form,\n                      name: \"GroupNewsFeedID\",\n                      placeholder: \"Ch\\u1ECDn nh\\xF3m\",\n                      disabled: isUpdate ? true : false,\n                      optionList: idGroup ? groupOptionList.filter(function (t) {\n                        return t.value === idGroup;\n                      }) : groupOptionList\n                    }, \"GroupNewsFeedID\", false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 546,\n                      columnNumber: 13\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 535,\n                    columnNumber: 11\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 534,\n                  columnNumber: 10\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 505,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 504,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row \",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-primary w-100\",\n                disabled: isLoading.type === 'ADD_DATA' && isLoading.status,\n                children: [isUpdate ? 'Cập nhật' : 'Đăng', isLoading.type === 'ADD_DATA' && isLoading.status && /*#__PURE__*/_jsxDEV(Spin, {\n                  className: \"loading-base\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 565,\n                  columnNumber: 64\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 563,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 562,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 561,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n}\n\n_s(CreateNewsFeed, \"uVv+1HClR0SFJyDcXaT8IuWB3TU=\", false, function () {\n  return [useForm];\n});\n\n_c = CreateNewsFeed;\nexport default CreateNewsFeed;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateNewsFeed\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/NewsFeed/CreateNewsFeed.tsx"],"names":["FileImageFilled","GroupOutlined","yupResolver","Form","Modal","Popover","Skeleton","Spin","Tooltip","PropTypes","React","useEffect","useState","SketchPicker","Edit2","Image","Send","useForm","yup","SelectField","TextAreaField","UploadFileField","optionCommonPropTypes","CreateNewsFeed","propTypes","isLoading","shape","type","string","isRequired","status","bool","isUpdate","dataUser","object","handleUploadFile","func","handleSubmit","fetchBackgroundNewsFeed","backgroundList","arrayOf","ID","number","FileName","optionList","teamOptionList","groupOptionList","itemUpdate","UserInformationID","FullNameUnicode","Color","Avatar","RoleID","RoleName","GroupNewsFeedID","GroupNewsFeedName","Content","TypeFile","isComment","CommentCount","isLike","LikeCount","NewsFeedFile","NameFile","Type","TypeName","UID","Thumnail","NewsFeedBranch","BranchID","BranchName","filtersData","name","idTeam","idGroup","defaultProps","colorList","props","isVisibleModal","setIsVisibleModal","isOpenUploadFile","setIsOpenUploadFile","chooseArea","setChooseArea","isShowBackgroundList","setIsShowBackgroundList","backgroundUrl","setBackgroundUrl","color","setColor","defaultValuesInit","BranchList","undefined","schemaBase","nullable","array","checkSchema","min","required","concat","form","defaultValues","resolver","showModal","closeModal","checkFetchBackgroundNewsFeed","onToggleUploadImage","onToggleBackgroundList","setValue","toggleUploadFile","checkHandleUploadFile","arrFile","setChooseAreaFunc","branch","value","activeChooseBtn","chooseBranch","onChangeColor","hex","onToggleSelectBranch","resetOption","reset","getValues","checkHandleSubmit","data","then","res","newValues","slice","url","Math","floor","random","Array","isArray","length","typeName","map","f","uid","lastIndexOf","b","top","backgroundImage","bg","index","e","filter","t"],"mappings":"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","sourcesContent":["import { FileImageFilled, GroupOutlined, TeamOutlined } from '@ant-design/icons'\r\nimport { yupResolver } from '@hookform/resolvers/yup'\r\nimport { Form, Modal, Popover, Skeleton, Spin, Tooltip } from 'antd'\r\nimport PropTypes from 'prop-types'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { SketchPicker } from 'react-color'\r\nimport { Edit2, Image, Send, Users } from 'react-feather'\r\nimport { useForm } from 'react-hook-form'\r\nimport * as yup from 'yup'\r\nimport SelectField from '~/components/FormControl/SelectField'\r\nimport TextAreaField from '~/components/FormControl/TextAreaField'\r\nimport UploadFileField from '~/components/FormControl/UploadFileField'\r\nimport { optionCommonPropTypes } from '~/utils/proptypes'\r\n\r\nCreateNewsFeed.propTypes = {\r\n\tisLoading: PropTypes.shape({\r\n\t\ttype: PropTypes.string.isRequired,\r\n\t\tstatus: PropTypes.bool.isRequired\r\n\t}),\r\n\tisUpdate: PropTypes.bool,\r\n\tdataUser: PropTypes.object,\r\n\thandleUploadFile: PropTypes.func,\r\n\thandleSubmit: PropTypes.func,\r\n\tfetchBackgroundNewsFeed: PropTypes.func,\r\n\tbackgroundList: PropTypes.arrayOf(\r\n\t\tPropTypes.shape({\r\n\t\t\tID: PropTypes.number,\r\n\t\t\tFileName: PropTypes.string\r\n\t\t})\r\n\t),\r\n\toptionList: PropTypes.shape({\r\n\t\tteamOptionList: optionCommonPropTypes,\r\n\t\tgroupOptionList: optionCommonPropTypes\r\n\t}),\r\n\titemUpdate: PropTypes.shape({\r\n\t\tID: PropTypes.number,\r\n\t\tUserInformationID: PropTypes.number,\r\n\t\tFullNameUnicode: PropTypes.string,\r\n\t\tColor: PropTypes.string,\r\n\t\tAvatar: PropTypes.string,\r\n\t\tRoleID: PropTypes.number,\r\n\t\tRoleName: PropTypes.string,\r\n\t\tGroupNewsFeedID: PropTypes.number,\r\n\t\tGroupNewsFeedName: PropTypes.string,\r\n\t\tContent: PropTypes.string,\r\n\t\tTypeFile: PropTypes.number,\r\n\t\tisComment: PropTypes.bool,\r\n\t\tCommentCount: PropTypes.number,\r\n\t\tisLike: PropTypes.bool,\r\n\t\tLikeCount: PropTypes.number,\r\n\t\tNewsFeedFile: PropTypes.arrayOf(\r\n\t\t\tPropTypes.shape({\r\n\t\t\t\tID: PropTypes.number,\r\n\t\t\t\tNameFile: PropTypes.string,\r\n\t\t\t\tType: PropTypes.number,\r\n\t\t\t\tTypeName: PropTypes.string,\r\n\t\t\t\tUID: PropTypes.string,\r\n\t\t\t\tThumnail: PropTypes.string\r\n\t\t\t})\r\n\t\t),\r\n\t\tNewsFeedBranch: PropTypes.arrayOf(\r\n\t\t\tPropTypes.shape({\r\n\t\t\t\tID: PropTypes.number,\r\n\t\t\t\tBranchID: PropTypes.number,\r\n\t\t\t\tBranchName: PropTypes.string\r\n\t\t\t})\r\n\t\t)\r\n\t}),\r\n\tfiltersData: PropTypes.shape({\r\n\t\tname: PropTypes.string,\r\n\t\tidTeam: PropTypes.number,\r\n\t\tidGroup: PropTypes.number\r\n\t})\r\n}\r\nCreateNewsFeed.defaultProps = {\r\n\tisLoading: { type: '', status: false },\r\n\tisUpdate: false,\r\n\tdataUser: {},\r\n\thandleUploadFile: null,\r\n\thandleSubmit: null,\r\n\tfetchBackgroundNewsFeed: null,\r\n\tbackgroundList: [],\r\n\toptionList: {\r\n\t\tteamOptionList: [],\r\n\t\tgroupOptionList: []\r\n\t},\r\n\titemUpdate: {\r\n\t\tID: 0,\r\n\t\tUserInformationID: 0,\r\n\t\tFullNameUnicode: '',\r\n\t\tColor: '#000',\r\n\t\tAvatar: '',\r\n\t\tRoleID: 0,\r\n\t\tRoleName: '',\r\n\t\tGroupNewsFeedID: 0,\r\n\t\tGroupNewsFeedName: '',\r\n\t\tContent: '',\r\n\t\tTypeFile: 0,\r\n\t\tisComment: false,\r\n\t\tCommentCount: 0,\r\n\t\tisLike: false,\r\n\t\tLikeCount: 0,\r\n\t\tNewsFeedFile: [],\r\n\t\tNewsFeedBranch: []\r\n\t},\r\n\tfiltersData: {\r\n\t\tname: '',\r\n\t\tidTeam: 0,\r\n\t\tidGroup: 0\r\n\t}\r\n}\r\n\r\nconst colorList = [\r\n\t'#D0021B',\r\n\t'#F5A623',\r\n\t'#F8E71C',\r\n\t'#8B572A',\r\n\t'#7ED321',\r\n\t'#417505',\r\n\t'#BD10E0',\r\n\t'#9013FE',\r\n\t'#4A90E2',\r\n\t'#50E3C2',\r\n\t'#B8E986',\r\n\t'#4A4A4A',\r\n\t'#9B9B9B',\r\n\t'#000',\r\n\t'#FFF'\r\n]\r\nfunction CreateNewsFeed(props) {\r\n\tconst [isVisibleModal, setIsVisibleModal] = useState(false)\r\n\tconst [isOpenUploadFile, setIsOpenUploadFile] = useState(false)\r\n\tconst [chooseArea, setChooseArea] = useState('team')\r\n\tconst [isShowBackgroundList, setIsShowBackgroundList] = useState(false)\r\n\tconst [backgroundUrl, setBackgroundUrl] = useState('')\r\n\tconst [color, setColor] = useState('#000')\r\n\tconst {\r\n\t\tisLoading,\r\n\t\tisUpdate,\r\n\t\titemUpdate,\r\n\t\tdataUser,\r\n\t\thandleUploadFile,\r\n\t\thandleSubmit,\r\n\t\tbackgroundList,\r\n\t\tfetchBackgroundNewsFeed,\r\n\t\toptionList,\r\n\t\tfiltersData\r\n\t} = props\r\n\tconst { teamOptionList, groupOptionList } = optionList\r\n\tconst { name, idTeam, idGroup } = filtersData\r\n\r\n\tconst defaultValuesInit = {\r\n\t\tContent: '',\r\n\t\tColor: '',\r\n\t\tTypeFile: 0,\r\n\t\tNewsFeedFile: null,\r\n\t\tBranchList: undefined, //TEAM\r\n\t\tGroupNewsFeedID: null //GROUP\r\n\t}\r\n\r\n\tconst schemaBase = yup.object().shape({\r\n\t\tContent: yup.string().nullable(),\r\n\t\tColor: yup.string().nullable(),\r\n\t\tTypeFile: yup.number().nullable(),\r\n\t\tNewsFeedFile: yup.array().nullable()\r\n\t})\r\n\tconst checkSchema = () => {\r\n\t\tif (chooseArea === 'team') {\r\n\t\t\treturn yup\r\n\t\t\t\t.object()\r\n\t\t\t\t.shape({\r\n\t\t\t\t\tBranchList: yup.array().min(1, 'Bạn phải chọn ít nhất 1 trung tâm').nullable().required('Bạn không được để trống')\r\n\t\t\t\t})\r\n\t\t\t\t.concat(schemaBase)\r\n\t\t}\r\n\t\tif (chooseArea === 'group') {\r\n\t\t\treturn yup\r\n\t\t\t\t.object()\r\n\t\t\t\t.shape({\r\n\t\t\t\t\tGroupNewsFeedID: yup.number().nullable().min(1, 'Bạn phải chọn ít nhất 1 nhóm').required('Bạn không được để trống')\r\n\t\t\t\t})\r\n\t\t\t\t.concat(schemaBase)\r\n\t\t}\r\n\t}\r\n\r\n\tconst form = useForm({\r\n\t\tdefaultValues: defaultValuesInit,\r\n\t\tresolver: yupResolver(checkSchema())\r\n\t})\r\n\r\n\tconst showModal = () => {\r\n\t\tsetIsVisibleModal(true)\r\n\t}\r\n\tconst closeModal = () => {\r\n\t\tsetIsVisibleModal(false)\r\n\t}\r\n\r\n\tconst checkFetchBackgroundNewsFeed = () => {\r\n\t\tif (!fetchBackgroundNewsFeed) return\r\n\t\tfetchBackgroundNewsFeed()\r\n\t}\r\n\tconst onToggleUploadImage = () => {\r\n\t\tshowModal()\r\n\t\tsetIsOpenUploadFile(true)\r\n\t}\r\n\tconst onToggleBackgroundList = () => {\r\n\t\tif (!isShowBackgroundList) {\r\n\t\t\tcheckFetchBackgroundNewsFeed()\r\n\t\t} else {\r\n\t\t\tform.setValue('TypeFile', 0)\r\n\t\t\tform.setValue('NewsFeedFile', null)\r\n\t\t}\r\n\t\tsetIsShowBackgroundList(!isShowBackgroundList)\r\n\t\tsetIsOpenUploadFile(false)\r\n\t}\r\n\r\n\t// UPLOAD WITH BACKGROUND DO NOT ACCEPT FILE\r\n\tconst toggleUploadFile = () => {\r\n\t\tsetIsOpenUploadFile(!isOpenUploadFile)\r\n\t\tsetIsShowBackgroundList(false)\r\n\t}\r\n\tconst checkHandleUploadFile = (arrFile) => {\r\n\t\tif (!handleUploadFile) return\r\n\t\treturn handleUploadFile(arrFile)\r\n\t}\r\n\r\n\tconst setChooseAreaFunc = (branch: string, value?: any) => {\r\n\t\tif (branch === 'group') {\r\n\t\t\tform.setValue('BranchList', undefined)\r\n\t\t}\r\n\t\tif (branch === 'team') {\r\n\t\t\tform.setValue('GroupNewsFeedID', null)\r\n\t\t}\r\n\t\tsetChooseArea(branch)\r\n\t}\r\n\tconst activeChooseBtn = (branch: string, chooseBranch: string) => {\r\n\t\tif (isUpdate && chooseBranch !== branch) return 'disable'\r\n\t\tif (chooseBranch === branch) return 'active'\r\n\t}\r\n\tconst onChangeColor = (color) => {\r\n\t\tsetColor(color.hex)\r\n\t}\r\n\tconst onToggleSelectBranch = () => {\r\n\t\tshowModal()\r\n\t\tsetChooseAreaFunc('group')\r\n\t}\r\n\tconst resetOption = () => {\r\n\t\tcloseModal()\r\n\t\tsetIsOpenUploadFile(false)\r\n\t\tsetIsShowBackgroundList(false)\r\n\t\t// NEED TO STONE INFO IN TEAM OR GROUP\r\n\t\tif (idTeam || idGroup) {\r\n\t\t\tform.reset({\r\n\t\t\t\t...defaultValuesInit,\r\n\t\t\t\tBranchList: form.getValues('BranchList'),\r\n\t\t\t\tGroupNewsFeedID: form.getValues('GroupNewsFeedID')\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tform.reset({ ...defaultValuesInit })\r\n\t\t\tsetChooseAreaFunc('team')\r\n\t\t}\r\n\t}\r\n\tconst checkHandleSubmit = (data) => {\r\n\t\tif (!handleSubmit) return\r\n\t\tif (isUpdate) {\r\n\t\t\thandleSubmit(data).then((res) => {\r\n\t\t\t\tif (res?.status === 200) {\r\n\t\t\t\t\tcloseModal()\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\t\thandleSubmit(data).then((res) => {\r\n\t\t\tif (res?.status === 200) {\r\n\t\t\t\tresetOption()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tconst newValues: any = {\r\n\t\t\tBranchList: undefined, //TEAM\r\n\t\t\tGroupNewsFeedID: null //GROUP\r\n\t\t}\r\n\t\t// CREATE NEWS FEED IN TEAM OR GROUP DO NOT TO SELECT AGAIN\r\n\t\tif (idTeam) {\r\n\t\t\tnewValues.BranchList = [idTeam]\r\n\t\t\tnewValues.GroupNewsFeedID = null\r\n\t\t\tsetChooseAreaFunc('team')\r\n\t\t}\r\n\t\tif (idGroup) {\r\n\t\t\tnewValues.GroupNewsFeedID = idGroup\r\n\t\t\tnewValues.BranchList = undefined\r\n\t\t\tsetChooseAreaFunc('group')\r\n\t\t}\r\n\t\tform.reset(newValues)\r\n\t}, [filtersData])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isShowBackgroundList) {\r\n\t\t\tform.setValue('Content', form.getValues('Content')?.slice(0, 191))\r\n\t\t\tif (backgroundUrl) {\r\n\t\t\t\tform.setValue('TypeFile', 1)\r\n\t\t\t\tform.setValue('NewsFeedFile', [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\turl: backgroundUrl,\r\n\t\t\t\t\t\tNameFile: backgroundUrl,\r\n\t\t\t\t\t\tUID: Math.floor(Math.random() * 130698)\r\n\t\t\t\t\t}\r\n\t\t\t\t])\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (isOpenUploadFile) {\r\n\t\t\tform.setValue('TypeFile', 2)\r\n\t\t}\r\n\t\tif (color) {\r\n\t\t\tform.setValue('Color', color)\r\n\t\t}\r\n\t}, [isOpenUploadFile, isShowBackgroundList, backgroundUrl, color])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isUpdate && typeof itemUpdate === 'object' && itemUpdate !== null) {\r\n\t\t\tconst { Content, TypeFile, Color, NewsFeedFile, GroupNewsFeedID, NewsFeedBranch } = itemUpdate\r\n\t\t\tconst newValues: any = {\r\n\t\t\t\tID: itemUpdate.ID,\r\n\t\t\t\tContent,\r\n\t\t\t\tTypeFile,\r\n\t\t\t\tColor\r\n\t\t\t}\r\n\t\t\t// COLOR\r\n\t\t\tif (Color) {\r\n\t\t\t\tsetColor(Color)\r\n\t\t\t}\r\n\t\t\t// BACKGROUND\r\n\t\t\tif (TypeFile === 1) {\r\n\t\t\t\tconst { NameFile } = NewsFeedFile[0]\r\n\t\t\t\tnewValues.NewsFeedFile = [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t...NewsFeedFile[0],\r\n\t\t\t\t\t\turl: NameFile\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t\tonToggleBackgroundList()\r\n\t\t\t\tsetBackgroundUrl(NameFile)\r\n\t\t\t}\r\n\t\t\t// FILE LIST\r\n\t\t\tif (TypeFile === 2 && Array.isArray(NewsFeedFile) && NewsFeedFile.length) {\r\n\t\t\t\tconst typeName = { 2: 'image/*', 3: 'audio/*', 4: 'video/*' }\r\n\t\t\t\tnewValues.NewsFeedFile = NewsFeedFile.map((f) => ({\r\n\t\t\t\t\t...f,\r\n\t\t\t\t\tuid: f.UID,\r\n\t\t\t\t\turl: f.NameFile,\r\n\t\t\t\t\tname: f.NameFile ? f.NameFile.slice(f.NameFile.lastIndexOf('/')) : '',\r\n\t\t\t\t\ttype: typeName[f.Type]\r\n\t\t\t\t}))\r\n\t\t\t\ttoggleUploadFile()\r\n\t\t\t}\r\n\t\t\t// BRACH\r\n\t\t\tif (Array.isArray(NewsFeedBranch) && NewsFeedBranch.length) {\r\n\t\t\t\tnewValues.BranchList = NewsFeedBranch.map((b) => b.BranchID)\r\n\t\t\t\tsetChooseAreaFunc('team')\r\n\t\t\t}\r\n\t\t\t// GROUP\r\n\t\t\tif (GroupNewsFeedID) {\r\n\t\t\t\tnewValues.GroupNewsFeedID = GroupNewsFeedID\r\n\t\t\t\tsetChooseAreaFunc('group')\r\n\t\t\t}\r\n\t\t\tform.reset(newValues)\r\n\t\t}\r\n\t}, [])\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{isUpdate ? (\r\n\t\t\t\t<button className=\"btn\" onClick={showModal}>\r\n\t\t\t\t\t<Edit2 />\r\n\t\t\t\t\tChỉnh sửa bài viết\r\n\t\t\t\t</button>\r\n\t\t\t) : (\r\n\t\t\t\t<div className=\"create-newsfeed\">\r\n\t\t\t\t\t<div className=\"top-nf\">\r\n\t\t\t\t\t\t<div className=\"avatar\">\r\n\t\t\t\t\t\t\t<img src={dataUser?.Avatar || '/images/user.png'} alt=\"avatar\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"box-newsfeed\">\r\n\t\t\t\t\t\t\t<button className=\"btn-thinking\" onClick={showModal}>\r\n\t\t\t\t\t\t\t\tBạn đang nghĩ gì ?\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"bottom-nf\">\r\n\t\t\t\t\t\t<div className=\"item-func\">\r\n\t\t\t\t\t\t\t<button className=\"btn btn-light\" onClick={onToggleUploadImage}>\r\n\t\t\t\t\t\t\t\t<Image color=\"#10ca93\" />\r\n\t\t\t\t\t\t\t\t<span>Ảnh/Video</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"item-func\">\r\n\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-light\" onClick={showModal}>\r\n\t\t\t\t\t\t\t\t<Send color=\"#00afef\" />\r\n\t\t\t\t\t\t\t\t<span>Đăng bài</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t<Modal\r\n\t\t\t\tstyle={{ top: 50 }}\r\n\t\t\t\ttitle=\"Tạo bài viết\"\r\n\t\t\t\tvisible={isVisibleModal}\r\n\t\t\t\tfooter={null}\r\n\t\t\t\tonCancel={closeModal}\r\n\t\t\t\tclassName=\"modal-create-nf\"\r\n\t\t\t>\r\n\t\t\t\t<div className=\"wrap-create-nf\">\r\n\t\t\t\t\t<Form layout=\"vertical\" onFinish={form.handleSubmit(checkHandleSubmit)}>\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t\t\t<div className=\"info-current-user\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"avatar\">\r\n\t\t\t\t\t\t\t\t\t\t<img src={dataUser?.Avatar || '/images/user.png'} alt=\"\" />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"name-user\">\r\n\t\t\t\t\t\t\t\t\t\t<p className=\"name\">{dataUser?.FullNameUnicode}</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className={`col-12 newsfeed-control ${isShowBackgroundList ? 'have-bg' : ''}`}>\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tclassName={`${isShowBackgroundList ? 'bg' : ''}`}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tbackgroundImage: `${isShowBackgroundList ? 'url(' + backgroundUrl + ')' : ''}`\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<TextAreaField\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ color: color }}\r\n\t\t\t\t\t\t\t\t\t\tform={form}\r\n\t\t\t\t\t\t\t\t\t\tname=\"Content\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-area-nf\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Bạn đang nghĩ gì ?\"\r\n\t\t\t\t\t\t\t\t\t\t// rows={4}\r\n\t\t\t\t\t\t\t\t\t\t// autoSize={true}\r\n\t\t\t\t\t\t\t\t\t\tallowClear={false}\r\n\t\t\t\t\t\t\t\t\t\tmaxLength={isShowBackgroundList ? 190 : null}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"select-color-nf\">\r\n\t\t\t\t\t\t\t\t\t<Popover\r\n\t\t\t\t\t\t\t\t\t\toverlayClassName=\"select-color-nf-popover\"\r\n\t\t\t\t\t\t\t\t\t\t// trigger=\"focus\"\r\n\t\t\t\t\t\t\t\t\t\tcontent={\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"list-color-nf\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<SketchPicker colors={colorList} color={color} triangle=\"hide\" onChange={onChangeColor} />\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tplacement=\"bottomRight\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"btn-color-nf\">\r\n\t\t\t\t\t\t\t\t\t\t\t<img src=\"/images/icon-text-newsfeed.png\" alt=\"icon\" />\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t\t\t<div className=\"select-background-nf\">\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tclassName={`btn-bg-nf ${isShowBackgroundList ? 'active' : ''} ${isUpdate ? 'disable' : ''}`}\r\n\t\t\t\t\t\t\t\t\t\tonClick={onToggleBackgroundList}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<img src=\"/images/icon-background-newsfeed.png\" alt=\"icon\" />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<ul className={isShowBackgroundList ? 'list-bg-nf' : 'hide'}>\r\n\t\t\t\t\t\t\t\t\t\t{backgroundList.length ? (\r\n\t\t\t\t\t\t\t\t\t\t\tbackgroundList.map((bg, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ backgroundImage: `url(${bg.FileName})` }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => setBackgroundUrl(bg.FileName)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`item-bg-nf ${backgroundUrl === bg.FileName ? 'active' : ''}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"loading-bg-nf\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton.Avatar active />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton.Avatar active />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton.Avatar active />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton.Avatar active />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton.Avatar active />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton.Avatar active />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton.Avatar active />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton.Avatar active />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton.Avatar active />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton.Avatar active />\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t{isOpenUploadFile && (\r\n\t\t\t\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t\t\t\t<UploadFileField form={form} name=\"NewsFeedFile\" max={5} handleUploadFile={checkHandleUploadFile} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t\t\t<div className=\"option-for-nf\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"option-for-nf--header\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"text\">\r\n\t\t\t\t\t\t\t\t\t\t\t<p>Thêm vào bài viết</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"list-option\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"item-option\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip title=\"Thêm Ảnh/Video\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`btn ${isOpenUploadFile ? 'active' : ''} ${isUpdate ? 'disable' : ''}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={toggleUploadFile}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FileImageFilled style={{ color: '#10ca93' }} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"item-option\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip title=\"Chia sẻ vào trung tâm\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// FILTER NEWS FEED => DISABLE BUTTON IF DO NOT HAVE ID TEAM\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`btn ${activeChooseBtn('team', chooseArea)} ${!idTeam && !idGroup ? '' : idGroup ? 'disable' : ''}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setChooseAreaFunc('team')}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<GroupOutlined style={{ color: '#ffc107' }} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"option-for-nf--body\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"choose-branch\">\r\n\t\t\t\t\t\t\t\t\t\t\t{chooseArea === 'team' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<SelectField\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey=\"BranchList\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tform={form}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"BranchList\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmode=\"multiple\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Chọn trung tâm\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\toptionList={idTeam ? teamOptionList.filter((t) => t.value === idTeam) : teamOptionList}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<SelectField\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey=\"GroupNewsFeedID\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tform={form}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"GroupNewsFeedID\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Chọn nhóm\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isUpdate ? true : false}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\toptionList={idGroup ? groupOptionList.filter((t) => t.value === idGroup) : groupOptionList}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"row \">\r\n\t\t\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary w-100\" disabled={isLoading.type === 'ADD_DATA' && isLoading.status}>\r\n\t\t\t\t\t\t\t\t\t{isUpdate ? 'Cập nhật' : 'Đăng'}\r\n\t\t\t\t\t\t\t\t\t{isLoading.type === 'ADD_DATA' && isLoading.status && <Spin className=\"loading-base\" />}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default CreateNewsFeed\r\n"]},"metadata":{},"sourceType":"module"}