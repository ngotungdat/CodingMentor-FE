{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\FeedBack\\\\Main\\\\MainFeedback.tsx\";\nimport { Avatar, Card, Empty, Rate, Tooltip } from 'antd';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { useWrap } from '~/context/wrap';\nimport { FeedbackApi } from '~/apiBase';\nimport ReactHtmlParser from 'react-html-parser';\nimport EditorSimple from '~/components/Elements/EditorSimple';\nimport { FeedbackReplyApi } from '~/apiBase/feed-back/feedback-reply';\nMainFeedback.propTypes = {\n  allDataLength: PropTypes.object,\n  feedbackMenu: PropTypes.array,\n  feedbackList: PropTypes.array,\n  currentItem: PropTypes.string,\n  handleClickItem: PropTypes.func,\n  handleClickMenu: PropTypes.func,\n  handleCreateNew: PropTypes.func,\n  current: PropTypes.object\n};\nMainFeedback.defaultProps = {\n  allDataLength: {},\n  feedbackMenu: [],\n  feedbackList: [],\n  currentItem: '',\n  handleClickItem: null,\n  handleClickMenu: null,\n  handleCreateNew: null,\n  current: {}\n};\nexport const ButtonImportant = ({\n  status\n}) => {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: !status ? /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"\",\n      children: [\"\\u0110\\xE1nh d\\u1EA5u \\u01B0u ti\\xEAn\", /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"ml-2 far m-0 fa-star st-fb-star-important\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 5\n    }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n      className: \"fas m-0 fa-star st-fb-star-important\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n};\n\nfunction MainFeedback(props) {\n  const {\n    current,\n    currentItem\n  } = props;\n  const {\n    showNoti,\n    userInformation\n  } = useWrap();\n  const {\n    0: currentInfomation,\n    1: setCurrentInfomation\n  } = useState({\n    CreatedBy: '',\n    Rate: 0,\n    Title: '',\n    ContentFeedBack: ''\n  });\n  const {\n    0: isImportant,\n    1: setImportant\n  } = useState(false);\n  const {\n    0: reply,\n    1: setReply\n  } = useState([]);\n  const {\n    0: isReset,\n    1: setReset\n  } = useState(false);\n  const {\n    0: content,\n    1: setContent\n  } = useState('');\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  useEffect(() => {\n    getCurrentInfo(current.ID);\n    getReply(current.ID);\n    setImportant(current.isPrioritized !== null ? current.isPrioritized : false);\n  }, [current]); // CONVERT DATE TO  DD-MM-YYYY\n\n  const getNum = num => {\n    return num > 9 ? num : '0' + num;\n  };\n\n  const getDateString = date => {\n    let nDate = new Date(date);\n    return getNum(nDate.getDate()) + '-' + getNum(nDate.getMonth() + 1) + '-' + nDate.getFullYear();\n  }; // CALL API UPDATE\n\n\n  const updateCurrentFeedback = async param => {\n    try {\n      const res = await FeedbackApi.update(param);\n      getCurrentInfo(current.ID);\n    } catch (error) {}\n  }; // GET INFO OF SELECTED FEEDBACK ITEM\n\n\n  const getCurrentInfo = async param => {\n    try {\n      const res = await FeedbackApi.getByID(param);\n      res.status == 200 && setCurrentInfomation(res.data.data);\n    } catch (error) {} finally {\n      setLoading(false);\n    }\n  }; // GET DATA REPLY OF SELECTED FEEDBACK\n\n\n  const getReply = async param => {\n    setReset(true);\n\n    try {\n      const res = await FeedbackReplyApi.getByFeedbackID(param);\n      res.status == 200 && setReply(res.data.data);\n      setReset(false);\n    } catch (error) {}\n  }; // ADD DATA REPLY TO SELECTED FEEDBACK\n\n\n  const addReply = async () => {\n    if (content !== '<p><br></p>') {\n      setReset(true);\n      let temp = {\n        FeedbackID: current.ID,\n        Content: content\n      };\n\n      try {\n        await FeedbackReplyApi.add(temp);\n        getReply(current.ID);\n      } catch (error) {}\n\n      setReset(false);\n    }\n  }; // HANDLE RATE\n\n\n  const onChangeRate = e => {\n    const temp = {\n      ID: current.ID,\n      Rate: e\n    };\n    updateCurrentFeedback(temp);\n  }; // RENDER\n\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    loading: loading,\n    className: \"p-2 student-fb__wrap-main st-fb-empty wrap-fb-menu\",\n    bordered: false,\n    children: current.ID !== undefined ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fb-height-100\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-newsfeed-wrap__label\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"m-feedback st-fb-100w\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row m-0 mb-3 st-fb-rsb st-fb-100w  m-feedback__head\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"st-fb-column\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"m-feedback__name\",\n                children: currentInfomation.CreatedBy\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"m-feedback__date\",\n                children: getDateString(current.CreatedOn)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"st-fb-column st-fb-flex-end\",\n              children: /*#__PURE__*/_jsxDEV(Rate, {\n                onChange: onChangeRate,\n                value: currentInfomation.Rate,\n                className: \"st-fb-star m-0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 10\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"m-feedback__main mt-4 st-fb-100w\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row m-0 st-fb-100w st-fb-rsb\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"m-feedback__name\",\n            children: currentInfomation.Title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"m-feedback__date\",\n            children: current.TypeName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"m-feedback__content\",\n          children: ReactHtmlParser(currentInfomation.ContentFeedBack)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-newsfeed fv-main-sc\",\n        children: [current.StatusID !== 3 && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(EditorSimple, {\n            handleChange: value => {\n              setContent(value);\n            },\n            isTranslate: false,\n            isReset: isReset,\n            questionContent: content,\n            height: 150\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row wrap-vocab__create-new__button-group\",\n            children: /*#__PURE__*/_jsxDEV(Tooltip, {\n              title: \"Th\\xEAm ghi ch\\xFA\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => addReply(),\n                className: \"btn ml-3 mt-3 btn-primary\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-plus-circle mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 12\n                }, this), \"Th\\xEAm nh\\u1EADn x\\xE9t\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 11\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 10\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"m-feedback__list-group-nf\",\n          children: reply.map((item, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: currentItem === item.ID ? 'active' : '',\n            onClick: () => {},\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row m-0 student-fb__i-fb\",\n              children: [item.Avatarr !== null && item.Avatar !== '' ? /*#__PURE__*/_jsxDEV(Avatar, {\n                size: 36,\n                className: \"student-fb__i-avt mr-3\",\n                src: userInformation.Avatar\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 12\n              }, this) : /*#__PURE__*/_jsxDEV(Avatar, {\n                size: 36,\n                className: \"student-fb__i-avt mr-3\",\n                src: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: \"/images/user.png\",\n                  alt: \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 70\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 12\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"st-fb-colum st-fb-fw\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row m-0 st-fb-rsb\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"student-fb__i-name bold\",\n                    style: {\n                      color: '#50684b'\n                    },\n                    children: item.CreateBy\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 209,\n                    columnNumber: 13\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"student-fb__i-name\",\n                    children: getDateString(item.CreateDate)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 212,\n                    columnNumber: 13\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 12\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"student-fb__i-r-content\",\n                  children: ReactHtmlParser(item.Content)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 12\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 11\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 10\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 9\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 5\n    }, this) : /*#__PURE__*/_jsxDEV(Empty, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 3\n  }, this);\n}\n\nexport default MainFeedback;","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/FeedBack/Main/MainFeedback.tsx"],"names":["Avatar","Card","Empty","Rate","Tooltip","PropTypes","React","useEffect","useState","useWrap","FeedbackApi","ReactHtmlParser","EditorSimple","FeedbackReplyApi","MainFeedback","propTypes","allDataLength","object","feedbackMenu","array","feedbackList","currentItem","string","handleClickItem","func","handleClickMenu","handleCreateNew","current","defaultProps","ButtonImportant","status","props","showNoti","userInformation","currentInfomation","setCurrentInfomation","CreatedBy","Title","ContentFeedBack","isImportant","setImportant","reply","setReply","isReset","setReset","content","setContent","loading","setLoading","getCurrentInfo","ID","getReply","isPrioritized","getNum","num","getDateString","date","nDate","Date","getDate","getMonth","getFullYear","updateCurrentFeedback","param","res","update","error","getByID","data","getByFeedbackID","addReply","temp","FeedbackID","Content","add","onChangeRate","e","undefined","CreatedOn","flex","TypeName","StatusID","value","map","item","index","Avatarr","color","CreateBy","CreateDate"],"mappings":"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","sourcesContent":["import { Avatar, Card, Empty, Rate, Tooltip } from 'antd'\r\nimport PropTypes from 'prop-types'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useWrap } from '~/context/wrap'\r\nimport { FeedbackApi } from '~/apiBase'\r\nimport ReactHtmlParser from 'react-html-parser'\r\nimport EditorSimple from '~/components/Elements/EditorSimple'\r\nimport { FeedbackReplyApi } from '~/apiBase/feed-back/feedback-reply'\r\n\r\nMainFeedback.propTypes = {\r\n\tallDataLength: PropTypes.object,\r\n\tfeedbackMenu: PropTypes.array,\r\n\tfeedbackList: PropTypes.array,\r\n\tcurrentItem: PropTypes.string,\r\n\thandleClickItem: PropTypes.func,\r\n\thandleClickMenu: PropTypes.func,\r\n\thandleCreateNew: PropTypes.func,\r\n\r\n\tcurrent: PropTypes.object\r\n}\r\n\r\nMainFeedback.defaultProps = {\r\n\tallDataLength: {},\r\n\tfeedbackMenu: [],\r\n\tfeedbackList: [],\r\n\tcurrentItem: '',\r\n\thandleClickItem: null,\r\n\thandleClickMenu: null,\r\n\thandleCreateNew: null,\r\n\r\n\tcurrent: {}\r\n}\r\n\r\nexport const ButtonImportant = ({ status }: { status: boolean }) => {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{!status ? (\r\n\t\t\t\t<span className=\"\">\r\n\t\t\t\t\tĐánh dấu ưu tiên\r\n\t\t\t\t\t<i className=\"ml-2 far m-0 fa-star st-fb-star-important\" />\r\n\t\t\t\t</span>\r\n\t\t\t) : (\r\n\t\t\t\t<i className=\"fas m-0 fa-star st-fb-star-important\"></i>\r\n\t\t\t)}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nfunction MainFeedback(props) {\r\n\tconst { current, currentItem } = props\r\n\r\n\tconst { showNoti, userInformation } = useWrap()\r\n\tconst [currentInfomation, setCurrentInfomation] = useState({ CreatedBy: '', Rate: 0, Title: '', ContentFeedBack: '' })\r\n\tconst [isImportant, setImportant] = useState(false)\r\n\tconst [reply, setReply] = useState([])\r\n\tconst [isReset, setReset] = useState(false)\r\n\tconst [content, setContent] = useState('')\r\n\tconst [loading, setLoading] = useState(true)\r\n\r\n\tuseEffect(() => {\r\n\t\tgetCurrentInfo(current.ID)\r\n\t\tgetReply(current.ID)\r\n\t\tsetImportant(current.isPrioritized !== null ? current.isPrioritized : false)\r\n\t}, [current])\r\n\r\n\t// CONVERT DATE TO  DD-MM-YYYY\r\n\tconst getNum = (num) => {\r\n\t\treturn num > 9 ? num : '0' + num\r\n\t}\r\n\tconst getDateString = (date) => {\r\n\t\tlet nDate = new Date(date)\r\n\t\treturn getNum(nDate.getDate()) + '-' + getNum(nDate.getMonth() + 1) + '-' + nDate.getFullYear()\r\n\t}\r\n\r\n\t// CALL API UPDATE\r\n\tconst updateCurrentFeedback = async (param) => {\r\n\t\ttry {\r\n\t\t\tconst res = await FeedbackApi.update(param)\r\n\t\t\tgetCurrentInfo(current.ID)\r\n\t\t} catch (error) {}\r\n\t}\r\n\r\n\t// GET INFO OF SELECTED FEEDBACK ITEM\r\n\tconst getCurrentInfo = async (param) => {\r\n\t\ttry {\r\n\t\t\tconst res = await FeedbackApi.getByID(param)\r\n\t\t\tres.status == 200 && setCurrentInfomation(res.data.data)\r\n\t\t} catch (error) {\r\n\t\t} finally {\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\t// GET DATA REPLY OF SELECTED FEEDBACK\r\n\tconst getReply = async (param) => {\r\n\t\tsetReset(true)\r\n\t\ttry {\r\n\t\t\tconst res = await FeedbackReplyApi.getByFeedbackID(param)\r\n\t\t\tres.status == 200 && setReply(res.data.data)\r\n\t\t\tsetReset(false)\r\n\t\t} catch (error) {}\r\n\t}\r\n\r\n\t// ADD DATA REPLY TO SELECTED FEEDBACK\r\n\tconst addReply = async () => {\r\n\t\tif (content !== '<p><br></p>') {\r\n\t\t\tsetReset(true)\r\n\t\t\tlet temp = {\r\n\t\t\t\tFeedbackID: current.ID,\r\n\t\t\t\tContent: content\r\n\t\t\t}\r\n\t\t\ttry {\r\n\t\t\t\tawait FeedbackReplyApi.add(temp)\r\n\t\t\t\tgetReply(current.ID)\r\n\t\t\t} catch (error) {}\r\n\t\t\tsetReset(false)\r\n\t\t}\r\n\t}\r\n\r\n\t// HANDLE RATE\r\n\tconst onChangeRate = (e) => {\r\n\t\tconst temp = {\r\n\t\t\tID: current.ID,\r\n\t\t\tRate: e\r\n\t\t}\r\n\t\tupdateCurrentFeedback(temp)\r\n\t}\r\n\r\n\t// RENDER\r\n\treturn (\r\n\t\t<Card loading={loading} className=\"p-2 student-fb__wrap-main st-fb-empty wrap-fb-menu\" bordered={false}>\r\n\t\t\t{current.ID !== undefined ? (\r\n\t\t\t\t<div className=\"fb-height-100\">\r\n\t\t\t\t\t<div className=\"card-newsfeed-wrap__label\">\r\n\t\t\t\t\t\t<div className=\"m-feedback st-fb-100w\">\r\n\t\t\t\t\t\t\t<div className=\"row m-0 mb-3 st-fb-rsb st-fb-100w  m-feedback__head\">\r\n\t\t\t\t\t\t\t\t<div className=\"st-fb-column\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"m-feedback__name\">{currentInfomation.CreatedBy}</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"m-feedback__date\">{getDateString(current.CreatedOn)}</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div style={{ flex: 1 }} />\r\n\r\n\t\t\t\t\t\t\t\t<div className=\"st-fb-column st-fb-flex-end\">\r\n\t\t\t\t\t\t\t\t\t<Rate onChange={onChangeRate} value={currentInfomation.Rate} className=\"st-fb-star m-0\" />\r\n\r\n\t\t\t\t\t\t\t\t\t{/* {userInformation !== null && (\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tconst temp = {\r\n\t\t\t\t\t\t\t\t\t\t\tID: current.ID,\r\n\t\t\t\t\t\t\t\t\t\t\tisPrioritized: !isImportant\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\tsetFeedbackImportant();\r\n\t\t\t\t\t\t\t\t\t\tupdateCurrentFeedback(temp);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{current.UID === userInformation.UserInformationID && <ButtonImportant status={isImportant} />}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t)} */}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"m-feedback__main mt-4 st-fb-100w\">\r\n\t\t\t\t\t\t<div className=\"row m-0 st-fb-100w st-fb-rsb\">\r\n\t\t\t\t\t\t\t<span className=\"m-feedback__name\">{currentInfomation.Title}</span>\r\n\t\t\t\t\t\t\t<span className=\"m-feedback__date\">{current.TypeName}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<span className=\"m-feedback__content\">{ReactHtmlParser(currentInfomation.ContentFeedBack)}</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<hr />\r\n\r\n\t\t\t\t\t<div className=\"card-newsfeed fv-main-sc\">\r\n\t\t\t\t\t\t{current.StatusID !== 3 && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<EditorSimple\r\n\t\t\t\t\t\t\t\t\thandleChange={(value) => {\r\n\t\t\t\t\t\t\t\t\t\tsetContent(value)\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tisTranslate={false}\r\n\t\t\t\t\t\t\t\t\tisReset={isReset}\r\n\t\t\t\t\t\t\t\t\tquestionContent={content}\r\n\t\t\t\t\t\t\t\t\theight={150}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t<div className=\"row wrap-vocab__create-new__button-group\">\r\n\t\t\t\t\t\t\t\t\t<Tooltip title=\"Thêm ghi chú\">\r\n\t\t\t\t\t\t\t\t\t\t<button onClick={() => addReply()} className=\"btn ml-3 mt-3 btn-primary\">\r\n\t\t\t\t\t\t\t\t\t\t\t<i className=\"fas fa-plus-circle mr-2\"></i>Thêm nhận xét\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<ul className=\"m-feedback__list-group-nf\">\r\n\t\t\t\t\t\t\t{reply.map((item, index) => (\r\n\t\t\t\t\t\t\t\t<li key={index} className={currentItem === item.ID ? 'active' : ''} onClick={() => {}}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"row m-0 student-fb__i-fb\">\r\n\t\t\t\t\t\t\t\t\t\t{item.Avatarr !== null && item.Avatar !== '' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<Avatar size={36} className=\"student-fb__i-avt mr-3\" src={userInformation.Avatar} />\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t<Avatar size={36} className=\"student-fb__i-avt mr-3\" src={<img src=\"/images/user.png\" alt=\"\" />} />\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"st-fb-colum st-fb-fw\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"row m-0 st-fb-rsb\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"student-fb__i-name bold\" style={{ color: '#50684b' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item.CreateBy}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"student-fb__i-name\">{getDateString(item.CreateDate)}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"student-fb__i-r-content\">{ReactHtmlParser(item.Content)}</span>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<Empty />\r\n\t\t\t)}\r\n\t\t</Card>\r\n\t)\r\n}\r\n\r\nexport default MainFeedback\r\n"]},"metadata":{},"sourceType":"module"}