{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\NewsFeed\\\\NewsFeed.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Empty, Skeleton } from 'antd';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { Waypoint } from 'react-waypoint';\nimport { backgroundNewsFeedApi, courseApi, groupNewsFeedApi, newsFeedApi, newsFeedCommentApi, newsFeedCommentReplyApi, newsFeedLikeApi, userBranchApi, userGroupNewsFeedApi, userInformationApi } from '~/apiBase';\nimport CreateNewsFeed from '~/components/Global/NewsFeed/CreateNewsFeed';\nimport ListNewsFeed from '~/components/Global/NewsFeed/ListNewsFeed';\nimport AddUserForm from '~/components/Global/NewsFeed/NewsFeedGroupComponents/AddUserForm';\nimport BannerGroup from '~/components/Global/NewsFeed/NewsFeedGroupComponents/BannerGroup';\nimport DeleteGroup from '~/components/Global/NewsFeed/NewsFeedGroupComponents/DeleteGroup';\nimport GroupForm from '~/components/Global/NewsFeed/NewsFeedGroupComponents/GroupForm';\nimport RemoveUser from '~/components/Global/NewsFeed/NewsFeedGroupComponents/RemoveUser';\nimport DeleteNewsFeed from '~/components/Global/NewsFeed/NewsFeedItemComponents/DeleteNewsFeed';\nimport NewsFeedItem from '~/components/Global/NewsFeed/NewsFeedItemComponents/NewsFeedItem';\nimport SideBarNewsFeed from '~/components/Global/NewsFeed/SideBarNewsFeed';\nimport { useDebounce } from '~/context/useDebounce';\nimport { useWrap } from '~/context/wrap';\nimport { Roles } from '~/lib/roles/listRoles';\nimport { fmSelectArr } from '~/utils/functions';\nimport { useRouter } from 'next/router';\nimport TitlePage from '~/components/TitlePage';\nconst initialNewsFeedList = [];\nconst initialPageIndex = 1;\n\nconst NewsFeed = () => {\n  const {\n    showNoti,\n    userInformation\n  } = useWrap();\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState({\n    type: '',\n    status: false\n  });\n  const {\n    0: newsFeedList,\n    1: setNewsFeedList\n  } = useState([]);\n  const {\n    0: totalNewsFeed,\n    1: setTotalNewsFeed\n  } = useState(1);\n  const {\n    0: emptyNewsFeed,\n    1: setEmptyNewsFeed\n  } = useState(false);\n  const {\n    0: idListUserLiked,\n    1: setIDListUserLiked\n  } = useState([]);\n  const {\n    0: hasNextPage,\n    1: setHasNextPage\n  } = useState(true);\n  const {\n    0: pageIndex,\n    1: setPageIndex\n  } = useState(1);\n  const router = useRouter(); // STONE DATA TO FILTER NEWS FEED\n\n  const {\n    0: filtersData,\n    1: setFiltersData\n  } = useState({\n    name: null,\n    idTeam: null,\n    idGroup: router.query.idGroup ? Number(router.query.idGroup) : null\n  }); // OPTION LIST FOR CREATE NEWS FEED\n\n  const {\n    0: optionList,\n    1: setOptionList\n  } = useState({\n    teamOptionList: [],\n    groupOptionList: []\n  });\n  const {\n    0: backgroundList,\n    1: setBackgroundList\n  } = useState([]); // GROUP\n\n  const {\n    0: infoGroup,\n    1: setInfoGroup\n  } = useState({\n    info: null,\n    userList: []\n  });\n  const {\n    0: courseList,\n    1: setCourseList\n  } = useState([]);\n  const {\n    0: userOptionList,\n    1: setUserOptionList\n  } = useState([]);\n  const roleOptionList = Roles.filter(r => r.id !== 1 && r.id !== 5).map(r => ({\n    title: r.RoleName,\n    value: r.id\n  }));\n  const roleMemberOptionList = [{\n    label: 'Thành viên',\n    value: 2\n  }, {\n    label: 'Quản trị viên',\n    value: 1\n  }]; // CHECK AUTHENTICATE\n  // 1: ADMIN - 5: MANAGER\n\n  const checkAuthorization = newsFeedAuthor => {\n    if (!userInformation) return 'Ignore';\n    const role = userInformation['RoleID'];\n    const uid = userInformation.UserInformationID;\n\n    if (role === 1 || role === 2 || role === 5 || +newsFeedAuthor === +uid) {\n      return 'Accept';\n    }\n\n    return 'Ignore';\n  }; // RESET DATA BACK TO INIT\n\n\n  const reset = () => {\n    setNewsFeedList(initialNewsFeedList);\n    setPageIndex(initialPageIndex);\n  }; // --------------FETCH--------------\n\n\n  const fetchNewsFeedList = async () => {\n    setIsLoading({\n      type: 'GET_LIST',\n      status: true\n    });\n\n    try {\n      const res = await newsFeedApi.getAll({\n        pageIndex: pageIndex,\n        pageSize: 5,\n        GroupNewsFeedID: filtersData.idGroup,\n        BranchID: filtersData.idTeam,\n        FullNameUnicode: filtersData.name\n      });\n\n      if (res.status === 204) {\n        setEmptyNewsFeed(true);\n        setHasNextPage(false);\n        setTotalNewsFeed(0);\n      }\n\n      if (res.status === 200) {\n        setNewsFeedList([...newsFeedList, ...res.data.data]);\n        setEmptyNewsFeed(false);\n        setTotalNewsFeed(res.data.totalRow);\n\n        if (res.data.data.length < 5) {\n          setHasNextPage(false);\n        }\n      }\n    } catch (error) {\n      console.log('fetchNewsFeedList', error.message);\n    } finally {\n      setIsLoading({\n        type: 'GET_LIST',\n        status: false\n      });\n    }\n  };\n\n  useEffect(() => {\n    if (pageIndex === 1) {\n      fetchNewsFeedList();\n    }\n  }, [pageIndex, filtersData]);\n\n  const fetchOptionList = async () => {\n    try {\n      let [team, group] = await Promise.all([userBranchApi.getAll({\n        getbytokenID: true\n      }), groupNewsFeedApi.getAll({\n        selectAll: true\n      })]);\n\n      if (team.status === 200) {\n        const teamOptionList = fmSelectArr(team.data.data, 'BranchName', 'BranchID');\n        setOptionList(prevState => _objectSpread(_objectSpread({}, prevState), {}, {\n          teamOptionList\n        }));\n      } else {\n        setOptionList(prevState => _objectSpread(_objectSpread({}, prevState), {}, {\n          teamOptionList: []\n        }));\n      }\n\n      if (group.status === 200) {\n        const groupOptionList = fmSelectArr(group.data.data, 'Name', 'ID');\n        setOptionList(prevState => _objectSpread(_objectSpread({}, prevState), {}, {\n          groupOptionList\n        }));\n      } else {\n        setOptionList(prevState => _objectSpread(_objectSpread({}, prevState), {}, {\n          groupOptionList: []\n        }));\n      }\n    } catch (error) {\n      console.log('fetchOptionList', error.message);\n    }\n  };\n\n  useEffect(() => {\n    fetchOptionList();\n  }, []);\n\n  const fetchCourseList = async () => {\n    try {\n      if (checkAuthorization() === 'Ignore') return;\n      const res = await courseApi.getAll({\n        selectAll: true\n      });\n\n      if (res.status === 200) {\n        const fmCourseList = res.data.data.map(c => ({\n          title: `${c.DonePercent}% - ${c.CourseName}`,\n          value: c.ID\n        }));\n        setCourseList(fmCourseList);\n      }\n    } catch (error) {\n      console.log('fetchCourseList', error.message);\n    }\n  };\n\n  useEffect(() => {\n    fetchCourseList();\n  }, [userInformation]);\n\n  const checkFileType = file => {\n    const {\n      type,\n      name\n    } = file;\n\n    if (type.includes('image')) {\n      return {\n        name,\n        type,\n        Type: 2\n      };\n    }\n\n    if (type.includes('audio')) {\n      return {\n        name,\n        type,\n        Type: 3\n      };\n    }\n\n    if (type.includes('video')) {\n      return {\n        name,\n        type,\n        Type: 4\n      };\n    }\n\n    return {\n      name,\n      Type: 0\n    };\n  };\n\n  const onUploadFile = async fileList => {\n    try {\n      let nextPost = 0;\n      const resArr = await Promise.all(fileList.reduce((newArr, file, idx) => {\n        if (file.originFileObj) {\n          newArr.push(newsFeedApi.uploadFile(file.originFileObj));\n        } else {\n          nextPost = idx + 1;\n          newArr;\n        }\n\n        return newArr;\n      }, []));\n      const rs = resArr.map(r => {\n        return _objectSpread({\n          uid: r.data.data,\n          url: r.data.data\n        }, checkFileType(fileList[nextPost]));\n      });\n      return rs;\n    } catch (error) {\n      console.log('onUploadFile', error);\n    }\n  }; // CREATE\n\n\n  const onCreateNewsFeed = async (data) => {\n    setIsLoading({\n      type: 'ADD_DATA',\n      status: true\n    });\n\n    try {\n      const {\n        TypeFile,\n        NewsFeedFile\n      } = data;\n      const newData = TypeFile && NewsFeedFile !== null && NewsFeedFile !== void 0 && NewsFeedFile.length ? _objectSpread(_objectSpread({}, data), {}, {\n        NewsFeedFile: data.NewsFeedFile.map(f => ({\n          Type: f.Type,\n          NameFile: f.url,\n          UID: f.uid\n        }))\n      }) : data;\n      const res = await newsFeedApi.add(newData);\n\n      if (res.status === 200) {\n        const newNewsFeedList = [res.data.data, ...newsFeedList];\n        setNewsFeedList(newNewsFeedList);\n        setTotalNewsFeed(newNewsFeedList.length);\n        showNoti('success', res.data.message);\n      }\n\n      return res;\n    } catch (error) {\n      console.log('onCreateNewsFeed', error.message);\n      showNoti('danger', error.message);\n    } finally {\n      setIsLoading({\n        type: 'ADD_DATA',\n        status: false\n      });\n    }\n  }; // EDIT\n\n\n  const onEditNewsFeed = idx => {\n    return async (data) => {\n      setIsLoading({\n        type: 'ADD_DATA',\n        status: true\n      });\n\n      try {\n        const {\n          TypeFile,\n          NewsFeedFile\n        } = data;\n        const {\n          NewsFeedFile: oldNewsFeedFileList\n        } = newsFeedList[idx];\n        let newFileUploadList = null;\n\n        if (TypeFile === 2) {\n          newFileUploadList = [...(oldNewsFeedFileList || []), ...(NewsFeedFile || [])].reduce((arr, f) => {\n            // CLEAR DUPLICATE OLD FILE\n            if (arr.some(newFile => newFile.ID && newFile.ID === f.ID)) {\n              return arr;\n            }\n\n            if (NewsFeedFile.some(fileForm => fileForm.ID && fileForm.ID === f.ID)) {\n              arr.push(f);\n            } else if (!f.hasOwnProperty('ID')) {\n              // DO NOT HAVE PROPERTY ID => NEW FILE\n              arr.push(_objectSpread(_objectSpread({}, f), {}, {\n                Type: f.Type,\n                NameFile: f.url,\n                UID: f.uid\n              }));\n            } else {\n              arr.push(_objectSpread(_objectSpread({}, f), {}, {\n                Enable: false\n              }));\n            }\n\n            return arr;\n          }, []);\n        }\n\n        if (TypeFile === 1 && NewsFeedFile !== null && NewsFeedFile !== void 0 && NewsFeedFile.length) {\n          newFileUploadList = NewsFeedFile;\n        }\n\n        const newData = newFileUploadList ? _objectSpread(_objectSpread({}, data), {}, {\n          NewsFeedFile: newFileUploadList\n        }) : data;\n        const res = await newsFeedApi.update(newData);\n\n        if (res.status === 200) {\n          const newNewsFeedList = [...newsFeedList];\n          newNewsFeedList.splice(idx, 1, res.data.data);\n          setNewsFeedList(newNewsFeedList);\n          showNoti('success', res.data.message);\n        }\n\n        return res;\n      } catch (error) {\n        console.log('onEditNewsFeed', error.message);\n      } finally {\n        setIsLoading({\n          type: 'ADD_DATA',\n          status: false\n        });\n      }\n    };\n  }; // DELETE\n\n\n  const onDelete = idx => {\n    return async () => {\n      setIsLoading({\n        type: 'GET_ALL',\n        status: true\n      });\n\n      try {\n        const newNewsFeedList = [...newsFeedList];\n        const delObj = newNewsFeedList[idx];\n        const newDelObj = {\n          ID: delObj.ID,\n          Enable: false\n        };\n        const res = await newsFeedApi.delete(newDelObj);\n\n        if (res.status === 200) {\n          newNewsFeedList.splice(idx, 1);\n          setNewsFeedList(newNewsFeedList);\n          setTotalNewsFeed(newNewsFeedList.length);\n          showNoti('success', res.data.message);\n        }\n      } catch (error) {\n        console.log('onDelete', error.message);\n      } finally {\n        setIsLoading({\n          type: 'GET_ALL',\n          status: false\n        });\n      }\n    };\n  };\n\n  const fetchBackgroundNewsFeed = async () => {\n    try {\n      const res = await backgroundNewsFeedApi.getAll();\n\n      if (res.status === 200) {\n        setBackgroundList(res.data.data);\n      }\n    } catch (error) {\n      console.log('fetchBackgroundNewsFeed', error.message);\n    }\n  }; // --------------BACK TO HOME PAGE--------------\n\n\n  const onBackToHomePage = useDebounce(() => {\n    setFiltersData({\n      name: null,\n      idTeam: null,\n      idGroup: null\n    });\n    reset();\n  }, 200, []); // --------------FILTER--------------\n\n  const loadMore = () => {\n    // PAGE INDEX >= 2, OTHERWISE DUPLICATE CALL API\n    setPageIndex(pageIndex + 1);\n\n    if (pageIndex > 1) {\n      fetchNewsFeedList();\n    }\n  };\n\n  const onFilters = (field, value) => {\n    if (filtersData[field] === value) {\n      onBackToHomePage();\n      return;\n    }\n\n    const newFilters = {\n      name: null,\n      idTeam: null,\n      idGroup: null\n    };\n    newFilters[field] = value;\n    setFiltersData(newFilters);\n    reset();\n  };\n\n  useEffect(() => {\n    for (const key in filtersData) {\n      if (filtersData[key]) {\n        setHasNextPage(true);\n      }\n    }\n  }, [filtersData]); // --------------LIKE--------------\n\n  const fetchNewsFeedUserLiked = async () => {\n    try {\n      if (!userInformation) return;\n      let res = await newsFeedLikeApi.getAll({\n        selectAll: true,\n        UserInformationID: userInformation.UserInformationID\n      });\n\n      if (res.status === 200) {\n        const getNewsFeedIDList = res.data.data.map(n => n.NewsFeedID);\n        setIDListUserLiked(getNewsFeedIDList);\n      }\n\n      if (res.status === 204) {\n        setIDListUserLiked([]);\n      }\n    } catch (error) {\n      console.log('fetchNewsFeedUserLiked', error.message);\n    }\n  };\n\n  useEffect(() => {\n    fetchNewsFeedUserLiked();\n  }, [userInformation]);\n  const stoLike = useRef(null);\n  const DELAY = 500;\n\n  const onUserLikeNewsFeed = idx => {\n    clearTimeout(stoLike.current);\n    return NewsFeedID => {\n      try {\n        stoLike.current = setTimeout(async () => {\n          const data = {\n            NewsFeedID\n          };\n          let res = await newsFeedLikeApi.add(data);\n\n          if (res.status === 200) {\n            const newNewsFeedList = [...newsFeedList];\n\n            const newNewsFeed = _objectSpread({}, newNewsFeedList[idx]);\n\n            if (res.data.data.Enable) {\n              newNewsFeedList.splice(idx, 1, _objectSpread(_objectSpread({}, newNewsFeed), {}, {\n                LikeCount: ++newNewsFeedList[idx].LikeCount\n              }));\n              setIDListUserLiked([...idListUserLiked, res.data.data.NewsFeedID]);\n              setNewsFeedList(newNewsFeedList);\n            } else {\n              newNewsFeedList.splice(idx, 1, _objectSpread(_objectSpread({}, newNewsFeed), {}, {\n                LikeCount: --newNewsFeedList[idx].LikeCount\n              }));\n              const newIDListUserLiked = idListUserLiked.filter(id => id !== res.data.data.NewsFeedID);\n              setIDListUserLiked(newIDListUserLiked);\n              setNewsFeedList(newNewsFeedList);\n            }\n          }\n        }, DELAY);\n      } catch (error) {\n        console.log('onUserLikeNewsFeed', error.message);\n      }\n    };\n  }; // --------------COMMENT--------------\n\n\n  const onComment = async data => {\n    setIsLoading({\n      type: 'ADD_COMMENT',\n      status: true\n    });\n\n    try {\n      const res = await newsFeedCommentApi.add(data);\n      return res;\n    } catch (error) {\n      console.log('onComment', error.message);\n    } finally {\n      setIsLoading({\n        type: 'ADD_COMMENT',\n        status: false\n      });\n    }\n  };\n\n  const fetchComment = async NewsFeedID => {\n    setIsLoading({\n      type: `FETCH_COMMENT_${NewsFeedID}`,\n      status: true\n    });\n\n    try {\n      const res = await newsFeedCommentApi.getAll({\n        selectAll: true,\n        NewsFeedID\n      });\n      return res;\n    } catch (error) {\n      console.log('fetchComment', error.message);\n    } finally {\n      setIsLoading({\n        type: `FETCH_COMMENT_${NewsFeedID}`,\n        status: false\n      });\n    }\n  }; // --------------REPLY--------------\n\n\n  const onReplyComment = async data => {\n    setIsLoading({\n      type: 'ADD_COMMENT',\n      status: true\n    });\n\n    try {\n      const res = await newsFeedCommentReplyApi.add(data);\n      return res;\n    } catch (error) {\n      console.log('onReplyComment', error.message);\n    } finally {\n      setIsLoading({\n        type: 'ADD_COMMENT',\n        status: false\n      });\n    }\n  };\n\n  const fetchReplyComment = async NewsFeedCommentID => {\n    setIsLoading({\n      type: `FETCH_REPLY_COMMENT_${NewsFeedCommentID}`,\n      status: true\n    });\n\n    try {\n      const res = await newsFeedCommentReplyApi.getAll({\n        selectAll: true,\n        NewsFeedCommentID\n      });\n      return res;\n    } catch (error) {\n      console.log('fetchReplyComment', error.message);\n    } finally {\n      setIsLoading({\n        type: `FETCH_REPLY_COMMENT_${NewsFeedCommentID}`,\n        status: false\n      });\n    }\n  }; // GROUP\n\n\n  const fetchInfoGroup = async idGroup => {\n    setIsLoading({\n      type: 'FETCH_INFO_GROUP',\n      status: true\n    });\n\n    try {\n      let [info, userList] = await Promise.all([groupNewsFeedApi.getByID(idGroup), userGroupNewsFeedApi.getAll({\n        selectAll: true,\n        GroupNewsFeedID: idGroup\n      })]);\n\n      if (info.status === 200) {\n        setInfoGroup(prevState => _objectSpread(_objectSpread({}, prevState), {}, {\n          info: info.data.data\n        }));\n      }\n\n      if (userList.status === 200) {\n        setInfoGroup(prevState => _objectSpread(_objectSpread({}, prevState), {}, {\n          userList: userList.data.data\n        }));\n      }\n    } catch (error) {\n      console.log('fetchInfoGroup', error.message);\n    } finally {\n      setIsLoading({\n        type: 'FETCH_INFO_GROUP',\n        status: false\n      });\n    }\n  };\n\n  useEffect(() => {\n    if (filtersData.idGroup) {\n      fetchInfoGroup(filtersData.idGroup);\n    }\n  }, [filtersData.idGroup]);\n\n  const onCreateGroup = async data => {\n    setIsLoading({\n      type: 'ADD_DATA',\n      status: true\n    });\n\n    try {\n      const res = await groupNewsFeedApi.add(data);\n\n      if (res.status === 200) {\n        const newGroup = {\n          title: res.data.data.Name,\n          value: res.data.data.ID\n        };\n        const newGroupOptionList = [newGroup, ...optionList.groupOptionList];\n        setOptionList(_objectSpread(_objectSpread({}, optionList), {}, {\n          groupOptionList: newGroupOptionList\n        }));\n        showNoti('success', res.data.message);\n        onFilters('idGroup', newGroup.value);\n        return res;\n      }\n    } catch (error) {\n      showNoti('danger', error.message);\n    } finally {\n      setIsLoading({\n        type: 'ADD_DATA',\n        status: false\n      });\n    }\n  };\n\n  const onUpdateGroup = async data => {\n    setIsLoading({\n      type: 'ADD_DATA',\n      status: true\n    });\n\n    try {\n      const res = await groupNewsFeedApi.update(data);\n\n      if (res.status === 200) {\n        const newGroupOptionList = [...optionList.groupOptionList].map(t => {\n          if (t.value === data.ID) {\n            return _objectSpread(_objectSpread({}, t), {}, {\n              title: data.Name\n            });\n          }\n\n          return t;\n        });\n        setOptionList(_objectSpread(_objectSpread({}, optionList), {}, {\n          groupOptionList: newGroupOptionList\n        }));\n        setInfoGroup(_objectSpread(_objectSpread({}, infoGroup), {}, {\n          info: data\n        }));\n        showNoti('success', res.data.message);\n        return res;\n      }\n    } catch (error) {\n      showNoti('danger', error.message);\n    } finally {\n      setIsLoading({\n        type: 'ADD_DATA',\n        status: false\n      });\n    }\n  };\n\n  const onDeleteGroup = async () => {\n    try {\n      const data = {\n        ID: filtersData.idGroup,\n        Enable: false\n      };\n      const res = await groupNewsFeedApi.update(data);\n\n      if (res.status === 200) {\n        const newGroupOptionList = [...optionList.groupOptionList].filter(g => g.value !== filtersData.idGroup);\n        reset();\n        setOptionList(_objectSpread(_objectSpread({}, optionList), {}, {\n          groupOptionList: newGroupOptionList\n        }));\n        setFiltersData({\n          name: null,\n          idTeam: null,\n          idGroup: null\n        });\n      }\n    } catch (error) {\n      console.log('onDeleteGroup', error.message);\n    }\n  }; // ADD USER TO GROUP\n\n\n  const fetchUserByRole = async roleID => {\n    setIsLoading({\n      type: 'FETCH_USER_IN_GROUP',\n      status: true\n    });\n\n    try {\n      const res = await userInformationApi.getAllParams({\n        RoleID: roleID,\n        pageSize: 9999\n      });\n\n      if (res.status === 200) {\n        const fmOptionList = fmSelectArr(res.data.data, 'FullNameUnicode', 'UserInformationID');\n        setUserOptionList(fmOptionList);\n      }\n\n      if (res.status === 204) {\n        setUserOptionList([]);\n      }\n    } catch (error) {\n      console.log('fetchUserByRole', error.message);\n    } finally {\n      setIsLoading({\n        type: 'FETCH_USER_IN_GROUP',\n        status: false\n      });\n    }\n  };\n\n  const addUserToGroup = async data => {\n    setIsLoading({\n      type: 'ADD_DATA',\n      status: true\n    });\n\n    try {\n      const {\n        UserInformationID,\n        RoleID\n      } = data;\n      const newData = {\n        GroupNewsFeedID: filtersData.idGroup,\n        UserInformationID,\n        RoleID\n      };\n      const res = await userGroupNewsFeedApi.add(newData);\n\n      if (res.status === 200) {\n        const newUserList = [...infoGroup.userList, res.data.data];\n        setInfoGroup(_objectSpread(_objectSpread({}, infoGroup), {}, {\n          userList: newUserList\n        }));\n        showNoti('success', 'Thêm thành công');\n        return res;\n      }\n    } catch (error) {\n      showNoti('danger', error.message);\n    } finally {\n      setIsLoading({\n        type: 'ADD_DATA',\n        status: false\n      });\n    }\n  };\n\n  const removeUser = async idUser => {\n    try {\n      const data = {\n        ID: idUser,\n        Enable: false\n      };\n      const res = await userGroupNewsFeedApi.update(data);\n\n      if (res.status === 200) {\n        const newUserList = [...infoGroup.userList].filter(u => u.ID !== idUser);\n        setInfoGroup(_objectSpread(_objectSpread({}, infoGroup), {}, {\n          userList: newUserList\n        }));\n        showNoti('success', res.data.message);\n      }\n    } catch (error) {\n      console.log('onDeleteGroup', error.message);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(TitlePage, {\n      title: \"Tin t\\u1EE9c\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 844,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row wrap-newsfeed\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-8 col-12\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"list-newsfeed\",\n          children: [filtersData.idGroup && /*#__PURE__*/_jsxDEV(BannerGroup, {\n            infoGroup: infoGroup,\n            totalNewsFeed: totalNewsFeed,\n            bannerGroupActionListComponent: checkAuthorization() === 'Accept' ? /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"more-list\",\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                children: /*#__PURE__*/_jsxDEV(GroupForm, {\n                  isLoading: isLoading,\n                  isUpdate: true,\n                  dataUpdate: infoGroup.info,\n                  courseList: courseList,\n                  handleSubmit: onUpdateGroup\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 856,\n                  columnNumber: 13\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 855,\n                columnNumber: 12\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: /*#__PURE__*/_jsxDEV(AddUserForm, {\n                  isLoading: isLoading,\n                  roleOptionList: roleOptionList,\n                  userOptionList: userOptionList,\n                  roleMemberOptionList: roleMemberOptionList,\n                  fetchUserByRole: fetchUserByRole,\n                  handleSubmit: addUserToGroup\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 865,\n                  columnNumber: 13\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 864,\n                columnNumber: 12\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: /*#__PURE__*/_jsxDEV(RemoveUser, {\n                  userList: infoGroup.userList,\n                  handleDelete: removeUser\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 875,\n                  columnNumber: 13\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 874,\n                columnNumber: 12\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: /*#__PURE__*/_jsxDEV(DeleteGroup, {\n                  handleDelete: onDeleteGroup\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 878,\n                  columnNumber: 13\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 877,\n                columnNumber: 12\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 854,\n              columnNumber: 11\n            }, this) : null\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 849,\n            columnNumber: 8\n          }, this), !userInformation || userInformation['RoleID'] === 3 || userInformation['RoleID'] === 4 ? null : /*#__PURE__*/_jsxDEV(CreateNewsFeed, {\n            isLoading: isLoading,\n            dataUser: userInformation,\n            handleUploadFile: onUploadFile,\n            handleSubmit: onCreateNewsFeed,\n            fetchBackgroundNewsFeed: fetchBackgroundNewsFeed,\n            backgroundList: backgroundList,\n            filtersData: filtersData,\n            optionList: optionList\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 887,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(ListNewsFeed, {\n            children: newsFeedList.map((item, idx) => {\n              const isUserLiked = idListUserLiked.includes(item.ID);\n              return /*#__PURE__*/_jsxDEV(NewsFeedItem, {\n                handleFilters: onFilters,\n                isUserLiked: isUserLiked,\n                handleUserLikeNewsFeed: onUserLikeNewsFeed(idx),\n                handleComment: onComment,\n                fetchComment: fetchComment,\n                handleReplyComment: onReplyComment,\n                fetchReplyComment: fetchReplyComment,\n                item: item,\n                isLoading: isLoading,\n                userComment: userInformation,\n                moreActionComponent: checkAuthorization(item.UserInformationID) === 'Accept' ? /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"more-list\",\n                  children: [item.UserInformationID === (userInformation === null || userInformation === void 0 ? void 0 : userInformation.UserInformationID) && /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: /*#__PURE__*/_jsxDEV(CreateNewsFeed, {\n                      isLoading: isLoading,\n                      isUpdate: true,\n                      itemUpdate: item,\n                      dataUser: userInformation,\n                      handleUploadFile: onUploadFile,\n                      handleSubmit: onEditNewsFeed(idx),\n                      fetchBackgroundNewsFeed: fetchBackgroundNewsFeed,\n                      backgroundList: backgroundList,\n                      optionList: optionList\n                    }, item.ID, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 920,\n                      columnNumber: 16\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 919,\n                    columnNumber: 15\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: /*#__PURE__*/_jsxDEV(DeleteNewsFeed, {\n                      text: \"b\\u1EA3ng tin n\\xE0y\",\n                      handleDelete: onDelete(idx)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 935,\n                      columnNumber: 15\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 934,\n                    columnNumber: 14\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 917,\n                  columnNumber: 13\n                }, this) : null\n              }, item.ID, false, {\n                fileName: _jsxFileName,\n                lineNumber: 903,\n                columnNumber: 10\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 899,\n            columnNumber: 7\n          }, this), hasNextPage && /*#__PURE__*/_jsxDEV(Waypoint, {\n            onEnter: loadMore,\n            children: /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"list-nf skeleton\",\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"item-nf\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"newsfeed\",\n                  children: [/*#__PURE__*/_jsxDEV(Skeleton, {\n                    avatar: true,\n                    paragraph: {\n                      rows: 0\n                    },\n                    active: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 950,\n                    columnNumber: 12\n                  }, this), /*#__PURE__*/_jsxDEV(Skeleton, {\n                    active: true,\n                    paragraph: {\n                      rows: 2\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 951,\n                    columnNumber: 12\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 949,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 948,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"item-nf\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"newsfeed\",\n                  children: [/*#__PURE__*/_jsxDEV(Skeleton, {\n                    avatar: true,\n                    paragraph: {\n                      rows: 0\n                    },\n                    active: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 956,\n                    columnNumber: 12\n                  }, this), /*#__PURE__*/_jsxDEV(Skeleton, {\n                    active: true,\n                    paragraph: {\n                      rows: 2\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 957,\n                    columnNumber: 12\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 955,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 954,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"item-nf\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"newsfeed\",\n                  children: [/*#__PURE__*/_jsxDEV(Skeleton, {\n                    avatar: true,\n                    paragraph: {\n                      rows: 0\n                    },\n                    active: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 962,\n                    columnNumber: 12\n                  }, this), /*#__PURE__*/_jsxDEV(Skeleton, {\n                    active: true,\n                    paragraph: {\n                      rows: 2\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 963,\n                    columnNumber: 12\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 961,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 960,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 947,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 946,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 847,\n          columnNumber: 6\n        }, this), emptyNewsFeed && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4\",\n          children: /*#__PURE__*/_jsxDEV(Empty, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 972,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 971,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 846,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4 col-12\",\n        children: /*#__PURE__*/_jsxDEV(SideBarNewsFeed, {\n          optionList: optionList,\n          filtersData: filtersData,\n          handleBack: onBackToHomePage,\n          handleFilters: onFilters,\n          groupFormComponent: checkAuthorization() === 'Accept' ? /*#__PURE__*/_jsxDEV(GroupForm, {\n            isLoading: isLoading,\n            courseList: courseList,\n            handleSubmit: onCreateGroup\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 984,\n            columnNumber: 9\n          }, this) : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 977,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 976,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 845,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n\nexport default NewsFeed;","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/NewsFeed/NewsFeed.tsx"],"names":["Empty","Skeleton","React","useEffect","useRef","useState","Waypoint","backgroundNewsFeedApi","courseApi","groupNewsFeedApi","newsFeedApi","newsFeedCommentApi","newsFeedCommentReplyApi","newsFeedLikeApi","userBranchApi","userGroupNewsFeedApi","userInformationApi","CreateNewsFeed","ListNewsFeed","AddUserForm","BannerGroup","DeleteGroup","GroupForm","RemoveUser","DeleteNewsFeed","NewsFeedItem","SideBarNewsFeed","useDebounce","useWrap","Roles","fmSelectArr","useRouter","TitlePage","initialNewsFeedList","initialPageIndex","NewsFeed","showNoti","userInformation","isLoading","setIsLoading","type","status","newsFeedList","setNewsFeedList","totalNewsFeed","setTotalNewsFeed","emptyNewsFeed","setEmptyNewsFeed","idListUserLiked","setIDListUserLiked","hasNextPage","setHasNextPage","pageIndex","setPageIndex","router","filtersData","setFiltersData","name","idTeam","idGroup","query","Number","optionList","setOptionList","teamOptionList","groupOptionList","backgroundList","setBackgroundList","infoGroup","setInfoGroup","info","userList","courseList","setCourseList","userOptionList","setUserOptionList","roleOptionList","filter","r","id","map","title","RoleName","value","roleMemberOptionList","label","checkAuthorization","newsFeedAuthor","role","uid","UserInformationID","reset","fetchNewsFeedList","res","getAll","pageSize","GroupNewsFeedID","BranchID","FullNameUnicode","data","totalRow","length","error","console","log","message","fetchOptionList","team","group","Promise","all","getbytokenID","selectAll","prevState","fetchCourseList","fmCourseList","c","DonePercent","CourseName","ID","checkFileType","file","includes","Type","onUploadFile","fileList","nextPost","resArr","reduce","newArr","idx","originFileObj","push","uploadFile","rs","url","onCreateNewsFeed","TypeFile","NewsFeedFile","newData","f","NameFile","UID","add","newNewsFeedList","onEditNewsFeed","oldNewsFeedFileList","newFileUploadList","arr","some","newFile","fileForm","hasOwnProperty","Enable","update","splice","onDelete","delObj","newDelObj","delete","fetchBackgroundNewsFeed","onBackToHomePage","loadMore","onFilters","field","newFilters","key","fetchNewsFeedUserLiked","getNewsFeedIDList","n","NewsFeedID","stoLike","DELAY","onUserLikeNewsFeed","clearTimeout","current","setTimeout","newNewsFeed","LikeCount","newIDListUserLiked","onComment","fetchComment","onReplyComment","fetchReplyComment","NewsFeedCommentID","fetchInfoGroup","getByID","onCreateGroup","newGroup","Name","newGroupOptionList","onUpdateGroup","t","onDeleteGroup","g","fetchUserByRole","roleID","getAllParams","RoleID","fmOptionList","addUserToGroup","newUserList","removeUser","idUser","u","item","isUserLiked","rows"],"mappings":"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","sourcesContent":["import { Empty, Skeleton } from 'antd';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { Waypoint } from 'react-waypoint';\r\nimport {\r\n\tbackgroundNewsFeedApi,\r\n\tcourseApi,\r\n\tgroupNewsFeedApi,\r\n\tnewsFeedApi,\r\n\tnewsFeedCommentApi,\r\n\tnewsFeedCommentReplyApi,\r\n\tnewsFeedLikeApi,\r\n\tuserBranchApi,\r\n\tuserGroupNewsFeedApi,\r\n\tuserInformationApi\r\n} from '~/apiBase';\r\nimport CreateNewsFeed from '~/components/Global/NewsFeed/CreateNewsFeed';\r\nimport ListNewsFeed from '~/components/Global/NewsFeed/ListNewsFeed';\r\nimport AddUserForm from '~/components/Global/NewsFeed/NewsFeedGroupComponents/AddUserForm';\r\nimport BannerGroup from '~/components/Global/NewsFeed/NewsFeedGroupComponents/BannerGroup';\r\nimport DeleteGroup from '~/components/Global/NewsFeed/NewsFeedGroupComponents/DeleteGroup';\r\nimport GroupForm from '~/components/Global/NewsFeed/NewsFeedGroupComponents/GroupForm';\r\nimport RemoveUser from '~/components/Global/NewsFeed/NewsFeedGroupComponents/RemoveUser';\r\nimport DeleteNewsFeed from '~/components/Global/NewsFeed/NewsFeedItemComponents/DeleteNewsFeed';\r\nimport NewsFeedItem from '~/components/Global/NewsFeed/NewsFeedItemComponents/NewsFeedItem';\r\nimport SideBarNewsFeed from '~/components/Global/NewsFeed/SideBarNewsFeed';\r\nimport { useDebounce } from '~/context/useDebounce';\r\nimport { useWrap } from '~/context/wrap';\r\nimport { Roles } from '~/lib/roles/listRoles';\r\nimport { fmSelectArr } from '~/utils/functions';\r\nimport { useRouter } from 'next/router';\r\nimport TitlePage from '~/components/TitlePage';\r\n\r\nconst initialNewsFeedList = [];\r\nconst initialPageIndex = 1;\r\n\r\ntype FiltersData = {\r\n\tname: string;\r\n\tidTeam: number;\r\n\tidGroup: number;\r\n};\r\n\r\ntype OptionList = {\r\n\tteamOptionList: IOptionCommon[];\r\n\tgroupOptionList: IOptionCommon[];\r\n};\r\n\r\ntype InfoGroup = {\r\n\tinfo: IGroupNewsFeed;\r\n\tuserList: IUserGroupNewsFeed[];\r\n};\r\n\r\nconst NewsFeed = () => {\r\n\tconst { showNoti, userInformation } = useWrap();\r\n\tconst [isLoading, setIsLoading] = useState({\r\n\t\ttype: '',\r\n\t\tstatus: false\r\n\t});\r\n\tconst [newsFeedList, setNewsFeedList] = useState<INewsFeed[]>([]);\r\n\tconst [totalNewsFeed, setTotalNewsFeed] = useState(1);\r\n\tconst [emptyNewsFeed, setEmptyNewsFeed] = useState(false);\r\n\tconst [idListUserLiked, setIDListUserLiked] = useState<number[]>([]);\r\n\tconst [hasNextPage, setHasNextPage] = useState(true);\r\n\tconst [pageIndex, setPageIndex] = useState(1);\r\n\tconst router = useRouter();\r\n\t// STONE DATA TO FILTER NEWS FEED\r\n\tconst [filtersData, setFiltersData] = useState<FiltersData>({\r\n\t\tname: null,\r\n\t\tidTeam: null,\r\n\t\tidGroup: router.query.idGroup ? Number(router.query.idGroup) : null\r\n\t});\r\n\t// OPTION LIST FOR CREATE NEWS FEED\r\n\tconst [optionList, setOptionList] = useState<OptionList>({\r\n\t\tteamOptionList: [],\r\n\t\tgroupOptionList: []\r\n\t});\r\n\tconst [backgroundList, setBackgroundList] = useState<IBackgroundNewsFeed[]>([]);\r\n\t// GROUP\r\n\tconst [infoGroup, setInfoGroup] = useState<InfoGroup>({\r\n\t\tinfo: null,\r\n\t\tuserList: []\r\n\t});\r\n\tconst [courseList, setCourseList] = useState<IOptionCommon[]>([]);\r\n\tconst [userOptionList, setUserOptionList] = useState<IOptionCommon[]>([]);\r\n\tconst roleOptionList = Roles.filter((r) => r.id !== 1 && r.id !== 5).map((r) => ({ title: r.RoleName, value: r.id }));\r\n\tconst roleMemberOptionList = [\r\n\t\t{ label: 'Thành viên', value: 2 },\r\n\t\t{ label: 'Quản trị viên', value: 1 }\r\n\t];\r\n\r\n\t// CHECK AUTHENTICATE\r\n\t// 1: ADMIN - 5: MANAGER\r\n\tconst checkAuthorization = (newsFeedAuthor?: number) => {\r\n\t\tif (!userInformation) return 'Ignore';\r\n\t\tconst role = userInformation['RoleID'];\r\n\t\tconst uid = userInformation.UserInformationID;\r\n\t\tif (role === 1 || role === 2 || role === 5 || +newsFeedAuthor === +uid) {\r\n\t\t\treturn 'Accept';\r\n\t\t}\r\n\t\treturn 'Ignore';\r\n\t};\r\n\r\n\t// RESET DATA BACK TO INIT\r\n\tconst reset = () => {\r\n\t\tsetNewsFeedList(initialNewsFeedList);\r\n\t\tsetPageIndex(initialPageIndex);\r\n\t};\r\n\r\n\t// --------------FETCH--------------\r\n\tconst fetchNewsFeedList = async () => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'GET_LIST',\r\n\t\t\tstatus: true\r\n\t\t});\r\n\t\ttry {\r\n\t\t\tconst res = await newsFeedApi.getAll({\r\n\t\t\t\tpageIndex: pageIndex,\r\n\t\t\t\tpageSize: 5,\r\n\t\t\t\tGroupNewsFeedID: filtersData.idGroup,\r\n\t\t\t\tBranchID: filtersData.idTeam,\r\n\t\t\t\tFullNameUnicode: filtersData.name\r\n\t\t\t});\r\n\t\t\tif (res.status === 204) {\r\n\t\t\t\tsetEmptyNewsFeed(true);\r\n\t\t\t\tsetHasNextPage(false);\r\n\t\t\t\tsetTotalNewsFeed(0);\r\n\t\t\t}\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tsetNewsFeedList([...newsFeedList, ...res.data.data]);\r\n\t\t\t\tsetEmptyNewsFeed(false);\r\n\t\t\t\tsetTotalNewsFeed(res.data.totalRow);\r\n\t\t\t\tif (res.data.data.length < 5) {\r\n\t\t\t\t\tsetHasNextPage(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('fetchNewsFeedList', error.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'GET_LIST',\r\n\t\t\t\tstatus: false\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (pageIndex === 1) {\r\n\t\t\tfetchNewsFeedList();\r\n\t\t}\r\n\t}, [pageIndex, filtersData]);\r\n\r\n\tconst fetchOptionList = async () => {\r\n\t\ttry {\r\n\t\t\tlet [team, group] = await Promise.all([\r\n\t\t\t\tuserBranchApi.getAll({ getbytokenID: true }),\r\n\t\t\t\tgroupNewsFeedApi.getAll({ selectAll: true })\r\n\t\t\t]);\r\n\t\t\tif (team.status === 200) {\r\n\t\t\t\tconst teamOptionList = fmSelectArr(team.data.data, 'BranchName', 'BranchID');\r\n\t\t\t\tsetOptionList((prevState) => ({\r\n\t\t\t\t\t...prevState,\r\n\t\t\t\t\tteamOptionList\r\n\t\t\t\t}));\r\n\t\t\t} else {\r\n\t\t\t\tsetOptionList((prevState) => ({\r\n\t\t\t\t\t...prevState,\r\n\t\t\t\t\tteamOptionList: []\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t\tif (group.status === 200) {\r\n\t\t\t\tconst groupOptionList = fmSelectArr(group.data.data, 'Name', 'ID');\r\n\t\t\t\tsetOptionList((prevState) => ({\r\n\t\t\t\t\t...prevState,\r\n\t\t\t\t\tgroupOptionList\r\n\t\t\t\t}));\r\n\t\t\t} else {\r\n\t\t\t\tsetOptionList((prevState) => ({\r\n\t\t\t\t\t...prevState,\r\n\t\t\t\t\tgroupOptionList: []\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('fetchOptionList', error.message);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchOptionList();\r\n\t}, []);\r\n\r\n\tconst fetchCourseList = async () => {\r\n\t\ttry {\r\n\t\t\tif (checkAuthorization() === 'Ignore') return;\r\n\t\t\tconst res = await courseApi.getAll({ selectAll: true });\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tconst fmCourseList = res.data.data.map((c) => ({\r\n\t\t\t\t\ttitle: `${c.DonePercent}% - ${c.CourseName}`,\r\n\t\t\t\t\tvalue: c.ID\r\n\t\t\t\t}));\r\n\t\t\t\tsetCourseList(fmCourseList);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('fetchCourseList', error.message);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchCourseList();\r\n\t}, [userInformation]);\r\n\r\n\tconst checkFileType = (file: File) => {\r\n\t\tconst { type, name } = file;\r\n\t\tif (type.includes('image')) {\r\n\t\t\treturn {\r\n\t\t\t\tname,\r\n\t\t\t\ttype,\r\n\t\t\t\tType: 2\r\n\t\t\t};\r\n\t\t}\r\n\t\tif (type.includes('audio')) {\r\n\t\t\treturn {\r\n\t\t\t\tname,\r\n\t\t\t\ttype,\r\n\t\t\t\tType: 3\r\n\t\t\t};\r\n\t\t}\r\n\t\tif (type.includes('video')) {\r\n\t\t\treturn {\r\n\t\t\t\tname,\r\n\t\t\t\ttype,\r\n\t\t\t\tType: 4\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tname,\r\n\t\t\tType: 0\r\n\t\t};\r\n\t};\r\n\r\n\tconst onUploadFile = async (fileList) => {\r\n\t\ttry {\r\n\t\t\tlet nextPost = 0;\r\n\t\t\tconst resArr = await Promise.all(\r\n\t\t\t\tfileList.reduce((newArr, file, idx) => {\r\n\t\t\t\t\tif (file.originFileObj) {\r\n\t\t\t\t\t\tnewArr.push(newsFeedApi.uploadFile(file.originFileObj));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnextPost = idx + 1;\r\n\t\t\t\t\t\tnewArr;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn newArr;\r\n\t\t\t\t}, [])\r\n\t\t\t);\r\n\t\t\tconst rs = resArr.map((r: any) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tuid: r.data.data,\r\n\t\t\t\t\turl: r.data.data,\r\n\t\t\t\t\t...checkFileType(fileList[nextPost])\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t\treturn rs;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('onUploadFile', error);\r\n\t\t}\r\n\t};\r\n\r\n\t// CREATE\r\n\tconst onCreateNewsFeed = async (data: {\r\n\t\tContent: string;\r\n\t\tTypeFile: number;\r\n\t\tNewsFeedFile: {\r\n\t\t\tname: string;\r\n\t\t\ttype: string;\r\n\t\t\tType?: number;\r\n\t\t\tpreview: string;\r\n\t\t\tuid: string;\r\n\t\t\turl: string;\r\n\t\t}[];\r\n\t\tBranchList: number[]; //TEAM\r\n\t\tGroupNewsFeedID: number; //GROUP\r\n\t}) => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'ADD_DATA',\r\n\t\t\tstatus: true\r\n\t\t});\r\n\t\ttry {\r\n\t\t\tconst { TypeFile, NewsFeedFile } = data;\r\n\t\t\tconst newData =\r\n\t\t\t\tTypeFile && NewsFeedFile?.length\r\n\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t...data,\r\n\t\t\t\t\t\t\tNewsFeedFile: data.NewsFeedFile.map((f) => ({\r\n\t\t\t\t\t\t\t\tType: f.Type,\r\n\t\t\t\t\t\t\t\tNameFile: f.url,\r\n\t\t\t\t\t\t\t\tUID: f.uid\r\n\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t: data;\r\n\t\t\tconst res = await newsFeedApi.add(newData);\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tconst newNewsFeedList = [res.data.data, ...newsFeedList];\r\n\t\t\t\tsetNewsFeedList(newNewsFeedList);\r\n\t\t\t\tsetTotalNewsFeed(newNewsFeedList.length);\r\n\t\t\t\tshowNoti('success', res.data.message);\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('onCreateNewsFeed', error.message);\r\n\t\t\tshowNoti('danger', error.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'ADD_DATA',\r\n\t\t\t\tstatus: false\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// EDIT\r\n\tconst onEditNewsFeed = (idx: number) => {\r\n\t\treturn async (data: {\r\n\t\t\tContent: string;\r\n\t\t\tColor: string;\r\n\t\t\tTypeFile: number;\r\n\t\t\tNewsFeedFile: {\r\n\t\t\t\tID?: number;\r\n\t\t\t\tname: string;\r\n\t\t\t\ttype: string;\r\n\t\t\t\tType?: number;\r\n\t\t\t\tpreview?: string;\r\n\t\t\t\tuid: string;\r\n\t\t\t\turl: string;\r\n\t\t\t\tEnable?: boolean;\r\n\t\t\t\t//\r\n\t\t\t}[];\r\n\t\t\tBranchList: number[]; //TEAM\r\n\t\t\tGroupNewsFeedID: number; //GROUP\r\n\t\t}) => {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'ADD_DATA',\r\n\t\t\t\tstatus: true\r\n\t\t\t});\r\n\t\t\ttry {\r\n\t\t\t\tconst { TypeFile, NewsFeedFile } = data;\r\n\t\t\t\tconst { NewsFeedFile: oldNewsFeedFileList } = newsFeedList[idx];\r\n\t\t\t\tlet newFileUploadList = null;\r\n\t\t\t\tif (TypeFile === 2) {\r\n\t\t\t\t\tnewFileUploadList = [...(oldNewsFeedFileList || []), ...(NewsFeedFile || [])].reduce((arr, f) => {\r\n\t\t\t\t\t\t// CLEAR DUPLICATE OLD FILE\r\n\t\t\t\t\t\tif (arr.some((newFile) => newFile.ID && newFile.ID === f.ID)) {\r\n\t\t\t\t\t\t\treturn arr;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (NewsFeedFile.some((fileForm) => fileForm.ID && fileForm.ID === f.ID)) {\r\n\t\t\t\t\t\t\tarr.push(f);\r\n\t\t\t\t\t\t} else if (!f.hasOwnProperty('ID')) {\r\n\t\t\t\t\t\t\t// DO NOT HAVE PROPERTY ID => NEW FILE\r\n\t\t\t\t\t\t\tarr.push({\r\n\t\t\t\t\t\t\t\t...f,\r\n\t\t\t\t\t\t\t\tType: f.Type,\r\n\t\t\t\t\t\t\t\tNameFile: f.url,\r\n\t\t\t\t\t\t\t\tUID: f.uid\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tarr.push({\r\n\t\t\t\t\t\t\t\t...f,\r\n\t\t\t\t\t\t\t\tEnable: false\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn arr;\r\n\t\t\t\t\t}, []);\r\n\t\t\t\t}\r\n\t\t\t\tif (TypeFile === 1 && NewsFeedFile?.length) {\r\n\t\t\t\t\tnewFileUploadList = NewsFeedFile;\r\n\t\t\t\t}\r\n\t\t\t\tconst newData = newFileUploadList\r\n\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t...data,\r\n\t\t\t\t\t\t\tNewsFeedFile: newFileUploadList\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t: data;\r\n\t\t\t\tconst res = await newsFeedApi.update(newData);\r\n\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\tconst newNewsFeedList = [...newsFeedList];\r\n\t\t\t\t\tnewNewsFeedList.splice(idx, 1, res.data.data);\r\n\t\t\t\t\tsetNewsFeedList(newNewsFeedList);\r\n\t\t\t\t\tshowNoti('success', res.data.message);\r\n\t\t\t\t}\r\n\t\t\t\treturn res;\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log('onEditNewsFeed', error.message);\r\n\t\t\t} finally {\r\n\t\t\t\tsetIsLoading({\r\n\t\t\t\t\ttype: 'ADD_DATA',\r\n\t\t\t\t\tstatus: false\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\t// DELETE\r\n\tconst onDelete = (idx: number) => {\r\n\t\treturn async () => {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'GET_ALL',\r\n\t\t\t\tstatus: true\r\n\t\t\t});\r\n\t\t\ttry {\r\n\t\t\t\tconst newNewsFeedList = [...newsFeedList];\r\n\t\t\t\tconst delObj = newNewsFeedList[idx];\r\n\t\t\t\tconst newDelObj = {\r\n\t\t\t\t\tID: delObj.ID,\r\n\t\t\t\t\tEnable: false\r\n\t\t\t\t};\r\n\t\t\t\tconst res = await newsFeedApi.delete(newDelObj);\r\n\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\tnewNewsFeedList.splice(idx, 1);\r\n\t\t\t\t\tsetNewsFeedList(newNewsFeedList);\r\n\t\t\t\t\tsetTotalNewsFeed(newNewsFeedList.length);\r\n\t\t\t\t\tshowNoti('success', res.data.message);\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log('onDelete', error.message);\r\n\t\t\t} finally {\r\n\t\t\t\tsetIsLoading({\r\n\t\t\t\t\ttype: 'GET_ALL',\r\n\t\t\t\t\tstatus: false\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\tconst fetchBackgroundNewsFeed = async () => {\r\n\t\ttry {\r\n\t\t\tconst res = await backgroundNewsFeedApi.getAll();\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tsetBackgroundList(res.data.data);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('fetchBackgroundNewsFeed', error.message);\r\n\t\t}\r\n\t};\r\n\r\n\t// --------------BACK TO HOME PAGE--------------\r\n\tconst onBackToHomePage = useDebounce(\r\n\t\t() => {\r\n\t\t\tsetFiltersData({\r\n\t\t\t\tname: null,\r\n\t\t\t\tidTeam: null,\r\n\t\t\t\tidGroup: null\r\n\t\t\t});\r\n\t\t\treset();\r\n\t\t},\r\n\t\t200,\r\n\t\t[]\r\n\t);\r\n\r\n\t// --------------FILTER--------------\r\n\tconst loadMore = () => {\r\n\t\t// PAGE INDEX >= 2, OTHERWISE DUPLICATE CALL API\r\n\t\tsetPageIndex(pageIndex + 1);\r\n\t\tif (pageIndex > 1) {\r\n\t\t\tfetchNewsFeedList();\r\n\t\t}\r\n\t};\r\n\r\n\tconst onFilters = (field: string, value: string | number) => {\r\n\t\tif (filtersData[field] === value) {\r\n\t\t\tonBackToHomePage();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst newFilters: FiltersData = {\r\n\t\t\tname: null,\r\n\t\t\tidTeam: null,\r\n\t\t\tidGroup: null\r\n\t\t};\r\n\t\tnewFilters[field] = value;\r\n\t\tsetFiltersData(newFilters);\r\n\t\treset();\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tfor (const key in filtersData) {\r\n\t\t\tif (filtersData[key]) {\r\n\t\t\t\tsetHasNextPage(true);\r\n\t\t\t}\r\n\t\t}\r\n\t}, [filtersData]);\r\n\r\n\t// --------------LIKE--------------\r\n\tconst fetchNewsFeedUserLiked = async () => {\r\n\t\ttry {\r\n\t\t\tif (!userInformation) return;\r\n\t\t\tlet res = await newsFeedLikeApi.getAll({\r\n\t\t\t\tselectAll: true,\r\n\t\t\t\tUserInformationID: userInformation.UserInformationID\r\n\t\t\t});\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tconst getNewsFeedIDList = res.data.data.map((n) => n.NewsFeedID);\r\n\t\t\t\tsetIDListUserLiked(getNewsFeedIDList);\r\n\t\t\t}\r\n\t\t\tif (res.status === 204) {\r\n\t\t\t\tsetIDListUserLiked([]);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('fetchNewsFeedUserLiked', error.message);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchNewsFeedUserLiked();\r\n\t}, [userInformation]);\r\n\r\n\tconst stoLike = useRef(null);\r\n\tconst DELAY = 500;\r\n\r\n\tconst onUserLikeNewsFeed = (idx: number) => {\r\n\t\tclearTimeout(stoLike.current);\r\n\t\treturn (NewsFeedID: number) => {\r\n\t\t\ttry {\r\n\t\t\t\tstoLike.current = setTimeout(async () => {\r\n\t\t\t\t\tconst data = {\r\n\t\t\t\t\t\tNewsFeedID\r\n\t\t\t\t\t};\r\n\t\t\t\t\tlet res = await newsFeedLikeApi.add(data);\r\n\t\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\t\tconst newNewsFeedList = [...newsFeedList];\r\n\t\t\t\t\t\tconst newNewsFeed: INewsFeed = {\r\n\t\t\t\t\t\t\t...newNewsFeedList[idx]\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tif (res.data.data.Enable) {\r\n\t\t\t\t\t\t\tnewNewsFeedList.splice(idx, 1, {\r\n\t\t\t\t\t\t\t\t...newNewsFeed,\r\n\t\t\t\t\t\t\t\tLikeCount: ++newNewsFeedList[idx].LikeCount\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tsetIDListUserLiked([...idListUserLiked, res.data.data.NewsFeedID]);\r\n\t\t\t\t\t\t\tsetNewsFeedList(newNewsFeedList);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnewNewsFeedList.splice(idx, 1, {\r\n\t\t\t\t\t\t\t\t...newNewsFeed,\r\n\t\t\t\t\t\t\t\tLikeCount: --newNewsFeedList[idx].LikeCount\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tconst newIDListUserLiked = idListUserLiked.filter((id) => id !== res.data.data.NewsFeedID);\r\n\t\t\t\t\t\t\tsetIDListUserLiked(newIDListUserLiked);\r\n\t\t\t\t\t\t\tsetNewsFeedList(newNewsFeedList);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, DELAY);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log('onUserLikeNewsFeed', error.message);\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\t// --------------COMMENT--------------\r\n\tconst onComment = async (data: { CommentContent: string; NewsFeedID: number }) => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'ADD_COMMENT',\r\n\t\t\tstatus: true\r\n\t\t});\r\n\t\ttry {\r\n\t\t\tconst res = await newsFeedCommentApi.add(data);\r\n\t\t\treturn res;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('onComment', error.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'ADD_COMMENT',\r\n\t\t\t\tstatus: false\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst fetchComment = async (NewsFeedID: number) => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: `FETCH_COMMENT_${NewsFeedID}`,\r\n\t\t\tstatus: true\r\n\t\t});\r\n\t\ttry {\r\n\t\t\tconst res = await newsFeedCommentApi.getAll({\r\n\t\t\t\tselectAll: true,\r\n\t\t\t\tNewsFeedID\r\n\t\t\t});\r\n\t\t\treturn res;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('fetchComment', error.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: `FETCH_COMMENT_${NewsFeedID}`,\r\n\t\t\t\tstatus: false\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// --------------REPLY--------------\r\n\tconst onReplyComment = async (data) => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'ADD_COMMENT',\r\n\t\t\tstatus: true\r\n\t\t});\r\n\t\ttry {\r\n\t\t\tconst res = await newsFeedCommentReplyApi.add(data);\r\n\t\t\treturn res;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('onReplyComment', error.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'ADD_COMMENT',\r\n\t\t\t\tstatus: false\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst fetchReplyComment = async (NewsFeedCommentID: number) => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: `FETCH_REPLY_COMMENT_${NewsFeedCommentID}`,\r\n\t\t\tstatus: true\r\n\t\t});\r\n\t\ttry {\r\n\t\t\tconst res = await newsFeedCommentReplyApi.getAll({\r\n\t\t\t\tselectAll: true,\r\n\t\t\t\tNewsFeedCommentID\r\n\t\t\t});\r\n\t\t\treturn res;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('fetchReplyComment', error.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: `FETCH_REPLY_COMMENT_${NewsFeedCommentID}`,\r\n\t\t\t\tstatus: false\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// GROUP\r\n\tconst fetchInfoGroup = async (idGroup: number) => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'FETCH_INFO_GROUP',\r\n\t\t\tstatus: true\r\n\t\t});\r\n\t\ttry {\r\n\t\t\tlet [info, userList] = await Promise.all([\r\n\t\t\t\tgroupNewsFeedApi.getByID(idGroup),\r\n\t\t\t\tuserGroupNewsFeedApi.getAll({\r\n\t\t\t\t\tselectAll: true,\r\n\t\t\t\t\tGroupNewsFeedID: idGroup\r\n\t\t\t\t})\r\n\t\t\t]);\r\n\t\t\tif (info.status === 200) {\r\n\t\t\t\tsetInfoGroup((prevState) => ({\r\n\t\t\t\t\t...prevState,\r\n\t\t\t\t\tinfo: info.data.data\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t\tif (userList.status === 200) {\r\n\t\t\t\tsetInfoGroup((prevState) => ({\r\n\t\t\t\t\t...prevState,\r\n\t\t\t\t\tuserList: userList.data.data\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('fetchInfoGroup', error.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({ type: 'FETCH_INFO_GROUP', status: false });\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (filtersData.idGroup) {\r\n\t\t\tfetchInfoGroup(filtersData.idGroup);\r\n\t\t}\r\n\t}, [filtersData.idGroup]);\r\n\r\n\tconst onCreateGroup = async (data: { Name: string; CourseID: number; BackGround: string }) => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'ADD_DATA',\r\n\t\t\tstatus: true\r\n\t\t});\r\n\t\ttry {\r\n\t\t\tconst res = await groupNewsFeedApi.add(data);\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tconst newGroup: IOptionCommon = {\r\n\t\t\t\t\ttitle: res.data.data.Name,\r\n\t\t\t\t\tvalue: res.data.data.ID\r\n\t\t\t\t};\r\n\t\t\t\tconst newGroupOptionList = [newGroup, ...optionList.groupOptionList];\r\n\t\t\t\tsetOptionList({ ...optionList, groupOptionList: newGroupOptionList });\r\n\t\t\t\tshowNoti('success', res.data.message);\r\n\t\t\t\tonFilters('idGroup', newGroup.value);\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'ADD_DATA',\r\n\t\t\t\tstatus: false\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst onUpdateGroup = async (data: IGroupNewsFeed) => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'ADD_DATA',\r\n\t\t\tstatus: true\r\n\t\t});\r\n\t\ttry {\r\n\t\t\tconst res = await groupNewsFeedApi.update(data);\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tconst newGroupOptionList = [...optionList.groupOptionList].map((t) => {\r\n\t\t\t\t\tif (t.value === data.ID) {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t...t,\r\n\t\t\t\t\t\t\ttitle: data.Name\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn t;\r\n\t\t\t\t});\r\n\t\t\t\tsetOptionList({\r\n\t\t\t\t\t...optionList,\r\n\t\t\t\t\tgroupOptionList: newGroupOptionList\r\n\t\t\t\t});\r\n\t\t\t\tsetInfoGroup({\r\n\t\t\t\t\t...infoGroup,\r\n\t\t\t\t\tinfo: data\r\n\t\t\t\t});\r\n\t\t\t\tshowNoti('success', res.data.message);\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'ADD_DATA',\r\n\t\t\t\tstatus: false\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst onDeleteGroup = async () => {\r\n\t\ttry {\r\n\t\t\tconst data = {\r\n\t\t\t\tID: filtersData.idGroup,\r\n\t\t\t\tEnable: false\r\n\t\t\t};\r\n\t\t\tconst res = await groupNewsFeedApi.update(data);\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tconst newGroupOptionList = [...optionList.groupOptionList].filter((g) => g.value !== filtersData.idGroup);\r\n\t\t\t\treset();\r\n\t\t\t\tsetOptionList({\r\n\t\t\t\t\t...optionList,\r\n\t\t\t\t\tgroupOptionList: newGroupOptionList\r\n\t\t\t\t});\r\n\t\t\t\tsetFiltersData({\r\n\t\t\t\t\tname: null,\r\n\t\t\t\t\tidTeam: null,\r\n\t\t\t\t\tidGroup: null\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('onDeleteGroup', error.message);\r\n\t\t}\r\n\t};\r\n\r\n\t// ADD USER TO GROUP\r\n\tconst fetchUserByRole = async (roleID: number) => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'FETCH_USER_IN_GROUP',\r\n\t\t\tstatus: true\r\n\t\t});\r\n\t\ttry {\r\n\t\t\tconst res = await userInformationApi.getAllParams({\r\n\t\t\t\tRoleID: roleID,\r\n\t\t\t\tpageSize: 9999\r\n\t\t\t});\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tconst fmOptionList = fmSelectArr(res.data.data, 'FullNameUnicode', 'UserInformationID');\r\n\t\t\t\tsetUserOptionList(fmOptionList);\r\n\t\t\t}\r\n\t\t\tif (res.status === 204) {\r\n\t\t\t\tsetUserOptionList([]);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('fetchUserByRole', error.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'FETCH_USER_IN_GROUP',\r\n\t\t\t\tstatus: false\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst addUserToGroup = async (data: { RoleUser: number; UserInformationID: number; RoleID: number }) => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'ADD_DATA',\r\n\t\t\tstatus: true\r\n\t\t});\r\n\t\ttry {\r\n\t\t\tconst { UserInformationID, RoleID } = data;\r\n\t\t\tconst newData = {\r\n\t\t\t\tGroupNewsFeedID: filtersData.idGroup,\r\n\t\t\t\tUserInformationID,\r\n\t\t\t\tRoleID\r\n\t\t\t};\r\n\t\t\tconst res = await userGroupNewsFeedApi.add(newData);\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tconst newUserList = [...infoGroup.userList, res.data.data];\r\n\t\t\t\tsetInfoGroup({\r\n\t\t\t\t\t...infoGroup,\r\n\t\t\t\t\tuserList: newUserList\r\n\t\t\t\t});\r\n\t\t\t\tshowNoti('success', 'Thêm thành công');\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'ADD_DATA',\r\n\t\t\t\tstatus: false\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst removeUser = async (idUser: number) => {\r\n\t\ttry {\r\n\t\t\tconst data = {\r\n\t\t\t\tID: idUser,\r\n\t\t\t\tEnable: false\r\n\t\t\t};\r\n\t\t\tconst res = await userGroupNewsFeedApi.update(data);\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tconst newUserList = [...infoGroup.userList].filter((u) => u.ID !== idUser);\r\n\t\t\t\tsetInfoGroup({\r\n\t\t\t\t\t...infoGroup,\r\n\t\t\t\t\tuserList: newUserList\r\n\t\t\t\t});\r\n\t\t\t\tshowNoti('success', res.data.message);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('onDeleteGroup', error.message);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<TitlePage title=\"Tin tức\" />\r\n\t\t\t<div className=\"row wrap-newsfeed\">\r\n\t\t\t\t<div className=\"col-md-8 col-12\">\r\n\t\t\t\t\t<div className=\"list-newsfeed\">\r\n\t\t\t\t\t\t{filtersData.idGroup && (\r\n\t\t\t\t\t\t\t<BannerGroup\r\n\t\t\t\t\t\t\t\tinfoGroup={infoGroup}\r\n\t\t\t\t\t\t\t\ttotalNewsFeed={totalNewsFeed}\r\n\t\t\t\t\t\t\t\tbannerGroupActionListComponent={\r\n\t\t\t\t\t\t\t\t\tcheckAuthorization() === 'Accept' ? (\r\n\t\t\t\t\t\t\t\t\t\t<ul className=\"more-list\">\r\n\t\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<GroupForm\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tisUpdate={true}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdataUpdate={infoGroup.info}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcourseList={courseList}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleSubmit={onUpdateGroup}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<AddUserForm\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\troleOptionList={roleOptionList}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuserOptionList={userOptionList}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\troleMemberOptionList={roleMemberOptionList}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfetchUserByRole={fetchUserByRole}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleSubmit={addUserToGroup}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<RemoveUser userList={infoGroup.userList} handleDelete={removeUser} />\r\n\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<DeleteGroup handleDelete={onDeleteGroup} />\r\n\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t{!userInformation || userInformation['RoleID'] === 3 || userInformation['RoleID'] === 4 ? null : (\r\n\t\t\t\t\t\t\t<CreateNewsFeed\r\n\t\t\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t\t\t\tdataUser={userInformation}\r\n\t\t\t\t\t\t\t\thandleUploadFile={onUploadFile}\r\n\t\t\t\t\t\t\t\thandleSubmit={onCreateNewsFeed}\r\n\t\t\t\t\t\t\t\tfetchBackgroundNewsFeed={fetchBackgroundNewsFeed}\r\n\t\t\t\t\t\t\t\tbackgroundList={backgroundList}\r\n\t\t\t\t\t\t\t\tfiltersData={filtersData}\r\n\t\t\t\t\t\t\t\toptionList={optionList}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t<ListNewsFeed>\r\n\t\t\t\t\t\t\t{newsFeedList.map((item: INewsFeed, idx) => {\r\n\t\t\t\t\t\t\t\tconst isUserLiked = idListUserLiked.includes(item.ID);\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<NewsFeedItem\r\n\t\t\t\t\t\t\t\t\t\tkey={item.ID}\r\n\t\t\t\t\t\t\t\t\t\thandleFilters={onFilters}\r\n\t\t\t\t\t\t\t\t\t\tisUserLiked={isUserLiked}\r\n\t\t\t\t\t\t\t\t\t\thandleUserLikeNewsFeed={onUserLikeNewsFeed(idx)}\r\n\t\t\t\t\t\t\t\t\t\thandleComment={onComment}\r\n\t\t\t\t\t\t\t\t\t\tfetchComment={fetchComment}\r\n\t\t\t\t\t\t\t\t\t\thandleReplyComment={onReplyComment}\r\n\t\t\t\t\t\t\t\t\t\tfetchReplyComment={fetchReplyComment}\r\n\t\t\t\t\t\t\t\t\t\titem={item}\r\n\t\t\t\t\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t\t\t\t\t\tuserComment={userInformation}\r\n\t\t\t\t\t\t\t\t\t\tmoreActionComponent={\r\n\t\t\t\t\t\t\t\t\t\t\tcheckAuthorization(item.UserInformationID) === 'Accept' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ul className=\"more-list\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item.UserInformationID === userInformation?.UserInformationID && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CreateNewsFeed\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={item.ID}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisUpdate={true}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titemUpdate={item}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdataUser={userInformation}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleUploadFile={onUploadFile}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleSubmit={onEditNewsFeed(idx)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfetchBackgroundNewsFeed={fetchBackgroundNewsFeed}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundList={backgroundList}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptionList={optionList}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<DeleteNewsFeed text=\"bảng tin này\" handleDelete={onDelete(idx)} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</ListNewsFeed>\r\n\r\n\t\t\t\t\t\t{hasNextPage && (\r\n\t\t\t\t\t\t\t<Waypoint onEnter={loadMore}>\r\n\t\t\t\t\t\t\t\t<ul className=\"list-nf skeleton\">\r\n\t\t\t\t\t\t\t\t\t<li className=\"item-nf\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"newsfeed\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Skeleton avatar paragraph={{ rows: 0 }} active />\r\n\t\t\t\t\t\t\t\t\t\t\t<Skeleton active paragraph={{ rows: 2 }} />\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t<li className=\"item-nf\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"newsfeed\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Skeleton avatar paragraph={{ rows: 0 }} active />\r\n\t\t\t\t\t\t\t\t\t\t\t<Skeleton active paragraph={{ rows: 2 }} />\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t<li className=\"item-nf\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"newsfeed\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Skeleton avatar paragraph={{ rows: 0 }} active />\r\n\t\t\t\t\t\t\t\t\t\t\t<Skeleton active paragraph={{ rows: 2 }} />\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</Waypoint>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{emptyNewsFeed && (\r\n\t\t\t\t\t\t<div className=\"mt-4\">\r\n\t\t\t\t\t\t\t<Empty />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"col-md-4 col-12\">\r\n\t\t\t\t\t<SideBarNewsFeed\r\n\t\t\t\t\t\toptionList={optionList}\r\n\t\t\t\t\t\tfiltersData={filtersData}\r\n\t\t\t\t\t\thandleBack={onBackToHomePage}\r\n\t\t\t\t\t\thandleFilters={onFilters}\r\n\t\t\t\t\t\tgroupFormComponent={\r\n\t\t\t\t\t\t\tcheckAuthorization() === 'Accept' ? (\r\n\t\t\t\t\t\t\t\t<GroupForm isLoading={isLoading} courseList={courseList} handleSubmit={onCreateGroup} />\r\n\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default NewsFeed;\r\n"]},"metadata":{},"sourceType":"module"}