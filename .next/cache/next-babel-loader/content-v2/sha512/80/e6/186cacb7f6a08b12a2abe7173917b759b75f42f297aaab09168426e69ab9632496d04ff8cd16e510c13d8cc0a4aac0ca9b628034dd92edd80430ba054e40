{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Profile\\\\ProfileCustomer\\\\InfoPaymentCard\\\\PaymentExamTable.tsx\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport { useEffect, useRef, useState } from 'react';\nimport { invoiceApi } from '~/apiBase';\nimport { studentExamServicesApi } from '~/apiBase/customer/student/student-exam-services';\nimport { ExpandPaymentRow } from '~/components/Elements/ExpandBox';\nimport ExpandTable from '~/components/ExpandTable';\nimport { useWrap } from '~/context/wrap';\nimport { numberWithCommas } from '~/utils/functions';\nPaymentExamTable.propTypes = {\n  studentID: PropTypes.number\n};\nPaymentExamTable.defaultProps = {\n  studentID: 0\n};\n\nfunction PaymentExamTable(props) {\n  _s();\n\n  var _this = this;\n\n  var studentID = props.studentID;\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti,\n      pageSize = _useWrap.pageSize;\n\n  var _useState = useState({\n    type: null,\n    status: false\n  }),\n      isLoading = _useState[0],\n      setIsLoading = _useState[1];\n\n  var _useState2 = useState([]),\n      paymentHistoryList = _useState2[0],\n      setPaymentHistoryList = _useState2[1];\n\n  var _useState3 = useState(null),\n      totalPage = _useState3[0],\n      setTotalPage = _useState3[1];\n\n  var _useState4 = useState([]),\n      infoInvoiceList = _useState4[0],\n      setInfoInvoiceList = _useState4[1];\n\n  var listFieldInit = {\n    pageIndex: 1,\n    pageSize: pageSize,\n    UserInformationID: studentID\n  };\n  var refValue = useRef({\n    pageIndex: 1,\n    pageSize: 10\n  });\n\n  var _useState5 = useState(listFieldInit),\n      filters = _useState5[0],\n      setFilters = _useState5[1]; // PAGINATION\n\n\n  var getPagination = function getPagination(pageIndex, pageSize) {\n    if (!pageSize) pageSize = 10;\n    refValue.current = _objectSpread(_objectSpread({}, refValue.current), {}, {\n      pageSize: pageSize,\n      pageIndex: pageIndex\n    });\n    setFilters(_objectSpread(_objectSpread({}, filters), refValue.current));\n  };\n\n  var getExamOfStudent = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              setIsLoading({\n                type: 'GET_ALL',\n                status: true\n              });\n              _context.next = 4;\n              return studentExamServicesApi.getAll(filters);\n\n            case 4:\n              res = _context.sent;\n\n              if (res.status === 200) {\n                setPaymentHistoryList(res.data.data);\n                setTotalPage(res.data.totalRow);\n              }\n\n              if (res.status === 204) {\n                setPaymentHistoryList([]);\n              }\n\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](0);\n              showNoti('danger', _context.t0.message);\n\n            case 12:\n              _context.prev = 12;\n              setIsLoading({\n                type: 'GET_ALL',\n                status: false\n              });\n              return _context.finish(12);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 9, 12, 15]]);\n    }));\n\n    return function getExamOfStudent() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    getExamOfStudent();\n  }, [filters]);\n  var columns = [{\n    title: 'Ngày tạo',\n    dataIndex: 'CreatedOn',\n    render: function render(date) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-black\",\n        children: moment(date).format('DD/MM/YYYY')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 22\n      }, _this);\n    }\n  }, {\n    title: 'Dịch vụ',\n    dataIndex: 'ServiceName'\n  }, {\n    title: 'Tổng thanh toán',\n    dataIndex: 'Price',\n    render: function render(price) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: numberWithCommas(price)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 12\n      }, _this);\n    }\n  }, {\n    title: 'Giảm giá',\n    dataIndex: 'Reduced',\n    render: function render(price) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: numberWithCommas(price)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 12\n      }, _this);\n    }\n  }, {\n    title: '\tĐã thanh toán',\n    dataIndex: 'Paid',\n    render: function render(price) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: numberWithCommas(price)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 12\n      }, _this);\n    }\n  }, {\n    title: 'Hình thức',\n    dataIndex: 'PaymentMethodsName'\n  }]; //\n\n  var fetchInfoInvoice = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(ID) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              setIsLoading({\n                type: 'FETCH_INFO_INVOICE',\n                status: true\n              });\n              _context2.next = 4;\n              return invoiceApi.getAll({\n                PayID: ID,\n                StyleID: 2\n              });\n\n            case 4:\n              res = _context2.sent;\n\n              if (res.status === 200) {\n                setInfoInvoiceList(res.data.data);\n              }\n\n              if (res.status === 204) {\n                setInfoInvoiceList(null);\n              }\n\n              _context2.next = 12;\n              break;\n\n            case 9:\n              _context2.prev = 9;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.log(fetchInfoInvoice, _context2.t0.message);\n\n            case 12:\n              _context2.prev = 12;\n              setIsLoading({\n                type: 'FETCH_INFO_INVOICE',\n                status: false\n              });\n              return _context2.finish(12);\n\n            case 15:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 9, 12, 15]]);\n    }));\n\n    return function fetchInfoInvoice(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var expandableObj = {\n    expandedRowRender: function expandedRowRender(record) {\n      return /*#__PURE__*/_jsxDEV(ExpandPaymentRow, {\n        isLoading: isLoading,\n        dataRow: record,\n        infoInvoiceList: infoInvoiceList\n      }, record.ID, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 4\n      }, _this);\n    },\n    onExpand: function onExpand(expanded, record) {\n      if (expanded) {\n        fetchInfoInvoice(record.ID);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(ExpandTable, {\n    loading: isLoading,\n    currentPage: filters.pageIndex,\n    totalPage: totalPage,\n    getPagination: getPagination,\n    noScroll: true,\n    dataSource: paymentHistoryList,\n    columns: columns,\n    Extra: /*#__PURE__*/_jsxDEV(\"h5\", {\n      children: \"L\\u1ECBch s\\u1EED thanh to\\xE1n d\\u1ECBch v\\u1EE5\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 11\n    }, this),\n    expandable: expandableObj\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 159,\n    columnNumber: 3\n  }, this);\n}\n\n_s(PaymentExamTable, \"idV5ZApoRjIjTsQA+DlWcQORjtM=\", false, function () {\n  return [useWrap];\n});\n\n_c = PaymentExamTable;\nexport default PaymentExamTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"PaymentExamTable\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Profile/ProfileCustomer/InfoPaymentCard/PaymentExamTable.tsx"],"names":["moment","PropTypes","useEffect","useRef","useState","invoiceApi","studentExamServicesApi","ExpandPaymentRow","ExpandTable","useWrap","numberWithCommas","PaymentExamTable","propTypes","studentID","number","defaultProps","props","showNoti","pageSize","type","status","isLoading","setIsLoading","paymentHistoryList","setPaymentHistoryList","totalPage","setTotalPage","infoInvoiceList","setInfoInvoiceList","listFieldInit","pageIndex","UserInformationID","refValue","filters","setFilters","getPagination","current","getExamOfStudent","getAll","res","data","totalRow","message","columns","title","dataIndex","render","date","format","price","fetchInfoInvoice","ID","PayID","StyleID","console","log","expandableObj","expandedRowRender","record","onExpand","expanded"],"mappings":"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","sourcesContent":["import moment from 'moment'\r\nimport PropTypes from 'prop-types'\r\nimport { useEffect, useRef, useState } from 'react'\r\nimport { invoiceApi } from '~/apiBase'\r\nimport { studentExamServicesApi } from '~/apiBase/customer/student/student-exam-services'\r\nimport { ExpandPaymentRow } from '~/components/Elements/ExpandBox'\r\nimport ExpandTable from '~/components/ExpandTable'\r\nimport { useWrap } from '~/context/wrap'\r\nimport { numberWithCommas } from '~/utils/functions'\r\n\r\nPaymentExamTable.propTypes = {\r\n\tstudentID: PropTypes.number\r\n}\r\nPaymentExamTable.defaultProps = {\r\n\tstudentID: 0\r\n}\r\n\r\nfunction PaymentExamTable(props) {\r\n\tconst { studentID } = props\r\n\tconst { showNoti, pageSize } = useWrap()\r\n\tconst [isLoading, setIsLoading] = useState({\r\n\t\ttype: null,\r\n\t\tstatus: false\r\n\t})\r\n\tconst [paymentHistoryList, setPaymentHistoryList] = useState<IStudentExamServices[]>([])\r\n\tconst [totalPage, setTotalPage] = useState(null)\r\n\tconst [infoInvoiceList, setInfoInvoiceList] = useState<IInvoice[]>([])\r\n\r\n\tconst listFieldInit = {\r\n\t\tpageIndex: 1,\r\n\t\tpageSize: pageSize,\r\n\r\n\t\tUserInformationID: studentID\r\n\t}\r\n\tlet refValue = useRef({\r\n\t\tpageIndex: 1,\r\n\t\tpageSize: 10\r\n\t})\r\n\tconst [filters, setFilters] = useState(listFieldInit)\r\n\r\n\t// PAGINATION\r\n\tconst getPagination = (pageIndex: number, pageSize: number) => {\r\n\t\tif (!pageSize) pageSize = 10\r\n\t\trefValue.current = {\r\n\t\t\t...refValue.current,\r\n\t\t\tpageSize,\r\n\t\t\tpageIndex\r\n\t\t}\r\n\t\tsetFilters({\r\n\t\t\t...filters,\r\n\t\t\t...refValue.current\r\n\t\t})\r\n\t}\r\n\r\n\tconst getExamOfStudent = async () => {\r\n\t\ttry {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'GET_ALL',\r\n\t\t\t\tstatus: true\r\n\t\t\t})\r\n\t\t\tconst res = await studentExamServicesApi.getAll(filters)\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tsetPaymentHistoryList(res.data.data)\r\n\t\t\t\tsetTotalPage(res.data.totalRow)\r\n\t\t\t}\r\n\t\t\tif (res.status === 204) {\r\n\t\t\t\tsetPaymentHistoryList([])\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'GET_ALL',\r\n\t\t\t\tstatus: false\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tgetExamOfStudent()\r\n\t}, [filters])\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Ngày tạo',\r\n\t\t\tdataIndex: 'CreatedOn',\r\n\t\t\trender: (date) => <p className=\"font-weight-black\">{moment(date).format('DD/MM/YYYY')}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Dịch vụ',\r\n\t\t\tdataIndex: 'ServiceName'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Tổng thanh toán',\r\n\t\t\tdataIndex: 'Price',\r\n\t\t\trender: (price) => {\r\n\t\t\t\treturn <p>{numberWithCommas(price)}</p>\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Giảm giá',\r\n\t\t\tdataIndex: 'Reduced',\r\n\t\t\trender: (price) => {\r\n\t\t\t\treturn <p>{numberWithCommas(price)}</p>\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '\tĐã thanh toán',\r\n\t\t\tdataIndex: 'Paid',\r\n\t\t\trender: (price) => {\r\n\t\t\t\treturn <p>{numberWithCommas(price)}</p>\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Hình thức',\r\n\t\t\tdataIndex: 'PaymentMethodsName'\r\n\t\t}\r\n\t]\r\n\r\n\t//\r\n\tconst fetchInfoInvoice = async (ID: number) => {\r\n\t\ttry {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'FETCH_INFO_INVOICE',\r\n\t\t\t\tstatus: true\r\n\t\t\t})\r\n\t\t\tconst res = await invoiceApi.getAll({\r\n\t\t\t\tPayID: ID,\r\n\t\t\t\tStyleID: 2\r\n\t\t\t})\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tsetInfoInvoiceList(res.data.data)\r\n\t\t\t}\r\n\t\t\tif (res.status === 204) {\r\n\t\t\t\tsetInfoInvoiceList(null)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(fetchInfoInvoice, error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'FETCH_INFO_INVOICE',\r\n\t\t\t\tstatus: false\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst expandableObj = {\r\n\t\texpandedRowRender: (record) => (\r\n\t\t\t<ExpandPaymentRow isLoading={isLoading} key={record.ID} dataRow={record} infoInvoiceList={infoInvoiceList} />\r\n\t\t),\r\n\t\tonExpand: (expanded, record) => {\r\n\t\t\tif (expanded) {\r\n\t\t\t\tfetchInfoInvoice(record.ID)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ExpandTable\r\n\t\t\tloading={isLoading}\r\n\t\t\tcurrentPage={filters.pageIndex}\r\n\t\t\ttotalPage={totalPage}\r\n\t\t\tgetPagination={getPagination}\r\n\t\t\tnoScroll\r\n\t\t\tdataSource={paymentHistoryList}\r\n\t\t\tcolumns={columns}\r\n\t\t\tExtra={<h5>Lịch sử thanh toán dịch vụ</h5>}\r\n\t\t\texpandable={expandableObj}\r\n\t\t/>\r\n\t)\r\n}\r\nexport default PaymentExamTable\r\n"]},"metadata":{},"sourceType":"module"}