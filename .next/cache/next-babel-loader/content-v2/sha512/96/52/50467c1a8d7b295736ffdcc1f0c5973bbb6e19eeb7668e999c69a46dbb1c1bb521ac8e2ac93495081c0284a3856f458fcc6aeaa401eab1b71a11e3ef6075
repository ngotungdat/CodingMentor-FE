{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\QuestionBank\\\\CreateQuestionForm.tsx\";\nimport { AppstoreAddOutlined, FormOutlined, PlusOutlined } from '@ant-design/icons';\nimport { Drawer, Modal, Spin, Tooltip } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { Edit, Plus } from 'react-feather';\nimport { exerciseGroupApi } from '~/apiBase';\nimport { useWrap } from '~/context/wrap';\nimport ChoiceForm from './QuestionFormType/ChoiceForm';\nimport DragForm from './QuestionFormType/DragForm';\nimport GroupForm from './QuestionFormType/GroupForm';\nimport MapForm from './QuestionFormType/MapForm';\nimport MultipleForm from './QuestionFormType/MultipleForm';\nimport SpeakingForm from './QuestionFormType/SpeakingForm';\nimport TypingForm from './QuestionFormType/TypingForm';\nimport WrittingForm from './QuestionFormType/WrittingForm';\n\nconst CreateQuestionForm = props => {\n  const {\n    questionData,\n    isGroup,\n    onFetchData,\n    handlePopover,\n    onEditData,\n    onAddData,\n    getActiveID,\n    onError\n  } = props;\n  const {\n    showNoti\n  } = useWrap();\n  const {\n    0: visible,\n    1: setVisible\n  } = useState(false);\n  const {\n    0: isSubmit,\n    1: setIsSubmit\n  } = useState(false);\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const {\n    0: titleForm,\n    1: setTitleForm\n  } = useState('');\n  const {\n    0: changeData,\n    1: setChangeData\n  } = useState(false);\n  const {\n    0: isModalVisible,\n    1: setIsModalVisible\n  } = useState(false);\n  const {\n    0: question,\n    1: setQuestion\n  } = useState({});\n\n  const showDrawer = () => {\n    console.log(questionData);\n\n    if (!!(questionData !== null && questionData !== void 0 && questionData.Level) || !!(questionData !== null && questionData !== void 0 && questionData.Type) || (questionData === null || questionData === void 0 ? void 0 : questionData.Type) !== 0) {\n      setVisible(true);\n    } else {\n      showNoti('danger', 'Bạn phải thêm các thông tin bên phải trước');\n      !!onError && onError('invalidData');\n    }\n  };\n\n  const onClose = e => {\n    e.stopPropagation();\n\n    if (changeData) {\n      setIsModalVisible(true);\n    } else {\n      setVisible(false);\n      setChangeData(false);\n    }\n  }; // ACTION TABLE\n\n\n  const clearID = () => {\n    for (let i = 0; i < question.ExerciseList.length; i++) {\n      question.ExerciseList[i].ExerciseAnswer.forEach(item => {\n        if (item.isAdd) {\n          delete item.ID;\n        }\n      });\n    }\n\n    return question;\n  };\n\n  const updateData = async () => {\n    let newData = clearID();\n\n    try {\n      var _res$data;\n\n      const res = await exerciseGroupApi.update(newData);\n      showNoti('success', res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.message);\n    } catch (error) {\n      console.log(error);\n      showNoti('danger', (error === null || error === void 0 ? void 0 : error.message) || error);\n    } finally {\n      onFetchData();\n      setIsLoading(false);\n    }\n  };\n\n  const handleClose = async e => {\n    e.stopPropagation();\n    setIsModalVisible(false);\n    setVisible(false);\n    setChangeData(false);\n  };\n\n  const handleCancel = () => {\n    setIsModalVisible(false);\n  }; // ON SUBMIT DATA\n\n\n  const onSubmitData = () => {\n    setIsLoading(true);\n    isSubmit && (questionData === null || questionData === void 0 ? void 0 : questionData.Type) == 3 && updateData();\n    isSubmit && (questionData === null || questionData === void 0 ? void 0 : questionData.Type) == 2 && updateData();\n    !isSubmit && setIsSubmit(true);\n  };\n\n  const onSuccessSubmit = data => {\n    if (isSubmit) {\n      setIsSubmit(false);\n      setIsLoading(false);\n      setChangeData(false);\n      questionData.ID ? onEditData(data) : onAddData(data);\n      setVisible(false);\n    }\n  }; // ON EDIT GROUP ITEM\n\n\n  const onEditGroupItem = () => {\n    handlePopover();\n    showDrawer();\n  }; // ON ADD DATA TO GROUP\n\n\n  const onAddDataToGroup = () => {\n    handlePopover();\n    showDrawer();\n  }; // RENDER FORM GROUP\n\n\n  const renderFormGroup = () => {\n    let type = questionData.Type;\n\n    if (type) {\n      switch (type) {\n        default:\n          return /*#__PURE__*/_jsxDEV(GroupForm, {\n            visible: visible,\n            questionData: questionData,\n            isSubmit: isSubmit,\n            changeIsSubmit: onSuccessSubmit,\n            changeData: () => !changeData && setChangeData(true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 7\n          }, this);\n      }\n    } else {\n      if (!(isGroup !== null && isGroup !== void 0 && isGroup.status)) {\n        renderFormSingle();\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-weight-bold\",\n          children: \"Vui l\\xF2ng ch\\u1ECDn d\\u1EA1ng c\\xE2u h\\u1ECFi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 12\n        }, this);\n      }\n    }\n  }; // RENDER FORM SINGLE\n\n\n  const renderFormSingle = () => {\n    let type = questionData === null || questionData === void 0 ? void 0 : questionData.Type;\n\n    switch (type) {\n      case 0:\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-weight-bold\",\n          children: \"Vui l\\xF2ng ch\\u1ECDn d\\u1EA1ng c\\xE2u h\\u1ECFi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 12\n        }, this);\n        break;\n\n      case 1:\n        return /*#__PURE__*/_jsxDEV(ChoiceForm, {\n          isGroup: isGroup,\n          visible: visible,\n          questionData: questionData,\n          isSubmit: isSubmit,\n          changeIsSubmit: data => onSuccessSubmit(data),\n          changeData: () => !changeData && setChangeData(true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 6\n        }, this);\n        break;\n\n      case 2:\n        return /*#__PURE__*/_jsxDEV(DragForm, {\n          isGroup: isGroup,\n          visible: visible,\n          questionData: questionData,\n          isSubmit: isSubmit,\n          changeIsSubmit: setIsSubmit,\n          changeData: () => !changeData && setChangeData(true),\n          onChange: e => setQuestion(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 6\n        }, this);\n        break;\n\n      case 3:\n        return /*#__PURE__*/_jsxDEV(TypingForm, {\n          isGroup: isGroup,\n          visible: visible,\n          questionData: questionData,\n          isSubmit: isSubmit,\n          changeIsSubmit: setIsSubmit,\n          changeData: () => !changeData && setChangeData(true),\n          onChange: e => setQuestion(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 6\n        }, this);\n        break;\n\n      case 4:\n        return /*#__PURE__*/_jsxDEV(MultipleForm, {\n          isGroup: isGroup,\n          visible: visible,\n          questionData: questionData,\n          isSubmit: isSubmit,\n          changeIsSubmit: data => onSuccessSubmit(data),\n          changeData: () => !changeData && setChangeData(true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 6\n        }, this);\n        break;\n\n      case 5:\n        return /*#__PURE__*/_jsxDEV(MapForm, {\n          isGroup: isGroup,\n          visible: visible,\n          questionData: questionData,\n          isSubmit: isSubmit,\n          changeIsSubmit: onSuccessSubmit,\n          changeData: () => !changeData && setChangeData(true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 6\n        }, this);\n        break;\n\n      case 6:\n        return /*#__PURE__*/_jsxDEV(WrittingForm, {\n          isGroup: isGroup,\n          visible: visible,\n          questionData: questionData,\n          isSubmit: isSubmit,\n          changeIsSubmit: data => onSuccessSubmit(data),\n          changeData: () => !changeData && setChangeData(true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 6\n        }, this);\n        break;\n\n      case 7:\n        return /*#__PURE__*/_jsxDEV(SpeakingForm, {\n          isGroup: isGroup,\n          visible: visible,\n          questionData: questionData,\n          isSubmit: isSubmit,\n          changeIsSubmit: data => onSuccessSubmit(data),\n          changeData: () => !changeData && setChangeData(true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 6\n        }, this);\n        break;\n\n      default:\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Vui l\\xF2ng ch\\u1ECDn d\\u1EA1ng c\\xE2u h\\u1ECFi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 12\n        }, this);\n        break;\n    }\n  }; // RETURN TITLE FORM\n\n\n  const renderTitleForm = () => {\n    let text = '';\n\n    if (questionData !== null && questionData !== void 0 && questionData.ID) {\n      if (!(isGroup !== null && isGroup !== void 0 && isGroup.status)) {\n        text = 'Form sửa câu hỏi';\n      } else {\n        text = 'Form sửa nhóm';\n      }\n    } else {\n      if (isGroup !== null && isGroup !== void 0 && isGroup.status) {\n        text = 'Form tạo nhóm';\n      } else {\n        text = 'Form tạo câu hỏi';\n      }\n    }\n\n    setTitleForm(text);\n    return text;\n  }; // RETURN BUTTON\n\n\n  const renderButton = () => {\n    if (questionData !== null && questionData !== void 0 && questionData.ID) {\n      if (isGroup !== null && isGroup !== void 0 && isGroup.status) {\n        return /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-icon edit\",\n          onClick: onEditGroupItem,\n          children: [/*#__PURE__*/_jsxDEV(FormOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 7\n          }, this), \"S\\u1EEDa nh\\xF3m\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 6\n        }, this);\n      } else {\n        if (questionData.ExerciseList) {\n          return /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-icon add\",\n            onClick: onAddDataToGroup,\n            children: [/*#__PURE__*/_jsxDEV(AppstoreAddOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 8\n            }, this), questionData.Type == 3 || questionData.Type == 2 ? 'Thêm câu hỏi' : 'Thêm câu hỏi']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 7\n          }, this);\n        } else {\n          return /*#__PURE__*/_jsxDEV(Tooltip, {\n            title: \"S\\u1EEDa c\\xE2u h\\u1ECFi\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-icon edit\",\n              onClick: showDrawer,\n              children: /*#__PURE__*/_jsxDEV(Edit, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 7\n          }, this);\n        }\n      }\n    } else {\n      if (isGroup !== null && isGroup !== void 0 && isGroup.status) {\n        return /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-success\",\n          onClick: showDrawer,\n          children: [/*#__PURE__*/_jsxDEV(Plus, {\n            className: \"mr-2\",\n            style: {\n              width: '20px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              display: 'inline-block',\n              verticalAlign: 'middle',\n              lineHeight: '4px'\n            },\n            children: \"T\\u1EA1o nh\\xF3m\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 6\n        }, this);\n      } else {\n        if (isGroup !== null && isGroup !== void 0 && isGroup.id) {\n          return /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-icon add\",\n            onClick: onAddDataToGroup,\n            children: [/*#__PURE__*/_jsxDEV(AppstoreAddOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 8\n            }, this), questionData.Type == 3 || questionData.Type == 2 ? 'Thêm/sửa câu hỏi' : 'Thêm câu hỏi']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 7\n          }, this);\n        } else {\n          return /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-success btn-have-icon\",\n            onClick: showDrawer,\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"d-flex align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(PlusOutlined, {\n                className: \"mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 9\n              }, this), \"T\\u1EA1o c\\xE2u h\\u1ECFi\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 7\n          }, this);\n        }\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (visible) {\n      renderTitleForm();\n      getActiveID && getActiveID(questionData.ID);\n      return;\n    }\n  }, [visible]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Ch\\xFA \\xFD\",\n      visible: isModalVisible,\n      onOk: handleClose,\n      onCancel: handleCancel,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontWeight: 500,\n          color: '#292929'\n        },\n        children: \"D\\u1EEF li\\u1EC7u n\\xE0y ch\\u01B0a \\u0111\\u01B0\\u1EE3c l\\u01B0u l\\u1EA1i. B\\u1EA1n c\\xF3 mu\\u1ED1n h\\u1EE7y t\\xE1c v\\u1EE5?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 4\n    }, this), renderButton(), /*#__PURE__*/_jsxDEV(Drawer, {\n      title: titleForm,\n      placement: \"right\",\n      closable: false,\n      onClose: onClose,\n      visible: visible,\n      width: !(isGroup !== null && isGroup !== void 0 && isGroup.status) && (questionData.Type == 3 || questionData.Type == 2) ? 1300 : 800,\n      footer: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-light mr-2\",\n          onClick: onClose,\n          children: \"H\\u1EE7y t\\xE1c v\\u1EE5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 7\n        }, this), (questionData === null || questionData === void 0 ? void 0 : questionData.Type) !== 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: () => onSubmitData(),\n          children: [\"L\\u01B0u\", isLoading && /*#__PURE__*/_jsxDEV(Spin, {\n            className: \"loading-base\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 23\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 8\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 6\n      }, this),\n      children: !(isGroup !== null && isGroup !== void 0 && isGroup.status) ? renderFormSingle() : renderFormGroup()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n\nexport default CreateQuestionForm;","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/QuestionBank/CreateQuestionForm.tsx"],"names":["AppstoreAddOutlined","FormOutlined","PlusOutlined","Drawer","Modal","Spin","Tooltip","React","useEffect","useState","Edit","Plus","exerciseGroupApi","useWrap","ChoiceForm","DragForm","GroupForm","MapForm","MultipleForm","SpeakingForm","TypingForm","WrittingForm","CreateQuestionForm","props","questionData","isGroup","onFetchData","handlePopover","onEditData","onAddData","getActiveID","onError","showNoti","visible","setVisible","isSubmit","setIsSubmit","isLoading","setIsLoading","titleForm","setTitleForm","changeData","setChangeData","isModalVisible","setIsModalVisible","question","setQuestion","showDrawer","console","log","Level","Type","onClose","e","stopPropagation","clearID","i","ExerciseList","length","ExerciseAnswer","forEach","item","isAdd","ID","updateData","newData","res","update","data","message","error","handleClose","handleCancel","onSubmitData","onSuccessSubmit","onEditGroupItem","onAddDataToGroup","renderFormGroup","type","status","renderFormSingle","renderTitleForm","text","renderButton","width","display","verticalAlign","lineHeight","id","fontWeight","color"],"mappings":"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","sourcesContent":["import { AppstoreAddOutlined, FormOutlined, PlusOutlined } from '@ant-design/icons'\r\nimport { Drawer, Modal, Spin, Tooltip } from 'antd'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { Edit, Plus } from 'react-feather'\r\nimport { exerciseGroupApi } from '~/apiBase'\r\nimport { useWrap } from '~/context/wrap'\r\nimport ChoiceForm from './QuestionFormType/ChoiceForm'\r\nimport DragForm from './QuestionFormType/DragForm'\r\nimport GroupForm from './QuestionFormType/GroupForm'\r\nimport MapForm from './QuestionFormType/MapForm'\r\nimport MultipleForm from './QuestionFormType/MultipleForm'\r\nimport SpeakingForm from './QuestionFormType/SpeakingForm'\r\nimport TypingForm from './QuestionFormType/TypingForm'\r\nimport WrittingForm from './QuestionFormType/WrittingForm'\r\n\r\nconst CreateQuestionForm = (props) => {\r\n\tconst { questionData, isGroup, onFetchData, handlePopover, onEditData, onAddData, getActiveID, onError } = props\r\n\r\n\tconst { showNoti } = useWrap()\r\n\r\n\tconst [visible, setVisible] = useState(false)\r\n\tconst [isSubmit, setIsSubmit] = useState(false)\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [titleForm, setTitleForm] = useState('')\r\n\tconst [changeData, setChangeData] = useState(false)\r\n\tconst [isModalVisible, setIsModalVisible] = useState(false)\r\n\tconst [question, setQuestion] = useState<any>({})\r\n\r\n\tconst showDrawer = () => {\r\n\t\tconsole.log(questionData)\r\n\t\tif (!!questionData?.Level || !!questionData?.Type || questionData?.Type !== 0) {\r\n\t\t\tsetVisible(true)\r\n\t\t} else {\r\n\t\t\tshowNoti('danger', 'Bạn phải thêm các thông tin bên phải trước')\r\n\t\t\t!!onError && onError('invalidData')\r\n\t\t}\r\n\t}\r\n\r\n\tconst onClose = (e) => {\r\n\t\te.stopPropagation()\r\n\t\tif (changeData) {\r\n\t\t\tsetIsModalVisible(true)\r\n\t\t} else {\r\n\t\t\tsetVisible(false)\r\n\t\t\tsetChangeData(false)\r\n\t\t}\r\n\t}\r\n\r\n\t// ACTION TABLE\r\n\tconst clearID = () => {\r\n\t\tfor (let i = 0; i < question.ExerciseList.length; i++) {\r\n\t\t\tquestion.ExerciseList[i].ExerciseAnswer.forEach((item: any) => {\r\n\t\t\t\tif (item.isAdd) {\r\n\t\t\t\t\tdelete item.ID\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn question\r\n\t}\r\n\r\n\tconst updateData = async () => {\r\n\t\tlet newData = clearID()\r\n\t\ttry {\r\n\t\t\tconst res: any = await exerciseGroupApi.update(newData)\r\n\t\t\tshowNoti('success', res?.data?.message)\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error)\r\n\t\t\tshowNoti('danger', error?.message || error)\r\n\t\t} finally {\r\n\t\t\tonFetchData()\r\n\t\t\tsetIsLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleClose = async (e) => {\r\n\t\te.stopPropagation()\r\n\t\tsetIsModalVisible(false)\r\n\t\tsetVisible(false)\r\n\t\tsetChangeData(false)\r\n\t}\r\n\r\n\tconst handleCancel = () => {\r\n\t\tsetIsModalVisible(false)\r\n\t}\r\n\r\n\t// ON SUBMIT DATA\r\n\tconst onSubmitData = () => {\r\n\t\tsetIsLoading(true)\r\n\t\tisSubmit && questionData?.Type == 3 && updateData()\r\n\t\tisSubmit && questionData?.Type == 2 && updateData()\r\n\t\t!isSubmit && setIsSubmit(true)\r\n\t}\r\n\r\n\tconst onSuccessSubmit = (data) => {\r\n\t\tif (isSubmit) {\r\n\t\t\tsetIsSubmit(false)\r\n\t\t\tsetIsLoading(false)\r\n\t\t\tsetChangeData(false)\r\n\t\t\tquestionData.ID ? onEditData(data) : onAddData(data)\r\n\t\t\tsetVisible(false)\r\n\t\t}\r\n\t}\r\n\r\n\t// ON EDIT GROUP ITEM\r\n\tconst onEditGroupItem = () => {\r\n\t\thandlePopover()\r\n\t\tshowDrawer()\r\n\t}\r\n\r\n\t// ON ADD DATA TO GROUP\r\n\tconst onAddDataToGroup = () => {\r\n\t\thandlePopover()\r\n\t\tshowDrawer()\r\n\t}\r\n\r\n\t// RENDER FORM GROUP\r\n\tconst renderFormGroup = () => {\r\n\t\tlet type = questionData.Type\r\n\t\tif (type) {\r\n\t\t\tswitch (type) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<GroupForm\r\n\t\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\t\tquestionData={questionData}\r\n\t\t\t\t\t\t\tisSubmit={isSubmit}\r\n\t\t\t\t\t\t\tchangeIsSubmit={onSuccessSubmit}\r\n\t\t\t\t\t\t\tchangeData={() => !changeData && setChangeData(true)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (!isGroup?.status) {\r\n\t\t\t\trenderFormSingle()\r\n\t\t\t} else {\r\n\t\t\t\treturn <p className=\"font-weight-bold\">Vui lòng chọn dạng câu hỏi</p>\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// RENDER FORM SINGLE\r\n\tconst renderFormSingle = () => {\r\n\t\tlet type = questionData?.Type\r\n\t\tswitch (type) {\r\n\t\t\tcase 0:\r\n\t\t\t\treturn <p className=\"font-weight-bold\">Vui lòng chọn dạng câu hỏi</p>\r\n\t\t\t\tbreak\r\n\t\t\tcase 1:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<ChoiceForm\r\n\t\t\t\t\t\tisGroup={isGroup}\r\n\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\tquestionData={questionData}\r\n\t\t\t\t\t\tisSubmit={isSubmit}\r\n\t\t\t\t\t\tchangeIsSubmit={(data: any) => onSuccessSubmit(data)}\r\n\t\t\t\t\t\tchangeData={() => !changeData && setChangeData(true)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)\r\n\t\t\t\tbreak\r\n\t\t\tcase 2:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<DragForm\r\n\t\t\t\t\t\tisGroup={isGroup}\r\n\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\tquestionData={questionData}\r\n\t\t\t\t\t\tisSubmit={isSubmit}\r\n\t\t\t\t\t\tchangeIsSubmit={setIsSubmit}\r\n\t\t\t\t\t\tchangeData={() => !changeData && setChangeData(true)}\r\n\t\t\t\t\t\tonChange={(e: any) => setQuestion(e)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)\r\n\t\t\t\tbreak\r\n\t\t\tcase 3:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<TypingForm\r\n\t\t\t\t\t\tisGroup={isGroup}\r\n\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\tquestionData={questionData}\r\n\t\t\t\t\t\tisSubmit={isSubmit}\r\n\t\t\t\t\t\tchangeIsSubmit={setIsSubmit}\r\n\t\t\t\t\t\tchangeData={() => !changeData && setChangeData(true)}\r\n\t\t\t\t\t\tonChange={(e: any) => setQuestion(e)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)\r\n\t\t\t\tbreak\r\n\t\t\tcase 4:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<MultipleForm\r\n\t\t\t\t\t\tisGroup={isGroup}\r\n\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\tquestionData={questionData}\r\n\t\t\t\t\t\tisSubmit={isSubmit}\r\n\t\t\t\t\t\tchangeIsSubmit={(data: any) => onSuccessSubmit(data)}\r\n\t\t\t\t\t\tchangeData={() => !changeData && setChangeData(true)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)\r\n\t\t\t\tbreak\r\n\t\t\tcase 5:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<MapForm\r\n\t\t\t\t\t\tisGroup={isGroup}\r\n\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\tquestionData={questionData}\r\n\t\t\t\t\t\tisSubmit={isSubmit}\r\n\t\t\t\t\t\tchangeIsSubmit={onSuccessSubmit}\r\n\t\t\t\t\t\tchangeData={() => !changeData && setChangeData(true)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)\r\n\t\t\t\tbreak\r\n\t\t\tcase 6:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<WrittingForm\r\n\t\t\t\t\t\tisGroup={isGroup}\r\n\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\tquestionData={questionData}\r\n\t\t\t\t\t\tisSubmit={isSubmit}\r\n\t\t\t\t\t\tchangeIsSubmit={(data: any) => onSuccessSubmit(data)}\r\n\t\t\t\t\t\tchangeData={() => !changeData && setChangeData(true)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)\r\n\t\t\t\tbreak\r\n\t\t\tcase 7:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<SpeakingForm\r\n\t\t\t\t\t\tisGroup={isGroup}\r\n\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\tquestionData={questionData}\r\n\t\t\t\t\t\tisSubmit={isSubmit}\r\n\t\t\t\t\t\tchangeIsSubmit={(data: any) => onSuccessSubmit(data)}\r\n\t\t\t\t\t\tchangeData={() => !changeData && setChangeData(true)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\treturn <p>Vui lòng chọn dạng câu hỏi</p>\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t}\r\n\r\n\t// RETURN TITLE FORM\r\n\tconst renderTitleForm = () => {\r\n\t\tlet text = ''\r\n\t\tif (questionData?.ID) {\r\n\t\t\tif (!isGroup?.status) {\r\n\t\t\t\ttext = 'Form sửa câu hỏi'\r\n\t\t\t} else {\r\n\t\t\t\ttext = 'Form sửa nhóm'\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (isGroup?.status) {\r\n\t\t\t\ttext = 'Form tạo nhóm'\r\n\t\t\t} else {\r\n\t\t\t\ttext = 'Form tạo câu hỏi'\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsetTitleForm(text)\r\n\t\treturn text\r\n\t}\r\n\r\n\t// RETURN BUTTON\r\n\tconst renderButton = () => {\r\n\t\tif (questionData?.ID) {\r\n\t\t\tif (isGroup?.status) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<button className=\"btn btn-icon edit\" onClick={onEditGroupItem}>\r\n\t\t\t\t\t\t<FormOutlined />\r\n\t\t\t\t\t\tSửa nhóm\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)\r\n\t\t\t} else {\r\n\t\t\t\tif (questionData.ExerciseList) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<button className=\"btn btn-icon add\" onClick={onAddDataToGroup}>\r\n\t\t\t\t\t\t\t<AppstoreAddOutlined />\r\n\t\t\t\t\t\t\t{questionData.Type == 3 || questionData.Type == 2 ? 'Thêm câu hỏi' : 'Thêm câu hỏi'}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Tooltip title=\"Sửa câu hỏi\">\r\n\t\t\t\t\t\t\t<button className=\"btn btn-icon edit\" onClick={showDrawer}>\r\n\t\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (isGroup?.status) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<button className=\"btn btn-success\" onClick={showDrawer}>\r\n\t\t\t\t\t\t<Plus className=\"mr-2\" style={{ width: '20px' }} />\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tdisplay: 'inline-block',\r\n\t\t\t\t\t\t\t\tverticalAlign: 'middle',\r\n\t\t\t\t\t\t\t\tlineHeight: '4px'\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tTạo nhóm\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)\r\n\t\t\t} else {\r\n\t\t\t\tif (isGroup?.id) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<button className=\"btn btn-icon add\" onClick={onAddDataToGroup}>\r\n\t\t\t\t\t\t\t<AppstoreAddOutlined />\r\n\t\t\t\t\t\t\t{questionData.Type == 3 || questionData.Type == 2 ? 'Thêm/sửa câu hỏi' : 'Thêm câu hỏi'}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<button className=\"btn btn-success btn-have-icon\" onClick={showDrawer}>\r\n\t\t\t\t\t\t\t<span className=\"d-flex align-items-center\">\r\n\t\t\t\t\t\t\t\t<PlusOutlined className=\"mr-1\" />\r\n\t\t\t\t\t\t\t\tTạo câu hỏi\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (visible) {\r\n\t\t\trenderTitleForm()\r\n\t\t\tgetActiveID && getActiveID(questionData.ID)\r\n\t\t\treturn\r\n\t\t}\r\n\t}, [visible])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Modal title=\"Chú ý\" visible={isModalVisible} onOk={handleClose} onCancel={handleCancel}>\r\n\t\t\t\t<p style={{ fontWeight: 500, color: '#292929' }}>Dữ liệu này chưa được lưu lại. Bạn có muốn hủy tác vụ?</p>\r\n\t\t\t</Modal>\r\n\t\t\t{renderButton()}\r\n\t\t\t<Drawer\r\n\t\t\t\ttitle={titleForm}\r\n\t\t\t\tplacement=\"right\"\r\n\t\t\t\tclosable={false}\r\n\t\t\t\tonClose={onClose}\r\n\t\t\t\tvisible={visible}\r\n\t\t\t\twidth={!isGroup?.status && (questionData.Type == 3 || questionData.Type == 2) ? 1300 : 800}\r\n\t\t\t\tfooter={\r\n\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t<button className=\"btn btn-light mr-2\" onClick={onClose}>\r\n\t\t\t\t\t\t\tHủy tác vụ\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t{questionData?.Type !== 0 && (\r\n\t\t\t\t\t\t\t<button className=\"btn btn-primary\" onClick={() => onSubmitData()}>\r\n\t\t\t\t\t\t\t\tLưu\r\n\t\t\t\t\t\t\t\t{isLoading && <Spin className=\"loading-base\" />}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t{!isGroup?.status ? renderFormSingle() : renderFormGroup()}\r\n\r\n\t\t\t\t{/* <GroupFormTyping\r\n          visible={visible}\r\n          questionData={questionData}\r\n          isSubmit={isSubmit}\r\n          changeIsSubmit={onSuccessSubmit}\r\n        /> */}\r\n\t\t\t</Drawer>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default CreateQuestionForm\r\n"]},"metadata":{},"sourceType":"module"}