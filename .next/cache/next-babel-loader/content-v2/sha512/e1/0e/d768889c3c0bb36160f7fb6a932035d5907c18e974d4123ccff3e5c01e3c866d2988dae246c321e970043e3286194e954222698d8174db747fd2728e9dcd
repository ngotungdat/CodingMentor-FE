{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\Customer\\\\Student\\\\StudentAdviseForm.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { Form, Modal, Spin, Tooltip } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport InputTextField from '~/components/FormControl/InputTextField';\nimport SelectField from '~/components/FormControl/SelectField';\nimport { useWrap } from '~/context/wrap';\nlet returnSchema = {};\nlet schema = null;\nconst StudentAdviseForm = /*#__PURE__*/React.memo(props => {\n  const {\n    0: isModalVisible,\n    1: setIsModalVisible\n  } = useState(false);\n  const {\n    isLoading,\n    rowID,\n    _onSubmit,\n    getIndex,\n    index,\n    rowData,\n    listData,\n    dataProgram\n  } = props;\n  const {\n    showNoti,\n    userInformation\n  } = useWrap(); // -----  HANDLE ALL IN FORM -------------\n\n  const defaultValuesInit = {\n    AreaID: null,\n    //int\n    CustomerName: null,\n    ChineseName: null,\n    Number: null,\n    //số điện thoại\n    Email: '',\n    //\n    SourceInformationID: null,\n    //int ID nguồn khách\n    CustomerConsultationStatusID: null,\n    // tình trạng tư vấn\n    ProgramID: null,\n    CounselorsID: null\n  };\n\n  (function returnSchemaFunc() {\n    returnSchema = _objectSpread({}, defaultValuesInit);\n    Object.keys(returnSchema).forEach(function (key) {\n      switch (key) {\n        case 'Email':\n          returnSchema[key] = yup.string().email('Email nhập sai cú pháp').required('Bạn không được để trống');\n          break;\n\n        case 'CustomerName':\n          returnSchema[key] = yup.mixed().required('Bạn không được để trống');\n          break;\n\n        case 'SourceInformationID':\n          returnSchema[key] = yup.mixed();\n          break;\n\n        case 'CustomerConsultationStatusID':\n          returnSchema[key] = yup.mixed().required('Bạn không được để trống');\n          break;\n\n        case 'ProgramID':\n          returnSchema[key] = yup.mixed();\n          break;\n\n        case 'Number':\n          returnSchema[key] = yup.mixed().required('Bạn không được để trống');\n          break;\n        // case 'CounselorsID':\n        // \treturnSchema[key] = yup.mixed().required('Bạn không được để trống');\n        // \tbreak;\n\n        default:\n          // returnSchema[key] = yup.mixed().required(\"Bạn không được để trống\");\n          break;\n      }\n    });\n    schema = yup.object().shape(returnSchema);\n  })();\n\n  const form = useForm({\n    defaultValues: defaultValuesInit,\n    resolver: yupResolver(schema)\n  }); // SUBMI FORM\n\n  const onSubmit = (data, e) => {\n    delete data.Note;\n\n    let res = _onSubmit(data);\n\n    res.then(function (rs) {\n      rs && rs.status == 200 && (setIsModalVisible(false), form.reset(defaultValuesInit));\n    });\n  };\n\n  useEffect(() => {\n    if (isModalVisible) {\n      if (rowData) {\n        form.reset(rowData);\n      } else {\n        form.setValue('CustomerConsultationStatusID', 1);\n      }\n    }\n  }, [isModalVisible]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [rowID ? /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-icon edit\",\n      onClick: () => {\n        setIsModalVisible(true);\n        getIndex(index);\n      },\n      children: /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: \"C\\u1EADp nh\\u1EADt\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-edit\",\n          style: {\n            color: '#34c4a4',\n            fontSize: 16,\n            marginBottom: -1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 5\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-warning add-new\",\n      onClick: () => {\n        setIsModalVisible(true);\n      },\n      children: \"Th\\xEAm m\\u1EDBi\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: rowID ? 'Sửa HV cần tư vấn' : 'Thêm HV cần tư vấn',\n      visible: isModalVisible,\n      onCancel: () => setIsModalVisible(false),\n      footer: null,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-fluid\",\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          layout: \"vertical\",\n          onFinish: form.handleSubmit(onSubmit),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 col-12\",\n              children: /*#__PURE__*/_jsxDEV(InputTextField, {\n                form: form,\n                name: \"CustomerName\",\n                label: \"H\\u1ECD t\\xEAn\",\n                isRequired: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 col-12\",\n              children: /*#__PURE__*/_jsxDEV(InputTextField, {\n                form: form,\n                name: \"ChineseName\",\n                label: \"T\\xEAn ti\\u1EBFng Trung\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 col-12\",\n              children: /*#__PURE__*/_jsxDEV(SelectField, {\n                form: form,\n                name: \"ProgramID\",\n                label: \"Nhu c\\u1EA7u h\\u1ECDc\",\n                optionList: listData.Program,\n                isRequired: false\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 col-12\",\n              children: /*#__PURE__*/_jsxDEV(SelectField, {\n                form: form,\n                name: \"AreaID\",\n                label: \"T\\u1EC9nh/TP\",\n                optionList: listData.Area\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 col-12\",\n              children: /*#__PURE__*/_jsxDEV(InputTextField, {\n                form: form,\n                name: \"Number\",\n                label: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\",\n                isRequired: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 col-12\",\n              children: /*#__PURE__*/_jsxDEV(InputTextField, {\n                form: form,\n                name: \"Email\",\n                label: \"Email\",\n                isRequired: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 col-12\",\n              children: /*#__PURE__*/_jsxDEV(SelectField, {\n                form: form,\n                name: \"SourceInformationID\",\n                label: \"Ngu\\u1ED3n kh\\xE1ch\",\n                optionList: listData.SourceInformation,\n                isRequired: false\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 col-12\",\n              children: /*#__PURE__*/_jsxDEV(SelectField, {\n                disabled: !rowID && true,\n                form: form,\n                name: \"CustomerConsultationStatusID\",\n                label: \"T\\xECnh tr\\u1EA1ng t\\u01B0 v\\u1EA5n\",\n                optionList: listData.ConsultationStatus,\n                isRequired: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 8\n            }, this), rowData && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-12 col-12\",\n              children: /*#__PURE__*/_jsxDEV(SelectField, {\n                form: form,\n                name: \"CounselorsID\",\n                label: \"T\\u01B0 v\\u1EA5n vi\\xEAn\",\n                optionList: listData.Counselors,\n                isRequired: true,\n                disabled: userInformation && userInformation.RoleID === 6\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 10\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mt-3\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-primary w-100\",\n                children: [\"L\\u01B0u\", isLoading.type == 'ADD_DATA' && isLoading.status && /*#__PURE__*/_jsxDEV(Spin, {\n                  className: \"loading-base\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 63\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n});\nexport default StudentAdviseForm;","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/Customer/Student/StudentAdviseForm.tsx"],"names":["yupResolver","Form","Modal","Spin","Tooltip","React","useEffect","useState","useForm","yup","InputTextField","SelectField","useWrap","returnSchema","schema","StudentAdviseForm","memo","props","isModalVisible","setIsModalVisible","isLoading","rowID","_onSubmit","getIndex","index","rowData","listData","dataProgram","showNoti","userInformation","defaultValuesInit","AreaID","CustomerName","ChineseName","Number","Email","SourceInformationID","CustomerConsultationStatusID","ProgramID","CounselorsID","returnSchemaFunc","Object","keys","forEach","key","string","email","required","mixed","object","shape","form","defaultValues","resolver","onSubmit","data","e","Note","res","then","rs","status","reset","setValue","color","fontSize","marginBottom","handleSubmit","Program","Area","SourceInformation","ConsultationStatus","Counselors","RoleID","type"],"mappings":"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","sourcesContent":["import { yupResolver } from '@hookform/resolvers/yup'\r\nimport { Form, Modal, Spin, Tooltip } from 'antd'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport * as yup from 'yup'\r\nimport InputTextField from '~/components/FormControl/InputTextField'\r\nimport SelectField from '~/components/FormControl/SelectField'\r\nimport { useWrap } from '~/context/wrap'\r\n\r\nlet returnSchema = {}\r\nlet schema = null\r\n\r\nconst StudentAdviseForm = React.memo((props: any) => {\r\n\tconst [isModalVisible, setIsModalVisible] = useState(false)\r\n\tconst { isLoading, rowID, _onSubmit, getIndex, index, rowData, listData, dataProgram } = props\r\n\r\n\tconst { showNoti, userInformation } = useWrap()\r\n\r\n\t// -----  HANDLE ALL IN FORM -------------\r\n\tconst defaultValuesInit = {\r\n\t\tAreaID: null, //int\r\n\t\tCustomerName: null,\r\n\t\tChineseName: null,\r\n\t\tNumber: null, //số điện thoại\r\n\t\tEmail: '', //\r\n\t\tSourceInformationID: null, //int ID nguồn khách\r\n\t\tCustomerConsultationStatusID: null, // tình trạng tư vấn\r\n\t\tProgramID: null,\r\n\t\tCounselorsID: null\r\n\t}\r\n\r\n\t;(function returnSchemaFunc() {\r\n\t\treturnSchema = { ...defaultValuesInit }\r\n\t\tObject.keys(returnSchema).forEach(function (key) {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'Email':\r\n\t\t\t\t\treturnSchema[key] = yup.string().email('Email nhập sai cú pháp').required('Bạn không được để trống')\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 'CustomerName':\r\n\t\t\t\t\treturnSchema[key] = yup.mixed().required('Bạn không được để trống')\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 'SourceInformationID':\r\n\t\t\t\t\treturnSchema[key] = yup.mixed()\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 'CustomerConsultationStatusID':\r\n\t\t\t\t\treturnSchema[key] = yup.mixed().required('Bạn không được để trống')\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 'ProgramID':\r\n\t\t\t\t\treturnSchema[key] = yup.mixed()\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 'Number':\r\n\t\t\t\t\treturnSchema[key] = yup.mixed().required('Bạn không được để trống')\r\n\t\t\t\t\tbreak\r\n\t\t\t\t// case 'CounselorsID':\r\n\t\t\t\t// \treturnSchema[key] = yup.mixed().required('Bạn không được để trống');\r\n\t\t\t\t// \tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t// returnSchema[key] = yup.mixed().required(\"Bạn không được để trống\");\r\n\t\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tschema = yup.object().shape(returnSchema)\r\n\t})()\r\n\r\n\tconst form = useForm({\r\n\t\tdefaultValues: defaultValuesInit,\r\n\t\tresolver: yupResolver(schema)\r\n\t})\r\n\r\n\t// SUBMI FORM\r\n\tconst onSubmit = (data: any, e) => {\r\n\t\tdelete data.Note\r\n\r\n\t\tlet res = _onSubmit(data)\r\n\r\n\t\tres.then(function (rs: any) {\r\n\t\t\trs && rs.status == 200 && (setIsModalVisible(false), form.reset(defaultValuesInit))\r\n\t\t})\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isModalVisible) {\r\n\t\t\tif (rowData) {\r\n\t\t\t\tform.reset(rowData)\r\n\t\t\t} else {\r\n\t\t\t\tform.setValue('CustomerConsultationStatusID', 1)\r\n\t\t\t}\r\n\t\t}\r\n\t}, [isModalVisible])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{rowID ? (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"btn btn-icon edit\"\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsetIsModalVisible(true)\r\n\t\t\t\t\t\tgetIndex(index)\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Tooltip title=\"Cập nhật\">\r\n\t\t\t\t\t\t<i className=\"fas fa-edit\" style={{ color: '#34c4a4', fontSize: 16, marginBottom: -1 }}></i>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t</button>\r\n\t\t\t) : (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"btn btn-warning add-new\"\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsetIsModalVisible(true)\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\tThêm mới\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\r\n\t\t\t{/*  */}\r\n\t\t\t<Modal\r\n\t\t\t\ttitle={rowID ? 'Sửa HV cần tư vấn' : 'Thêm HV cần tư vấn'}\r\n\t\t\t\tvisible={isModalVisible}\r\n\t\t\t\tonCancel={() => setIsModalVisible(false)}\r\n\t\t\t\tfooter={null}\r\n\t\t\t>\r\n\t\t\t\t<div className=\"container-fluid\">\r\n\t\t\t\t\t<Form layout=\"vertical\" onFinish={form.handleSubmit(onSubmit)}>\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t<div className=\"col-md-6 col-12\">\r\n\t\t\t\t\t\t\t\t<InputTextField form={form} name=\"CustomerName\" label=\"Họ tên\" isRequired={true} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-md-6 col-12\">\r\n\t\t\t\t\t\t\t\t<InputTextField form={form} name=\"ChineseName\" label=\"Tên tiếng Trung\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t<div className=\"col-md-6 col-12\">\r\n\t\t\t\t\t\t\t\t<SelectField form={form} name=\"ProgramID\" label=\"Nhu cầu học\" optionList={listData.Program} isRequired={false} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-md-6 col-12\">\r\n\t\t\t\t\t\t\t\t<SelectField form={form} name=\"AreaID\" label=\"Tỉnh/TP\" optionList={listData.Area} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t<div className=\"col-md-6 col-12\">\r\n\t\t\t\t\t\t\t\t<InputTextField form={form} name=\"Number\" label=\"Số điện thoại\" isRequired={true} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-md-6 col-12\">\r\n\t\t\t\t\t\t\t\t<InputTextField form={form} name=\"Email\" label=\"Email\" isRequired={true} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-md-6 col-12\">\r\n\t\t\t\t\t\t\t\t<SelectField\r\n\t\t\t\t\t\t\t\t\tform={form}\r\n\t\t\t\t\t\t\t\t\tname=\"SourceInformationID\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"Nguồn khách\"\r\n\t\t\t\t\t\t\t\t\toptionList={listData.SourceInformation}\r\n\t\t\t\t\t\t\t\t\tisRequired={false}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div className=\"col-md-6 col-12\">\r\n\t\t\t\t\t\t\t\t<SelectField\r\n\t\t\t\t\t\t\t\t\tdisabled={!rowID && true}\r\n\t\t\t\t\t\t\t\t\tform={form}\r\n\t\t\t\t\t\t\t\t\tname=\"CustomerConsultationStatusID\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"Tình trạng tư vấn\"\r\n\t\t\t\t\t\t\t\t\toptionList={listData.ConsultationStatus}\r\n\t\t\t\t\t\t\t\t\tisRequired={true}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t{rowData && (\r\n\t\t\t\t\t\t\t\t<div className=\"col-md-12 col-12\">\r\n\t\t\t\t\t\t\t\t\t<SelectField\r\n\t\t\t\t\t\t\t\t\t\tform={form}\r\n\t\t\t\t\t\t\t\t\t\tname=\"CounselorsID\"\r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Tư vấn viên\"\r\n\t\t\t\t\t\t\t\t\t\toptionList={listData.Counselors}\r\n\t\t\t\t\t\t\t\t\t\tisRequired={true}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={userInformation && userInformation.RoleID === 6}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"row mt-3\">\r\n\t\t\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary w-100\">\r\n\t\t\t\t\t\t\t\t\tLưu\r\n\t\t\t\t\t\t\t\t\t{isLoading.type == 'ADD_DATA' && isLoading.status && <Spin className=\"loading-base\" />}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t</>\r\n\t)\r\n})\r\n\r\nexport default StudentAdviseForm\r\n"]},"metadata":{},"sourceType":"module"}