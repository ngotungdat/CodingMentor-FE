{"ast":null,"code":"import _regeneratorRuntime from \"D:/MonaMedia/Project/CodingMentor/CodingMentor-FE/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/CodingMentor/CodingMentor-FE/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"D:/MonaMedia/Project/CodingMentor/CodingMentor-FE/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\CodingMentor\\\\CodingMentor-FE\\\\src\\\\components\\\\Global\\\\CourseList\\\\CourseListDetail\\\\TeacherRoleUp\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport moment from 'moment';\nimport React, { useState, useEffect } from 'react';\nimport { rollUpTeacher } from '~/apiBase/course-detail/roll-up';\nimport PowerTable from '~/components/PowerTable';\nimport { useWrap } from '~/context/wrap';\nimport { Switch } from 'antd';\nexport default function TeacherRollUp(props) {\n  _s();\n\n  var _this = this;\n\n  var courseID = props.courseID,\n      isRollUpTeacher = props.isRollUpTeacher;\n\n  var _useWrap = useWrap(),\n      userInformation = _useWrap.userInformation,\n      isAdmin = _useWrap.isAdmin,\n      showNoti = _useWrap.showNoti,\n      pageSize = _useWrap.pageSize;\n\n  var _useState = useState({\n    type: '',\n    status: false\n  }),\n      isLoading = _useState[0],\n      setIsLoading = _useState[1];\n\n  var _useState2 = useState(null),\n      totalPage = _useState2[0],\n      setTotalPage = _useState2[1];\n\n  var _useState3 = useState([]),\n      dataSource = _useState3[0],\n      setDataSource = _useState3[1]; // FILTER\n\n\n  var _useState4 = useState({\n    pageSize: pageSize,\n    pageIndex: 1,\n    CourseID: courseID\n  }),\n      filters = _useState4[0],\n      setFilters = _useState4[1];\n\n  var getPagination = function getPagination(pageNumber) {\n    setFilters(_objectSpread(_objectSpread({}, filters), {}, {\n      pageIndex: pageNumber\n    }));\n  };\n\n  var columns = userInformation && userInformation.RoleID === 1 ? [{\n    title: 'Giáo viên',\n    dataIndex: 'TeacherName',\n    render: function render(text) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-primary\",\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 25\n      }, _this);\n    }\n  }, {\n    title: 'Ngày',\n    dataIndex: 'Date',\n    render: function render(text, data) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: moment(data.Date).format('DD-MM-YYYY')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 31\n      }, _this);\n    }\n  }, {\n    title: 'Thời gian học',\n    dataIndex: 'StudyTimeName',\n    render: function render(text) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 25\n      }, _this);\n    }\n  }, {\n    title: '',\n    dataIndex: 'Active',\n    render: function render(text, data) {\n      return /*#__PURE__*/_jsxDEV(Switch, {\n        checked: data.isRollUp,\n        checkedChildren: \"\\u0110\\xE3 \\u0111i\\u1EC3m danh\",\n        unCheckedChildren: \"Ch\\u01B0a \\u0111i\\u1EC3m danh\",\n        onChange: function onChange() {\n          return onChangeEnable(data);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 8\n      }, _this);\n    }\n  }] : [{\n    title: 'Giáo viên',\n    dataIndex: 'TeacherName',\n    render: function render(text) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-primary\",\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 25\n      }, _this);\n    }\n  }, {\n    title: 'Ngày',\n    dataIndex: 'Date',\n    render: function render(text, data) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: moment(data.Date).format('DD-MM-YYYY')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 31\n      }, _this);\n    }\n  }, {\n    title: 'Thời gian học',\n    dataIndex: 'StudyTimeName',\n    render: function render(text) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 25\n      }, _this);\n    }\n  }, {\n    title: 'Trạng thái',\n    dataIndex: 'RollUp',\n    render: function render(text, data) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: data.isRollUp ? 'tag green' : 'tag red',\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 31\n      }, _this);\n    }\n  }];\n\n  var getDataSource = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setIsLoading({\n                type: 'GET_ALL',\n                status: true\n              });\n              _context.prev = 1;\n              _context.next = 4;\n              return rollUpTeacher.getAllTeacher(filters);\n\n            case 4:\n              res = _context.sent;\n\n              if (res.status === 200) {\n                console.log(res.data.data);\n                setDataSource(res.data.data);\n                setTotalPage(res.data.totalRow);\n              }\n\n              _context.next = 10;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](1);\n\n            case 10:\n              _context.prev = 10;\n              setIsLoading({\n                type: 'GET_ALL',\n                status: false\n              });\n              return _context.finish(10);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 8, 10, 13]]);\n    }));\n\n    return function getDataSource() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var getDataSourceNoReload = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return rollUpTeacher.getAllTeacher(filters);\n\n            case 3:\n              res = _context2.sent;\n\n              if (res.status === 200) {\n                console.log(res.data.data);\n                setDataSource(res.data.data);\n                setTotalPage(res.data.totalRow);\n              }\n\n              _context2.next = 9;\n              break;\n\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](0);\n\n            case 9:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 7]]);\n    }));\n\n    return function getDataSourceNoReload() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var onChangeEnable = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return rollUpTeacher.updateRollUp({\n                ID: data.ID,\n                isRollUp: data.isRollUp ? false : true\n              });\n\n            case 3:\n              res = _context3.sent;\n\n              if (res.status === 200) {\n                !data.isRollUp && showNoti('success', 'Điểm danh thành công!');\n                data.isRollUp && showNoti('success', 'Hủy điểm danh thành công!');\n                getDataSourceNoReload();\n              }\n\n              _context3.next = 9;\n              break;\n\n            case 7:\n              _context3.prev = 7;\n              _context3.t0 = _context3[\"catch\"](0);\n\n            case 9:\n              _context3.prev = 9;\n              return _context3.finish(9);\n\n            case 11:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 7, 9, 11]]);\n    }));\n\n    return function onChangeEnable(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    getDataSource();\n  }, [filters]);\n  useEffect(function () {\n    if (isRollUpTeacher) {\n      getDataSource();\n    }\n  }, [isRollUpTeacher]);\n  return /*#__PURE__*/_jsxDEV(PowerTable, {\n    loading: isLoading,\n    currentPage: filters.pageIndex,\n    totalPage: totalPage,\n    getPagination: getPagination,\n    dataSource: dataSource,\n    columns: columns,\n    TitleCard: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex align-items-center\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 15\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 3\n  }, this);\n}\n\n_s(TeacherRollUp, \"4n7anxS5BqCSeyVgocHNNi/ce2w=\", false, function () {\n  return [useWrap];\n});\n\n_c = TeacherRollUp;\n\nvar _c;\n\n$RefreshReg$(_c, \"TeacherRollUp\");","map":{"version":3,"sources":["D:/MonaMedia/Project/CodingMentor/CodingMentor-FE/src/components/Global/CourseList/CourseListDetail/TeacherRoleUp/index.tsx"],"names":["moment","React","useState","useEffect","rollUpTeacher","PowerTable","useWrap","Switch","TeacherRollUp","props","courseID","isRollUpTeacher","userInformation","isAdmin","showNoti","pageSize","type","status","isLoading","setIsLoading","totalPage","setTotalPage","dataSource","setDataSource","pageIndex","CourseID","filters","setFilters","getPagination","pageNumber","columns","RoleID","title","dataIndex","render","text","data","Date","format","isRollUp","onChangeEnable","getDataSource","getAllTeacher","res","console","log","totalRow","getDataSourceNoReload","updateRollUp","ID"],"mappings":"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","sourcesContent":["import moment from 'moment'\r\nimport React, { useState, useEffect } from 'react'\r\nimport { rollUpTeacher } from '~/apiBase/course-detail/roll-up'\r\nimport PowerTable from '~/components/PowerTable'\r\nimport { useWrap } from '~/context/wrap'\r\nimport { Switch } from 'antd'\r\n\r\nexport default function TeacherRollUp(props) {\r\n\tconst { courseID, isRollUpTeacher } = props\r\n\tconst { userInformation, isAdmin, showNoti, pageSize } = useWrap()\r\n\tconst [isLoading, setIsLoading] = useState({ type: '', status: false })\r\n\tconst [totalPage, setTotalPage] = useState(null)\r\n\tconst [dataSource, setDataSource] = useState([])\r\n\r\n\t// FILTER\r\n\tconst [filters, setFilters] = useState({\r\n\t\tpageSize: pageSize,\r\n\t\tpageIndex: 1,\r\n\t\tCourseID: courseID\r\n\t})\r\n\r\n\tconst getPagination = (pageNumber: number) => {\r\n\t\tsetFilters({\r\n\t\t\t...filters,\r\n\t\t\tpageIndex: pageNumber\r\n\t\t})\r\n\t}\r\n\r\n\tconst columns =\r\n\t\tuserInformation && userInformation.RoleID === 1\r\n\t\t\t? [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: 'Giáo viên',\r\n\t\t\t\t\t\tdataIndex: 'TeacherName',\r\n\t\t\t\t\t\trender: (text) => <p className=\"font-weight-primary\">{text}</p>\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: 'Ngày',\r\n\t\t\t\t\t\tdataIndex: 'Date',\r\n\t\t\t\t\t\trender: (text, data) => <p>{moment(data.Date).format('DD-MM-YYYY')}</p>\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: 'Thời gian học',\r\n\t\t\t\t\t\tdataIndex: 'StudyTimeName',\r\n\t\t\t\t\t\trender: (text) => <p>{text}</p>\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: '',\r\n\t\t\t\t\t\tdataIndex: 'Active',\r\n\t\t\t\t\t\trender: (text, data) => (\r\n\t\t\t\t\t\t\t<Switch\r\n\t\t\t\t\t\t\t\tchecked={data.isRollUp}\r\n\t\t\t\t\t\t\t\tcheckedChildren=\"Đã điểm danh\"\r\n\t\t\t\t\t\t\t\tunCheckedChildren=\"Chưa điểm danh\"\r\n\t\t\t\t\t\t\t\tonChange={() => onChangeEnable(data)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t  ]\r\n\t\t\t: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: 'Giáo viên',\r\n\t\t\t\t\t\tdataIndex: 'TeacherName',\r\n\t\t\t\t\t\trender: (text) => <p className=\"font-weight-primary\">{text}</p>\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: 'Ngày',\r\n\t\t\t\t\t\tdataIndex: 'Date',\r\n\t\t\t\t\t\trender: (text, data) => <p>{moment(data.Date).format('DD-MM-YYYY')}</p>\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: 'Thời gian học',\r\n\t\t\t\t\t\tdataIndex: 'StudyTimeName',\r\n\t\t\t\t\t\trender: (text) => <p>{text}</p>\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: 'Trạng thái',\r\n\t\t\t\t\t\tdataIndex: 'RollUp',\r\n\t\t\t\t\t\trender: (text, data) => <p className={data.isRollUp ? 'tag green' : 'tag red'}>{text}</p>\r\n\t\t\t\t\t}\r\n\t\t\t  ]\r\n\r\n\tconst getDataSource = async () => {\r\n\t\tsetIsLoading({ type: 'GET_ALL', status: true })\r\n\t\ttry {\r\n\t\t\tlet res = await rollUpTeacher.getAllTeacher(filters)\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tconsole.log(res.data.data)\r\n\t\t\t\tsetDataSource(res.data.data)\r\n\t\t\t\tsetTotalPage(res.data.totalRow)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({ type: 'GET_ALL', status: false })\r\n\t\t}\r\n\t}\r\n\r\n\tconst getDataSourceNoReload = async () => {\r\n\t\ttry {\r\n\t\t\tlet res = await rollUpTeacher.getAllTeacher(filters)\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tconsole.log(res.data.data)\r\n\t\t\t\tsetDataSource(res.data.data)\r\n\t\t\t\tsetTotalPage(res.data.totalRow)\r\n\t\t\t}\r\n\t\t} catch (error) {}\r\n\t}\r\n\r\n\tconst onChangeEnable = async (data) => {\r\n\t\ttry {\r\n\t\t\tlet res = await rollUpTeacher.updateRollUp({\r\n\t\t\t\tID: data.ID,\r\n\t\t\t\tisRollUp: data.isRollUp ? false : true\r\n\t\t\t})\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\t!data.isRollUp && showNoti('success', 'Điểm danh thành công!')\r\n\t\t\t\tdata.isRollUp && showNoti('success', 'Hủy điểm danh thành công!')\r\n\t\t\t\tgetDataSourceNoReload()\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t} finally {\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tgetDataSource()\r\n\t}, [filters])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isRollUpTeacher) {\r\n\t\t\tgetDataSource()\r\n\t\t}\r\n\t}, [isRollUpTeacher])\r\n\r\n\treturn (\r\n\t\t<PowerTable\r\n\t\t\tloading={isLoading}\r\n\t\t\tcurrentPage={filters.pageIndex}\r\n\t\t\ttotalPage={totalPage}\r\n\t\t\tgetPagination={getPagination}\r\n\t\t\tdataSource={dataSource}\r\n\t\t\tcolumns={columns}\r\n\t\t\tTitleCard={<div className=\"d-flex align-items-center\"></div>}\r\n\t\t/>\r\n\t)\r\n}\r\n"]},"metadata":{},"sourceType":"module"}