{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _toConsumableArray from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\ManageZoom\\\\ZoomRoom\\\\ZoomRoom.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Tooltip } from 'antd';\nimport moment from 'moment';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { LogIn } from 'react-feather';\nimport { zoomRoomApi } from '~/apiBase';\nimport SortBox from '~/components/Elements/SortBox';\nimport PowerTable from '~/components/PowerTable';\nimport FilterColumn from '~/components/Tables/FilterColumn';\nimport { useWrap } from '~/context/wrap';\nimport CloseZoomRoom from './CloseZoomRoom';\nimport ZoomRoomFilter from './ZoomRoomFilter';\n\nvar ZoomRoom = function ZoomRoom() {\n  _s();\n\n  var _useState = useState({\n    type: '',\n    status: false\n  }),\n      isLoading = _useState[0],\n      setIsLoading = _useState[1];\n\n  var _useState2 = useState(null),\n      totalPage = _useState2[0],\n      setTotalPage = _useState2[1];\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti;\n\n  var _useState3 = useState([]),\n      roomList = _useState3[0],\n      setRoomList = _useState3[1]; // FILTER\n\n\n  var listFieldInit = {\n    pageIndex: 1,\n    pageSize: 10,\n    sort: -1,\n    sortType: false,\n    fromDate: '',\n    toDate: '',\n    TeacherName: '',\n    IsRoomStart: null\n  };\n  var refValue = useRef({\n    pageIndex: 1,\n    pageSize: 10,\n    sort: -1,\n    sortType: false\n  });\n\n  var _useState4 = useState(listFieldInit),\n      filters = _useState4[0],\n      setFilters = _useState4[1];\n\n  var optionActiveList = [{\n    title: 'Hoạt động',\n    value: true\n  }, {\n    title: 'Dừng',\n    value: false\n  }]; // SORT OPTION\n\n  var sortOptionList = [{\n    dataSort: {\n      sort: 0,\n      sortType: true\n    },\n    value: 1,\n    text: 'Tên tăng dần'\n  }, {\n    dataSort: {\n      sort: 0,\n      sortType: false\n    },\n    value: 2,\n    text: 'Tên giảm dần'\n  }, {\n    dataSort: {\n      sort: 1,\n      sortType: true\n    },\n    value: 3,\n    text: 'Ngày học tăng dần'\n  }, {\n    dataSort: {\n      sort: 1,\n      sortType: false\n    },\n    value: 4,\n    text: 'Ngày học giảm dần'\n  }]; // FILTER\n\n  var onFilter = function onFilter(obj) {\n    setFilters(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, listFieldInit), refValue.current), {}, {\n      pageIndex: 1\n    }, obj), {}, {\n      fromDate: moment(obj.fromDate).format('YYYY/MM/DD'),\n      toDate: moment(obj.toDate).format('YYYY/MM/DD')\n    }));\n  }; // PAGINATION\n\n\n  var getPagination = function getPagination(pageIndex, pageSize) {\n    if (!pageSize) pageSize = 10;\n    refValue.current = _objectSpread(_objectSpread({}, refValue.current), {}, {\n      pageSize: pageSize,\n      pageIndex: pageIndex\n    });\n    setFilters(_objectSpread(_objectSpread({}, filters), refValue.current));\n  }; // SORT\n\n\n  var onSort = function onSort(option) {\n    refValue.current = _objectSpread(_objectSpread({}, refValue.current), {}, {\n      sort: option.title.sort,\n      sortType: option.title.sortType\n    });\n    setFilters(_objectSpread(_objectSpread({}, listFieldInit), refValue.current));\n  }; // RESET SEARCH\n\n\n  var onResetSearch = function onResetSearch() {\n    setFilters(_objectSpread(_objectSpread({}, listFieldInit), {}, {\n      pageSize: refValue.current.pageSize\n    }));\n  }; // ACTION SEARCH\n\n\n  var onSearch = function onSearch(valueSearch, dataIndex) {\n    setFilters(_objectSpread(_objectSpread(_objectSpread({}, listFieldInit), refValue.current), {}, _defineProperty({\n      pageIndex: 1\n    }, dataIndex, valueSearch)));\n  };\n\n  var fetchRoomList = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              setIsLoading({\n                type: 'GET_ALL',\n                status: true\n              });\n              _context.next = 4;\n              return zoomRoomApi.getAll(filters);\n\n            case 4:\n              res = _context.sent;\n\n              if (res.status === 200) {\n                setRoomList(res.data.data);\n                setTotalPage(res.data.totalRow);\n              }\n\n              if (res.status === 204) {\n                setRoomList([]);\n                setTotalPage(0);\n                showNoti('danger', 'Danh sách trống');\n              }\n\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](0);\n              console.log('fetchRoomList', _context.t0.message);\n\n            case 12:\n              _context.prev = 12;\n              setIsLoading({\n                type: 'GET_ALL',\n                status: false\n              });\n              return _context.finish(12);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 9, 12, 15]]);\n    }));\n\n    return function fetchRoomList() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    fetchRoomList();\n  }, [filters]);\n\n  var onCloseRoom = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(schedule, idx) {\n      var res, newRoomList, newRoom;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              setIsLoading({\n                type: 'GET_ALL',\n                status: true\n              });\n              _context2.next = 4;\n              return zoomRoomApi.closeRoom(schedule.CourseScheduleID);\n\n            case 4:\n              res = _context2.sent;\n\n              if (res.status === 200) {\n                newRoomList = _toConsumableArray(roomList);\n                newRoom = _objectSpread(_objectSpread({}, newRoomList[idx]), {}, {\n                  IsRoomStart: false\n                });\n                newRoomList.splice(idx, 1, newRoom);\n                setRoomList(newRoomList);\n                showNoti('success', 'Phòng học đã đóng');\n              }\n\n              _context2.next = 11;\n              break;\n\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.log('onCloseRoom', _context2.t0.message);\n\n            case 11:\n              _context2.prev = 11;\n              setIsLoading({\n                type: 'GET_ALL',\n                status: false\n              });\n              return _context2.finish(11);\n\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 8, 11, 14]]);\n    }));\n\n    return function onCloseRoom(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var columns = [{\n    title: 'ID phòng',\n    dataIndex: 'ZoomRoomID'\n  }, {\n    title: 'Mật khẩu phòng',\n    dataIndex: 'ZoomRoomPass'\n  }, _objectSpread({\n    title: 'Giáo viên',\n    dataIndex: 'TeacherName'\n  }, FilterColumn('TeacherName', onSearch, onResetSearch)), {\n    title: 'Ngày học',\n    dataIndex: 'Date',\n    render: function render(date) {\n      return moment(date).format('DD/MM/YYYY');\n    }\n  }, {\n    title: 'Giờ học',\n    dataIndex: 'StudyTimeName'\n  }, _objectSpread({\n    align: 'center',\n    title: 'Trạng thái',\n    dataIndex: 'IsRoomStart',\n    render: function render(IsRoomStart) {\n      return IsRoomStart ? /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"tag blue\",\n        children: \"Ho\\u1EA1t \\u0111\\u1ED9ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 44\n      }, _this) : /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"tag gray\",\n        children: \"D\\u1EEBng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 90\n      }, _this);\n    }\n  }, FilterColumn('IsRoomStart', onSearch, onResetSearch, 'select', optionActiveList)), {\n    width: 100,\n    align: 'center',\n    dataIndex: 'IsRoomStart',\n    render: function render(IsRoomStart, record, idx) {\n      return IsRoomStart && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"Tham gia ph\\xF2ng h\\u1ECDc\",\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            target: \"_blank\",\n            href: \"/course/zoom-view/\".concat(record.CourseScheduleID),\n            children: /*#__PURE__*/_jsxDEV(LogIn, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 9\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 8\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 7\n        }, _this), /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"\\u0110\\xF3ng ph\\xF2ng h\\u1ECDc\",\n          children: /*#__PURE__*/_jsxDEV(CloseZoomRoom, {\n            handleClose: function handleClose() {\n              return onCloseRoom(record, idx);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 8\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 7\n        }, _this)]\n      }, void 0, true);\n    }\n  }];\n  return /*#__PURE__*/_jsxDEV(PowerTable, {\n    currentPage: filters.pageIndex,\n    totalPage: totalPage,\n    getPagination: getPagination,\n    loading: isLoading,\n    addClass: \"basic-header\",\n    columns: columns,\n    dataSource: roomList,\n    TitlePage: \"Danh s\\xE1ch ph\\xF2ng h\\u1ECDc\",\n    TitleCard: null,\n    Extra: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"extra-table\",\n      children: [/*#__PURE__*/_jsxDEV(ZoomRoomFilter, {\n        handleFilter: onFilter,\n        handleResetFilter: onResetSearch\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 6\n      }, _this), /*#__PURE__*/_jsxDEV(SortBox, {\n        handleSort: onSort,\n        dataOption: sortOptionList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 6\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 5\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 243,\n    columnNumber: 3\n  }, _this);\n};\n\n_s(ZoomRoom, \"62GLAhmjjXy773jMW5fk05h9UMI=\", false, function () {\n  return [useWrap];\n});\n\n_c = ZoomRoom;\nexport default ZoomRoom;\n\nvar _c;\n\n$RefreshReg$(_c, \"ZoomRoom\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/ManageZoom/ZoomRoom/ZoomRoom.tsx"],"names":["Tooltip","moment","React","useEffect","useRef","useState","LogIn","zoomRoomApi","SortBox","PowerTable","FilterColumn","useWrap","CloseZoomRoom","ZoomRoomFilter","ZoomRoom","type","status","isLoading","setIsLoading","totalPage","setTotalPage","showNoti","roomList","setRoomList","listFieldInit","pageIndex","pageSize","sort","sortType","fromDate","toDate","TeacherName","IsRoomStart","refValue","filters","setFilters","optionActiveList","title","value","sortOptionList","dataSort","text","onFilter","obj","current","format","getPagination","onSort","option","onResetSearch","onSearch","valueSearch","dataIndex","fetchRoomList","getAll","res","data","totalRow","console","log","message","onCloseRoom","schedule","idx","closeRoom","CourseScheduleID","newRoomList","newRoom","splice","columns","render","date","align","width","record"],"mappings":"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","sourcesContent":["import { Tooltip } from 'antd'\r\nimport moment from 'moment'\r\nimport React, { useEffect, useRef, useState } from 'react'\r\nimport { LogIn } from 'react-feather'\r\nimport { zoomRoomApi } from '~/apiBase'\r\nimport SortBox from '~/components/Elements/SortBox'\r\nimport PowerTable from '~/components/PowerTable'\r\nimport FilterColumn from '~/components/Tables/FilterColumn'\r\nimport { useWrap } from '~/context/wrap'\r\nimport CloseZoomRoom from './CloseZoomRoom'\r\nimport ZoomRoomFilter from './ZoomRoomFilter'\r\n\r\nconst ZoomRoom = () => {\r\n\tconst [isLoading, setIsLoading] = useState({\r\n\t\ttype: '',\r\n\t\tstatus: false\r\n\t})\r\n\tconst [totalPage, setTotalPage] = useState(null)\r\n\tconst { showNoti } = useWrap()\r\n\tconst [roomList, setRoomList] = useState<IZoomRoom[]>([])\r\n\r\n\t// FILTER\r\n\tconst listFieldInit = {\r\n\t\tpageIndex: 1,\r\n\t\tpageSize: 10,\r\n\t\tsort: -1,\r\n\t\tsortType: false,\r\n\r\n\t\tfromDate: '',\r\n\t\ttoDate: '',\r\n\t\tTeacherName: '',\r\n\t\tIsRoomStart: null\r\n\t}\r\n\tlet refValue = useRef({\r\n\t\tpageIndex: 1,\r\n\t\tpageSize: 10,\r\n\t\tsort: -1,\r\n\t\tsortType: false\r\n\t})\r\n\tconst [filters, setFilters] = useState(listFieldInit)\r\n\tconst optionActiveList = [\r\n\t\t{\r\n\t\t\ttitle: 'Hoạt động',\r\n\t\t\tvalue: true\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Dừng',\r\n\t\t\tvalue: false\r\n\t\t}\r\n\t]\r\n\r\n\t// SORT OPTION\r\n\tconst sortOptionList = [\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 0,\r\n\t\t\t\tsortType: true\r\n\t\t\t},\r\n\t\t\tvalue: 1,\r\n\t\t\ttext: 'Tên tăng dần'\r\n\t\t},\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 0,\r\n\t\t\t\tsortType: false\r\n\t\t\t},\r\n\t\t\tvalue: 2,\r\n\t\t\ttext: 'Tên giảm dần'\r\n\t\t},\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 1,\r\n\t\t\t\tsortType: true\r\n\t\t\t},\r\n\t\t\tvalue: 3,\r\n\t\t\ttext: 'Ngày học tăng dần'\r\n\t\t},\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 1,\r\n\t\t\t\tsortType: false\r\n\t\t\t},\r\n\t\t\tvalue: 4,\r\n\t\t\ttext: 'Ngày học giảm dần'\r\n\t\t}\r\n\t]\r\n\t// FILTER\r\n\tconst onFilter = (obj) => {\r\n\t\tsetFilters({\r\n\t\t\t...listFieldInit,\r\n\t\t\t...refValue.current,\r\n\t\t\tpageIndex: 1,\r\n\t\t\t...obj,\r\n\t\t\tfromDate: moment(obj.fromDate).format('YYYY/MM/DD'),\r\n\t\t\ttoDate: moment(obj.toDate).format('YYYY/MM/DD')\r\n\t\t})\r\n\t}\r\n\t// PAGINATION\r\n\tconst getPagination = (pageIndex: number, pageSize: number) => {\r\n\t\tif (!pageSize) pageSize = 10\r\n\t\trefValue.current = {\r\n\t\t\t...refValue.current,\r\n\t\t\tpageSize,\r\n\t\t\tpageIndex\r\n\t\t}\r\n\t\tsetFilters({\r\n\t\t\t...filters,\r\n\t\t\t...refValue.current\r\n\t\t})\r\n\t}\r\n\t// SORT\r\n\tconst onSort = (option) => {\r\n\t\trefValue.current = {\r\n\t\t\t...refValue.current,\r\n\t\t\tsort: option.title.sort,\r\n\t\t\tsortType: option.title.sortType\r\n\t\t}\r\n\t\tsetFilters({\r\n\t\t\t...listFieldInit,\r\n\t\t\t...refValue.current\r\n\t\t})\r\n\t}\r\n\t// RESET SEARCH\r\n\tconst onResetSearch = () => {\r\n\t\tsetFilters({\r\n\t\t\t...listFieldInit,\r\n\t\t\tpageSize: refValue.current.pageSize\r\n\t\t})\r\n\t}\r\n\t// ACTION SEARCH\r\n\tconst onSearch = (valueSearch, dataIndex) => {\r\n\t\tsetFilters({\r\n\t\t\t...listFieldInit,\r\n\t\t\t...refValue.current,\r\n\t\t\tpageIndex: 1,\r\n\t\t\t[dataIndex]: valueSearch\r\n\t\t})\r\n\t}\r\n\r\n\tconst fetchRoomList = async () => {\r\n\t\ttry {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'GET_ALL',\r\n\t\t\t\tstatus: true\r\n\t\t\t})\r\n\t\t\tconst res = await zoomRoomApi.getAll(filters)\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tsetRoomList(res.data.data)\r\n\t\t\t\tsetTotalPage(res.data.totalRow)\r\n\t\t\t}\r\n\t\t\tif (res.status === 204) {\r\n\t\t\t\tsetRoomList([])\r\n\t\t\t\tsetTotalPage(0)\r\n\t\t\t\tshowNoti('danger', 'Danh sách trống')\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('fetchRoomList', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'GET_ALL',\r\n\t\t\t\tstatus: false\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchRoomList()\r\n\t}, [filters])\r\n\r\n\tconst onCloseRoom = async (schedule: IZoomRoom, idx: number) => {\r\n\t\ttry {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'GET_ALL',\r\n\t\t\t\tstatus: true\r\n\t\t\t})\r\n\t\t\tconst res = await zoomRoomApi.closeRoom(schedule.CourseScheduleID)\r\n\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tconst newRoomList = [...roomList]\r\n\t\t\t\tconst newRoom: IZoomRoom = { ...newRoomList[idx], IsRoomStart: false }\r\n\t\t\t\tnewRoomList.splice(idx, 1, newRoom)\r\n\t\t\t\tsetRoomList(newRoomList)\r\n\t\t\t\tshowNoti('success', 'Phòng học đã đóng')\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('onCloseRoom', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'GET_ALL',\r\n\t\t\t\tstatus: false\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'ID phòng',\r\n\t\t\tdataIndex: 'ZoomRoomID'\r\n\t\t},\r\n\t\t{ title: 'Mật khẩu phòng', dataIndex: 'ZoomRoomPass' },\r\n\t\t{\r\n\t\t\ttitle: 'Giáo viên',\r\n\t\t\tdataIndex: 'TeacherName',\r\n\t\t\t...FilterColumn('TeacherName', onSearch, onResetSearch)\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Ngày học',\r\n\t\t\tdataIndex: 'Date',\r\n\t\t\trender: (date) => moment(date).format('DD/MM/YYYY')\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Giờ học',\r\n\t\t\tdataIndex: 'StudyTimeName'\r\n\t\t},\r\n\t\t{\r\n\t\t\talign: 'center',\r\n\t\t\ttitle: 'Trạng thái',\r\n\t\t\tdataIndex: 'IsRoomStart',\r\n\t\t\trender: (IsRoomStart) => (IsRoomStart ? <span className=\"tag blue\">Hoạt động</span> : <span className=\"tag gray\">Dừng</span>),\r\n\t\t\t...FilterColumn('IsRoomStart', onSearch, onResetSearch, 'select', optionActiveList)\r\n\t\t},\r\n\t\t{\r\n\t\t\twidth: 100,\r\n\t\t\talign: 'center',\r\n\t\t\tdataIndex: 'IsRoomStart',\r\n\t\t\trender: (IsRoomStart, record: IZoomRoom, idx) =>\r\n\t\t\t\tIsRoomStart && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Tooltip title=\"Tham gia phòng học\">\r\n\t\t\t\t\t\t\t<a target=\"_blank\" href={`/course/zoom-view/${record.CourseScheduleID}`}>\r\n\t\t\t\t\t\t\t\t<LogIn />\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t<Tooltip title=\"Đóng phòng học\">\r\n\t\t\t\t\t\t\t<CloseZoomRoom handleClose={() => onCloseRoom(record, idx)} />\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)\r\n\t\t}\r\n\t]\r\n\r\n\treturn (\r\n\t\t<PowerTable\r\n\t\t\tcurrentPage={filters.pageIndex}\r\n\t\t\ttotalPage={totalPage}\r\n\t\t\tgetPagination={getPagination}\r\n\t\t\tloading={isLoading}\r\n\t\t\taddClass=\"basic-header\"\r\n\t\t\tcolumns={columns}\r\n\t\t\tdataSource={roomList}\r\n\t\t\tTitlePage=\"Danh sách phòng học\"\r\n\t\t\tTitleCard={null}\r\n\t\t\tExtra={\r\n\t\t\t\t<div className=\"extra-table\">\r\n\t\t\t\t\t<ZoomRoomFilter handleFilter={onFilter} handleResetFilter={onResetSearch} />\r\n\t\t\t\t\t<SortBox handleSort={onSort} dataOption={sortOptionList} />\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t/>\r\n\t)\r\n}\r\nexport default ZoomRoom\r\n"]},"metadata":{},"sourceType":"module"}