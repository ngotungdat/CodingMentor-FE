{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\pages\\\\course\\\\calendar\\\\index.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { Card } from 'antd';\nimport React, { useLayoutEffect } from 'react';\nimport { useState } from 'react';\nimport { CalendarApi } from '~/apiBase/Calendar/calendar';\nimport CourseCalendar from '~/components/CourseCalendar';\nimport LayoutBase from '~/components/LayoutBase';\nimport { useWrap } from '~/context/wrap';\n\nvar CouCalen = function CouCalen() {\n  _s();\n\n  var _useWrap = useWrap(),\n      getTitlePage = _useWrap.getTitlePage,\n      showNoti = _useWrap.showNoti,\n      userInformation = _useWrap.userInformation;\n\n  var _useState = useState([]),\n      calendarEvents = _useState[0],\n      setEvents = _useState[1];\n\n  var _useState2 = useState([]),\n      videoCourses = _useState2[0],\n      setVideoCourses = _useState2[1];\n\n  var isTeach = function isTeach() {\n    return !!userInformation && userInformation.RoleID == 2 ? true : false;\n  };\n\n  var isAdOrTeach = function isAdOrTeach() {\n    return !!userInformation && (userInformation.RoleID == 1 || isTeach()) ? true : false;\n  };\n\n  useLayoutEffect(function () {\n    _getData();\n  }, [userInformation]);\n\n  var _getData = function _getData() {\n    isAdOrTeach() && getTeacherEvents();\n  };\n\n  var getTeacherEvents = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return CalendarApi.getCalendarEvents();\n\n            case 3:\n              res = _context.sent;\n              res.status == 200 && setEvents(res.data.data);\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              showNoti('danger', _context.t0 === null || _context.t0 === void 0 ? void 0 : _context.t0.message);\n\n            case 10:\n              _context.prev = 10;\n              isTeach() && getVideoCourseCalendar();\n              return _context.finish(10);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7, 10, 13]]);\n    }));\n\n    return function getTeacherEvents() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var getVideoCourseCalendar = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return CalendarApi.getOpenCalendar();\n\n            case 3:\n              res = _context2.sent;\n              res.status == 200 && setVideoCourses(res.data.data);\n              _context2.next = 10;\n              break;\n\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](0);\n              showNoti('danger', _context2.t0 === null || _context2.t0 === void 0 ? void 0 : _context2.t0.message);\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 7]]);\n    }));\n\n    return function getVideoCourseCalendar() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var _formatEvents = function _formatEvents(param) {\n    var temp = [];\n\n    if (!!param) {\n      for (var i = 0; i < param.length; i++) {\n        var event = param[i];\n        temp.push({\n          id: event === null || event === void 0 ? void 0 : event.ID,\n          name: event === null || event === void 0 ? void 0 : event.VideoCourseName,\n          title: (event === null || event === void 0 ? void 0 : event.sTime) + ' - ' + (event === null || event === void 0 ? void 0 : event.eTime),\n          allDay: true,\n          start: new Date(event === null || event === void 0 ? void 0 : event.sDateTime),\n          end: new Date(event === null || event === void 0 ? void 0 : event.eDateTime),\n          sTime: event === null || event === void 0 ? void 0 : event.sTime,\n          eTime: event === null || event === void 0 ? void 0 : event.eTime,\n          OpenDate: event === null || event === void 0 ? void 0 : event.OpenDate,\n          resource: param\n        });\n      }\n    }\n\n    console.log('_formatEvents: ', temp);\n    return temp;\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    children: [getTitlePage('Đăng ký lịch'), /*#__PURE__*/_jsxDEV(CourseCalendar, {\n      getData: _getData,\n      events: _formatEvents(calendarEvents),\n      courses: videoCourses\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 4\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 3\n  }, _this);\n};\n\n_s(CouCalen, \"6vDU2ottsnBmHXBKgMwmqYboNJY=\", false, function () {\n  return [useWrap];\n});\n\n_c = CouCalen;\nCouCalen.layout = LayoutBase;\nexport default CouCalen;\n\nvar _c;\n\n$RefreshReg$(_c, \"CouCalen\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/pages/course/calendar/index.tsx"],"names":["Card","React","useLayoutEffect","useState","CalendarApi","CourseCalendar","LayoutBase","useWrap","CouCalen","getTitlePage","showNoti","userInformation","calendarEvents","setEvents","videoCourses","setVideoCourses","isTeach","RoleID","isAdOrTeach","_getData","getTeacherEvents","getCalendarEvents","res","status","data","message","getVideoCourseCalendar","getOpenCalendar","_formatEvents","param","temp","i","length","event","push","id","ID","name","VideoCourseName","title","sTime","eTime","allDay","start","Date","sDateTime","end","eDateTime","OpenDate","resource","console","log","layout"],"mappings":"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","sourcesContent":["import { Card, message } from 'antd'\r\nimport React, { useEffect, useLayoutEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { CalendarApi } from '~/apiBase/Calendar/calendar'\r\nimport CourseCalendar from '~/components/CourseCalendar'\r\nimport LayoutBase from '~/components/LayoutBase'\r\nimport { useWrap } from '~/context/wrap'\r\n\r\nconst CouCalen = () => {\r\n\tconst { getTitlePage, showNoti, userInformation } = useWrap()\r\n\r\n\tconst [calendarEvents, setEvents] = useState([])\r\n\tconst [videoCourses, setVideoCourses] = useState([])\r\n\r\n\tconst isTeach = () => {\r\n\t\treturn !!userInformation && userInformation.RoleID == 2 ? true : false\r\n\t}\r\n\r\n\tconst isAdOrTeach = () => {\r\n\t\treturn !!userInformation && (userInformation.RoleID == 1 || isTeach()) ? true : false\r\n\t}\r\n\r\n\tuseLayoutEffect(() => {\r\n\t\t_getData()\r\n\t}, [userInformation])\r\n\r\n\tconst _getData = () => {\r\n\t\tisAdOrTeach() && getTeacherEvents()\r\n\t}\r\n\r\n\tconst getTeacherEvents = async () => {\r\n\t\ttry {\r\n\t\t\tconst res: any = await CalendarApi.getCalendarEvents()\r\n\t\t\tres.status == 200 && setEvents(res.data.data)\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error?.message)\r\n\t\t} finally {\r\n\t\t\tisTeach() && getVideoCourseCalendar()\r\n\t\t}\r\n\t}\r\n\r\n\tconst getVideoCourseCalendar = async () => {\r\n\t\ttry {\r\n\t\t\tconst res: any = await CalendarApi.getOpenCalendar()\r\n\t\t\tres.status == 200 && setVideoCourses(res.data.data)\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error?.message)\r\n\t\t}\r\n\t}\r\n\r\n\tconst _formatEvents = (param: any) => {\r\n\t\tlet temp: any = []\r\n\t\tif (!!param) {\r\n\t\t\tfor (let i = 0; i < param.length; i++) {\r\n\t\t\t\tlet event = param[i]\r\n\t\t\t\ttemp.push({\r\n\t\t\t\t\tid: event?.ID,\r\n\t\t\t\t\tname: event?.VideoCourseName,\r\n\t\t\t\t\ttitle: event?.sTime + ' - ' + event?.eTime,\r\n\t\t\t\t\tallDay: true,\r\n\t\t\t\t\tstart: new Date(event?.sDateTime),\r\n\t\t\t\t\tend: new Date(event?.eDateTime),\r\n\t\t\t\t\tsTime: event?.sTime,\r\n\t\t\t\t\teTime: event?.eTime,\r\n\t\t\t\t\tOpenDate: event?.OpenDate,\r\n\t\t\t\t\tresource: param\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\tconsole.log('_formatEvents: ', temp)\r\n\t\treturn temp\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Card>\r\n\t\t\t{getTitlePage('Đăng ký lịch')}\r\n\t\t\t<CourseCalendar getData={_getData} events={_formatEvents(calendarEvents)} courses={videoCourses} />\r\n\t\t</Card>\r\n\t)\r\n}\r\n\r\nCouCalen.layout = LayoutBase\r\nexport default CouCalen\r\n"]},"metadata":{},"sourceType":"module"}