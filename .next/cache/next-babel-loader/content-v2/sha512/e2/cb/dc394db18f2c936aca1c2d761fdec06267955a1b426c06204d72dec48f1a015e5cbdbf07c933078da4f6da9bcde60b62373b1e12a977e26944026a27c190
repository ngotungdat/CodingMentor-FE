{"ast":null,"code":"import _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\ExamList\\\\ExamShow\\\\WrittingList.tsx\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport ReactHtmlParser from 'react-html-parser';\nimport { Modal, Tooltip, Popconfirm } from 'antd';\nimport { Trash2 } from 'react-feather';\nimport { examDetailApi } from '~/apiBase';\nimport { useExamDetail } from '~/pages/question-bank/exam-list/exam-detail/[slug]';\nimport { useWrap } from '~/context/wrap';\nimport EditPoint from '../ExamForm/EditPoint';\nimport ChangePosition from '../ExamForm/ChangePosition';\nimport { useDoingTest } from '~/context/useDoingTest';\nimport { useDoneTest } from '~/context/useDoneTest';\nimport EditorSimple from '~/components/Elements/EditorSimple';\nimport MarkingExam from '../MarkingExam/MarkingExam'; // ---- COMPONENT CHILDREN ----\n\nvar WrittingModal = function WrittingModal(props) {\n  _s();\n\n  var onGetDataEditor = props.onGetDataEditor,\n      contentOfStudent = props.contentOfStudent;\n\n  var _useState = useState(false),\n      isModalVisible = _useState[0],\n      setIsModalVisible = _useState[1];\n\n  var _useState2 = useState(null),\n      contentEditor = _useState2[0],\n      setContentEditor = _useState2[1];\n\n  var _useState3 = useState(false),\n      isModalConfirm = _useState3[0],\n      setIsModalConfirm = _useState3[1];\n\n  var _useState4 = useState(false),\n      isReset = _useState4[0],\n      setIsReset = _useState4[1];\n\n  var showModal = function showModal() {\n    setIsModalVisible(true);\n    setIsReset(false);\n\n    if (!contentOfStudent) {\n      setIsReset(true);\n      setTimeout(function () {\n        setIsReset(false);\n      }, 200);\n    }\n  };\n\n  var handleOk = function handleOk() {\n    setIsModalVisible(false);\n    onGetDataEditor(contentEditor);\n  };\n\n  var handleCancel = function handleCancel() {\n    if (contentOfStudent !== contentEditor) {\n      setIsModalConfirm(true);\n    } else {\n      setIsModalVisible(false);\n    }\n  };\n\n  var handleGetDataEditor = function handleGetDataEditor(value) {\n    setContentEditor(value);\n  };\n\n  useEffect(function () {\n    setContentEditor(contentOfStudent);\n  }, [contentOfStudent]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-warning\",\n      onClick: showModal,\n      children: !contentOfStudent ? 'Làm bài tự luận' : 'Làm lại'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(Modal, {\n      className: \"modal-writting\",\n      width: 700,\n      title: \"Form vi\\u1EBFt b\\xE0i t\\u1EF1 lu\\u1EADn\",\n      cancelText: \"H\\u1EE7y\",\n      okText: \"L\\u01B0u\",\n      visible: isModalVisible,\n      onOk: handleOk,\n      onCancel: handleCancel,\n      children: isModalVisible && /*#__PURE__*/_jsxDEV(EditorSimple, {\n        isTranslate: false,\n        handleChange: function handleChange(value) {\n          return handleGetDataEditor(value);\n        },\n        isReset: isReset,\n        questionContent: contentEditor\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 6\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Ch\\xFA \\xFD\",\n      visible: isModalConfirm,\n      onOk: function onOk() {\n        return setIsModalConfirm(false), setIsModalVisible(false);\n      },\n      onCancel: function onCancel() {\n        return setIsModalConfirm(false);\n      },\n      cancelText: \"\\u0110\\xF3ng\",\n      okText: \"OK\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontWeight: 500\n        },\n        children: \"B\\xE0i vi\\u1EBFt c\\u1EE7a b\\u1EA1n ch\\u01B0a \\u0111\\u01B0\\u1EE3c l\\u01B0u. B\\u1EA1n c\\xF3 mu\\u1ED1n tho\\xE1t kh\\u1ECFi form n\\xE0y?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 5\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 4\n    }, _this)]\n  }, void 0, true);\n}; // ---- COMPONENT PARENT ----\n\n\n_s(WrittingModal, \"9Tnf/qQgSg6jYgFsA40EKlZDcm8=\");\n\n_c = WrittingModal;\n\nvar WrittingList = function WrittingList(props) {\n  _s2();\n\n  var _useDoneTest = useDoneTest(),\n      doneTestData = _useDoneTest.doneTestData,\n      dataMarking = _useDoneTest.dataMarking,\n      getDataMarking = _useDoneTest.getDataMarking;\n\n  var _useExamDetail = useExamDetail(),\n      onDeleteQuestion = _useExamDetail.onDeleteQuestion,\n      isChangePosition = _useExamDetail.isChangePosition;\n\n  var _useDoingTest = useDoingTest(),\n      activeID = _useDoingTest.activeID,\n      packageResult = _useDoingTest.packageResult,\n      getPackageResult = _useDoingTest.getPackageResult,\n      getListPicked = _useDoingTest.getListPicked;\n\n  var dataQuestion = props.dataQuestion,\n      listQuestionID = props.listQuestionID,\n      isDoingTest = props.isDoingTest,\n      isMarked = props.isMarked,\n      hideScore = props.hideScore,\n      arPosition = props.arPosition,\n      handleChange = props.handleChange,\n      addOldItem = props.addOldItem;\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti;\n\n  var _useState5 = useState(''),\n      contentOfStudent = _useState5[0],\n      setContentOfStudent = _useState5[1];\n\n  var _useState6 = useState(false),\n      confirmLoading = _useState6[0],\n      setConfirmLoading = _useState6[1];\n\n  var _useState7 = useState({\n    id: null,\n    status: false\n  }),\n      visible = _useState7[0],\n      setVisible = _useState7[1];\n\n  var returnPosition = function returnPosition(quesID) {\n    var index = listQuestionID.indexOf(quesID);\n    var text = 'Câu ' + (index + 1).toString();\n    return text;\n  }; // Chấp nhận xóa câu hỏi\n\n\n  var handleOk = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(quesItem) {\n      var itemDelete, res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              itemDelete = {\n                ID: dataQuestion.ID,\n                Enable: false,\n                ExerciseOrExerciseGroup: [{\n                  Point: quesItem.Point,\n                  ExerciseOrExerciseGroupID: quesItem.ExerciseID\n                }]\n              };\n              setConfirmLoading(true);\n              _context.prev = 2;\n              _context.next = 5;\n              return examDetailApi.update(itemDelete);\n\n            case 5:\n              res = _context.sent;\n\n              if (res.status == 200) {\n                onDeleteQuestion(itemDelete);\n                showNoti('success', 'Xóa thành công');\n              }\n\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](2);\n              showNoti('danger', _context.t0.message);\n\n            case 12:\n              _context.prev = 12;\n              setConfirmLoading(false);\n              return _context.finish(12);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 9, 12, 15]]);\n    }));\n\n    return function handleOk(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(); // Handle cancel popup delte\n\n\n  var handleCancel = function handleCancel(quesID) {\n    setVisible({\n      id: quesID,\n      status: false\n    });\n  };\n\n  var deleteQuestionItem = function deleteQuestionItem(quesID) {\n    !visible.status ? setVisible({\n      id: quesID,\n      status: true\n    }) : setVisible({\n      id: quesID,\n      status: false\n    });\n  };\n\n  var _onGetPoint = function onGetPoint(point, questionID) {\n    if (dataMarking.setPackageExerciseStudentsList.some(function (item, index) {\n      return item['ID'] === questionID;\n    })) {\n      dataMarking.setPackageExerciseStudentsList.every(function (item) {\n        if (item.ID === questionID) {\n          item.Point = point;\n          return false;\n        }\n\n        return true;\n      });\n    } else {\n      dataMarking.setPackageExerciseStudentsList.push({\n        ID: questionID,\n        Point: point\n      });\n    }\n\n    getDataMarking(_objectSpread({}, dataMarking));\n  }; // ----------- ALL ACTION IN DOINGTEST -------------\n\n\n  var _onGetDataEditor = function onGetDataEditor(dataAns, quesID) {\n    getListPicked(quesID);\n    setContentOfStudent(dataAns); // Find index\n\n    var indexQuestion = packageResult.SetPackageResultDetailInfoList.findIndex(function (item) {\n      return item.ExamTopicDetailID === dataQuestion.ID;\n    });\n    var indexQuestionDetail = packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList.findIndex(function (item) {\n      return item.ExerciseID === quesID;\n    }); // Add new answer to list\n\n    if (packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[indexQuestionDetail].SetPackageExerciseAnswerStudentList.length == 0) {\n      packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[indexQuestionDetail].SetPackageExerciseAnswerStudentList.push({\n        AnswerID: 0,\n        AnswerContent: dataAns,\n        FileAudio: ''\n      });\n    } else {\n      packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[indexQuestionDetail].SetPackageExerciseAnswerStudentList[0].AnswerContent = dataAns;\n    }\n\n    getPackageResult(_objectSpread({}, packageResult));\n  };\n\n  useEffect(function () {\n    if (!doneTestData) {\n      if (isDoingTest) {\n        // Find index\n        var indexQuestion = packageResult.SetPackageResultDetailInfoList.findIndex(function (item) {\n          return item.ExamTopicDetailID === dataQuestion.ID;\n        });\n\n        if (packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[0].SetPackageExerciseAnswerStudentList.length > 0) {\n          setContentOfStudent(packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[0].SetPackageExerciseAnswerStudentList[0].AnswerContent);\n        }\n      }\n    } else {\n      if (dataQuestion.ExerciseTopic[0].ExerciseAnswer.length > 0) {\n        setContentOfStudent(dataQuestion.ExerciseTopic[0].ExerciseAnswer[0].AnswerContent);\n      }\n    }\n  }, [activeID]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: dataQuestion.ExerciseTopic.map(function (ques, ind) {\n      var _dataMarking$setPacka;\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"question-item typing \".concat(ques.ExerciseID === activeID ? 'active-doing' : ''),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"box-detail\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"box-title\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"title-ques\",\n              children: returnPosition(ques.ExerciseID)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 8\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"title-text mt-3\",\n              children: ReactHtmlParser(ques.Content)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 8\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"box-doing-wrting mt-3\",\n              children: [contentOfStudent ? /*#__PURE__*/_jsxDEV(\"h6\", {\n                className: \"text-underline mb-2\",\n                children: /*#__PURE__*/_jsxDEV(\"u\", {\n                  children: \"B\\xE0i vi\\u1EBFt \\u0111\\xE3 l\\xE0m\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 10\n              }, _this) : isDoingTest && /*#__PURE__*/_jsxDEV(\"h6\", {\n                className: \"text-underline\",\n                children: \"B\\u1EA5m v\\xE0o n\\xFAt b\\xEAn d\\u01B0\\u1EDBi \\u0111\\u1EC3 l\\xE0m b\\xE0i t\\u1EF1 lu\\u1EADn\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 25\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"content-of-student\",\n                children: ReactHtmlParser(contentOfStudent)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 10\n              }, _this), !doneTestData && isDoingTest && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"writting-editor mt-2\",\n                children: /*#__PURE__*/_jsxDEV(WrittingModal, {\n                  contentOfStudent: contentOfStudent,\n                  onGetDataEditor: function onGetDataEditor(content) {\n                    return _onGetDataEditor(content, ques.ExerciseID);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 10\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 8\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 7\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"box-action\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"box-action-list mb-2\",\n            children: !doneTestData && !isDoingTest && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [!isChangePosition && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(EditPoint, {\n                  quesItem: ques,\n                  dataQuestion: dataQuestion\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 262,\n                  columnNumber: 12\n                }, _this), /*#__PURE__*/_jsxDEV(Popconfirm, {\n                  title: \"B\\u1EA1n c\\xF3 ch\\u1EAFc mu\\u1ED1n x\\xF3a?\",\n                  onConfirm: function onConfirm() {\n                    return handleOk(ques);\n                  },\n                  okButtonProps: {\n                    loading: confirmLoading\n                  },\n                  onCancel: function onCancel() {\n                    return handleCancel(ques.ID);\n                  },\n                  children: /*#__PURE__*/_jsxDEV(Tooltip, {\n                    title: \"X\\xF3a c\\xE2u h\\u1ECFi\",\n                    placement: \"rightTop\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn btn-icon delete\",\n                      onClick: function onClick() {\n                        return deleteQuestionItem(ques.ID);\n                      },\n                      children: /*#__PURE__*/_jsxDEV(Trash2, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 271,\n                        columnNumber: 15\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 270,\n                      columnNumber: 14\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 269,\n                    columnNumber: 13\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 12\n                }, _this)]\n              }, void 0, true), /*#__PURE__*/_jsxDEV(ChangePosition, {\n                dataQuestion: dataQuestion,\n                arPosition: arPosition,\n                questionID: dataQuestion.ID,\n                handleChange: handleChange,\n                addOldItem: addOldItem\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 10\n              }, _this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 7\n          }, _this), hideScore == true ? /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"point-question\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text mb-2\",\n              children: !dataMarking ? ques === null || ques === void 0 ? void 0 : ques.Point : (_dataMarking$setPacka = dataMarking.setPackageExerciseStudentsList.find(function (item) {\n                return item['ID'] === ques.ID;\n              })) === null || _dataMarking$setPacka === void 0 ? void 0 : _dataMarking$setPacka.Point\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 9\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 8\n          }, _this), dataMarking && !isMarked && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"point-marking\",\n            children: /*#__PURE__*/_jsxDEV(MarkingExam, {\n              onGetPoint: function onGetPoint(point) {\n                return _onGetPoint(point, ques.ID);\n              },\n              dataRow: ques,\n              dataMarking: dataMarking\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 9\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 8\n          }, _this), dataMarking && (ques === null || ques === void 0 ? void 0 : ques.Point) !== undefined && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"point-show mt-3\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-0\",\n              children: [\"\\u0110i\\u1EC3m: \", ques === null || ques === void 0 ? void 0 : ques.Point]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 9\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 8\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 6\n        }, _this)]\n      }, ind, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 5\n      }, _this);\n    })\n  }, void 0, false);\n};\n\n_s2(WrittingList, \"iysNEt+XgKc1v60nZuvycp7BKCE=\", false, function () {\n  return [useDoneTest, useExamDetail, useDoingTest, useWrap];\n});\n\n_c2 = WrittingList;\nexport default WrittingList;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"WrittingModal\");\n$RefreshReg$(_c2, \"WrittingList\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/ExamList/ExamShow/WrittingList.tsx"],"names":["React","useEffect","useState","ReactHtmlParser","Modal","Tooltip","Popconfirm","Trash2","examDetailApi","useExamDetail","useWrap","EditPoint","ChangePosition","useDoingTest","useDoneTest","EditorSimple","MarkingExam","WrittingModal","props","onGetDataEditor","contentOfStudent","isModalVisible","setIsModalVisible","contentEditor","setContentEditor","isModalConfirm","setIsModalConfirm","isReset","setIsReset","showModal","setTimeout","handleOk","handleCancel","handleGetDataEditor","value","fontWeight","WrittingList","doneTestData","dataMarking","getDataMarking","onDeleteQuestion","isChangePosition","activeID","packageResult","getPackageResult","getListPicked","dataQuestion","listQuestionID","isDoingTest","isMarked","hideScore","arPosition","handleChange","addOldItem","showNoti","setContentOfStudent","confirmLoading","setConfirmLoading","id","status","visible","setVisible","returnPosition","quesID","index","indexOf","text","toString","quesItem","itemDelete","ID","Enable","ExerciseOrExerciseGroup","Point","ExerciseOrExerciseGroupID","ExerciseID","update","res","message","deleteQuestionItem","onGetPoint","point","questionID","setPackageExerciseStudentsList","some","item","every","push","dataAns","indexQuestion","SetPackageResultDetailInfoList","findIndex","ExamTopicDetailID","indexQuestionDetail","SetPackageExerciseStudentInfoList","SetPackageExerciseAnswerStudentList","length","AnswerID","AnswerContent","FileAudio","ExerciseTopic","ExerciseAnswer","map","ques","ind","Content","content","loading","find","undefined"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport ReactHtmlParser from 'react-html-parser'\r\nimport { Modal, Tooltip, Popconfirm } from 'antd'\r\nimport { Trash2 } from 'react-feather'\r\nimport { examDetailApi } from '~/apiBase'\r\nimport { useExamDetail } from '~/pages/question-bank/exam-list/exam-detail/[slug]'\r\nimport { useWrap } from '~/context/wrap'\r\nimport EditPoint from '../ExamForm/EditPoint'\r\nimport ChangePosition from '../ExamForm/ChangePosition'\r\nimport { useDoingTest } from '~/context/useDoingTest'\r\nimport { useDoneTest } from '~/context/useDoneTest'\r\nimport EditorSimple from '~/components/Elements/EditorSimple'\r\nimport MarkingExam from '../MarkingExam/MarkingExam'\r\n\r\n// ---- COMPONENT CHILDREN ----\r\nconst WrittingModal = (props) => {\r\n\tconst { onGetDataEditor, contentOfStudent } = props\r\n\tconst [isModalVisible, setIsModalVisible] = useState(false)\r\n\tconst [contentEditor, setContentEditor] = useState(null)\r\n\tconst [isModalConfirm, setIsModalConfirm] = useState(false)\r\n\tconst [isReset, setIsReset] = useState(false)\r\n\r\n\tconst showModal = () => {\r\n\t\tsetIsModalVisible(true)\r\n\t\tsetIsReset(false)\r\n\t\tif (!contentOfStudent) {\r\n\t\t\tsetIsReset(true)\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsetIsReset(false)\r\n\t\t\t}, 200)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleOk = () => {\r\n\t\tsetIsModalVisible(false)\r\n\t\tonGetDataEditor(contentEditor)\r\n\t}\r\n\r\n\tconst handleCancel = () => {\r\n\t\tif (contentOfStudent !== contentEditor) {\r\n\t\t\tsetIsModalConfirm(true)\r\n\t\t} else {\r\n\t\t\tsetIsModalVisible(false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleGetDataEditor = (value) => {\r\n\t\tsetContentEditor(value)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetContentEditor(contentOfStudent)\r\n\t}, [contentOfStudent])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<button className=\"btn btn-warning\" onClick={showModal}>\r\n\t\t\t\t{!contentOfStudent ? 'Làm bài tự luận' : 'Làm lại'}\r\n\t\t\t</button>\r\n\t\t\t<Modal\r\n\t\t\t\tclassName=\"modal-writting\"\r\n\t\t\t\twidth={700}\r\n\t\t\t\ttitle=\"Form viết bài tự luận\"\r\n\t\t\t\tcancelText=\"Hủy\"\r\n\t\t\t\tokText=\"Lưu\"\r\n\t\t\t\tvisible={isModalVisible}\r\n\t\t\t\tonOk={handleOk}\r\n\t\t\t\tonCancel={handleCancel}\r\n\t\t\t>\r\n\t\t\t\t{isModalVisible && (\r\n\t\t\t\t\t<EditorSimple\r\n\t\t\t\t\t\tisTranslate={false}\r\n\t\t\t\t\t\thandleChange={(value) => handleGetDataEditor(value)}\r\n\t\t\t\t\t\tisReset={isReset}\r\n\t\t\t\t\t\tquestionContent={contentEditor}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Modal>\r\n\t\t\t<Modal\r\n\t\t\t\ttitle=\"Chú ý\"\r\n\t\t\t\tvisible={isModalConfirm}\r\n\t\t\t\tonOk={() => (setIsModalConfirm(false), setIsModalVisible(false))}\r\n\t\t\t\tonCancel={() => setIsModalConfirm(false)}\r\n\t\t\t\tcancelText=\"Đóng\"\r\n\t\t\t\tokText=\"OK\"\r\n\t\t\t>\r\n\t\t\t\t<p style={{ fontWeight: 500 }}>Bài viết của bạn chưa được lưu. Bạn có muốn thoát khỏi form này?</p>\r\n\t\t\t</Modal>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\n// ---- COMPONENT PARENT ----\r\nconst WrittingList = (props) => {\r\n\tconst { doneTestData, dataMarking, getDataMarking } = useDoneTest()\r\n\tconst { onDeleteQuestion, isChangePosition } = useExamDetail()\r\n\tconst { activeID, packageResult, getPackageResult, getListPicked } = useDoingTest()\r\n\tconst { dataQuestion, listQuestionID, isDoingTest, isMarked, hideScore, arPosition, handleChange, addOldItem } = props\r\n\tconst { showNoti } = useWrap()\r\n\tconst [contentOfStudent, setContentOfStudent] = useState('')\r\n\tconst [confirmLoading, setConfirmLoading] = useState(false)\r\n\tconst [visible, setVisible] = useState({\r\n\t\tid: null,\r\n\t\tstatus: false\r\n\t})\r\n\r\n\tconst returnPosition = (quesID) => {\r\n\t\tlet index = listQuestionID.indexOf(quesID)\r\n\t\tlet text = 'Câu ' + (index + 1).toString()\r\n\t\treturn text\r\n\t}\r\n\r\n\t// Chấp nhận xóa câu hỏi\r\n\tconst handleOk = async (quesItem) => {\r\n\t\tlet itemDelete = {\r\n\t\t\tID: dataQuestion.ID,\r\n\t\t\tEnable: false,\r\n\t\t\tExerciseOrExerciseGroup: [\r\n\t\t\t\t{\r\n\t\t\t\t\tPoint: quesItem.Point,\r\n\t\t\t\t\tExerciseOrExerciseGroupID: quesItem.ExerciseID\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t\tsetConfirmLoading(true)\r\n\t\ttry {\r\n\t\t\tlet res = await examDetailApi.update(itemDelete)\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tonDeleteQuestion(itemDelete)\r\n\t\t\t\tshowNoti('success', 'Xóa thành công')\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetConfirmLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\t// Handle cancel popup delte\r\n\tconst handleCancel = (quesID) => {\r\n\t\tsetVisible({\r\n\t\t\tid: quesID,\r\n\t\t\tstatus: false\r\n\t\t})\r\n\t}\r\n\r\n\tconst deleteQuestionItem = (quesID) => {\r\n\t\t!visible.status\r\n\t\t\t? setVisible({\r\n\t\t\t\t\tid: quesID,\r\n\t\t\t\t\tstatus: true\r\n\t\t\t  })\r\n\t\t\t: setVisible({\r\n\t\t\t\t\tid: quesID,\r\n\t\t\t\t\tstatus: false\r\n\t\t\t  })\r\n\t}\r\n\r\n\tconst onGetPoint = (point, questionID) => {\r\n\t\tif (dataMarking.setPackageExerciseStudentsList.some((item, index) => item['ID'] === questionID)) {\r\n\t\t\tdataMarking.setPackageExerciseStudentsList.every((item) => {\r\n\t\t\t\tif (item.ID === questionID) {\r\n\t\t\t\t\titem.Point = point\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\treturn true\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tdataMarking.setPackageExerciseStudentsList.push({\r\n\t\t\t\tID: questionID,\r\n\t\t\t\tPoint: point\r\n\t\t\t})\r\n\t\t}\r\n\t\tgetDataMarking({ ...dataMarking })\r\n\t}\r\n\r\n\t// ----------- ALL ACTION IN DOINGTEST -------------\r\n\tconst onGetDataEditor = (dataAns, quesID) => {\r\n\t\tgetListPicked(quesID)\r\n\t\tsetContentOfStudent(dataAns)\r\n\t\t// Find index\r\n\t\tlet indexQuestion = packageResult.SetPackageResultDetailInfoList.findIndex((item) => item.ExamTopicDetailID === dataQuestion.ID)\r\n\t\tlet indexQuestionDetail = packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList.findIndex(\r\n\t\t\t(item) => item.ExerciseID === quesID\r\n\t\t)\r\n\t\t// Add new answer to list\r\n\t\tif (\r\n\t\t\tpackageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[indexQuestionDetail]\r\n\t\t\t\t.SetPackageExerciseAnswerStudentList.length == 0\r\n\t\t) {\r\n\t\t\tpackageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[\r\n\t\t\t\tindexQuestionDetail\r\n\t\t\t].SetPackageExerciseAnswerStudentList.push({\r\n\t\t\t\tAnswerID: 0,\r\n\t\t\t\tAnswerContent: dataAns,\r\n\t\t\t\tFileAudio: ''\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tpackageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[\r\n\t\t\t\tindexQuestionDetail\r\n\t\t\t].SetPackageExerciseAnswerStudentList[0].AnswerContent = dataAns\r\n\t\t}\r\n\t\tgetPackageResult({ ...packageResult })\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!doneTestData) {\r\n\t\t\tif (isDoingTest) {\r\n\t\t\t\t// Find index\r\n\t\t\t\tlet indexQuestion = packageResult.SetPackageResultDetailInfoList.findIndex((item) => item.ExamTopicDetailID === dataQuestion.ID)\r\n\t\t\t\tif (\r\n\t\t\t\t\tpackageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[0]\r\n\t\t\t\t\t\t.SetPackageExerciseAnswerStudentList.length > 0\r\n\t\t\t\t) {\r\n\t\t\t\t\tsetContentOfStudent(\r\n\t\t\t\t\t\tpackageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[0]\r\n\t\t\t\t\t\t\t.SetPackageExerciseAnswerStudentList[0].AnswerContent\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (dataQuestion.ExerciseTopic[0].ExerciseAnswer.length > 0) {\r\n\t\t\t\tsetContentOfStudent(dataQuestion.ExerciseTopic[0].ExerciseAnswer[0].AnswerContent)\r\n\t\t\t}\r\n\t\t}\r\n\t}, [activeID])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{dataQuestion.ExerciseTopic.map((ques, ind) => (\r\n\t\t\t\t<div className={`question-item typing ${ques.ExerciseID === activeID ? 'active-doing' : ''}`} key={ind}>\r\n\t\t\t\t\t<div className=\"box-detail\">\r\n\t\t\t\t\t\t<div className=\"box-title\">\r\n\t\t\t\t\t\t\t<span className={`title-ques`}>{returnPosition(ques.ExerciseID)}</span>\r\n\t\t\t\t\t\t\t<div className=\"title-text mt-3\">{ReactHtmlParser(ques.Content)}</div>\r\n\t\t\t\t\t\t\t<div className=\"box-doing-wrting mt-3\">\r\n\t\t\t\t\t\t\t\t{contentOfStudent ? (\r\n\t\t\t\t\t\t\t\t\t<h6 className=\"text-underline mb-2\">\r\n\t\t\t\t\t\t\t\t\t\t<u>Bài viết đã làm</u>\r\n\t\t\t\t\t\t\t\t\t</h6>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\tisDoingTest && <h6 className=\"text-underline\">Bấm vào nút bên dưới để làm bài tự luận</h6>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{<div className=\"content-of-student\">{ReactHtmlParser(contentOfStudent)}</div>}\r\n\t\t\t\t\t\t\t\t{!doneTestData && isDoingTest && (\r\n\t\t\t\t\t\t\t\t\t<div className=\"writting-editor mt-2\">\r\n\t\t\t\t\t\t\t\t\t\t<WrittingModal\r\n\t\t\t\t\t\t\t\t\t\t\tcontentOfStudent={contentOfStudent}\r\n\t\t\t\t\t\t\t\t\t\t\tonGetDataEditor={(content) => onGetDataEditor(content, ques.ExerciseID)}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"box-action\">\r\n\t\t\t\t\t\t<div className=\"box-action-list mb-2\">\r\n\t\t\t\t\t\t\t{!doneTestData && !isDoingTest && (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t{!isChangePosition && (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t<EditPoint quesItem={ques} dataQuestion={dataQuestion} />\r\n\t\t\t\t\t\t\t\t\t\t\t<Popconfirm\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Bạn có chắc muốn xóa?\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonConfirm={() => handleOk(ques)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tokButtonProps={{ loading: confirmLoading }}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonCancel={() => handleCancel(ques.ID)}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip title=\"Xóa câu hỏi\" placement=\"rightTop\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button className=\"btn btn-icon delete\" onClick={() => deleteQuestionItem(ques.ID)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Trash2 />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t<ChangePosition\r\n\t\t\t\t\t\t\t\t\t\tdataQuestion={dataQuestion}\r\n\t\t\t\t\t\t\t\t\t\tarPosition={arPosition}\r\n\t\t\t\t\t\t\t\t\t\tquestionID={dataQuestion.ID}\r\n\t\t\t\t\t\t\t\t\t\thandleChange={handleChange}\r\n\t\t\t\t\t\t\t\t\t\taddOldItem={addOldItem}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{hideScore == true ? (\r\n\t\t\t\t\t\t\t<></>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div className=\"point-question\">\r\n\t\t\t\t\t\t\t\t<p className=\"text mb-2\">\r\n\t\t\t\t\t\t\t\t\t{!dataMarking ? ques?.Point : dataMarking.setPackageExerciseStudentsList.find((item) => item['ID'] === ques.ID)?.Point}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{dataMarking && !isMarked && (\r\n\t\t\t\t\t\t\t<div className=\"point-marking\">\r\n\t\t\t\t\t\t\t\t<MarkingExam onGetPoint={(point) => onGetPoint(point, ques.ID)} dataRow={ques} dataMarking={dataMarking} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{dataMarking && ques?.Point !== undefined && (\r\n\t\t\t\t\t\t\t<div className=\"point-show mt-3\">\r\n\t\t\t\t\t\t\t\t<p className=\"mb-0\">Điểm: {ques?.Point}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t))}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default WrittingList\r\n"]},"metadata":{},"sourceType":"module"}