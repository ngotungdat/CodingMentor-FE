{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _toConsumableArray from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\ExamList\\\\ExamShow\\\\TypingList.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport ReactHtmlParser from 'react-html-parser';\nimport { useDoingTest } from '~/context/useDoingTest';\nimport { useDoneTest } from '~/context/useDoneTest';\n\nvar TypingList = function TypingList(props) {\n  _s();\n\n  var _useDoneTest = useDoneTest(),\n      doneTestData = _useDoneTest.doneTestData;\n\n  var dataQuestion = props.dataQuestion,\n      listQuestionID = props.listQuestionID,\n      isDoingTest = props.isDoingTest;\n\n  var _useDoingTest = useDoingTest(),\n      activeID = _useDoingTest.activeID,\n      getActiveID = _useDoingTest.getActiveID,\n      packageResult = _useDoingTest.packageResult,\n      getPackageResult = _useDoingTest.getPackageResult,\n      getListPicked = _useDoingTest.getListPicked,\n      removeListPicked = _useDoingTest.removeListPicked;\n\n  var _useState = useState([]),\n      listInput = _useState[0],\n      setListInput = _useState[1];\n\n  var _useState2 = useState([]),\n      listCorrectAnswer = _useState2[0],\n      setListCorrectAnswer = _useState2[1];\n\n  var _useState3 = useState(null),\n      isActive = _useState3[0],\n      setIsActive = _useState3[1];\n\n  var _useState4 = useState(false),\n      loadFirst = _useState4[0],\n      setLoadFirst = _useState4[1];\n\n  useEffect(function () {\n    if (dataQuestion.Paragraph !== '') {\n      var spaceEditor = document.querySelectorAll('.box-typing .space-editor');\n\n      if (spaceEditor && spaceEditor.length > 0) {\n        spaceEditor.forEach(function (item, index) {\n          var quesID = parseInt(item.getAttribute('ques-id')); // Sắp xếp lại thứ tự các ô input trong đoạn văn\n\n          var indexQues = null;\n\n          if (listQuestionID.includes(quesID)) {\n            indexQues = listQuestionID.indexOf(quesID);\n          }\n\n          if (indexQues) {\n            var positionSpace = document.querySelectorAll('.box-typing .position-space');\n\n            if (positionSpace.length < spaceEditor.length) {\n              var span = document.createElement('span');\n              span.classList.add('position-space');\n              span.id = quesID.toString();\n\n              if (quesID === activeID) {\n                span.classList.add('active');\n              }\n\n              span.append(\"(\".concat(indexQues + 1, \")\"));\n              item.innerHTML = '';\n              item.before(span);\n            }\n          }\n        });\n      }\n    }\n  }, [listQuestionID]); // ----------- ALL ACTION IN DOINGTEST -------------\n\n  var returnPosition = function returnPosition(quesID) {\n    var text = '';\n    var indexQuestion = listQuestionID.findIndex(function (id) {\n      return id === quesID;\n    });\n    text = (indexQuestion + 1).toString() + '/';\n    return text;\n  };\n\n  var handleChangeText = function handleChangeText(text, quesID) {\n    // Find index\n    var indexQuestion = packageResult.SetPackageResultDetailInfoList.findIndex(function (item) {\n      return item.ExamTopicDetailID === dataQuestion.ID;\n    });\n    var indexQuestionDetail = packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList.findIndex(function (item) {\n      return item.ExerciseID === quesID;\n    }); // Add new answer to list - Kiểm tra xem mảng có data chưa, nếu chưa thì thêm mới, ngược lại thì cập nhật object\n    // Đối với loại Điền từ thì mảng chỉ có 1 object đáp án\n\n    if (packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[indexQuestionDetail].SetPackageExerciseAnswerStudentList.length == 0) {\n      packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[indexQuestionDetail].SetPackageExerciseAnswerStudentList.push({\n        AnswerID: 0,\n        AnswerContent: text,\n        FileAudio: ''\n      });\n    } else {\n      packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[indexQuestionDetail].SetPackageExerciseAnswerStudentList[0].AnswerContent = text;\n    }\n\n    getPackageResult(_objectSpread({}, packageResult));\n  };\n\n  useEffect(function () {\n    if (!doneTestData) {\n      if (isDoingTest) {\n        if (dataQuestion.Paragraph !== '') {\n          var spaceEditor = document.querySelectorAll('.doingtest-group .box-typing .space-editor');\n\n          if (spaceEditor && spaceEditor.length > 0) {\n            spaceEditor.forEach(function (item, index) {\n              var quesID = parseInt(item.getAttribute('ques-id')); // Trường hợp điền từ xong một lát quay lại vẫn còn\n\n              var indexQuestion = packageResult.SetPackageResultDetailInfoList.findIndex(function (item) {\n                return item.ExamTopicDetailID === dataQuestion.ID;\n              });\n              var indexQuestionDetail = packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList.findIndex(function (item) {\n                return item.ExerciseID === quesID;\n              });\n\n              if (packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[indexQuestionDetail].SetPackageExerciseAnswerStudentList.length > 0) {\n                if (!loadFirst) {\n                  item.innerHTML = packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[indexQuestionDetail].SetPackageExerciseAnswerStudentList[0].AnswerContent;\n                  setLoadFirst(true);\n                } else {\n                  if (activeID === isActive) {\n                    item.innerHTML = packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[indexQuestionDetail].SetPackageExerciseAnswerStudentList[0].AnswerContent;\n                  }\n                }\n              } //Tìm và active đúng ô input\n\n\n              item.classList.remove('active-type-input');\n\n              if (quesID === activeID) {\n                item.classList.add('active-type-input');\n              }\n            });\n          }\n        }\n      }\n    } else {\n      if (dataQuestion.Paragraph !== '') {\n        var _spaceEditor = document.querySelectorAll('.box-typing  .space-editor');\n\n        _spaceEditor.forEach(function (item) {\n          item.setAttribute('contenteditable', 'false');\n          var quesID = parseInt(item.getAttribute('ques-id'));\n          dataQuestion.ExerciseTopic.every(function (ques) {\n            if (ques.ExerciseID === quesID) {\n              // Check this answer is right or wrong\n              if (ques.isTrue) {\n                item.classList.add('right-answer');\n              } else {\n                item.classList.add('wrong-answer');\n              } // Find answer content of user\n\n\n              if (ques.ExerciseAnswer.length > 0) {\n                if (ques.ExerciseAnswer[0].AnswerContent && ques.ExerciseAnswer[0].AnswerContent !== '') {\n                  item.innerHTML = ques.ExerciseAnswer[0].AnswerContent;\n                } else {\n                  item.classList.add('center-row');\n                } // Tạo đáp án đúng để hover\n\n\n                var getNodes = function getNodes(str) {\n                  return new DOMParser().parseFromString(str, 'text/html').body.childNodes;\n                };\n\n                var node = getNodes(\"<div class=\\\"tooltip-answer\\\" id=\\\"\".concat(quesID, \"\\\">\").concat(ques.ExerciseAnswer[0].ExerciseAnswerContent, \"</div>\"));\n                item.appendChild(node[0]);\n                listCorrectAnswer.push({\n                  id: ques.ExerciseAnswer[0].ExerciseAnswerID,\n                  content: ques.ExerciseAnswer[0].ExerciseAnswerContent\n                });\n              }\n\n              return false;\n            }\n\n            return true;\n          });\n          setListCorrectAnswer(_toConsumableArray(listCorrectAnswer));\n        });\n      }\n    }\n\n    if (doneTestData || isDoingTest) {\n      // -- Sắp xếp lại vị trí\n      var positionSpace = document.querySelectorAll('.position-space');\n      positionSpace.forEach(function (item) {\n        item.classList.remove('active');\n\n        if (parseInt(item.id) === activeID) {\n          item.classList.add('active');\n        }\n      });\n    }\n  }, [activeID]);\n  useEffect(function () {\n    if (doneTestData) {\n      if (listCorrectAnswer.length > 0) {\n        var spaceEditor = document.querySelectorAll('.test-wrapper .box-typing .space-editor');\n        var tooltipAns = document.querySelectorAll('.test-wrapper .box-typing .tooltip-answer');\n        spaceEditor.forEach(function (item) {\n          // Mouse over\n          item.addEventListener('mouseover', function (event) {\n            var quesID = item.getAttribute('ques-id');\n            tooltipAns.forEach(function (e) {\n              if (e.id === quesID) {\n                e.classList.remove('d-none');\n                e.classList.add('d-block');\n              }\n            });\n          }); // Mouse out\n\n          item.addEventListener('mouseout', function () {\n            var quesID = item.getAttribute('ques-id');\n            tooltipAns.forEach(function (e) {\n              if (e.id === quesID) {\n                e.classList.remove('d-block');\n                e.classList.add('d-none');\n              }\n            });\n          });\n        });\n      }\n    }\n  }, [listCorrectAnswer]);\n  useEffect(function () {\n    if (!doneTestData) {\n      var el = document.querySelectorAll('.doingtest-group .box-typing .space-editor');\n      el.forEach(function (item) {\n        listInput.push(item.innerHTML);\n        var quesID = parseInt(item.getAttribute('ques-id'));\n        item.addEventListener('click', function (event) {\n          event.preventDefault();\n          getActiveID(quesID);\n          setIsActive(quesID);\n        });\n        item.addEventListener('keyup', function (event) {\n          var input = event.target;\n          handleChangeText(input.innerText, quesID); // Điều kiện đề input co giãn theo text\n\n          var lengthText = input.innerText.length;\n\n          if (lengthText > 14) {\n            item.classList.add('auto');\n          } else {\n            item.classList.remove('auto');\n\n            if (lengthText < 1) {\n              removeListPicked(quesID);\n            } else {\n              getListPicked(quesID);\n            }\n          }\n        });\n      });\n      setListInput(_toConsumableArray(listInput));\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"\",\n      children: ReactHtmlParser(dataQuestion.Content)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"box-typing col-lg-6 col-md-12\",\n      style: {\n        marginLeft: -15\n      },\n      children: ReactHtmlParser(dataQuestion.Paragraph)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 4\n    }, _this), doneTestData && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrap-list-answer-typing mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n          className: \"mb-2\",\n          children: \"\\u0110\\xE1p \\xE1n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 7\n        }, _this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"list-answer-typing w-100  pl-0\",\n          children: dataQuestion === null || dataQuestion === void 0 ? void 0 : dataQuestion.ExerciseTopic.map(function (item) {\n            return item.ExerciseAnswer.length > 0 && /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"answer-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"number\",\n                children: returnPosition(item.ExerciseID)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 12\n              }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text\",\n                children: item.ExerciseAnswer[0].ExerciseAnswerContent\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 12\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 11\n            }, _this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 7\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 6\n      }, _this)\n    }, void 0, false)]\n  }, void 0, true);\n};\n\n_s(TypingList, \"hA6Tpqoo6+k1Qy4qQj9vw8vvup0=\", false, function () {\n  return [useDoneTest, useDoingTest];\n});\n\n_c = TypingList;\nexport default TypingList;\n\nvar _c;\n\n$RefreshReg$(_c, \"TypingList\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/ExamList/ExamShow/TypingList.tsx"],"names":["React","useEffect","useState","ReactHtmlParser","useDoingTest","useDoneTest","TypingList","props","doneTestData","dataQuestion","listQuestionID","isDoingTest","activeID","getActiveID","packageResult","getPackageResult","getListPicked","removeListPicked","listInput","setListInput","listCorrectAnswer","setListCorrectAnswer","isActive","setIsActive","loadFirst","setLoadFirst","Paragraph","spaceEditor","document","querySelectorAll","length","forEach","item","index","quesID","parseInt","getAttribute","indexQues","includes","indexOf","positionSpace","span","createElement","classList","add","id","toString","append","innerHTML","before","returnPosition","text","indexQuestion","findIndex","handleChangeText","SetPackageResultDetailInfoList","ExamTopicDetailID","ID","indexQuestionDetail","SetPackageExerciseStudentInfoList","ExerciseID","SetPackageExerciseAnswerStudentList","push","AnswerID","AnswerContent","FileAudio","remove","setAttribute","ExerciseTopic","every","ques","isTrue","ExerciseAnswer","getNodes","str","DOMParser","parseFromString","body","childNodes","node","ExerciseAnswerContent","appendChild","ExerciseAnswerID","content","tooltipAns","addEventListener","event","e","el","preventDefault","input","target","innerText","lengthText","Content","marginLeft","map"],"mappings":";;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,SAASC,YAAT,QAA6B,wBAA7B;AACA,SAASC,WAAT,QAA4B,uBAA5B;;AAEA,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACC,KAAD,EAAW;AAAA;;AAAA,qBACJF,WAAW,EADP;AAAA,MACrBG,YADqB,gBACrBA,YADqB;;AAAA,MAErBC,YAFqB,GAEyBF,KAFzB,CAErBE,YAFqB;AAAA,MAEPC,cAFO,GAEyBH,KAFzB,CAEPG,cAFO;AAAA,MAESC,WAFT,GAEyBJ,KAFzB,CAESI,WAFT;;AAAA,sBAGuEP,YAAY,EAHnF;AAAA,MAGrBQ,QAHqB,iBAGrBA,QAHqB;AAAA,MAGXC,WAHW,iBAGXA,WAHW;AAAA,MAGEC,aAHF,iBAGEA,aAHF;AAAA,MAGiBC,gBAHjB,iBAGiBA,gBAHjB;AAAA,MAGmCC,aAHnC,iBAGmCA,aAHnC;AAAA,MAGkDC,gBAHlD,iBAGkDA,gBAHlD;;AAAA,kBAIKf,QAAQ,CAAC,EAAD,CAJb;AAAA,MAItBgB,SAJsB;AAAA,MAIXC,YAJW;;AAAA,mBAKqBjB,QAAQ,CAAC,EAAD,CAL7B;AAAA,MAKtBkB,iBALsB;AAAA,MAKHC,oBALG;;AAAA,mBAMGnB,QAAQ,CAAC,IAAD,CANX;AAAA,MAMtBoB,QANsB;AAAA,MAMZC,WANY;;AAAA,mBAOKrB,QAAQ,CAAC,KAAD,CAPb;AAAA,MAOtBsB,SAPsB;AAAA,MAOXC,YAPW;;AAS7BxB,EAAAA,SAAS,CAAC,YAAM;AACf,QAAIQ,YAAY,CAACiB,SAAb,KAA2B,EAA/B,EAAmC;AAClC,UAAIC,WAAW,GAAGC,QAAQ,CAACC,gBAAT,CAA0B,2BAA1B,CAAlB;;AACA,UAAIF,WAAW,IAAIA,WAAW,CAACG,MAAZ,GAAqB,CAAxC,EAA2C;AAC1CH,QAAAA,WAAW,CAACI,OAAZ,CAAoB,UAACC,IAAD,EAAOC,KAAP,EAAiB;AACpC,cAAIC,MAAM,GAAGC,QAAQ,CAACH,IAAI,CAACI,YAAL,CAAkB,SAAlB,CAAD,CAArB,CADoC,CAEpC;;AACA,cAAIC,SAAS,GAAG,IAAhB;;AACA,cAAI3B,cAAc,CAAC4B,QAAf,CAAwBJ,MAAxB,CAAJ,EAAqC;AACpCG,YAAAA,SAAS,GAAG3B,cAAc,CAAC6B,OAAf,CAAuBL,MAAvB,CAAZ;AACA;;AACD,cAAIG,SAAJ,EAAe;AACd,gBAAIG,aAAa,GAAGZ,QAAQ,CAACC,gBAAT,CAA0B,6BAA1B,CAApB;;AACA,gBAAIW,aAAa,CAACV,MAAd,GAAuBH,WAAW,CAACG,MAAvC,EAA+C;AAC9C,kBAAIW,IAAI,GAAGb,QAAQ,CAACc,aAAT,CAAuB,MAAvB,CAAX;AACAD,cAAAA,IAAI,CAACE,SAAL,CAAeC,GAAf,CAAmB,gBAAnB;AACAH,cAAAA,IAAI,CAACI,EAAL,GAAUX,MAAM,CAACY,QAAP,EAAV;;AACA,kBAAIZ,MAAM,KAAKtB,QAAf,EAAyB;AACxB6B,gBAAAA,IAAI,CAACE,SAAL,CAAeC,GAAf,CAAmB,QAAnB;AACA;;AACDH,cAAAA,IAAI,CAACM,MAAL,YAAgBV,SAAS,GAAG,CAA5B;AAEAL,cAAAA,IAAI,CAACgB,SAAL,GAAiB,EAAjB;AACAhB,cAAAA,IAAI,CAACiB,MAAL,CAAYR,IAAZ;AACA;AACD;AACD,SAtBD;AAuBA;AACD;AACD,GA7BQ,EA6BN,CAAC/B,cAAD,CA7BM,CAAT,CAT6B,CAwC7B;;AAEA,MAAMwC,cAAc,GAAG,SAAjBA,cAAiB,CAAChB,MAAD,EAAY;AAClC,QAAIiB,IAAI,GAAG,EAAX;AACA,QAAIC,aAAa,GAAG1C,cAAc,CAAC2C,SAAf,CAAyB,UAACR,EAAD;AAAA,aAAQA,EAAE,KAAKX,MAAf;AAAA,KAAzB,CAApB;AACAiB,IAAAA,IAAI,GAAG,CAACC,aAAa,GAAG,CAAjB,EAAoBN,QAApB,KAAiC,GAAxC;AACA,WAAOK,IAAP;AACA,GALD;;AAOA,MAAMG,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACH,IAAD,EAAOjB,MAAP,EAAkB;AAC1C;AACA,QAAIkB,aAAa,GAAGtC,aAAa,CAACyC,8BAAd,CAA6CF,SAA7C,CAAuD,UAACrB,IAAD;AAAA,aAAUA,IAAI,CAACwB,iBAAL,KAA2B/C,YAAY,CAACgD,EAAlD;AAAA,KAAvD,CAApB;AACA,QAAIC,mBAAmB,GAAG5C,aAAa,CAACyC,8BAAd,CAA6CH,aAA7C,EAA4DO,iCAA5D,CAA8FN,SAA9F,CACzB,UAACrB,IAAD;AAAA,aAAUA,IAAI,CAAC4B,UAAL,KAAoB1B,MAA9B;AAAA,KADyB,CAA1B,CAH0C,CAM1C;AACA;;AACA,QACCpB,aAAa,CAACyC,8BAAd,CAA6CH,aAA7C,EAA4DO,iCAA5D,CAA8FD,mBAA9F,EACEG,mCADF,CACsC/B,MADtC,IACgD,CAFjD,EAGE;AACDhB,MAAAA,aAAa,CAACyC,8BAAd,CAA6CH,aAA7C,EAA4DO,iCAA5D,CACCD,mBADD,EAEEG,mCAFF,CAEsCC,IAFtC,CAE2C;AAC1CC,QAAAA,QAAQ,EAAE,CADgC;AAE1CC,QAAAA,aAAa,EAAEb,IAF2B;AAG1Cc,QAAAA,SAAS,EAAE;AAH+B,OAF3C;AAOA,KAXD,MAWO;AACNnD,MAAAA,aAAa,CAACyC,8BAAd,CAA6CH,aAA7C,EAA4DO,iCAA5D,CACCD,mBADD,EAEEG,mCAFF,CAEsC,CAFtC,EAEyCG,aAFzC,GAEyDb,IAFzD;AAGA;;AACDpC,IAAAA,gBAAgB,mBAAMD,aAAN,EAAhB;AACA,GAzBD;;AA2BAb,EAAAA,SAAS,CAAC,YAAM;AACf,QAAI,CAACO,YAAL,EAAmB;AAClB,UAAIG,WAAJ,EAAiB;AAChB,YAAIF,YAAY,CAACiB,SAAb,KAA2B,EAA/B,EAAmC;AAClC,cAAIC,WAAW,GAAGC,QAAQ,CAACC,gBAAT,CAA0B,4CAA1B,CAAlB;;AACA,cAAIF,WAAW,IAAIA,WAAW,CAACG,MAAZ,GAAqB,CAAxC,EAA2C;AAC1CH,YAAAA,WAAW,CAACI,OAAZ,CAAoB,UAACC,IAAD,EAAOC,KAAP,EAAiB;AACpC,kBAAIC,MAAM,GAAGC,QAAQ,CAACH,IAAI,CAACI,YAAL,CAAkB,SAAlB,CAAD,CAArB,CADoC,CAEpC;;AACA,kBAAIgB,aAAa,GAAGtC,aAAa,CAACyC,8BAAd,CAA6CF,SAA7C,CACnB,UAACrB,IAAD;AAAA,uBAAUA,IAAI,CAACwB,iBAAL,KAA2B/C,YAAY,CAACgD,EAAlD;AAAA,eADmB,CAApB;AAGA,kBAAIC,mBAAmB,GAAG5C,aAAa,CAACyC,8BAAd,CACzBH,aADyB,EAExBO,iCAFwB,CAEUN,SAFV,CAEoB,UAACrB,IAAD;AAAA,uBAAUA,IAAI,CAAC4B,UAAL,KAAoB1B,MAA9B;AAAA,eAFpB,CAA1B;;AAGA,kBACCpB,aAAa,CAACyC,8BAAd,CAA6CH,aAA7C,EAA4DO,iCAA5D,CAA8FD,mBAA9F,EACEG,mCADF,CACsC/B,MADtC,GAC+C,CAFhD,EAGE;AACD,oBAAI,CAACN,SAAL,EAAgB;AACfQ,kBAAAA,IAAI,CAACgB,SAAL,GACClC,aAAa,CAACyC,8BAAd,CAA6CH,aAA7C,EAA4DO,iCAA5D,CACCD,mBADD,EAEEG,mCAFF,CAEsC,CAFtC,EAEyCG,aAH1C;AAIAvC,kBAAAA,YAAY,CAAC,IAAD,CAAZ;AACA,iBAND,MAMO;AACN,sBAAIb,QAAQ,KAAKU,QAAjB,EAA2B;AAC1BU,oBAAAA,IAAI,CAACgB,SAAL,GACClC,aAAa,CAACyC,8BAAd,CAA6CH,aAA7C,EAA4DO,iCAA5D,CACCD,mBADD,EAEEG,mCAFF,CAEsC,CAFtC,EAEyCG,aAH1C;AAIA;AACD;AACD,eA3BmC,CA4BpC;;;AACAhC,cAAAA,IAAI,CAACW,SAAL,CAAeuB,MAAf,CAAsB,mBAAtB;;AACA,kBAAIhC,MAAM,KAAKtB,QAAf,EAAyB;AACxBoB,gBAAAA,IAAI,CAACW,SAAL,CAAeC,GAAf,CAAmB,mBAAnB;AACA;AACD,aAjCD;AAkCA;AACD;AACD;AACD,KA1CD,MA0CO;AACN,UAAInC,YAAY,CAACiB,SAAb,KAA2B,EAA/B,EAAmC;AAClC,YAAIC,YAAW,GAAGC,QAAQ,CAACC,gBAAT,CAA0B,4BAA1B,CAAlB;;AACAF,QAAAA,YAAW,CAACI,OAAZ,CAAoB,UAACC,IAAD,EAAU;AAC7BA,UAAAA,IAAI,CAACmC,YAAL,CAAkB,iBAAlB,EAAqC,OAArC;AACA,cAAIjC,MAAM,GAAGC,QAAQ,CAACH,IAAI,CAACI,YAAL,CAAkB,SAAlB,CAAD,CAArB;AACA3B,UAAAA,YAAY,CAAC2D,aAAb,CAA2BC,KAA3B,CAAiC,UAACC,IAAD,EAAU;AAC1C,gBAAIA,IAAI,CAACV,UAAL,KAAoB1B,MAAxB,EAAgC;AAC/B;AACA,kBAAIoC,IAAI,CAACC,MAAT,EAAiB;AAChBvC,gBAAAA,IAAI,CAACW,SAAL,CAAeC,GAAf,CAAmB,cAAnB;AACA,eAFD,MAEO;AACNZ,gBAAAA,IAAI,CAACW,SAAL,CAAeC,GAAf,CAAmB,cAAnB;AACA,eAN8B,CAO/B;;;AACA,kBAAI0B,IAAI,CAACE,cAAL,CAAoB1C,MAApB,GAA6B,CAAjC,EAAoC;AACnC,oBAAIwC,IAAI,CAACE,cAAL,CAAoB,CAApB,EAAuBR,aAAvB,IAAwCM,IAAI,CAACE,cAAL,CAAoB,CAApB,EAAuBR,aAAvB,KAAyC,EAArF,EAAyF;AACxFhC,kBAAAA,IAAI,CAACgB,SAAL,GAAiBsB,IAAI,CAACE,cAAL,CAAoB,CAApB,EAAuBR,aAAxC;AACA,iBAFD,MAEO;AACNhC,kBAAAA,IAAI,CAACW,SAAL,CAAeC,GAAf,CAAmB,YAAnB;AACA,iBALkC,CAMnC;;;AACA,oBAAI6B,QAAQ,GAAG,SAAXA,QAAW,CAACC,GAAD;AAAA,yBAAS,IAAIC,SAAJ,GAAgBC,eAAhB,CAAgCF,GAAhC,EAAqC,WAArC,EAAkDG,IAAlD,CAAuDC,UAAhE;AAAA,iBAAf;;AACA,oBAAIC,IAAI,GAAGN,QAAQ,8CAAoCvC,MAApC,gBAA+CoC,IAAI,CAACE,cAAL,CAAoB,CAApB,EAAuBQ,qBAAtE,YAAnB;AACAhD,gBAAAA,IAAI,CAACiD,WAAL,CAAiBF,IAAI,CAAC,CAAD,CAArB;AACA3D,gBAAAA,iBAAiB,CAAC0C,IAAlB,CAAuB;AACtBjB,kBAAAA,EAAE,EAAEyB,IAAI,CAACE,cAAL,CAAoB,CAApB,EAAuBU,gBADL;AAEtBC,kBAAAA,OAAO,EAAEb,IAAI,CAACE,cAAL,CAAoB,CAApB,EAAuBQ;AAFV,iBAAvB;AAIA;;AACD,qBAAO,KAAP;AACA;;AACD,mBAAO,IAAP;AACA,WA3BD;AA4BA3D,UAAAA,oBAAoB,oBAAKD,iBAAL,EAApB;AACA,SAhCD;AAiCA;AACD;;AAED,QAAIZ,YAAY,IAAIG,WAApB,EAAiC;AAChC;AACA,UAAI6B,aAAa,GAAGZ,QAAQ,CAACC,gBAAT,CAA0B,iBAA1B,CAApB;AACAW,MAAAA,aAAa,CAACT,OAAd,CAAsB,UAACC,IAAD,EAAU;AAC/BA,QAAAA,IAAI,CAACW,SAAL,CAAeuB,MAAf,CAAsB,QAAtB;;AACA,YAAI/B,QAAQ,CAACH,IAAI,CAACa,EAAN,CAAR,KAAsBjC,QAA1B,EAAoC;AACnCoB,UAAAA,IAAI,CAACW,SAAL,CAAeC,GAAf,CAAmB,QAAnB;AACA;AACD,OALD;AAMA;AACD,GA5FQ,EA4FN,CAAChC,QAAD,CA5FM,CAAT;AA8FAX,EAAAA,SAAS,CAAC,YAAM;AACf,QAAIO,YAAJ,EAAkB;AACjB,UAAIY,iBAAiB,CAACU,MAAlB,GAA2B,CAA/B,EAAkC;AACjC,YAAIH,WAAW,GAAGC,QAAQ,CAACC,gBAAT,CAA0B,yCAA1B,CAAlB;AACA,YAAIuD,UAAU,GAAGxD,QAAQ,CAACC,gBAAT,CAA0B,2CAA1B,CAAjB;AACAF,QAAAA,WAAW,CAACI,OAAZ,CAAoB,UAACC,IAAD,EAAU;AAC7B;AACAA,UAAAA,IAAI,CAACqD,gBAAL,CAAsB,WAAtB,EAAmC,UAACC,KAAD,EAAuB;AACzD,gBAAIpD,MAAM,GAAGF,IAAI,CAACI,YAAL,CAAkB,SAAlB,CAAb;AACAgD,YAAAA,UAAU,CAACrD,OAAX,CAAmB,UAACwD,CAAD,EAAO;AACzB,kBAAIA,CAAC,CAAC1C,EAAF,KAASX,MAAb,EAAqB;AACpBqD,gBAAAA,CAAC,CAAC5C,SAAF,CAAYuB,MAAZ,CAAmB,QAAnB;AACAqB,gBAAAA,CAAC,CAAC5C,SAAF,CAAYC,GAAZ,CAAgB,SAAhB;AACA;AACD,aALD;AAMA,WARD,EAF6B,CAW7B;;AACAZ,UAAAA,IAAI,CAACqD,gBAAL,CAAsB,UAAtB,EAAkC,YAAM;AACvC,gBAAInD,MAAM,GAAGF,IAAI,CAACI,YAAL,CAAkB,SAAlB,CAAb;AACAgD,YAAAA,UAAU,CAACrD,OAAX,CAAmB,UAACwD,CAAD,EAAO;AACzB,kBAAIA,CAAC,CAAC1C,EAAF,KAASX,MAAb,EAAqB;AACpBqD,gBAAAA,CAAC,CAAC5C,SAAF,CAAYuB,MAAZ,CAAmB,SAAnB;AACAqB,gBAAAA,CAAC,CAAC5C,SAAF,CAAYC,GAAZ,CAAgB,QAAhB;AACA;AACD,aALD;AAMA,WARD;AASA,SArBD;AAsBA;AACD;AACD,GA7BQ,EA6BN,CAACxB,iBAAD,CA7BM,CAAT;AA+BAnB,EAAAA,SAAS,CAAC,YAAM;AACf,QAAI,CAACO,YAAL,EAAmB;AAClB,UAAIgF,EAAE,GAAG5D,QAAQ,CAACC,gBAAT,CAA0B,4CAA1B,CAAT;AACA2D,MAAAA,EAAE,CAACzD,OAAH,CAAW,UAACC,IAAD,EAAU;AACpBd,QAAAA,SAAS,CAAC4C,IAAV,CAAe9B,IAAI,CAACgB,SAApB;AACA,YAAId,MAAM,GAAGC,QAAQ,CAACH,IAAI,CAACI,YAAL,CAAkB,SAAlB,CAAD,CAArB;AACAJ,QAAAA,IAAI,CAACqD,gBAAL,CAAsB,OAAtB,EAA+B,UAACC,KAAD,EAAW;AACzCA,UAAAA,KAAK,CAACG,cAAN;AACA5E,UAAAA,WAAW,CAACqB,MAAD,CAAX;AACAX,UAAAA,WAAW,CAACW,MAAD,CAAX;AACA,SAJD;AAKAF,QAAAA,IAAI,CAACqD,gBAAL,CAAsB,OAAtB,EAA+B,UAACC,KAAD,EAAW;AACzC,cAAMI,KAAK,GAAGJ,KAAK,CAACK,MAApB;AACArC,UAAAA,gBAAgB,CAACoC,KAAK,CAACE,SAAP,EAAkB1D,MAAlB,CAAhB,CAFyC,CAGzC;;AACA,cAAI2D,UAAU,GAAGH,KAAK,CAACE,SAAN,CAAgB9D,MAAjC;;AACA,cAAI+D,UAAU,GAAG,EAAjB,EAAqB;AACpB7D,YAAAA,IAAI,CAACW,SAAL,CAAeC,GAAf,CAAmB,MAAnB;AACA,WAFD,MAEO;AACNZ,YAAAA,IAAI,CAACW,SAAL,CAAeuB,MAAf,CAAsB,MAAtB;;AACA,gBAAI2B,UAAU,GAAG,CAAjB,EAAoB;AACnB5E,cAAAA,gBAAgB,CAACiB,MAAD,CAAhB;AACA,aAFD,MAEO;AACNlB,cAAAA,aAAa,CAACkB,MAAD,CAAb;AACA;AACD;AACD,SAfD;AAgBA,OAxBD;AAyBAf,MAAAA,YAAY,oBAAKD,SAAL,EAAZ;AACA;AACD,GA9BQ,EA8BN,EA9BM,CAAT;AAgCA,sBACC;AAAA,4BACC;AAAK,MAAA,SAAS,EAAC,EAAf;AAAA,gBAAmBf,eAAe,CAACM,YAAY,CAACqF,OAAd;AAAlC;AAAA;AAAA;AAAA;AAAA,aADD,eAEC;AAAK,MAAA,SAAS,EAAC,+BAAf;AAA+C,MAAA,KAAK,EAAE;AAAEC,QAAAA,UAAU,EAAE,CAAC;AAAf,OAAtD;AAAA,gBACE5F,eAAe,CAACM,YAAY,CAACiB,SAAd;AADjB;AAAA;AAAA;AAAA;AAAA,aAFD,EAKElB,YAAY,iBACZ;AAAA,6BACC;AAAK,QAAA,SAAS,EAAC,8BAAf;AAAA,gCACC;AAAI,UAAA,SAAS,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADD,eAEC;AAAI,UAAA,SAAS,EAAC,gCAAd;AAAA,oBACEC,YADF,aACEA,YADF,uBACEA,YAAY,CAAE2D,aAAd,CAA4B4B,GAA5B,CACA,UAAChE,IAAD;AAAA,mBACCA,IAAI,CAACwC,cAAL,CAAoB1C,MAApB,GAA6B,CAA7B,iBACC;AAAI,cAAA,SAAS,EAAC,aAAd;AAAA,sCACC;AAAM,gBAAA,SAAS,EAAC,QAAhB;AAAA,0BAA0BoB,cAAc,CAAClB,IAAI,CAAC4B,UAAN;AAAxC;AAAA;AAAA;AAAA;AAAA,uBADD,eAEC;AAAM,gBAAA,SAAS,EAAC,MAAhB;AAAA,0BAAwB5B,IAAI,CAACwC,cAAL,CAAoB,CAApB,EAAuBQ;AAA/C;AAAA;AAAA;AAAA;AAAA,uBAFD;AAAA;AAAA;AAAA;AAAA;AAAA,qBAFF;AAAA,WADA;AADF;AAAA;AAAA;AAAA;AAAA,iBAFD;AAAA;AAAA;AAAA;AAAA;AAAA;AADD,qBANF;AAAA,kBADD;AA0BA,CAnQD;;GAAM1E,U;UACoBD,W,EAE2ED,Y;;;KAH/FE,U;AAqQN,eAAeA,UAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport ReactHtmlParser from 'react-html-parser'\r\nimport { useDoingTest } from '~/context/useDoingTest'\r\nimport { useDoneTest } from '~/context/useDoneTest'\r\n\r\nconst TypingList = (props) => {\r\n\tconst { doneTestData } = useDoneTest()\r\n\tconst { dataQuestion, listQuestionID, isDoingTest } = props\r\n\tconst { activeID, getActiveID, packageResult, getPackageResult, getListPicked, removeListPicked } = useDoingTest()\r\n\tconst [listInput, setListInput] = useState([])\r\n\tconst [listCorrectAnswer, setListCorrectAnswer] = useState([])\r\n\tconst [isActive, setIsActive] = useState(null)\r\n\tconst [loadFirst, setLoadFirst] = useState(false)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (dataQuestion.Paragraph !== '') {\r\n\t\t\tlet spaceEditor = document.querySelectorAll('.box-typing .space-editor')\r\n\t\t\tif (spaceEditor && spaceEditor.length > 0) {\r\n\t\t\t\tspaceEditor.forEach((item, index) => {\r\n\t\t\t\t\tlet quesID = parseInt(item.getAttribute('ques-id'))\r\n\t\t\t\t\t// Sắp xếp lại thứ tự các ô input trong đoạn văn\r\n\t\t\t\t\tlet indexQues = null\r\n\t\t\t\t\tif (listQuestionID.includes(quesID)) {\r\n\t\t\t\t\t\tindexQues = listQuestionID.indexOf(quesID)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (indexQues) {\r\n\t\t\t\t\t\tlet positionSpace = document.querySelectorAll('.box-typing .position-space')\r\n\t\t\t\t\t\tif (positionSpace.length < spaceEditor.length) {\r\n\t\t\t\t\t\t\tlet span = document.createElement('span')\r\n\t\t\t\t\t\t\tspan.classList.add('position-space')\r\n\t\t\t\t\t\t\tspan.id = quesID.toString()\r\n\t\t\t\t\t\t\tif (quesID === activeID) {\r\n\t\t\t\t\t\t\t\tspan.classList.add('active')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tspan.append(`(${indexQues + 1})`)\r\n\r\n\t\t\t\t\t\t\titem.innerHTML = ''\r\n\t\t\t\t\t\t\titem.before(span)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}, [listQuestionID])\r\n\r\n\t// ----------- ALL ACTION IN DOINGTEST -------------\r\n\r\n\tconst returnPosition = (quesID) => {\r\n\t\tlet text = ''\r\n\t\tlet indexQuestion = listQuestionID.findIndex((id) => id === quesID)\r\n\t\ttext = (indexQuestion + 1).toString() + '/'\r\n\t\treturn text\r\n\t}\r\n\r\n\tconst handleChangeText = (text, quesID) => {\r\n\t\t// Find index\r\n\t\tlet indexQuestion = packageResult.SetPackageResultDetailInfoList.findIndex((item) => item.ExamTopicDetailID === dataQuestion.ID)\r\n\t\tlet indexQuestionDetail = packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList.findIndex(\r\n\t\t\t(item) => item.ExerciseID === quesID\r\n\t\t)\r\n\t\t// Add new answer to list - Kiểm tra xem mảng có data chưa, nếu chưa thì thêm mới, ngược lại thì cập nhật object\r\n\t\t// Đối với loại Điền từ thì mảng chỉ có 1 object đáp án\r\n\t\tif (\r\n\t\t\tpackageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[indexQuestionDetail]\r\n\t\t\t\t.SetPackageExerciseAnswerStudentList.length == 0\r\n\t\t) {\r\n\t\t\tpackageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[\r\n\t\t\t\tindexQuestionDetail\r\n\t\t\t].SetPackageExerciseAnswerStudentList.push({\r\n\t\t\t\tAnswerID: 0,\r\n\t\t\t\tAnswerContent: text,\r\n\t\t\t\tFileAudio: ''\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tpackageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[\r\n\t\t\t\tindexQuestionDetail\r\n\t\t\t].SetPackageExerciseAnswerStudentList[0].AnswerContent = text\r\n\t\t}\r\n\t\tgetPackageResult({ ...packageResult })\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!doneTestData) {\r\n\t\t\tif (isDoingTest) {\r\n\t\t\t\tif (dataQuestion.Paragraph !== '') {\r\n\t\t\t\t\tlet spaceEditor = document.querySelectorAll('.doingtest-group .box-typing .space-editor')\r\n\t\t\t\t\tif (spaceEditor && spaceEditor.length > 0) {\r\n\t\t\t\t\t\tspaceEditor.forEach((item, index) => {\r\n\t\t\t\t\t\t\tlet quesID = parseInt(item.getAttribute('ques-id'))\r\n\t\t\t\t\t\t\t// Trường hợp điền từ xong một lát quay lại vẫn còn\r\n\t\t\t\t\t\t\tlet indexQuestion = packageResult.SetPackageResultDetailInfoList.findIndex(\r\n\t\t\t\t\t\t\t\t(item) => item.ExamTopicDetailID === dataQuestion.ID\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\tlet indexQuestionDetail = packageResult.SetPackageResultDetailInfoList[\r\n\t\t\t\t\t\t\t\tindexQuestion\r\n\t\t\t\t\t\t\t].SetPackageExerciseStudentInfoList.findIndex((item) => item.ExerciseID === quesID)\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tpackageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[indexQuestionDetail]\r\n\t\t\t\t\t\t\t\t\t.SetPackageExerciseAnswerStudentList.length > 0\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tif (!loadFirst) {\r\n\t\t\t\t\t\t\t\t\titem.innerHTML =\r\n\t\t\t\t\t\t\t\t\t\tpackageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[\r\n\t\t\t\t\t\t\t\t\t\t\tindexQuestionDetail\r\n\t\t\t\t\t\t\t\t\t\t].SetPackageExerciseAnswerStudentList[0].AnswerContent\r\n\t\t\t\t\t\t\t\t\tsetLoadFirst(true)\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (activeID === isActive) {\r\n\t\t\t\t\t\t\t\t\t\titem.innerHTML =\r\n\t\t\t\t\t\t\t\t\t\t\tpackageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[\r\n\t\t\t\t\t\t\t\t\t\t\t\tindexQuestionDetail\r\n\t\t\t\t\t\t\t\t\t\t\t].SetPackageExerciseAnswerStudentList[0].AnswerContent\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//Tìm và active đúng ô input\r\n\t\t\t\t\t\t\titem.classList.remove('active-type-input')\r\n\t\t\t\t\t\t\tif (quesID === activeID) {\r\n\t\t\t\t\t\t\t\titem.classList.add('active-type-input')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (dataQuestion.Paragraph !== '') {\r\n\t\t\t\tlet spaceEditor = document.querySelectorAll('.box-typing  .space-editor')\r\n\t\t\t\tspaceEditor.forEach((item) => {\r\n\t\t\t\t\titem.setAttribute('contenteditable', 'false')\r\n\t\t\t\t\tlet quesID = parseInt(item.getAttribute('ques-id'))\r\n\t\t\t\t\tdataQuestion.ExerciseTopic.every((ques) => {\r\n\t\t\t\t\t\tif (ques.ExerciseID === quesID) {\r\n\t\t\t\t\t\t\t// Check this answer is right or wrong\r\n\t\t\t\t\t\t\tif (ques.isTrue) {\r\n\t\t\t\t\t\t\t\titem.classList.add('right-answer')\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\titem.classList.add('wrong-answer')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// Find answer content of user\r\n\t\t\t\t\t\t\tif (ques.ExerciseAnswer.length > 0) {\r\n\t\t\t\t\t\t\t\tif (ques.ExerciseAnswer[0].AnswerContent && ques.ExerciseAnswer[0].AnswerContent !== '') {\r\n\t\t\t\t\t\t\t\t\titem.innerHTML = ques.ExerciseAnswer[0].AnswerContent\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\titem.classList.add('center-row')\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t// Tạo đáp án đúng để hover\r\n\t\t\t\t\t\t\t\tlet getNodes = (str) => new DOMParser().parseFromString(str, 'text/html').body.childNodes\r\n\t\t\t\t\t\t\t\tlet node = getNodes(`<div class=\"tooltip-answer\" id=\"${quesID}\">${ques.ExerciseAnswer[0].ExerciseAnswerContent}</div>`)\r\n\t\t\t\t\t\t\t\titem.appendChild(node[0])\r\n\t\t\t\t\t\t\t\tlistCorrectAnswer.push({\r\n\t\t\t\t\t\t\t\t\tid: ques.ExerciseAnswer[0].ExerciseAnswerID,\r\n\t\t\t\t\t\t\t\t\tcontent: ques.ExerciseAnswer[0].ExerciseAnswerContent\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsetListCorrectAnswer([...listCorrectAnswer])\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (doneTestData || isDoingTest) {\r\n\t\t\t// -- Sắp xếp lại vị trí\r\n\t\t\tlet positionSpace = document.querySelectorAll('.position-space')\r\n\t\t\tpositionSpace.forEach((item) => {\r\n\t\t\t\titem.classList.remove('active')\r\n\t\t\t\tif (parseInt(item.id) === activeID) {\r\n\t\t\t\t\titem.classList.add('active')\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}, [activeID])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (doneTestData) {\r\n\t\t\tif (listCorrectAnswer.length > 0) {\r\n\t\t\t\tlet spaceEditor = document.querySelectorAll('.test-wrapper .box-typing .space-editor')\r\n\t\t\t\tlet tooltipAns = document.querySelectorAll('.test-wrapper .box-typing .tooltip-answer')\r\n\t\t\t\tspaceEditor.forEach((item) => {\r\n\t\t\t\t\t// Mouse over\r\n\t\t\t\t\titem.addEventListener('mouseover', (event: MouseEvent) => {\r\n\t\t\t\t\t\tlet quesID = item.getAttribute('ques-id')\r\n\t\t\t\t\t\ttooltipAns.forEach((e) => {\r\n\t\t\t\t\t\t\tif (e.id === quesID) {\r\n\t\t\t\t\t\t\t\te.classList.remove('d-none')\r\n\t\t\t\t\t\t\t\te.classList.add('d-block')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// Mouse out\r\n\t\t\t\t\titem.addEventListener('mouseout', () => {\r\n\t\t\t\t\t\tlet quesID = item.getAttribute('ques-id')\r\n\t\t\t\t\t\ttooltipAns.forEach((e) => {\r\n\t\t\t\t\t\t\tif (e.id === quesID) {\r\n\t\t\t\t\t\t\t\te.classList.remove('d-block')\r\n\t\t\t\t\t\t\t\te.classList.add('d-none')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}, [listCorrectAnswer])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!doneTestData) {\r\n\t\t\tlet el = document.querySelectorAll('.doingtest-group .box-typing .space-editor')\r\n\t\t\tel.forEach((item) => {\r\n\t\t\t\tlistInput.push(item.innerHTML)\r\n\t\t\t\tlet quesID = parseInt(item.getAttribute('ques-id'))\r\n\t\t\t\titem.addEventListener('click', (event) => {\r\n\t\t\t\t\tevent.preventDefault()\r\n\t\t\t\t\tgetActiveID(quesID)\r\n\t\t\t\t\tsetIsActive(quesID)\r\n\t\t\t\t})\r\n\t\t\t\titem.addEventListener('keyup', (event) => {\r\n\t\t\t\t\tconst input = event.target as HTMLElement\r\n\t\t\t\t\thandleChangeText(input.innerText, quesID)\r\n\t\t\t\t\t// Điều kiện đề input co giãn theo text\r\n\t\t\t\t\tlet lengthText = input.innerText.length\r\n\t\t\t\t\tif (lengthText > 14) {\r\n\t\t\t\t\t\titem.classList.add('auto')\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\titem.classList.remove('auto')\r\n\t\t\t\t\t\tif (lengthText < 1) {\r\n\t\t\t\t\t\t\tremoveListPicked(quesID)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tgetListPicked(quesID)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\tsetListInput([...listInput])\r\n\t\t}\r\n\t}, [])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"\">{ReactHtmlParser(dataQuestion.Content)}</div>\r\n\t\t\t<div className=\"box-typing col-lg-6 col-md-12\" style={{ marginLeft: -15 }}>\r\n\t\t\t\t{ReactHtmlParser(dataQuestion.Paragraph)}\r\n\t\t\t</div>\r\n\t\t\t{doneTestData && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className=\"wrap-list-answer-typing mt-4\">\r\n\t\t\t\t\t\t<h6 className=\"mb-2\">Đáp án</h6>\r\n\t\t\t\t\t\t<ul className=\"list-answer-typing w-100  pl-0\">\r\n\t\t\t\t\t\t\t{dataQuestion?.ExerciseTopic.map(\r\n\t\t\t\t\t\t\t\t(item) =>\r\n\t\t\t\t\t\t\t\t\titem.ExerciseAnswer.length > 0 && (\r\n\t\t\t\t\t\t\t\t\t\t<li className=\"answer-item\">\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"number\">{returnPosition(item.ExerciseID)}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text\">{item.ExerciseAnswer[0].ExerciseAnswerContent}</span>\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default TypingList\r\n"]},"metadata":{},"sourceType":"module"}