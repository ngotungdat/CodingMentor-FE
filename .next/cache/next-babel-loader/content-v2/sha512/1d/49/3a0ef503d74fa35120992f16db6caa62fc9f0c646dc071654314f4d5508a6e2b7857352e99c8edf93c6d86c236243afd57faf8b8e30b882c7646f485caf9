{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\Package\\\\PackageDetail\\\\PackageDetailForm\\\\PackageDetailForm.tsx\";\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { Form, Modal, Spin } from 'antd';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport InputTextField from '~/components/FormControl/InputTextField';\nimport SelectField from '~/components/FormControl/SelectField';\nimport { optionCommonPropTypes } from '~/utils/proptypes';\nPackageDetailForm.propTypes = {\n  isLoading: PropTypes.shape({\n    type: PropTypes.string.isRequired,\n    status: PropTypes.bool.isRequired\n  }),\n  handleSubmit: PropTypes.func,\n  optionExamTopicList: optionCommonPropTypes,\n  packageInfo: PropTypes.shape({\n    ID: PropTypes.number,\n    Name: PropTypes.string,\n    Avatar: PropTypes.string,\n    Level: PropTypes.number,\n    Type: PropTypes.number,\n    TypeName: PropTypes.string,\n    Price: PropTypes.number\n  })\n};\nPackageDetailForm.defaultProps = {\n  isLoading: {\n    type: '',\n    status: false\n  },\n  handleSubmit: null,\n  optionExamTopicList: [],\n  packageInfo: {}\n};\n\nfunction PackageDetailForm(props) {\n  const {\n    isLoading,\n    handleSubmit,\n    optionExamTopicList,\n    packageInfo\n  } = props;\n  const {\n    0: isModalVisible,\n    1: setIsModalVisible\n  } = useState(false);\n\n  const openModal = () => setIsModalVisible(true);\n\n  const closeModal = () => setIsModalVisible(false);\n\n  const schema = yup.object().shape({\n    Name: yup.string().required('Bạn không được để trống'),\n    ExamTopicID: yup.number().nullable().required('Bạn không được để trống')\n  });\n  const defaultValuesInit = {\n    Name: '',\n    ExamTopicID: null\n  };\n  const form = useForm({\n    defaultValues: defaultValuesInit,\n    resolver: yupResolver(schema)\n  });\n  useEffect(() => {\n    if (packageInfo !== null && packageInfo !== void 0 && packageInfo.ID) {\n      form.setValue('Name', packageInfo.Name);\n    }\n  }, [packageInfo]);\n\n  const checkHandleSubmit = data => {\n    if (!handleSubmit) return;\n    handleSubmit(data).then(res => {\n      if ((res === null || res === void 0 ? void 0 : res.status) === 200) {\n        closeModal();\n        form.reset({\n          Name: packageInfo.Name,\n          ExamTopicID: null\n        });\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-warning add-new\",\n      onClick: openModal,\n      children: \"Th\\xEAm \\u0111\\u1EC1 thi\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Th\\xEAm \\u0111\\u1EC1 thi\",\n      visible: isModalVisible,\n      footer: null,\n      onCancel: closeModal,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrap-form\",\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          layout: \"vertical\",\n          onFinish: form.handleSubmit(checkHandleSubmit),\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-12 col-12\",\n              children: /*#__PURE__*/_jsxDEV(InputTextField, {\n                form: form,\n                name: \"Name\",\n                label: \"T\\xEAn b\\u1ED9 \\u0111\\u1EC1\",\n                placeholder: \"Nh\\u1EADp t\\xEAn b\\u1ED9 \\u0111\\u1EC1\",\n                disabled: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-12 col-12\",\n              children: /*#__PURE__*/_jsxDEV(SelectField, {\n                form: form,\n                name: \"ExamTopicID\",\n                label: \"\\u0110\\u1EC1 thi\",\n                placeholder: \"Ch\\u1ECDn \\u0111\\u1EC1 thi\",\n                optionList: optionExamTopicList\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-12 col-12 mt-3 \",\n              style: {\n                textAlign: 'center'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-primary\",\n                disabled: isLoading.type == 'ADD_DATA' && isLoading.status,\n                children: [\"Kh\\u1EDFi t\\u1EA1o\", isLoading.type == 'ADD_DATA' && isLoading.status && /*#__PURE__*/_jsxDEV(Spin, {\n                  className: \"loading-base\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 100,\n                  columnNumber: 63\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n}\n\nexport default PackageDetailForm;","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/Package/PackageDetail/PackageDetailForm/PackageDetailForm.tsx"],"names":["yupResolver","Form","Modal","Spin","PropTypes","React","useEffect","useState","useForm","yup","InputTextField","SelectField","optionCommonPropTypes","PackageDetailForm","propTypes","isLoading","shape","type","string","isRequired","status","bool","handleSubmit","func","optionExamTopicList","packageInfo","ID","number","Name","Avatar","Level","Type","TypeName","Price","defaultProps","props","isModalVisible","setIsModalVisible","openModal","closeModal","schema","object","required","ExamTopicID","nullable","defaultValuesInit","form","defaultValues","resolver","setValue","checkHandleSubmit","data","then","res","reset","textAlign"],"mappings":"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","sourcesContent":["import { yupResolver } from '@hookform/resolvers/yup';\r\nimport { Form, Modal, Spin } from 'antd';\r\nimport PropTypes from 'prop-types';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport * as yup from 'yup';\r\nimport InputTextField from '~/components/FormControl/InputTextField';\r\nimport SelectField from '~/components/FormControl/SelectField';\r\nimport { optionCommonPropTypes } from '~/utils/proptypes';\r\n\r\nPackageDetailForm.propTypes = {\r\n\tisLoading: PropTypes.shape({\r\n\t\ttype: PropTypes.string.isRequired,\r\n\t\tstatus: PropTypes.bool.isRequired\r\n\t}),\r\n\thandleSubmit: PropTypes.func,\r\n\toptionExamTopicList: optionCommonPropTypes,\r\n\tpackageInfo: PropTypes.shape({\r\n\t\tID: PropTypes.number,\r\n\t\tName: PropTypes.string,\r\n\t\tAvatar: PropTypes.string,\r\n\t\tLevel: PropTypes.number,\r\n\t\tType: PropTypes.number,\r\n\t\tTypeName: PropTypes.string,\r\n\t\tPrice: PropTypes.number\r\n\t})\r\n};\r\nPackageDetailForm.defaultProps = {\r\n\tisLoading: { type: '', status: false },\r\n\thandleSubmit: null,\r\n\toptionExamTopicList: [],\r\n\tpackageInfo: {}\r\n};\r\n\r\nfunction PackageDetailForm(props) {\r\n\tconst { isLoading, handleSubmit, optionExamTopicList, packageInfo } = props;\r\n\tconst [isModalVisible, setIsModalVisible] = useState(false);\r\n\tconst openModal = () => setIsModalVisible(true);\r\n\tconst closeModal = () => setIsModalVisible(false);\r\n\r\n\tconst schema = yup.object().shape({\r\n\t\tName: yup.string().required('Bạn không được để trống'),\r\n\t\tExamTopicID: yup.number().nullable().required('Bạn không được để trống')\r\n\t});\r\n\r\n\tconst defaultValuesInit = {\r\n\t\tName: '',\r\n\t\tExamTopicID: null\r\n\t};\r\n\r\n\tconst form = useForm({\r\n\t\tdefaultValues: defaultValuesInit,\r\n\t\tresolver: yupResolver(schema)\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tif (packageInfo?.ID) {\r\n\t\t\tform.setValue('Name', packageInfo.Name);\r\n\t\t}\r\n\t}, [packageInfo]);\r\n\r\n\tconst checkHandleSubmit = (data: any) => {\r\n\t\tif (!handleSubmit) return;\r\n\t\thandleSubmit(data).then((res) => {\r\n\t\t\tif (res?.status === 200) {\r\n\t\t\t\tcloseModal();\r\n\t\t\t\tform.reset({ Name: packageInfo.Name, ExamTopicID: null });\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<button className=\"btn btn-warning add-new\" onClick={openModal}>\r\n\t\t\t\tThêm đề thi\r\n\t\t\t</button>\r\n\t\t\t<Modal title=\"Thêm đề thi\" visible={isModalVisible} footer={null} onCancel={closeModal}>\r\n\t\t\t\t<div className=\"wrap-form\">\r\n\t\t\t\t\t<Form layout=\"vertical\" onFinish={form.handleSubmit(checkHandleSubmit)}>\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t<div className=\"col-md-12 col-12\">\r\n\t\t\t\t\t\t\t\t<InputTextField form={form} name=\"Name\" label=\"Tên bộ đề\" placeholder=\"Nhập tên bộ đề\" disabled={true} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-md-12 col-12\">\r\n\t\t\t\t\t\t\t\t<SelectField\r\n\t\t\t\t\t\t\t\t\tform={form}\r\n\t\t\t\t\t\t\t\t\tname=\"ExamTopicID\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"Đề thi\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Chọn đề thi\"\r\n\t\t\t\t\t\t\t\t\toptionList={optionExamTopicList}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-md-12 col-12 mt-3 \" style={{ textAlign: 'center' }}>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-primary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isLoading.type == 'ADD_DATA' && isLoading.status}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tKhởi tạo\r\n\t\t\t\t\t\t\t\t\t{isLoading.type == 'ADD_DATA' && isLoading.status && <Spin className=\"loading-base\" />}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default PackageDetailForm;\r\n"]},"metadata":{},"sourceType":"module"}