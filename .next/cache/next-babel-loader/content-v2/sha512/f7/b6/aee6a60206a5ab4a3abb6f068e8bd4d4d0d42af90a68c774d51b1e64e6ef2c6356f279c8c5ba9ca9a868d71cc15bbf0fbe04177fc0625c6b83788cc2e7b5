{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\context\\\\wrap.tsx\";\nimport React, { createContext, useState, useContext, useEffect } from 'react';\nimport { useRouter } from 'next/router';\nimport { CheckCircleOutlined, WarningOutlined } from '@ant-design/icons';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { oneSignalAPI, userApi } from '~/apiBase';\nimport { useSession } from 'next-auth/client';\nimport OneSignal from 'react-onesignal';\nconst WrapContext = /*#__PURE__*/createContext({\n  titlePage: '',\n  getRouter: '',\n  getTitlePage: () => {},\n  showNoti: () => {},\n  getDataUser: () => {},\n  userInformation: null,\n  useAllRoles: null,\n  useStaffRoles: null,\n  pageSize: 30,\n  isAdmin: false,\n  reloadNotification: false,\n  handleReloadNoti: Function,\n  reloadCart: false,\n  handleReloadCart: Function\n});\nexport const WrapProvider = ({\n  children\n}) => {\n  // Get path and slug\n  const router = useRouter();\n  const getRouter = router.pathname;\n  let path = router.pathname;\n  const [session, loading] = useSession();\n  const {\n    0: titlePage,\n    1: setTitlePage\n  } = useState('');\n  const {\n    0: userInfo,\n    1: setUserInfo\n  } = useState(null);\n  const {\n    0: roles,\n    1: setRoles\n  } = useState(null);\n  const {\n    0: staffRoles,\n    1: setStaffRoles\n  } = useState(null);\n  const {\n    0: isAdmin,\n    1: setIsAdmin\n  } = useState(false);\n  const {\n    0: reloadNotification,\n    1: setReloadNotification\n  } = useState(false);\n  const {\n    0: reloadCart,\n    1: setReloadCart\n  } = useState(false); // --- Get Title Page ---\n\n  const getTitlePage = title => {\n    setTitlePage(title);\n  }; // --- Show Notification ---\n\n\n  const showNoti = (type, content) => {\n    const nodeNoti = () => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `noti-box`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"noti-box__content\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"icon\",\n            children: type == 'danger' ? /*#__PURE__*/_jsxDEV(WarningOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 50\n            }, this) : type == 'success' && /*#__PURE__*/_jsxDEV(CheckCircleOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 93\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text\",\n            children: content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 5\n      }, this);\n    };\n\n    switch (type) {\n      case 'success':\n        toast.success(nodeNoti);\n        break;\n\n      case 'danger':\n        toast.error(nodeNoti);\n        break;\n\n      case 'warning':\n        toast.warning(nodeNoti);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  const getRoles = async roleType => {// try {\n    // \tlet res = await userInformationApi.getRole(roleType)\n    // \tres.status == 200 && roleType == 0 ? setRoles(res.data.data) : setStaffRoles(res.data.data)\n    // } catch (error) {\n    // \tconsole.log('Lỗi lấy thông tin roles: ', error)\n    // }\n  }; // --- Get Data User ---\n\n\n  const getDataUser = data => {\n    data && setUserInfo(data);\n  }; // --- Check is Admin ---\n\n\n  const checkIsAdmin = data => {\n    let role = data.RoleID;\n\n    if (role == 1 || role == 5) {\n      setIsAdmin(true);\n    }\n  }; // --- Get New Data Use ---\n\n\n  const getNewDataUser = async () => {\n    try {\n      let res = await userApi.getNew();\n      res.status == 200 && (setUserInfo(res.data.data), checkIsAdmin(res.data.data));\n    } catch (error) {\n      console.log('Lỗi lấy thông tin user: ', error);\n    }\n  }; // --- Handle Reload Notification ---\n\n\n  const handleReloadNoti = () => {\n    setReloadNotification(!reloadNotification);\n  }; // --- Handle Reload Card ---\n\n\n  const handleReloadCart = () => {\n    setReloadCart(!reloadCart);\n  };\n\n  const postOnesignalID = async () => {\n    try {\n      const userId = await OneSignal.getUserId();\n      let res = await oneSignalAPI.update(userId);\n    } catch (error) {\n      console.log('Lỗi lấy thông tin user: ', error);\n    }\n  };\n\n  useEffect(() => {\n    if (loading && typeof session !== 'undefined' && session !== null) {\n      if (path.search('signin') < 1) {\n        getNewDataUser();\n        getRoles(0);\n        getRoles(1);\n        postOnesignalID();\n      }\n    }\n  }, [session]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(WrapContext.Provider, {\n      value: {\n        pageSize: 30,\n        titlePage: titlePage,\n        getTitlePage,\n        getRouter,\n        showNoti,\n        getDataUser,\n        userInformation: userInfo,\n        useAllRoles: roles,\n        useStaffRoles: staffRoles,\n        isAdmin: isAdmin,\n        reloadNotification: reloadNotification,\n        handleReloadNoti: handleReloadNoti,\n        reloadCart: reloadCart,\n        handleReloadCart: handleReloadCart\n      },\n      children: [/*#__PURE__*/_jsxDEV(ToastContainer, {\n        position: \"top-right\",\n        autoClose: 3000,\n        hideProgressBar: false,\n        newestOnTop: false,\n        closeOnClick: true,\n        rtl: false,\n        pauseOnFocusLoss: true,\n        draggable: true,\n        pauseOnHover: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 5\n      }, this), children]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 4\n    }, this)\n  }, void 0, false);\n};\nexport const useWrap = () => useContext(WrapContext);","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/context/wrap.tsx"],"names":["React","createContext","useState","useContext","useEffect","useRouter","CheckCircleOutlined","WarningOutlined","ToastContainer","toast","oneSignalAPI","userApi","useSession","OneSignal","WrapContext","titlePage","getRouter","getTitlePage","showNoti","getDataUser","userInformation","useAllRoles","useStaffRoles","pageSize","isAdmin","reloadNotification","handleReloadNoti","Function","reloadCart","handleReloadCart","WrapProvider","children","router","pathname","path","session","loading","setTitlePage","userInfo","setUserInfo","roles","setRoles","staffRoles","setStaffRoles","setIsAdmin","setReloadNotification","setReloadCart","title","type","content","nodeNoti","success","error","warning","getRoles","roleType","data","checkIsAdmin","role","RoleID","getNewDataUser","res","getNew","status","console","log","postOnesignalID","userId","getUserId","update","search","useWrap"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,QAA/B,EAAyCC,UAAzC,EAAqDC,SAArD,QAAsE,OAAtE;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,SAASC,mBAAT,EAA8BC,eAA9B,QAAqD,mBAArD;AACA,SAASC,cAAT,EAAyBC,KAAzB,QAAsC,gBAAtC;AACA,OAAO,uCAAP;AACA,SAASC,YAAT,EAAuBC,OAAvB,QAAsC,WAAtC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,SAAP,MAAsB,iBAAtB;AAmBA,MAAMC,WAAW,gBAAGb,aAAa,CAAS;AACzCc,EAAAA,SAAS,EAAE,EAD8B;AAEzCC,EAAAA,SAAS,EAAE,EAF8B;AAGzCC,EAAAA,YAAY,EAAE,MAAM,CAAE,CAHmB;AAIzCC,EAAAA,QAAQ,EAAE,MAAM,CAAE,CAJuB;AAKzCC,EAAAA,WAAW,EAAE,MAAM,CAAE,CALoB;AAMzCC,EAAAA,eAAe,EAAE,IANwB;AAOzCC,EAAAA,WAAW,EAAE,IAP4B;AAQzCC,EAAAA,aAAa,EAAE,IAR0B;AASzCC,EAAAA,QAAQ,EAAE,EAT+B;AAUzCC,EAAAA,OAAO,EAAE,KAVgC;AAWzCC,EAAAA,kBAAkB,EAAE,KAXqB;AAYzCC,EAAAA,gBAAgB,EAAEC,QAZuB;AAazCC,EAAAA,UAAU,EAAE,KAb6B;AAczCC,EAAAA,gBAAgB,EAAEF;AAduB,CAAT,CAAjC;AAiBA,OAAO,MAAMG,YAAY,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAkB;AAC7C;AACA,QAAMC,MAAM,GAAG3B,SAAS,EAAxB;AACA,QAAMW,SAAS,GAAGgB,MAAM,CAACC,QAAzB;AACA,MAAIC,IAAY,GAAGF,MAAM,CAACC,QAA1B;AACA,QAAM,CAACE,OAAD,EAAUC,OAAV,IAAqBxB,UAAU,EAArC;AACA,QAAM;AAAA,OAACG,SAAD;AAAA,OAAYsB;AAAZ,MAA4BnC,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM;AAAA,OAACoC,QAAD;AAAA,OAAWC;AAAX,MAA0BrC,QAAQ,CAAQ,IAAR,CAAxC;AACA,QAAM;AAAA,OAACsC,KAAD;AAAA,OAAQC;AAAR,MAAoBvC,QAAQ,CAAU,IAAV,CAAlC;AACA,QAAM;AAAA,OAACwC,UAAD;AAAA,OAAaC;AAAb,MAA8BzC,QAAQ,CAAU,IAAV,CAA5C;AACA,QAAM;AAAA,OAACsB,OAAD;AAAA,OAAUoB;AAAV,MAAwB1C,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM;AAAA,OAACuB,kBAAD;AAAA,OAAqBoB;AAArB,MAA8C3C,QAAQ,CAAC,KAAD,CAA5D;AACA,QAAM;AAAA,OAAC0B,UAAD;AAAA,OAAakB;AAAb,MAA8B5C,QAAQ,CAAC,KAAD,CAA5C,CAZ6C,CAc7C;;AACA,QAAMe,YAAY,GAAI8B,KAAD,IAAW;AAC/BV,IAAAA,YAAY,CAACU,KAAD,CAAZ;AACA,GAFD,CAf6C,CAmB7C;;;AACA,QAAM7B,QAAQ,GAAG,CAAC8B,IAAD,EAAeC,OAAf,KAAmC;AACnD,UAAMC,QAAQ,GAAG,MAAM;AACtB,0BACC;AAAK,QAAA,SAAS,EAAG,UAAjB;AAAA,+BACC;AAAK,UAAA,SAAS,EAAC,mBAAf;AAAA,kCACC;AAAM,YAAA,SAAS,EAAC,MAAhB;AAAA,sBAAwBF,IAAI,IAAI,QAAR,gBAAmB,QAAC,eAAD;AAAA;AAAA;AAAA;AAAA,oBAAnB,GAAyCA,IAAI,IAAI,SAAR,iBAAqB,QAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAAtF;AAAA;AAAA;AAAA;AAAA,kBADD,eAEC;AAAM,YAAA,SAAS,EAAC,MAAhB;AAAA,sBAAwBC;AAAxB;AAAA;AAAA;AAAA;AAAA,kBAFD;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,cADD;AAQA,KATD;;AAWA,YAAQD,IAAR;AACC,WAAK,SAAL;AACCvC,QAAAA,KAAK,CAAC0C,OAAN,CAAcD,QAAd;AACA;;AACD,WAAK,QAAL;AACCzC,QAAAA,KAAK,CAAC2C,KAAN,CAAYF,QAAZ;AACA;;AACD,WAAK,SAAL;AACCzC,QAAAA,KAAK,CAAC4C,OAAN,CAAcH,QAAd;AACA;;AACD;AACC;AAXF;AAaA,GAzBD;;AA2BA,QAAMI,QAAQ,GAAG,MAAOC,QAAP,IAAoB,CACpC;AACA;AACA;AACA;AACA;AACA;AACA,GAPD,CA/C6C,CAwD7C;;;AACA,QAAMpC,WAAW,GAAIqC,IAAD,IAAU;AAC7BA,IAAAA,IAAI,IAAIjB,WAAW,CAACiB,IAAD,CAAnB;AACA,GAFD,CAzD6C,CA6D7C;;;AACA,QAAMC,YAAY,GAAID,IAAD,IAAU;AAC9B,QAAIE,IAAI,GAAGF,IAAI,CAACG,MAAhB;;AACA,QAAID,IAAI,IAAI,CAAR,IAAaA,IAAI,IAAI,CAAzB,EAA4B;AAC3Bd,MAAAA,UAAU,CAAC,IAAD,CAAV;AACA;AACD,GALD,CA9D6C,CAqE7C;;;AACA,QAAMgB,cAAc,GAAG,YAAY;AAClC,QAAI;AACH,UAAIC,GAAG,GAAG,MAAMlD,OAAO,CAACmD,MAAR,EAAhB;AACAD,MAAAA,GAAG,CAACE,MAAJ,IAAc,GAAd,KAAsBxB,WAAW,CAACsB,GAAG,CAACL,IAAJ,CAASA,IAAV,CAAX,EAA4BC,YAAY,CAACI,GAAG,CAACL,IAAJ,CAASA,IAAV,CAA9D;AACA,KAHD,CAGE,OAAOJ,KAAP,EAAc;AACfY,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwCb,KAAxC;AACA;AACD,GAPD,CAtE6C,CA+E7C;;;AACA,QAAM1B,gBAAgB,GAAG,MAAM;AAC9BmB,IAAAA,qBAAqB,CAAC,CAACpB,kBAAF,CAArB;AACA,GAFD,CAhF6C,CAoF7C;;;AACA,QAAMI,gBAAgB,GAAG,MAAM;AAC9BiB,IAAAA,aAAa,CAAC,CAAClB,UAAF,CAAb;AACA,GAFD;;AAIA,QAAMsC,eAAe,GAAG,YAAY;AACnC,QAAI;AACH,YAAMC,MAAM,GAAG,MAAMtD,SAAS,CAACuD,SAAV,EAArB;AACA,UAAIP,GAAG,GAAG,MAAMnD,YAAY,CAAC2D,MAAb,CAAoBF,MAApB,CAAhB;AACA,KAHD,CAGE,OAAOf,KAAP,EAAc;AACfY,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwCb,KAAxC;AACA;AACD,GAPD;;AASAhD,EAAAA,SAAS,CAAC,MAAM;AACf,QAAIgC,OAAO,IAAI,OAAOD,OAAP,KAAmB,WAA9B,IAA6CA,OAAO,KAAK,IAA7D,EAAmE;AAClE,UAAID,IAAI,CAACoC,MAAL,CAAY,QAAZ,IAAwB,CAA5B,EAA+B;AAC9BV,QAAAA,cAAc;AACdN,QAAAA,QAAQ,CAAC,CAAD,CAAR;AACAA,QAAAA,QAAQ,CAAC,CAAD,CAAR;AACAY,QAAAA,eAAe;AACf;AACD;AACD,GATQ,EASN,CAAC/B,OAAD,CATM,CAAT;AAWA,sBACC;AAAA,2BACC,QAAC,WAAD,CAAa,QAAb;AACC,MAAA,KAAK,EAAE;AACNZ,QAAAA,QAAQ,EAAE,EADJ;AAENR,QAAAA,SAAS,EAAEA,SAFL;AAGNE,QAAAA,YAHM;AAIND,QAAAA,SAJM;AAKNE,QAAAA,QALM;AAMNC,QAAAA,WANM;AAONC,QAAAA,eAAe,EAAEkB,QAPX;AAQNjB,QAAAA,WAAW,EAAEmB,KARP;AASNlB,QAAAA,aAAa,EAAEoB,UATT;AAUNlB,QAAAA,OAAO,EAAEA,OAVH;AAWNC,QAAAA,kBAAkB,EAAEA,kBAXd;AAYNC,QAAAA,gBAAgB,EAAEA,gBAZZ;AAaNE,QAAAA,UAAU,EAAEA,UAbN;AAcNC,QAAAA,gBAAgB,EAAEA;AAdZ,OADR;AAAA,8BAkBC,QAAC,cAAD;AACC,QAAA,QAAQ,EAAC,WADV;AAEC,QAAA,SAAS,EAAE,IAFZ;AAGC,QAAA,eAAe,EAAE,KAHlB;AAIC,QAAA,WAAW,EAAE,KAJd;AAKC,QAAA,YAAY,MALb;AAMC,QAAA,GAAG,EAAE,KANN;AAOC,QAAA,gBAAgB,MAPjB;AAQC,QAAA,SAAS,MARV;AASC,QAAA,YAAY;AATb;AAAA;AAAA;AAAA;AAAA,cAlBD,EA8BEE,QA9BF;AAAA;AAAA;AAAA;AAAA;AAAA;AADD,mBADD;AAoCA,CAjJM;AAmJP,OAAO,MAAMwC,OAAO,GAAG,MAAMpE,UAAU,CAACW,WAAD,CAAhC","sourcesContent":["import React, { createContext, useState, useContext, useEffect } from 'react'\r\nimport { useRouter } from 'next/router'\r\nimport { CheckCircleOutlined, WarningOutlined } from '@ant-design/icons'\r\nimport { ToastContainer, toast } from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.css'\r\nimport { oneSignalAPI, userApi } from '~/apiBase'\r\nimport { useSession } from 'next-auth/client'\r\nimport OneSignal from 'react-onesignal'\r\n\r\nexport type IProps = {\r\n\ttitlePage: string\r\n\tgetRouter: any\r\n\tgetTitlePage: Function\r\n\tshowNoti: Function\r\n\tgetDataUser: Function\r\n\tuserInformation: IUser\r\n\tuseAllRoles: IRole[]\r\n\tuseStaffRoles: IRole[]\r\n\tpageSize: number\r\n\tisAdmin: boolean\r\n\treloadNotification: boolean\r\n\thandleReloadNoti: Function\r\n\treloadCart: boolean\r\n\thandleReloadCart: Function\r\n}\r\n\r\nconst WrapContext = createContext<IProps>({\r\n\ttitlePage: '',\r\n\tgetRouter: '',\r\n\tgetTitlePage: () => {},\r\n\tshowNoti: () => {},\r\n\tgetDataUser: () => {},\r\n\tuserInformation: null,\r\n\tuseAllRoles: null,\r\n\tuseStaffRoles: null,\r\n\tpageSize: 30,\r\n\tisAdmin: false,\r\n\treloadNotification: false,\r\n\thandleReloadNoti: Function,\r\n\treloadCart: false,\r\n\thandleReloadCart: Function\r\n})\r\n\r\nexport const WrapProvider = ({ children }) => {\r\n\t// Get path and slug\r\n\tconst router = useRouter()\r\n\tconst getRouter = router.pathname\r\n\tlet path: string = router.pathname\r\n\tconst [session, loading] = useSession()\r\n\tconst [titlePage, setTitlePage] = useState('')\r\n\tconst [userInfo, setUserInfo] = useState<IUser>(null)\r\n\tconst [roles, setRoles] = useState<IRole[]>(null)\r\n\tconst [staffRoles, setStaffRoles] = useState<IRole[]>(null)\r\n\tconst [isAdmin, setIsAdmin] = useState(false)\r\n\tconst [reloadNotification, setReloadNotification] = useState(false)\r\n\tconst [reloadCart, setReloadCart] = useState(false)\r\n\r\n\t// --- Get Title Page ---\r\n\tconst getTitlePage = (title) => {\r\n\t\tsetTitlePage(title)\r\n\t}\r\n\r\n\t// --- Show Notification ---\r\n\tconst showNoti = (type: string, content: string) => {\r\n\t\tconst nodeNoti = () => {\r\n\t\t\treturn (\r\n\t\t\t\t<div className={`noti-box`}>\r\n\t\t\t\t\t<div className=\"noti-box__content\">\r\n\t\t\t\t\t\t<span className=\"icon\">{type == 'danger' ? <WarningOutlined /> : type == 'success' && <CheckCircleOutlined />}</span>\r\n\t\t\t\t\t\t<span className=\"text\">{content}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tswitch (type) {\r\n\t\t\tcase 'success':\r\n\t\t\t\ttoast.success(nodeNoti)\r\n\t\t\t\tbreak\r\n\t\t\tcase 'danger':\r\n\t\t\t\ttoast.error(nodeNoti)\r\n\t\t\t\tbreak\r\n\t\t\tcase 'warning':\r\n\t\t\t\ttoast.warning(nodeNoti)\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t}\r\n\r\n\tconst getRoles = async (roleType) => {\r\n\t\t// try {\r\n\t\t// \tlet res = await userInformationApi.getRole(roleType)\r\n\t\t// \tres.status == 200 && roleType == 0 ? setRoles(res.data.data) : setStaffRoles(res.data.data)\r\n\t\t// } catch (error) {\r\n\t\t// \tconsole.log('Lỗi lấy thông tin roles: ', error)\r\n\t\t// }\r\n\t}\r\n\r\n\t// --- Get Data User ---\r\n\tconst getDataUser = (data) => {\r\n\t\tdata && setUserInfo(data)\r\n\t}\r\n\r\n\t// --- Check is Admin ---\r\n\tconst checkIsAdmin = (data) => {\r\n\t\tlet role = data.RoleID\r\n\t\tif (role == 1 || role == 5) {\r\n\t\t\tsetIsAdmin(true)\r\n\t\t}\r\n\t}\r\n\r\n\t// --- Get New Data Use ---\r\n\tconst getNewDataUser = async () => {\r\n\t\ttry {\r\n\t\t\tlet res = await userApi.getNew()\r\n\t\t\tres.status == 200 && (setUserInfo(res.data.data), checkIsAdmin(res.data.data))\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('Lỗi lấy thông tin user: ', error)\r\n\t\t}\r\n\t}\r\n\r\n\t// --- Handle Reload Notification ---\r\n\tconst handleReloadNoti = () => {\r\n\t\tsetReloadNotification(!reloadNotification)\r\n\t}\r\n\r\n\t// --- Handle Reload Card ---\r\n\tconst handleReloadCart = () => {\r\n\t\tsetReloadCart(!reloadCart)\r\n\t}\r\n\r\n\tconst postOnesignalID = async () => {\r\n\t\ttry {\r\n\t\t\tconst userId = await OneSignal.getUserId()\r\n\t\t\tlet res = await oneSignalAPI.update(userId)\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('Lỗi lấy thông tin user: ', error)\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (loading && typeof session !== 'undefined' && session !== null) {\r\n\t\t\tif (path.search('signin') < 1) {\r\n\t\t\t\tgetNewDataUser()\r\n\t\t\t\tgetRoles(0)\r\n\t\t\t\tgetRoles(1)\r\n\t\t\t\tpostOnesignalID()\r\n\t\t\t}\r\n\t\t}\r\n\t}, [session])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<WrapContext.Provider\r\n\t\t\t\tvalue={{\r\n\t\t\t\t\tpageSize: 30,\r\n\t\t\t\t\ttitlePage: titlePage,\r\n\t\t\t\t\tgetTitlePage,\r\n\t\t\t\t\tgetRouter,\r\n\t\t\t\t\tshowNoti,\r\n\t\t\t\t\tgetDataUser,\r\n\t\t\t\t\tuserInformation: userInfo,\r\n\t\t\t\t\tuseAllRoles: roles,\r\n\t\t\t\t\tuseStaffRoles: staffRoles,\r\n\t\t\t\t\tisAdmin: isAdmin,\r\n\t\t\t\t\treloadNotification: reloadNotification,\r\n\t\t\t\t\thandleReloadNoti: handleReloadNoti,\r\n\t\t\t\t\treloadCart: reloadCart,\r\n\t\t\t\t\thandleReloadCart: handleReloadCart\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<ToastContainer\r\n\t\t\t\t\tposition=\"top-right\"\r\n\t\t\t\t\tautoClose={3000}\r\n\t\t\t\t\thideProgressBar={false}\r\n\t\t\t\t\tnewestOnTop={false}\r\n\t\t\t\t\tcloseOnClick\r\n\t\t\t\t\trtl={false}\r\n\t\t\t\t\tpauseOnFocusLoss\r\n\t\t\t\t\tdraggable\r\n\t\t\t\t\tpauseOnHover\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t{children}\r\n\t\t\t</WrapContext.Provider>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport const useWrap = () => useContext(WrapContext)\r\n"]},"metadata":{},"sourceType":"module"}