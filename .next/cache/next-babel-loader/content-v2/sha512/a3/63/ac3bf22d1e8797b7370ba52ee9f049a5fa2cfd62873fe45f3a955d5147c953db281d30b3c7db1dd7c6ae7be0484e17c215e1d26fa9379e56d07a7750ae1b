{"ast":null,"code":"import _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\pages\\\\staff\\\\admin-salary-staff\\\\index.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useRef, useEffect, useState } from 'react';\nimport { Input, DatePicker, Tooltip, Popconfirm, Dropdown, Card, Spin } from 'antd';\nimport { staffSalaryApi } from '~/apiBase/staff-manage/staff-salary';\nimport SortBox from '~/components/Elements/SortBox';\nimport LayoutBase from '~/components/LayoutBase';\nimport PowerTable from '~/components/PowerTable';\nimport FilterColumn from '~/components/Tables/FilterColumn';\nimport { useWrap } from '~/context/wrap';\nimport { numberWithCommas } from '~/utils/functions';\nimport ConfirmForm from '../../../components/Global/StaffList/StaffSalary/admin-confirm-salary';\nimport { EllipsisOutlined } from '@ant-design/icons';\nimport moment from 'moment';\nimport XLSX from 'xlsx';\nvar now = new Date();\n\nvar SalaryReview = function SalaryReview() {\n  _s();\n\n  var _useState = useState(null),\n      totalPage = _useState[0],\n      setTotalPage = _useState[1];\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      visible = _React$useState2[0],\n      setVisible = _React$useState2[1];\n\n  var _useState2 = useState(false),\n      dropDownVisible = _useState2[0],\n      setDropDownVisible = _useState2[1];\n\n  var _useState3 = useState([]),\n      payRoll = _useState3[0],\n      setPayRoll = _useState3[1];\n\n  var _useState4 = useState(1),\n      currentPage = _useState4[0],\n      setCurrentPage = _useState4[1];\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti,\n      userInformation = _useWrap.userInformation,\n      pageSize = _useWrap.pageSize;\n\n  var _useState5 = useState({\n    type: 'GET_ALL',\n    status: false\n  }),\n      isLoading = _useState5[0],\n      setIsLoading = _useState5[1];\n\n  var _useState6 = useState({\n    days: 0,\n    messError: ''\n  }),\n      workDays = _useState6[0],\n      setWorkDays = _useState6[1];\n\n  var getLastYear = function getLastYear() {\n    return now.getMonth() == 0 ? now.getFullYear() - 1 : now.getFullYear();\n  };\n\n  var getDateNumber = function getDateNumber(number) {\n    return number > 10 ? number : number == 0 ? '12' : '0' + number;\n  };\n\n  var paramDefault = {\n    pageIndex: currentPage,\n    pageSize: pageSize,\n    Year: getLastYear(),\n    Month: getDateNumber(now.getMonth()),\n    StaffName: null,\n    StaffID: null,\n    // selectAll: true,\n    StatusID: null,\n    sort: null,\n    sortType: null\n  };\n  var listFieldSearch = {\n    pageIndex: 1,\n    StaffName: null\n  }; // SORT\n\n  var sortOptionList = [{\n    dataSort: {\n      sort: 0,\n      sortType: false\n    },\n    value: 1,\n    text: 'Tên giảm dần'\n  }, {\n    dataSort: {\n      sort: 0,\n      sortType: true\n    },\n    value: 2,\n    text: 'Tên tăng dần '\n  }, {\n    dataSort: {\n      sort: 1,\n      sortType: false\n    },\n    value: 3,\n    text: 'Lương tổng giảm dần'\n  }, {\n    dataSort: {\n      sort: 1,\n      sortType: true\n    },\n    value: 4,\n    text: 'Lương tổng tăng dần '\n  }, {\n    dataSort: {\n      sort: 2,\n      sortType: false\n    },\n    value: 5,\n    text: 'Ngày nghỉ giảm dần'\n  }, {\n    dataSort: {\n      sort: 2,\n      sortType: true\n    },\n    value: 6,\n    text: 'Ngày nghỉ tăng dần '\n  }];\n  var refValue = useRef({\n    pageIndex: 1,\n    pageSize: pageSize,\n    sort: -1,\n    sortType: false\n  });\n\n  var _useState7 = useState(paramDefault),\n      params = _useState7[0],\n      setParams = _useState7[1]; // ------------ ON SEARCH -----------------------\n\n\n  var checkField = function checkField(valueSearch, dataIndex) {\n    var newList = _objectSpread({}, listFieldSearch);\n\n    Object.keys(newList).forEach(function (key) {\n      if (key != dataIndex) {\n        if (key != 'pageIndex') {\n          newList[key] = null;\n        }\n      } else {\n        newList[key] = valueSearch;\n      }\n    });\n    return newList;\n  };\n\n  var onSearch = function onSearch(valueSearch, dataIndex) {\n    var clearKey = checkField(valueSearch, dataIndex);\n    setParams(_objectSpread(_objectSpread({}, params), clearKey));\n  }; // HANDLE RESET\n\n\n  var resetListFieldSearch = function resetListFieldSearch() {\n    Object.keys(listFieldSearch).forEach(function (key) {\n      if (key != 'pageIndex') {\n        listFieldSearch[key] = null;\n      }\n    });\n  };\n\n  var handleReset = function handleReset() {\n    setParams(_objectSpread(_objectSpread({}, paramDefault), {}, {\n      pageIndex: 1\n    }));\n    setCurrentPage(1), resetListFieldSearch();\n  }; // SORT\n\n\n  var onSort = function onSort(option) {\n    refValue.current = _objectSpread(_objectSpread({}, refValue.current), {}, {\n      sort: option.title.sort,\n      sortType: option.title.sortType\n    });\n    setParams(_objectSpread(_objectSpread({}, params), {}, {\n      sort: option.title.sort,\n      sortType: option.title.sortType\n    }));\n  };\n\n  var columns = [_objectSpread({\n    title: 'Nhân viên',\n    width: 150,\n    dataIndex: 'StaffName',\n    render: function render(price, record) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-primary\",\n        children: price\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 45\n      }, _this);\n    }\n  }, FilterColumn('StaffName', onSearch, handleReset, 'text')), {\n    title: 'Năm',\n    width: 80,\n    dataIndex: 'Year',\n    render: function render(price, record) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: price\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 45\n      }, _this);\n    }\n  }, {\n    title: 'Tháng',\n    width: 80,\n    dataIndex: 'Month',\n    render: function render(price, record) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: price\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 45\n      }, _this);\n    }\n  }, {\n    title: 'Thưởng',\n    width: 150,\n    dataIndex: 'Bonus',\n    render: function render(price, record) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-green\",\n        children: numberWithCommas(price)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 45\n      }, _this);\n    }\n  }, {\n    title: 'Ghi Chú',\n    width: 160,\n    dataIndex: 'NoteBonus',\n    render: function render(price, record) {\n      return /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: price,\n        className: \"limit-text\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: price\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 6\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 5\n      }, _this);\n    }\n  }, {\n    title: 'Ngày nghỉ',\n    width: 90,\n    dataIndex: 'CountOff',\n    render: function render(price, record) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: price\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 36\n      }, _this);\n    }\n  }, {\n    title: 'Lương ngày nghỉ',\n    width: 150,\n    dataIndex: 'SalaryOff',\n    render: function render(price, record) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-primary\",\n        children: numberWithCommas(price)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 36\n      }, _this);\n    }\n  }, {\n    title: 'Trạng Thái',\n    width: 200,\n    dataIndex: 'StatusName',\n    filters: [{\n      text: 'Chưa chốt lương',\n      value: 1\n    }, {\n      text: 'Đã gửi yêu cầu xác nhận',\n      value: 3\n    }, {\n      text: 'Đã xác nhận',\n      value: 4\n    }, {\n      text: 'Đã nhận lương',\n      value: 5\n    }],\n    onFilter: function onFilter(value, record) {\n      return record.StatusID === value;\n    },\n    render: function render(price, record) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [record.StatusID == 1 && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"tag red\",\n          children: price\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 31\n        }, _this), record.StatusID == 3 && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"tag yellow\",\n          children: price\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 31\n        }, _this), record.StatusID == 4 && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"tag blue\",\n          children: price\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 31\n        }, _this), record.StatusID == 5 && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"tag green\",\n          children: price\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 31\n        }, _this)]\n      }, void 0, true);\n    }\n  }, {\n    title: 'Lương cơ bản',\n    width: 150,\n    dataIndex: 'BasicSalary',\n    render: function render(price, record) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-green\",\n        children: numberWithCommas(price)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 45\n      }, _this);\n    }\n  }, {\n    title: 'Trừ tạm ứng',\n    width: 150,\n    dataIndex: 'AdvanceSalary',\n    render: function render(price, record) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-primary\",\n        children: numberWithCommas(price)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 45\n      }, _this);\n    }\n  }, {\n    title: 'Lương Tổng',\n    width: 150,\n    dataIndex: 'TotalSalary',\n    render: function render(price, record) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-green\",\n        children: numberWithCommas(price)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 45\n      }, _this);\n    }\n  }, {\n    title: 'Cập Nhật',\n    width: 100,\n    render: function render(text, record) {\n      return /*#__PURE__*/_jsxDEV(ConfirmForm, {\n        isLoading: isLoading,\n        record: record,\n        userInformationID: userInformation.UserInformationID,\n        setParams: setParams,\n        params: params\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 5\n      }, _this);\n    }\n  }];\n\n  var getDataPayroll = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(page) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setIsLoading({\n                type: 'GET_ALL',\n                status: true\n              });\n              _context.prev = 1;\n              _context.next = 4;\n              return staffSalaryApi.getAll(_objectSpread(_objectSpread({}, params), {}, {\n                pageIndex: page\n              }));\n\n            case 4:\n              res = _context.sent;\n\n              if (res.status == 200) {\n                setPayRoll(res.data.data);\n                setTotalPage(res.data.totalRow);\n                setDropDownVisible(false);\n              }\n\n              if (res.status == 204) {\n                setPayRoll([]);\n                setDropDownVisible(false);\n              }\n\n              _context.next = 11;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](1);\n\n            case 11:\n              _context.prev = 11;\n              setIsLoading({\n                type: 'GET_ALL',\n                status: false\n              });\n              return _context.finish(11);\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 9, 11, 14]]);\n    }));\n\n    return function getDataPayroll(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var postSalaryOfTeacherClosing = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setIsLoading({\n                type: 'GET_ALL',\n                status: true\n              });\n              _context2.prev = 1;\n              _context2.next = 4;\n              return staffSalaryApi.postSalaryClosing(workDays.days);\n\n            case 4:\n              res = _context2.sent;\n              setParams(_objectSpread({}, params));\n\n              if (res.status == 200) {\n                showNoti('success', 'Thành công!');\n                setDropDownVisible(false);\n              }\n\n              if (res.status == 204) {\n                showNoti('success', 'Lương đã được tính rồi!');\n                setDropDownVisible(false);\n              }\n\n              _context2.next = 13;\n              break;\n\n            case 10:\n              _context2.prev = 10;\n              _context2.t0 = _context2[\"catch\"](1);\n              showNoti('danger', _context2.t0.message);\n\n            case 13:\n              _context2.prev = 13;\n              setVisible(false);\n              setIsLoading({\n                type: 'GET_ALL',\n                status: false\n              });\n              return _context2.finish(13);\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 10, 13, 17]]);\n    }));\n\n    return function postSalaryOfTeacherClosing() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var _getPagination = function getPagination(pageNumber) {\n    setCurrentPage(pageNumber);\n    setParams(_objectSpread(_objectSpread({}, params), {}, {\n      pageIndex: currentPage\n    }));\n  };\n\n  var onChangeMonth = function onChangeMonth(value) {\n    setParams(_objectSpread(_objectSpread({}, params), {}, {\n      Month: Number(value.getMonth() + 1),\n      Year: Number(value.getFullYear())\n    }));\n  };\n\n  function daysInMonth(month, year) {\n    return new Date(year, month, 0).getDate();\n  }\n\n  var showPopconfirm = function showPopconfirm() {\n    setVisible(true);\n  };\n\n  var handleCancel = function handleCancel() {\n    setVisible(false);\n  };\n\n  var renderTitle = function renderTitle() {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"font-weight-primary\",\n      children: [\"X\\xE1c nh\\u1EADn t\\xEDnh l\\u01B0\\u01A1ng t\\u1EEB 01-\", getDateNumber(now.getMonth()), \"-\", getLastYear(), \" \\u0111\\u1EBFn\", ' ', daysInMonth(getDateNumber(now.getMonth()), getLastYear()), \"-\", getDateNumber(now.getMonth()), \"-\", getLastYear(), \" ?\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 4\n    }, _this);\n  };\n\n  var menu = function menu() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" d-xl-none\",\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        title: \"Thao t\\xE1c\",\n        style: {\n          width: 300\n        },\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          onChange: function onChange(event) {\n            setWorkDays(_objectSpread(_objectSpread({}, workDays), {}, {\n              days: Number(event.target.value)\n            }));\n          },\n          className: \"style-input w-100 mb-4\",\n          name: \"wordDays\",\n          placeholder: \"Nh\\u1EADp ng\\xE0y c\\xF4ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 6\n        }, _this), userInformation && (userInformation.RoleID === 1 || userInformation.RoleID === 2) && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-success mb-4 w-100\",\n          disabled: isLoading.type === 'EXCEL' && isLoading.status,\n          onClick: function onClick() {\n            exportExcelFile();\n          },\n          children: isLoading.type === 'EXCEL' && isLoading.status ? /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 58\n          }, _this) : 'Xuất file Excel'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 7\n        }, _this), /*#__PURE__*/_jsxDEV(Popconfirm, {\n          className: \"w-100 mb-4\",\n          title: renderTitle,\n          visible: visible,\n          onConfirm: postSalaryOfTeacherClosing,\n          onCancel: handleCancel,\n          okButtonProps: {\n            loading: isLoading.status\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: showPopconfirm,\n            className: \"btn btn-warning add-new\",\n            children: \"T\\xEDnh l\\u01B0\\u01A1ng th\\xE1ng tr\\u01B0\\u1EDBc\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 7\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(DatePicker, {\n          className: \"w-100 style-input mb-4\",\n          defaultValue: moment(new Date(getLastYear() + '-' + getDateNumber(now.getMonth())), 'MM/yyyy'),\n          onChange: function onChange(e, a) {\n            // @ts-ignore\n            onChangeMonth(e._d);\n          },\n          picker: \"month\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-100 d-md-none\",\n          children: /*#__PURE__*/_jsxDEV(SortBox, {\n            space: false,\n            width: 278,\n            handleSort: onSort,\n            dataOption: sortOptionList\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 7\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 6\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 5\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 4\n    }, _this);\n  };\n\n  var exportExcelFile = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var res, temp;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              setIsLoading({\n                type: 'EXCEL',\n                status: true\n              });\n              _context3.prev = 1;\n              _context3.next = 4;\n              return staffSalaryApi.exportExcel({\n                year: params.Year,\n                month: params.Month\n              });\n\n            case 4:\n              res = _context3.sent;\n\n              if (res.status === 200) {\n                temp = [];\n                res.data.data.forEach(function (item, index) {\n                  return temp.push({\n                    A: index + 1,\n                    B: item.BankAccountNumber,\n                    C: item.BankAccountHolderName,\n                    D: \"\".concat(item.Bank, \"/\").concat(item.BankBranch),\n                    E: item.Salary,\n                    F: item.Reason,\n                    G: item.RoleName\n                  });\n                });\n                createExcelFile1(temp);\n              }\n\n              if (res.status === 204) {\n                showNoti('danger', 'Không có dữ liệu lương!');\n              }\n\n              _context3.next = 11;\n              break;\n\n            case 9:\n              _context3.prev = 9;\n              _context3.t0 = _context3[\"catch\"](1);\n\n            case 11:\n              _context3.prev = 11;\n              setIsLoading({\n                type: 'EXCEL',\n                status: false\n              });\n              return _context3.finish(11);\n\n            case 14:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[1, 9, 11, 14]]);\n    }));\n\n    return function exportExcelFile() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var createExcelFile1 = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(data) {\n      var wb, ws, wscols, wsrows;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              wb = XLSX.utils.book_new();\n              /* Initial row */\n\n              ws = XLSX.utils.json_to_sheet([], {\n                header: ['DANH SÁCH GIAO DỊCH (LIST OF TRANSACTIONS)'],\n                skipHeader: false\n              });\n              /* Write data starting at E2 */\n\n              XLSX.utils.sheet_add_json(ws, [{\n                A: 'STT (1)',\n                B: 'Số  Số tài khoản (2)',\n                C: 'Tên đơn vị thụ hưởng (3)',\n                D: 'Ngân hàng thụ hưởng/Chi nhánh (4)',\n                E: 'Số tiền (5)',\n                F: 'Chi tiết thanh toán (6)',\n                G: 'Chức vụ (7)'\n              }], {\n                skipHeader: true,\n                origin: 'A2'\n              });\n              /* Write data starting at A2 */\n\n              XLSX.utils.sheet_add_json(ws, data, {\n                skipHeader: true,\n                origin: 'A3'\n              }); // set width\n\n              wscols = [{\n                wch: 8\n              }, {\n                wch: 20\n              }, {\n                wch: 22\n              }, {\n                wch: 32\n              }, {\n                wch: 18\n              }, {\n                wch: 24\n              }, {\n                wch: 22\n              }, {\n                wch: 22\n              }];\n              wsrows = [{\n                hpt: 22\n              }];\n              ws['!cols'] = wscols;\n              ws['!rows'] = wsrows; // });\n\n              XLSX.utils.book_append_sheet(wb, ws, 'Bảng lương nhân viên');\n              XLSX.writeFile(wb, 'bangluong.xlsx', {\n                type: 'binary',\n                bookType: 'xlsx'\n              });\n\n            case 10:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function createExcelFile1(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    getDataPayroll(currentPage);\n  }, [params]);\n  return /*#__PURE__*/_jsxDEV(PowerTable, {\n    currentPage: currentPage,\n    loading: isLoading,\n    totalPage: totalPage && totalPage,\n    getPagination: function getPagination(pageNumber) {\n      return _getPagination(pageNumber);\n    },\n    addClass: \"basic-header\",\n    TitlePage: \"Duy\\u1EC7t l\\u01B0\\u01A1ng nh\\xE2n vi\\xEAn\",\n    dataSource: payRoll,\n    columns: columns,\n    TitleCard: /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-none d-xl-inline-block\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-end align-items-center \",\n          children: [userInformation && (userInformation.RoleID === 1 || userInformation.RoleID === 2) && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-success mr-1\",\n            style: {\n              width: 130\n            },\n            disabled: isLoading.type === 'EXCEL' && isLoading.status,\n            onClick: function onClick() {\n              exportExcelFile();\n            },\n            children: isLoading.type === 'EXCEL' && isLoading.status ? /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 518,\n              columnNumber: 60\n            }, _this) : 'Xuất file Excel'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 510,\n            columnNumber: 9\n          }, _this), /*#__PURE__*/_jsxDEV(Input, {\n            onChange: function onChange(event) {\n              setWorkDays(_objectSpread(_objectSpread({}, workDays), {}, {\n                days: Number(event.target.value)\n              }));\n            },\n            className: \"style-input\",\n            style: {\n              width: 150,\n              marginRight: 5\n            },\n            name: \"wordDays\",\n            placeholder: \"Nh\\u1EADp ng\\xE0y c\\xF4ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 8\n          }, _this), /*#__PURE__*/_jsxDEV(Popconfirm, {\n            title: renderTitle,\n            visible: visible,\n            onConfirm: postSalaryOfTeacherClosing,\n            onCancel: handleCancel,\n            okButtonProps: {\n              loading: isLoading.status\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: showPopconfirm,\n              className: \"btn btn-warning add-new\",\n              children: \"T\\xEDnh l\\u01B0\\u01A1ng th\\xE1ng tr\\u01B0\\u1EDBc\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 539,\n              columnNumber: 9\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 532,\n            columnNumber: 8\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 7\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 6\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-inline-block d-xl-none col-md-3 w-25\",\n        children: /*#__PURE__*/_jsxDEV(Dropdown, {\n          overlay: menu,\n          trigger: ['click'],\n          visible: dropDownVisible,\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"ant-dropdown-link\",\n            onClick: function onClick(e) {\n              e.preventDefault();\n              setDropDownVisible(!dropDownVisible);\n            },\n            children: /*#__PURE__*/_jsxDEV(EllipsisOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 554,\n              columnNumber: 9\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 8\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 546,\n          columnNumber: 7\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 545,\n        columnNumber: 6\n      }, _this)]\n    }, void 0, true),\n    Extra: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-none d-md-inline-block\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"extra-table\",\n        children: [/*#__PURE__*/_jsxDEV(DatePicker, {\n          defaultValue: moment(new Date(getLastYear() + '-' + getDateNumber(now.getMonth())), 'MM/yyyy'),\n          onChange: function onChange(e, a) {\n            // @ts-ignore\n            onChangeMonth(e._d);\n          },\n          picker: \"month\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 563,\n          columnNumber: 7\n        }, _this), /*#__PURE__*/_jsxDEV(SortBox, {\n          space: true,\n          width: 200,\n          handleSort: onSort,\n          dataOption: sortOptionList\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 571,\n          columnNumber: 7\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 562,\n        columnNumber: 6\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 561,\n      columnNumber: 5\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 496,\n    columnNumber: 3\n  }, _this);\n};\n\n_s(SalaryReview, \"e/gl7/CTdP8CRRgJ42KOJYC8zR8=\", false, function () {\n  return [useWrap];\n});\n\n_c = SalaryReview;\nSalaryReview.layout = LayoutBase;\nexport default SalaryReview;\n\nvar _c;\n\n$RefreshReg$(_c, \"SalaryReview\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/pages/staff/admin-salary-staff/index.tsx"],"names":["React","useRef","useEffect","useState","Input","DatePicker","Tooltip","Popconfirm","Dropdown","Card","Spin","staffSalaryApi","SortBox","LayoutBase","PowerTable","FilterColumn","useWrap","numberWithCommas","ConfirmForm","EllipsisOutlined","moment","XLSX","now","Date","SalaryReview","totalPage","setTotalPage","visible","setVisible","dropDownVisible","setDropDownVisible","payRoll","setPayRoll","currentPage","setCurrentPage","showNoti","userInformation","pageSize","type","status","isLoading","setIsLoading","days","messError","workDays","setWorkDays","getLastYear","getMonth","getFullYear","getDateNumber","number","paramDefault","pageIndex","Year","Month","StaffName","StaffID","StatusID","sort","sortType","listFieldSearch","sortOptionList","dataSort","value","text","refValue","params","setParams","checkField","valueSearch","dataIndex","newList","Object","keys","forEach","key","onSearch","clearKey","resetListFieldSearch","handleReset","onSort","option","current","title","columns","width","render","price","record","filters","onFilter","UserInformationID","getDataPayroll","page","getAll","res","data","totalRow","postSalaryOfTeacherClosing","postSalaryClosing","message","getPagination","pageNumber","onChangeMonth","Number","daysInMonth","month","year","getDate","showPopconfirm","handleCancel","renderTitle","menu","event","target","RoleID","exportExcelFile","loading","e","a","_d","exportExcel","temp","item","index","push","A","B","BankAccountNumber","C","BankAccountHolderName","D","Bank","BankBranch","E","Salary","F","Reason","G","RoleName","createExcelFile1","wb","utils","book_new","ws","json_to_sheet","header","skipHeader","sheet_add_json","origin","wscols","wch","wsrows","hpt","book_append_sheet","writeFile","bookType","marginRight","preventDefault","layout"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState } from 'react'\r\nimport { Input, DatePicker, Tooltip, Popconfirm, Dropdown, Card, Spin } from 'antd'\r\nimport { staffSalaryApi } from '~/apiBase/staff-manage/staff-salary'\r\nimport SortBox from '~/components/Elements/SortBox'\r\nimport LayoutBase from '~/components/LayoutBase'\r\nimport PowerTable from '~/components/PowerTable'\r\nimport FilterColumn from '~/components/Tables/FilterColumn'\r\nimport { useWrap } from '~/context/wrap'\r\nimport { numberWithCommas } from '~/utils/functions'\r\nimport ConfirmForm from '../../../components/Global/StaffList/StaffSalary/admin-confirm-salary'\r\nimport { EllipsisOutlined } from '@ant-design/icons'\r\nimport moment from 'moment'\r\nimport XLSX from 'xlsx'\r\n\r\nconst now = new Date()\r\n\r\nconst SalaryReview = () => {\r\n\tconst [totalPage, setTotalPage] = useState(null)\r\n\tconst [visible, setVisible] = React.useState(false)\r\n\tconst [dropDownVisible, setDropDownVisible] = useState(false)\r\n\tconst [payRoll, setPayRoll] = useState<IStaffSalary[]>([])\r\n\tconst [currentPage, setCurrentPage] = useState(1)\r\n\tconst { showNoti, userInformation, pageSize } = useWrap()\r\n\tconst [isLoading, setIsLoading] = useState({\r\n\t\ttype: 'GET_ALL',\r\n\t\tstatus: false\r\n\t})\r\n\tconst [workDays, setWorkDays] = useState({\r\n\t\tdays: 0,\r\n\t\tmessError: ''\r\n\t})\r\n\r\n\tconst getLastYear = () => {\r\n\t\treturn now.getMonth() == 0 ? now.getFullYear() - 1 : now.getFullYear()\r\n\t}\r\n\r\n\tconst getDateNumber = (number) => {\r\n\t\treturn number > 10 ? number : number == 0 ? '12' : '0' + number\r\n\t}\r\n\r\n\tconst paramDefault = {\r\n\t\tpageIndex: currentPage,\r\n\t\tpageSize: pageSize,\r\n\t\tYear: getLastYear(),\r\n\t\tMonth: getDateNumber(now.getMonth()),\r\n\t\tStaffName: null,\r\n\t\tStaffID: null,\r\n\t\t// selectAll: true,\r\n\t\tStatusID: null,\r\n\t\tsort: null,\r\n\t\tsortType: null\r\n\t}\r\n\r\n\tlet listFieldSearch = {\r\n\t\tpageIndex: 1,\r\n\t\tStaffName: null\r\n\t}\r\n\r\n\t// SORT\r\n\tconst sortOptionList = [\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 0,\r\n\t\t\t\tsortType: false\r\n\t\t\t},\r\n\t\t\tvalue: 1,\r\n\t\t\ttext: 'Tên giảm dần'\r\n\t\t},\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 0,\r\n\t\t\t\tsortType: true\r\n\t\t\t},\r\n\t\t\tvalue: 2,\r\n\t\t\ttext: 'Tên tăng dần '\r\n\t\t},\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 1,\r\n\t\t\t\tsortType: false\r\n\t\t\t},\r\n\t\t\tvalue: 3,\r\n\t\t\ttext: 'Lương tổng giảm dần'\r\n\t\t},\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 1,\r\n\t\t\t\tsortType: true\r\n\t\t\t},\r\n\t\t\tvalue: 4,\r\n\t\t\ttext: 'Lương tổng tăng dần '\r\n\t\t},\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 2,\r\n\t\t\t\tsortType: false\r\n\t\t\t},\r\n\t\t\tvalue: 5,\r\n\t\t\ttext: 'Ngày nghỉ giảm dần'\r\n\t\t},\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 2,\r\n\t\t\t\tsortType: true\r\n\t\t\t},\r\n\t\t\tvalue: 6,\r\n\t\t\ttext: 'Ngày nghỉ tăng dần '\r\n\t\t}\r\n\t]\r\n\r\n\tlet refValue = useRef({\r\n\t\tpageIndex: 1,\r\n\t\tpageSize: pageSize,\r\n\t\tsort: -1,\r\n\t\tsortType: false\r\n\t})\r\n\r\n\tconst [params, setParams] = useState(paramDefault)\r\n\r\n\t// ------------ ON SEARCH -----------------------\r\n\r\n\tconst checkField = (valueSearch, dataIndex) => {\r\n\t\tlet newList = { ...listFieldSearch }\r\n\t\tObject.keys(newList).forEach(function (key) {\r\n\t\t\tif (key != dataIndex) {\r\n\t\t\t\tif (key != 'pageIndex') {\r\n\t\t\t\t\tnewList[key] = null\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tnewList[key] = valueSearch\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn newList\r\n\t}\r\n\r\n\tconst onSearch = (valueSearch, dataIndex) => {\r\n\t\tlet clearKey = checkField(valueSearch, dataIndex)\r\n\r\n\t\tsetParams({\r\n\t\t\t...params,\r\n\t\t\t...clearKey\r\n\t\t})\r\n\t}\r\n\r\n\t// HANDLE RESET\r\n\tconst resetListFieldSearch = () => {\r\n\t\tObject.keys(listFieldSearch).forEach(function (key) {\r\n\t\t\tif (key != 'pageIndex') {\r\n\t\t\t\tlistFieldSearch[key] = null\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tconst handleReset = () => {\r\n\t\tsetParams({\r\n\t\t\t...paramDefault,\r\n\t\t\tpageIndex: 1\r\n\t\t})\r\n\t\tsetCurrentPage(1), resetListFieldSearch()\r\n\t}\r\n\r\n\t// SORT\r\n\tconst onSort = (option) => {\r\n\t\trefValue.current = {\r\n\t\t\t...refValue.current,\r\n\t\t\tsort: option.title.sort,\r\n\t\t\tsortType: option.title.sortType\r\n\t\t}\r\n\t\tsetParams({ ...params, sort: option.title.sort, sortType: option.title.sortType })\r\n\t}\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Nhân viên',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'StaffName',\r\n\t\t\trender: (price, record: IStaffSalary) => <p className=\"font-weight-primary\">{price}</p>,\r\n\t\t\t...FilterColumn('StaffName', onSearch, handleReset, 'text')\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Năm',\r\n\t\t\twidth: 80,\r\n\t\t\tdataIndex: 'Year',\r\n\t\t\trender: (price, record: IStaffSalary) => <p>{price}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Tháng',\r\n\t\t\twidth: 80,\r\n\t\t\tdataIndex: 'Month',\r\n\t\t\trender: (price, record: IStaffSalary) => <p>{price}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Thưởng',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'Bonus',\r\n\t\t\trender: (price, record: IStaffSalary) => <p className=\"font-weight-green\">{numberWithCommas(price)}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Ghi Chú',\r\n\t\t\twidth: 160,\r\n\t\t\tdataIndex: 'NoteBonus',\r\n\t\t\trender: (price, record: any) => (\r\n\t\t\t\t<Tooltip title={price} className=\"limit-text\">\r\n\t\t\t\t\t<p>{price}</p>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t)\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Ngày nghỉ',\r\n\t\t\twidth: 90,\r\n\t\t\tdataIndex: 'CountOff',\r\n\t\t\trender: (price, record: any) => <p>{price}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Lương ngày nghỉ',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'SalaryOff',\r\n\t\t\trender: (price, record: any) => <p className=\"font-weight-primary\">{numberWithCommas(price)}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Trạng Thái',\r\n\t\t\twidth: 200,\r\n\t\t\tdataIndex: 'StatusName',\r\n\t\t\tfilters: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: 'Chưa chốt lương',\r\n\t\t\t\t\tvalue: 1\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: 'Đã gửi yêu cầu xác nhận',\r\n\t\t\t\t\tvalue: 3\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: 'Đã xác nhận',\r\n\t\t\t\t\tvalue: 4\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: 'Đã nhận lương',\r\n\t\t\t\t\tvalue: 5\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tonFilter: (value, record) => record.StatusID === value,\r\n\t\t\trender: (price, record: any) => (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{record.StatusID == 1 && <span className=\"tag red\">{price}</span>}\r\n\t\t\t\t\t{record.StatusID == 3 && <span className=\"tag yellow\">{price}</span>}\r\n\t\t\t\t\t{record.StatusID == 4 && <span className=\"tag blue\">{price}</span>}\r\n\t\t\t\t\t{record.StatusID == 5 && <span className=\"tag green\">{price}</span>}\r\n\t\t\t\t</>\r\n\t\t\t)\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Lương cơ bản',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'BasicSalary',\r\n\t\t\trender: (price, record: IStaffSalary) => <p className=\"font-weight-green\">{numberWithCommas(price)}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Trừ tạm ứng',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'AdvanceSalary',\r\n\t\t\trender: (price, record: IStaffSalary) => <p className=\"font-weight-primary\">{numberWithCommas(price)}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Lương Tổng',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'TotalSalary',\r\n\t\t\trender: (price, record: IStaffSalary) => <p className=\"font-weight-green\">{numberWithCommas(price)}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Cập Nhật',\r\n\t\t\twidth: 100,\r\n\t\t\trender: (text, record) => (\r\n\t\t\t\t<ConfirmForm\r\n\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\trecord={record}\r\n\t\t\t\t\tuserInformationID={userInformation.UserInformationID}\r\n\t\t\t\t\tsetParams={setParams}\r\n\t\t\t\t\tparams={params}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t}\r\n\t]\r\n\r\n\tconst getDataPayroll = async (page: any) => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'GET_ALL',\r\n\t\t\tstatus: true\r\n\t\t})\r\n\t\ttry {\r\n\t\t\tlet res = await staffSalaryApi.getAll({ ...params, pageIndex: page })\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tsetPayRoll(res.data.data)\r\n\t\t\t\tsetTotalPage(res.data.totalRow)\r\n\t\t\t\tsetDropDownVisible(false)\r\n\t\t\t}\r\n\t\t\tif (res.status == 204) {\r\n\t\t\t\tsetPayRoll([])\r\n\t\t\t\tsetDropDownVisible(false)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'GET_ALL',\r\n\t\t\t\tstatus: false\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst postSalaryOfTeacherClosing = async () => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'GET_ALL',\r\n\t\t\tstatus: true\r\n\t\t})\r\n\t\ttry {\r\n\t\t\tlet res = await staffSalaryApi.postSalaryClosing(workDays.days)\r\n\t\t\tsetParams({ ...params })\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tshowNoti('success', 'Thành công!')\r\n\t\t\t\tsetDropDownVisible(false)\r\n\t\t\t}\r\n\t\t\tif (res.status == 204) {\r\n\t\t\t\tshowNoti('success', 'Lương đã được tính rồi!')\r\n\t\t\t\tsetDropDownVisible(false)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetVisible(false)\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'GET_ALL',\r\n\t\t\t\tstatus: false\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst getPagination = (pageNumber: number) => {\r\n\t\tsetCurrentPage(pageNumber)\r\n\t\tsetParams({\r\n\t\t\t...params,\r\n\t\t\tpageIndex: currentPage\r\n\t\t})\r\n\t}\r\n\r\n\tconst onChangeMonth = (value) => {\r\n\t\tsetParams({ ...params, Month: Number(value.getMonth() + 1), Year: Number(value.getFullYear()) })\r\n\t}\r\n\r\n\tfunction daysInMonth(month, year) {\r\n\t\treturn new Date(year, month, 0).getDate()\r\n\t}\r\n\r\n\tconst showPopconfirm = () => {\r\n\t\tsetVisible(true)\r\n\t}\r\n\r\n\tconst handleCancel = () => {\r\n\t\tsetVisible(false)\r\n\t}\r\n\r\n\tconst renderTitle = () => {\r\n\t\treturn (\r\n\t\t\t<p className=\"font-weight-primary\">\r\n\t\t\t\tXác nhận tính lương từ 01-{getDateNumber(now.getMonth())}-{getLastYear()} đến{' '}\r\n\t\t\t\t{daysInMonth(getDateNumber(now.getMonth()), getLastYear())}-{getDateNumber(now.getMonth())}-{getLastYear()} ?\r\n\t\t\t</p>\r\n\t\t)\r\n\t}\r\n\r\n\tconst menu = () => {\r\n\t\treturn (\r\n\t\t\t<div className=\" d-xl-none\">\r\n\t\t\t\t<Card title=\"Thao tác\" style={{ width: 300 }}>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tonChange={(event) => {\r\n\t\t\t\t\t\t\tsetWorkDays({ ...workDays, days: Number(event.target.value) })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tclassName=\"style-input w-100 mb-4\"\r\n\t\t\t\t\t\tname=\"wordDays\"\r\n\t\t\t\t\t\tplaceholder=\"Nhập ngày công\"\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t{userInformation && (userInformation.RoleID === 1 || userInformation.RoleID === 2) && (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"btn btn-success mb-4 w-100\"\r\n\t\t\t\t\t\t\tdisabled={isLoading.type === 'EXCEL' && isLoading.status}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\texportExcelFile()\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{isLoading.type === 'EXCEL' && isLoading.status ? <Spin /> : 'Xuất file Excel'}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<Popconfirm\r\n\t\t\t\t\t\tclassName=\"w-100 mb-4\"\r\n\t\t\t\t\t\ttitle={renderTitle}\r\n\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\tonConfirm={postSalaryOfTeacherClosing}\r\n\t\t\t\t\t\tonCancel={handleCancel}\r\n\t\t\t\t\t\tokButtonProps={{ loading: isLoading.status }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<button onClick={showPopconfirm} className=\"btn btn-warning add-new\">\r\n\t\t\t\t\t\t\tTính lương tháng trước\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tclassName=\"w-100 style-input mb-4\"\r\n\t\t\t\t\t\tdefaultValue={moment(new Date(getLastYear() + '-' + getDateNumber(now.getMonth())), 'MM/yyyy')}\r\n\t\t\t\t\t\tonChange={(e, a) => {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tonChangeMonth(e._d)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tpicker=\"month\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<div className=\"w-100 d-md-none\">\r\n\t\t\t\t\t\t<SortBox space={false} width={278} handleSort={onSort} dataOption={sortOptionList} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Card>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst exportExcelFile = async () => {\r\n\t\tsetIsLoading({ type: 'EXCEL', status: true })\r\n\t\ttry {\r\n\t\t\tlet res = await staffSalaryApi.exportExcel({ year: params.Year, month: params.Month })\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tlet temp = []\r\n\t\t\t\tres.data.data.forEach((item, index) =>\r\n\t\t\t\t\ttemp.push({\r\n\t\t\t\t\t\tA: index + 1,\r\n\t\t\t\t\t\tB: item.BankAccountNumber,\r\n\t\t\t\t\t\tC: item.BankAccountHolderName,\r\n\t\t\t\t\t\tD: `${item.Bank}/${item.BankBranch}`,\r\n\t\t\t\t\t\tE: item.Salary,\r\n\t\t\t\t\t\tF: item.Reason,\r\n\t\t\t\t\t\tG: item.RoleName\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\tcreateExcelFile1(temp)\r\n\t\t\t}\r\n\t\t\tif (res.status === 204) {\r\n\t\t\t\tshowNoti('danger', 'Không có dữ liệu lương!')\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({ type: 'EXCEL', status: false })\r\n\t\t}\r\n\t}\r\n\r\n\tconst createExcelFile1 = async (data) => {\r\n\t\tlet wb = XLSX.utils.book_new()\r\n\r\n\t\t/* Initial row */\r\n\t\tvar ws = XLSX.utils.json_to_sheet([], {\r\n\t\t\theader: ['DANH SÁCH GIAO DỊCH (LIST OF TRANSACTIONS)'],\r\n\t\t\tskipHeader: false\r\n\t\t})\r\n\t\t/* Write data starting at E2 */\r\n\t\tXLSX.utils.sheet_add_json(\r\n\t\t\tws,\r\n\t\t\t[\r\n\t\t\t\t{\r\n\t\t\t\t\tA: 'STT (1)',\r\n\t\t\t\t\tB: 'Số  Số tài khoản (2)',\r\n\t\t\t\t\tC: 'Tên đơn vị thụ hưởng (3)',\r\n\t\t\t\t\tD: 'Ngân hàng thụ hưởng/Chi nhánh (4)',\r\n\t\t\t\t\tE: 'Số tiền (5)',\r\n\t\t\t\t\tF: 'Chi tiết thanh toán (6)',\r\n\t\t\t\t\tG: 'Chức vụ (7)'\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\t{ skipHeader: true, origin: 'A2' }\r\n\t\t)\r\n\r\n\t\t/* Write data starting at A2 */\r\n\t\tXLSX.utils.sheet_add_json(ws, data, { skipHeader: true, origin: 'A3' })\r\n\r\n\t\t// set width\r\n\t\tlet wscols = [{ wch: 8 }, { wch: 20 }, { wch: 22 }, { wch: 32 }, { wch: 18 }, { wch: 24 }, { wch: 22 }, { wch: 22 }]\r\n\t\tlet wsrows = [{ hpt: 22 }]\r\n\t\tws['!cols'] = wscols\r\n\t\tws['!rows'] = wsrows\r\n\t\t// });\r\n\t\tXLSX.utils.book_append_sheet(wb, ws, 'Bảng lương nhân viên')\r\n\t\tXLSX.writeFile(wb, 'bangluong.xlsx', { type: 'binary', bookType: 'xlsx' })\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tgetDataPayroll(currentPage)\r\n\t}, [params])\r\n\r\n\treturn (\r\n\t\t<PowerTable\r\n\t\t\tcurrentPage={currentPage}\r\n\t\t\tloading={isLoading}\r\n\t\t\ttotalPage={totalPage && totalPage}\r\n\t\t\tgetPagination={(pageNumber: number) => getPagination(pageNumber)}\r\n\t\t\taddClass=\"basic-header\"\r\n\t\t\tTitlePage=\"Duyệt lương nhân viên\"\r\n\t\t\tdataSource={payRoll}\r\n\t\t\tcolumns={columns}\r\n\t\t\tTitleCard={\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className=\"d-none d-xl-inline-block\">\r\n\t\t\t\t\t\t<div className=\"d-flex justify-content-end align-items-center \">\r\n\t\t\t\t\t\t\t{userInformation && (userInformation.RoleID === 1 || userInformation.RoleID === 2) && (\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-success mr-1\"\r\n\t\t\t\t\t\t\t\t\tstyle={{ width: 130 }}\r\n\t\t\t\t\t\t\t\t\tdisabled={isLoading.type === 'EXCEL' && isLoading.status}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\texportExcelFile()\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{isLoading.type === 'EXCEL' && isLoading.status ? <Spin /> : 'Xuất file Excel'}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\tonChange={(event) => {\r\n\t\t\t\t\t\t\t\t\tsetWorkDays({ ...workDays, days: Number(event.target.value) })\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclassName=\"style-input\"\r\n\t\t\t\t\t\t\t\tstyle={{ width: 150, marginRight: 5 }}\r\n\t\t\t\t\t\t\t\tname=\"wordDays\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Nhập ngày công\"\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<Popconfirm\r\n\t\t\t\t\t\t\t\ttitle={renderTitle}\r\n\t\t\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\t\t\tonConfirm={postSalaryOfTeacherClosing}\r\n\t\t\t\t\t\t\t\tonCancel={handleCancel}\r\n\t\t\t\t\t\t\t\tokButtonProps={{ loading: isLoading.status }}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<button onClick={showPopconfirm} className=\"btn btn-warning add-new\">\r\n\t\t\t\t\t\t\t\t\tTính lương tháng trước\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"d-inline-block d-xl-none col-md-3 w-25\">\r\n\t\t\t\t\t\t<Dropdown overlay={menu} trigger={['click']} visible={dropDownVisible}>\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\tclassName=\"ant-dropdown-link\"\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\t\tsetDropDownVisible(!dropDownVisible)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<EllipsisOutlined />\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</Dropdown>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t\tExtra={\r\n\t\t\t\t<div className=\"d-none d-md-inline-block\">\r\n\t\t\t\t\t<div className=\"extra-table\">\r\n\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\tdefaultValue={moment(new Date(getLastYear() + '-' + getDateNumber(now.getMonth())), 'MM/yyyy')}\r\n\t\t\t\t\t\t\tonChange={(e, a) => {\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\tonChangeMonth(e._d)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tpicker=\"month\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<SortBox space={true} width={200} handleSort={onSort} dataOption={sortOptionList} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t/>\r\n\t)\r\n}\r\nSalaryReview.layout = LayoutBase\r\nexport default SalaryReview\r\n"]},"metadata":{},"sourceType":"module"}