{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Elements\\\\FilterBase\\\\FilterBase.tsx\";\nimport React, { useState } from 'react';\nimport { Select, DatePicker, Input, Form, Popover } from 'antd';\nimport { Filter } from 'react-feather';\nimport moment from 'moment';\nimport { useWrap } from '~/context/wrap';\n\nconst FilterBase = props => {\n  const {\n    handleFilter,\n    handleReset,\n    isVideo,\n    dataFilter\n  } = props;\n  const {\n    showNoti\n  } = useWrap();\n  const {\n    RangePicker\n  } = DatePicker;\n  const {\n    0: listFilter,\n    1: setListFilter\n  } = useState(dataFilter);\n  const {\n    0: visible,\n    1: setVisible\n  } = useState(false);\n  const [form] = Form.useForm();\n  const {\n    Option\n  } = Select;\n  const dateFormat = 'YYYY/MM/DD'; // ------------ RESET FILTER -------------\n\n  const resetFilter = () => {\n    let newFilter = listFilter.map(item => {\n      item.value = null;\n      return item;\n    });\n    setListFilter(newFilter);\n  }; // ------------- ON SUBMIT -----------------\n\n\n  const onSubmit = () => {\n    handleFilter(listFilter);\n    setVisible(false);\n  }; // ------------- RETURN NAME FILTER --------------\n\n\n  const returnListFilter = (value, nameFilter) => {\n    listFilter.every((item, index) => {\n      if (item.name == nameFilter) {\n        item.value = value;\n        return false;\n      }\n\n      return true;\n    });\n    setListFilter([...listFilter]);\n  }; // ------------- GET VALUE FILTER ----------------\n\n\n  const getValueFilter = (value, typeFilter, nameFilter) => {\n    switch (typeFilter) {\n      case 'date-range':\n        if (value.length > 1) {\n          let fromDate = moment(value[0].toDate()).format('YYYY/MM/DD');\n          let toDate = moment(value[1].toDate()).format('YYYY/MM/DD');\n          let valueFromDate = {\n            name: 'fromDate',\n            value: fromDate\n          };\n          let valueToDate = {\n            name: 'toDate',\n            value: toDate\n          };\n          listFilter.push(valueFromDate, valueToDate);\n          setListFilter([...listFilter]);\n        } else {\n          showNoti('danger', 'Chưa chọn đầy đủ ngày');\n        }\n\n        break;\n\n      case 'date-single':\n        let formatValue = moment(value.toDate()).format('YYYY/MM/DD');\n        returnListFilter(formatValue, nameFilter);\n        break;\n\n      default:\n        returnListFilter(value, nameFilter);\n        break;\n    }\n  };\n\n  const handleChangeFilter = visible => {\n    setVisible(visible);\n  };\n\n  const onReset = () => {\n    handleReset();\n    setVisible(false);\n    resetFilter();\n    form.resetFields();\n  };\n\n  const fieldOfFilter = (item, index) => {\n    var _item$optionList;\n\n    switch (item.type) {\n      case 'select':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: item.col,\n          children: /*#__PURE__*/_jsxDEV(Form.Item, {\n            name: item.name,\n            label: item.title,\n            children: /*#__PURE__*/_jsxDEV(Select, {\n              style: {\n                width: '100%'\n              },\n              className: \"style-input\",\n              showSearch: true,\n              optionFilterProp: \"children\",\n              onChange: value => getValueFilter(value, 'select', item.name),\n              children: (_item$optionList = item.optionList) === null || _item$optionList === void 0 ? void 0 : _item$optionList.map((item, index) => /*#__PURE__*/_jsxDEV(Option, {\n                value: item.value,\n                children: item.title\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 10\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 7\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 6\n        }, this);\n        break;\n\n      case 'text':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: item.col,\n          children: /*#__PURE__*/_jsxDEV(Form.Item, {\n            name: item.name,\n            label: item.title,\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              placeholder: \"\",\n              className: \"style-input\",\n              onChange: e => getValueFilter(e.target.value, 'text', item.name),\n              allowClear: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 7\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 6\n        }, this);\n        break;\n\n      case 'date-range':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: item.col,\n          children: /*#__PURE__*/_jsxDEV(Form.Item, {\n            name: item.name,\n            label: item.title,\n            children: /*#__PURE__*/_jsxDEV(RangePicker, {\n              className: \"style-input\",\n              format: dateFormat,\n              onChange: value => getValueFilter(value, 'date-range', item.name)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 7\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 6\n        }, this);\n        break;\n\n      case 'date-single':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: item.col,\n          children: /*#__PURE__*/_jsxDEV(Form.Item, {\n            name: item.name,\n            label: item.title,\n            children: /*#__PURE__*/_jsxDEV(DatePicker, {\n              format: dateFormat,\n              onChange: value => getValueFilter(value, 'date-single', item.name)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 6\n        }, this);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  const content = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `wrap-filter small`,\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      form: form,\n      layout: \"vertical\",\n      onFinish: onSubmit,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [dataFilter.map((item, index) => fieldOfFilter(item, index)), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-12\",\n          children: /*#__PURE__*/_jsxDEV(Form.Item, {\n            className: \"mb-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"light btn btn-secondary\",\n              style: {\n                marginRight: '10px'\n              },\n              onClick: onReset,\n              children: \"Reset\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-primary\",\n              style: {\n                marginRight: '10px'\n              },\n              children: \"T\\xECm ki\\u1EBFm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 152,\n    columnNumber: 3\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Popover, {\n      visible: visible,\n      placement: \"bottomRight\",\n      content: content,\n      trigger: \"click\",\n      overlayClassName: \"filter-popover\",\n      onVisibleChange: handleChangeFilter,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-secondary light btn-filter\",\n        children: /*#__PURE__*/_jsxDEV(Filter, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 4\n    }, this)\n  }, void 0, false);\n};\n\nexport default FilterBase;","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Elements/FilterBase/FilterBase.tsx"],"names":["React","useState","Select","DatePicker","Input","Form","Popover","Filter","moment","useWrap","FilterBase","props","handleFilter","handleReset","isVideo","dataFilter","showNoti","RangePicker","listFilter","setListFilter","visible","setVisible","form","useForm","Option","dateFormat","resetFilter","newFilter","map","item","value","onSubmit","returnListFilter","nameFilter","every","index","name","getValueFilter","typeFilter","length","fromDate","toDate","format","valueFromDate","valueToDate","push","formatValue","handleChangeFilter","onReset","resetFields","fieldOfFilter","type","col","title","width","optionList","e","target","content","marginRight"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\nimport { Select, DatePicker, Input, Form, Popover } from 'antd'\r\nimport { Filter } from 'react-feather'\r\nimport moment from 'moment'\r\nimport { useWrap } from '~/context/wrap'\r\n\r\nconst FilterBase = (props) => {\r\n\tconst { handleFilter, handleReset, isVideo, dataFilter } = props\r\n\tconst { showNoti } = useWrap()\r\n\tconst { RangePicker } = DatePicker\r\n\r\n\tconst [listFilter, setListFilter] = useState(dataFilter)\r\n\tconst [visible, setVisible] = useState(false)\r\n\tconst [form] = Form.useForm()\r\n\tconst { Option } = Select\r\n\tconst dateFormat = 'YYYY/MM/DD'\r\n\r\n\t// ------------ RESET FILTER -------------\r\n\tconst resetFilter = () => {\r\n\t\tlet newFilter = listFilter.map((item) => {\r\n\t\t\titem.value = null\r\n\t\t\treturn item\r\n\t\t})\r\n\t\tsetListFilter(newFilter)\r\n\t}\r\n\r\n\t// ------------- ON SUBMIT -----------------\r\n\tconst onSubmit = () => {\r\n\t\thandleFilter(listFilter)\r\n\t\tsetVisible(false)\r\n\t}\r\n\r\n\t// ------------- RETURN NAME FILTER --------------\r\n\tconst returnListFilter = (value, nameFilter) => {\r\n\t\tlistFilter.every((item, index) => {\r\n\t\t\tif (item.name == nameFilter) {\r\n\t\t\t\titem.value = value\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\treturn true\r\n\t\t})\r\n\t\tsetListFilter([...listFilter])\r\n\t}\r\n\r\n\t// ------------- GET VALUE FILTER ----------------\r\n\tconst getValueFilter = (value, typeFilter, nameFilter) => {\r\n\t\tswitch (typeFilter) {\r\n\t\t\tcase 'date-range':\r\n\t\t\t\tif (value.length > 1) {\r\n\t\t\t\t\tlet fromDate = moment(value[0].toDate()).format('YYYY/MM/DD')\r\n\t\t\t\t\tlet toDate = moment(value[1].toDate()).format('YYYY/MM/DD')\r\n\t\t\t\t\tlet valueFromDate = {\r\n\t\t\t\t\t\tname: 'fromDate',\r\n\t\t\t\t\t\tvalue: fromDate\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet valueToDate = {\r\n\t\t\t\t\t\tname: 'toDate',\r\n\t\t\t\t\t\tvalue: toDate\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlistFilter.push(valueFromDate, valueToDate)\r\n\t\t\t\t\tsetListFilter([...listFilter])\r\n\t\t\t\t} else {\r\n\t\t\t\t\tshowNoti('danger', 'Chưa chọn đầy đủ ngày')\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\t\t\tcase 'date-single':\r\n\t\t\t\tlet formatValue = moment(value.toDate()).format('YYYY/MM/DD')\r\n\t\t\t\treturnListFilter(formatValue, nameFilter)\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\treturnListFilter(value, nameFilter)\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleChangeFilter = (visible) => {\r\n\t\tsetVisible(visible)\r\n\t}\r\n\r\n\tconst onReset = () => {\r\n\t\thandleReset()\r\n\t\tsetVisible(false)\r\n\t\tresetFilter()\r\n\t\tform.resetFields()\r\n\t}\r\n\r\n\tconst fieldOfFilter = (item, index) => {\r\n\t\tswitch (item.type) {\r\n\t\t\tcase 'select':\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={index} className={item.col}>\r\n\t\t\t\t\t\t<Form.Item name={item.name} label={item.title}>\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tstyle={{ width: '100%' }}\r\n\t\t\t\t\t\t\t\tclassName=\"style-input\"\r\n\t\t\t\t\t\t\t\tshowSearch\r\n\t\t\t\t\t\t\t\toptionFilterProp=\"children\"\r\n\t\t\t\t\t\t\t\tonChange={(value) => getValueFilter(value, 'select', item.name)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{item.optionList?.map((item, index) => (\r\n\t\t\t\t\t\t\t\t\t<Option key={index} value={item.value}>\r\n\t\t\t\t\t\t\t\t\t\t{item.title}\r\n\t\t\t\t\t\t\t\t\t</Option>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t\tbreak\r\n\t\t\tcase 'text':\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={index} className={item.col}>\r\n\t\t\t\t\t\t<Form.Item name={item.name} label={item.title}>\r\n\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\tplaceholder=\"\"\r\n\t\t\t\t\t\t\t\tclassName=\"style-input\"\r\n\t\t\t\t\t\t\t\tonChange={(e) => getValueFilter(e.target.value, 'text', item.name)}\r\n\t\t\t\t\t\t\t\tallowClear={true}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t\tbreak\r\n\t\t\tcase 'date-range':\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={index} className={item.col}>\r\n\t\t\t\t\t\t<Form.Item name={item.name} label={item.title}>\r\n\t\t\t\t\t\t\t<RangePicker\r\n\t\t\t\t\t\t\t\tclassName=\"style-input\"\r\n\t\t\t\t\t\t\t\tformat={dateFormat}\r\n\t\t\t\t\t\t\t\tonChange={(value) => getValueFilter(value, 'date-range', item.name)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t\tbreak\r\n\t\t\tcase 'date-single':\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className={item.col}>\r\n\t\t\t\t\t\t<Form.Item name={item.name} label={item.title}>\r\n\t\t\t\t\t\t\t<DatePicker format={dateFormat} onChange={(value) => getValueFilter(value, 'date-single', item.name)} />\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t}\r\n\r\n\tconst content = (\r\n\t\t<div className={`wrap-filter small`}>\r\n\t\t\t<Form form={form} layout=\"vertical\" onFinish={onSubmit}>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t{dataFilter.map((item, index) => fieldOfFilter(item, index))}\r\n\r\n\t\t\t\t\t<div className=\"col-md-12\">\r\n\t\t\t\t\t\t<Form.Item className=\"mb-0\">\r\n\t\t\t\t\t\t\t<button type=\"button\" className=\"light btn btn-secondary\" style={{ marginRight: '10px' }} onClick={onReset}>\r\n\t\t\t\t\t\t\t\tReset\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary\" style={{ marginRight: '10px' }}>\r\n\t\t\t\t\t\t\t\tTìm kiếm\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Form>\r\n\t\t</div>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Popover\r\n\t\t\t\tvisible={visible}\r\n\t\t\t\tplacement=\"bottomRight\"\r\n\t\t\t\tcontent={content}\r\n\t\t\t\ttrigger=\"click\"\r\n\t\t\t\toverlayClassName=\"filter-popover\"\r\n\t\t\t\tonVisibleChange={handleChangeFilter}\r\n\t\t\t>\r\n\t\t\t\t<button className=\"btn btn-secondary light btn-filter\">\r\n\t\t\t\t\t<Filter />\r\n\t\t\t\t</button>\r\n\t\t\t</Popover>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default FilterBase\r\n"]},"metadata":{},"sourceType":"module"}