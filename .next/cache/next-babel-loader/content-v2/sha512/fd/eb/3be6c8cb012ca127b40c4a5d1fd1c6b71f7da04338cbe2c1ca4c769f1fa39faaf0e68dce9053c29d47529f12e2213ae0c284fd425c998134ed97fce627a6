{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\context\\\\wrap.tsx\";\nimport React, { createContext, useState, useContext, useEffect } from 'react';\nimport { useRouter } from 'next/router';\nimport { CheckCircleOutlined, WarningOutlined } from '@ant-design/icons';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { oneSignalAPI, userApi, userInformationApi } from '~/apiBase';\nimport { useSession } from 'next-auth/client';\nimport OneSignal from 'react-onesignal';\nconst WrapContext = /*#__PURE__*/createContext({\n  titlePage: '',\n  getRouter: '',\n  getTitlePage: () => {},\n  showNoti: () => {},\n  getDataUser: () => {},\n  userInformation: null,\n  useAllRoles: null,\n  useStaffRoles: null,\n  pageSize: 30,\n  isAdmin: false,\n  reloadNotification: false,\n  handleReloadNoti: Function,\n  reloadCart: false,\n  handleReloadCart: Function\n}); // const initialState = {\n//   noti: \"\",\n// };\n// function reducer() {}\n\nexport const WrapProvider = ({\n  children\n}) => {\n  // Get path and slug\n  const router = useRouter();\n  const slug = router.query.slug;\n  let path = router.pathname;\n  let pathString = path.split('/'); // ---- //\n\n  const [session, loading] = useSession();\n  const {\n    0: titlePage,\n    1: setTitlePage\n  } = useState('');\n  const getRouter = router.pathname;\n  const {\n    0: typeNoti,\n    1: setTypeNoti\n  } = useState({\n    content: '',\n    type: ''\n  });\n  const {\n    0: userInfo,\n    1: setUserInfo\n  } = useState(null);\n  const {\n    0: roles,\n    1: setRoles\n  } = useState(null);\n  const {\n    0: staffRoles,\n    1: setStaffRoles\n  } = useState(null);\n  const {\n    0: isAdmin,\n    1: setIsAdmin\n  } = useState(false);\n  const {\n    0: reloadNotification,\n    1: setReloadNotification\n  } = useState(false);\n  const {\n    0: reloadCart,\n    1: setReloadCart\n  } = useState(false); // --- Get Title Page ---\n\n  const getTitlePage = title => {\n    setTitlePage(title);\n  }; // --- Show Notification ---\n\n\n  const showNoti = (type, content) => {\n    const nodeNoti = () => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `noti-box`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"noti-box__content\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"icon\",\n            children: type == 'danger' ? /*#__PURE__*/_jsxDEV(WarningOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 50\n            }, this) : type == 'success' && /*#__PURE__*/_jsxDEV(CheckCircleOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 93\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text\",\n            children: content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 5\n      }, this);\n    };\n\n    switch (type) {\n      case 'success':\n        toast.success(nodeNoti);\n        break;\n\n      case 'danger':\n        toast.error(nodeNoti);\n        break;\n\n      case 'warning':\n        toast.warning(nodeNoti);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  const getRoles = async roleType => {\n    try {\n      let res = await userInformationApi.getRole(roleType); // @ts-ignore\n\n      res.status == 200 && roleType == 0 ? setRoles(res.data.data) : setStaffRoles(res.data.data);\n    } catch (error) {\n      console.log('Lỗi lấy thông tin roles: ', error);\n    }\n  }; // --- Get Data User ---\n\n\n  const getDataUser = data => {\n    data && setUserInfo(data);\n  }; // --- Check is Admin ---\n\n\n  const checkIsAdmin = data => {\n    let role = data.RoleID;\n\n    if (role == 1 || role == 5) {\n      setIsAdmin(true);\n    }\n  }; // --- Get New Data Use ---\n\n\n  const getNewDataUser = async () => {\n    try {\n      let res = await userApi.getNew();\n      res.status == 200 && (setUserInfo(res.data.data), checkIsAdmin(res.data.data));\n    } catch (error) {\n      console.log('Lỗi lấy thông tin user: ', error);\n    }\n  }; // --- Handle Reload Notification ---\n\n\n  const handleReloadNoti = () => {\n    setReloadNotification(!reloadNotification);\n  }; // --- Handle Reload Card ---\n\n\n  const handleReloadCart = () => {\n    setReloadCart(!reloadCart);\n  };\n\n  const postOnesignalID = async () => {\n    try {\n      const userId = await OneSignal.getUserId();\n      let res = await oneSignalAPI.update(userId);\n    } catch (error) {\n      console.log('Lỗi lấy thông tin user: ', error);\n    }\n  };\n\n  useEffect(() => {\n    // console.log('Session: ', session);\n    if (loading && typeof session !== 'undefined' && session !== null) {\n      if (path.search('signin') < 1) {\n        getNewDataUser();\n        getRoles(0);\n        getRoles(1);\n        postOnesignalID();\n      }\n    }\n  }, [session]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(WrapContext.Provider, {\n      value: {\n        pageSize: 30,\n        titlePage: titlePage,\n        getTitlePage,\n        getRouter,\n        showNoti,\n        getDataUser,\n        userInformation: userInfo,\n        useAllRoles: roles,\n        useStaffRoles: staffRoles,\n        isAdmin: isAdmin,\n        reloadNotification: reloadNotification,\n        handleReloadNoti: handleReloadNoti,\n        reloadCart: reloadCart,\n        handleReloadCart: handleReloadCart\n      },\n      children: [/*#__PURE__*/_jsxDEV(ToastContainer, {\n        position: \"top-right\",\n        autoClose: 3000,\n        hideProgressBar: false,\n        newestOnTop: false,\n        closeOnClick: true,\n        rtl: false,\n        pauseOnFocusLoss: true,\n        draggable: true,\n        pauseOnHover: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 5\n      }, this), children]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 4\n    }, this)\n  }, void 0, false);\n};\nexport const useWrap = () => useContext(WrapContext);","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/context/wrap.tsx"],"names":["React","createContext","useState","useContext","useEffect","useRouter","CheckCircleOutlined","WarningOutlined","ToastContainer","toast","oneSignalAPI","userApi","userInformationApi","useSession","OneSignal","WrapContext","titlePage","getRouter","getTitlePage","showNoti","getDataUser","userInformation","useAllRoles","useStaffRoles","pageSize","isAdmin","reloadNotification","handleReloadNoti","Function","reloadCart","handleReloadCart","WrapProvider","children","router","slug","query","path","pathname","pathString","split","session","loading","setTitlePage","typeNoti","setTypeNoti","content","type","userInfo","setUserInfo","roles","setRoles","staffRoles","setStaffRoles","setIsAdmin","setReloadNotification","setReloadCart","title","nodeNoti","success","error","warning","getRoles","roleType","res","getRole","status","data","console","log","checkIsAdmin","role","RoleID","getNewDataUser","getNew","postOnesignalID","userId","getUserId","update","search","useWrap"],"mappings":"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","sourcesContent":["import React, { createContext, useState, useContext, useEffect, useReducer } from 'react'\r\nimport { useRouter } from 'next/router'\r\nimport { CheckCircleOutlined, WarningOutlined } from '@ant-design/icons'\r\nimport { ToastContainer, toast } from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.css'\r\nimport { oneSignalAPI, userApi, userInformationApi } from '~/apiBase'\r\nimport { signIn, useSession } from 'next-auth/client'\r\nimport OneSignal from 'react-onesignal'\r\n\r\nexport type IProps = {\r\n\ttitlePage: string\r\n\tgetRouter: any\r\n\tgetTitlePage: Function\r\n\tshowNoti: Function\r\n\tgetDataUser: Function\r\n\tuserInformation: IUser\r\n\tuseAllRoles: IRole[]\r\n\tuseStaffRoles: IRole[]\r\n\tpageSize: number\r\n\tisAdmin: boolean\r\n\treloadNotification: boolean\r\n\thandleReloadNoti: Function\r\n\treloadCart: boolean\r\n\thandleReloadCart: Function\r\n}\r\n\r\nconst WrapContext = createContext<IProps>({\r\n\ttitlePage: '',\r\n\tgetRouter: '',\r\n\tgetTitlePage: () => {},\r\n\tshowNoti: () => {},\r\n\tgetDataUser: () => {},\r\n\tuserInformation: null,\r\n\tuseAllRoles: null,\r\n\tuseStaffRoles: null,\r\n\tpageSize: 30,\r\n\tisAdmin: false,\r\n\treloadNotification: false,\r\n\thandleReloadNoti: Function,\r\n\treloadCart: false,\r\n\thandleReloadCart: Function\r\n})\r\n\r\n// const initialState = {\r\n//   noti: \"\",\r\n// };\r\n\r\n// function reducer() {}\r\n\r\nexport const WrapProvider = ({ children }) => {\r\n\t// Get path and slug\r\n\tconst router = useRouter()\r\n\tconst slug = router.query.slug\r\n\tlet path: string = router.pathname\r\n\tlet pathString: string[] = path.split('/')\r\n\t// ---- //\r\n\tconst [session, loading] = useSession()\r\n\tconst [titlePage, setTitlePage] = useState('')\r\n\r\n\tconst getRouter = router.pathname\r\n\tconst [typeNoti, setTypeNoti] = useState({\r\n\t\tcontent: '',\r\n\t\ttype: ''\r\n\t})\r\n\tconst [userInfo, setUserInfo] = useState<IUser>(null)\r\n\tconst [roles, setRoles] = useState<IRole[]>(null)\r\n\tconst [staffRoles, setStaffRoles] = useState<IRole[]>(null)\r\n\tconst [isAdmin, setIsAdmin] = useState(false)\r\n\tconst [reloadNotification, setReloadNotification] = useState(false)\r\n\tconst [reloadCart, setReloadCart] = useState(false)\r\n\r\n\t// --- Get Title Page ---\r\n\tconst getTitlePage = (title) => {\r\n\t\tsetTitlePage(title)\r\n\t}\r\n\r\n\t// --- Show Notification ---\r\n\tconst showNoti = (type: string, content: string) => {\r\n\t\tconst nodeNoti = () => {\r\n\t\t\treturn (\r\n\t\t\t\t<div className={`noti-box`}>\r\n\t\t\t\t\t<div className=\"noti-box__content\">\r\n\t\t\t\t\t\t<span className=\"icon\">{type == 'danger' ? <WarningOutlined /> : type == 'success' && <CheckCircleOutlined />}</span>\r\n\t\t\t\t\t\t<span className=\"text\">{content}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tswitch (type) {\r\n\t\t\tcase 'success':\r\n\t\t\t\ttoast.success(nodeNoti)\r\n\t\t\t\tbreak\r\n\t\t\tcase 'danger':\r\n\t\t\t\ttoast.error(nodeNoti)\r\n\t\t\t\tbreak\r\n\t\t\tcase 'warning':\r\n\t\t\t\ttoast.warning(nodeNoti)\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t}\r\n\r\n\tconst getRoles = async (roleType) => {\r\n\t\ttry {\r\n\t\t\tlet res = await userInformationApi.getRole(roleType)\r\n\t\t\t// @ts-ignore\r\n\t\t\tres.status == 200 && roleType == 0 ? setRoles(res.data.data) : setStaffRoles(res.data.data)\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('Lỗi lấy thông tin roles: ', error)\r\n\t\t}\r\n\t}\r\n\r\n\t// --- Get Data User ---\r\n\tconst getDataUser = (data) => {\r\n\t\tdata && setUserInfo(data)\r\n\t}\r\n\r\n\t// --- Check is Admin ---\r\n\tconst checkIsAdmin = (data) => {\r\n\t\tlet role = data.RoleID\r\n\t\tif (role == 1 || role == 5) {\r\n\t\t\tsetIsAdmin(true)\r\n\t\t}\r\n\t}\r\n\r\n\t// --- Get New Data Use ---\r\n\tconst getNewDataUser = async () => {\r\n\t\ttry {\r\n\t\t\tlet res = await userApi.getNew()\r\n\r\n\t\t\tres.status == 200 && (setUserInfo(res.data.data), checkIsAdmin(res.data.data))\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('Lỗi lấy thông tin user: ', error)\r\n\t\t}\r\n\t}\r\n\r\n\t// --- Handle Reload Notification ---\r\n\tconst handleReloadNoti = () => {\r\n\t\tsetReloadNotification(!reloadNotification)\r\n\t}\r\n\r\n\t// --- Handle Reload Card ---\r\n\tconst handleReloadCart = () => {\r\n\t\tsetReloadCart(!reloadCart)\r\n\t}\r\n\r\n\tconst postOnesignalID = async () => {\r\n\t\ttry {\r\n\t\t\tconst userId = await OneSignal.getUserId()\r\n\t\t\tlet res = await oneSignalAPI.update(userId)\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('Lỗi lấy thông tin user: ', error)\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\t// console.log('Session: ', session);\r\n\r\n\t\tif (loading && typeof session !== 'undefined' && session !== null) {\r\n\t\t\tif (path.search('signin') < 1) {\r\n\t\t\t\tgetNewDataUser()\r\n\t\t\t\tgetRoles(0)\r\n\t\t\t\tgetRoles(1)\r\n\t\t\t\tpostOnesignalID()\r\n\t\t\t}\r\n\t\t}\r\n\t}, [session])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<WrapContext.Provider\r\n\t\t\t\tvalue={{\r\n\t\t\t\t\tpageSize: 30,\r\n\t\t\t\t\ttitlePage: titlePage,\r\n\t\t\t\t\tgetTitlePage,\r\n\t\t\t\t\tgetRouter,\r\n\t\t\t\t\tshowNoti,\r\n\t\t\t\t\tgetDataUser,\r\n\t\t\t\t\tuserInformation: userInfo,\r\n\t\t\t\t\tuseAllRoles: roles,\r\n\t\t\t\t\tuseStaffRoles: staffRoles,\r\n\t\t\t\t\tisAdmin: isAdmin,\r\n\t\t\t\t\treloadNotification: reloadNotification,\r\n\t\t\t\t\thandleReloadNoti: handleReloadNoti,\r\n\t\t\t\t\treloadCart: reloadCart,\r\n\t\t\t\t\thandleReloadCart: handleReloadCart\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<ToastContainer\r\n\t\t\t\t\tposition=\"top-right\"\r\n\t\t\t\t\tautoClose={3000}\r\n\t\t\t\t\thideProgressBar={false}\r\n\t\t\t\t\tnewestOnTop={false}\r\n\t\t\t\t\tcloseOnClick\r\n\t\t\t\t\trtl={false}\r\n\t\t\t\t\tpauseOnFocusLoss\r\n\t\t\t\t\tdraggable\r\n\t\t\t\t\tpauseOnHover\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t{children}\r\n\t\t\t</WrapContext.Provider>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport const useWrap = () => useContext(WrapContext)\r\n"]},"metadata":{},"sourceType":"module"}