{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _toConsumableArray from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _slicedToArray from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\Package\\\\PackagePayment\\\\PackagePayment.tsx\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport moment from 'moment';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { packageApi, packageStudentApi, studentApi } from '~/apiBase';\nimport SortBox from '~/components/Elements/SortBox';\nimport PowerTable from '~/components/PowerTable';\nimport FilterColumn from '~/components/Tables/FilterColumn';\nimport { useWrap } from '~/context/wrap';\nimport { fmSelectArr, numberWithCommas } from '~/utils/functions';\nimport PackagePaymentForm from './PackagePaymentForm/PackagePaymentForm';\n\nfunction PackagePayment() {\n  _s();\n\n  var _this = this;\n\n  var _useState = useState([]),\n      packagePaymentList = _useState[0],\n      setPackagePaymentList = _useState[1];\n\n  var _useState2 = useState({\n    studentList: [],\n    packageList: []\n  }),\n      dataToSearch = _useState2[0],\n      setDataToSearchList = _useState2[1];\n\n  var _useState3 = useState({\n    type: '',\n    status: false\n  }),\n      isLoading = _useState3[0],\n      setIsLoading = _useState3[1];\n\n  var _useState4 = useState(null),\n      totalPage = _useState4[0],\n      setTotalPage = _useState4[1];\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti,\n      pageSize = _useWrap.pageSize;\n\n  var _useState5 = useState(''),\n      activeColumnSearch = _useState5[0],\n      setActiveColumnSearch = _useState5[1]; // FILTER\n\n\n  var listFieldInit = {\n    pageIndex: 1,\n    pageSize: pageSize,\n    sort: -1,\n    sortType: false,\n    Type: 2,\n    SetPackageID: null,\n    StudentID: null,\n    fromDate: '',\n    toDate: ''\n  };\n  var refValue = useRef({\n    pageIndex: 1,\n    pageSize: 10,\n    sort: -1,\n    sortType: false\n  });\n\n  var _useState6 = useState(listFieldInit),\n      filters = _useState6[0],\n      setFilters = _useState6[1];\n\n  var approvalOptionList = [{\n    value: 1,\n    title: 'Chưa thanh toán'\n  }, {\n    value: 2,\n    title: 'Chờ duyệt'\n  }, {\n    value: 3,\n    title: 'Đã duyệt'\n  }]; // SORT OPTION\n\n  var sortOptionList = [{\n    dataSort: {\n      sort: 1,\n      sortType: true\n    },\n    value: 3,\n    text: 'Giá tăng dần'\n  }, {\n    dataSort: {\n      sort: 1,\n      sortType: false\n    },\n    value: 4,\n    text: 'Giá giảm dần'\n  }]; // PAGINATION\n\n  var getPagination = function getPagination(pageIndex, pageSize) {\n    if (!pageSize) pageSize = 10;\n    refValue.current = _objectSpread(_objectSpread({}, refValue.current), {}, {\n      pageSize: pageSize,\n      pageIndex: pageIndex\n    });\n    setFilters(_objectSpread(_objectSpread({}, filters), refValue.current));\n  }; // SORT\n\n\n  var onSort = function onSort(option) {\n    refValue.current = _objectSpread(_objectSpread({}, refValue.current), {}, {\n      sort: option.title.sort,\n      sortType: option.title.sortType\n    });\n    setFilters(_objectSpread(_objectSpread({}, listFieldInit), refValue.current));\n  }; // RESET SEARCH\n\n\n  var onResetSearch = function onResetSearch() {\n    setActiveColumnSearch('');\n    setFilters(_objectSpread(_objectSpread({}, listFieldInit), {}, {\n      pageSize: refValue.current.pageSize\n    }));\n  }; // ACTION SEARCH\n\n\n  var onSearch = function onSearch(valueSearch, dataIndex) {\n    setActiveColumnSearch(dataIndex);\n\n    if (dataIndex === 'CreatedOn') {\n      setFilters(_objectSpread(_objectSpread(_objectSpread({}, listFieldInit), refValue.current), {}, {\n        pageIndex: 1\n      }, valueSearch));\n    } else {\n      setFilters(_objectSpread(_objectSpread(_objectSpread({}, listFieldInit), refValue.current), {}, _defineProperty({\n        pageIndex: 1\n      }, dataIndex, valueSearch)));\n    }\n  }; // GET DATA IN FIRST TIME\n\n\n  var fetchDataToSearchList = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _yield$Promise$all$th, _yield$Promise$all$th2, studentList, packageList, fmOptionStudentList, fmOptionPackageList;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setIsLoading({\n                type: 'GET_ALL',\n                status: true\n              });\n              _context.prev = 1;\n              _context.next = 4;\n              return Promise.all([studentApi.getAll({\n                selectAll: true\n              }), packageApi.getAll({\n                selectAll: true\n              })]).then(function (res) {\n                return res.map(function (r) {\n                  return r.status === 200 ? r.data.data : [];\n                });\n              });\n\n            case 4:\n              _yield$Promise$all$th = _context.sent;\n              _yield$Promise$all$th2 = _slicedToArray(_yield$Promise$all$th, 2);\n              studentList = _yield$Promise$all$th2[0];\n              packageList = _yield$Promise$all$th2[1];\n\n              if (studentList.length) {\n                fmOptionStudentList = fmSelectArr(studentList, 'FullNameUnicode', 'UserInformationID');\n                setDataToSearchList(function (prevState) {\n                  return _objectSpread(_objectSpread({}, prevState), {}, {\n                    studentList: fmOptionStudentList\n                  });\n                });\n              }\n\n              if (packageList.length) {\n                fmOptionPackageList = fmSelectArr(packageList, 'Name', 'ID');\n                setDataToSearchList(function (prevState) {\n                  return _objectSpread(_objectSpread({}, prevState), {}, {\n                    packageList: fmOptionPackageList\n                  });\n                });\n              }\n\n              _context.next = 15;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](1);\n              showNoti('danger', _context.t0.message);\n\n            case 15:\n              _context.prev = 15;\n              setIsLoading({\n                type: 'GET_ALL',\n                status: false\n              });\n              return _context.finish(15);\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 12, 15, 18]]);\n    }));\n\n    return function fetchDataToSearchList() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var fetchPackagePaymentList = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setIsLoading({\n                type: 'GET_ALL',\n                status: true\n              });\n              _context2.prev = 1;\n              _context2.next = 4;\n              return packageStudentApi.getAll(filters);\n\n            case 4:\n              res = _context2.sent;\n\n              if (res.status === 200) {\n                if (res.data.totalRow && res.data.data.length) {\n                  setPackagePaymentList(res.data.data);\n                  setTotalPage(res.data.totalRow);\n                }\n              } else if (res.status === 204) {\n                showNoti('danger', 'Không tìm thấy');\n                setPackagePaymentList([]);\n              }\n\n              _context2.next = 11;\n              break;\n\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](1);\n              showNoti('danger', _context2.t0.message);\n\n            case 11:\n              _context2.prev = 11;\n              setIsLoading({\n                type: 'GET_ALL',\n                status: false\n              });\n              return _context2.finish(11);\n\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 8, 11, 14]]);\n    }));\n\n    return function fetchPackagePaymentList() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    fetchDataToSearchList();\n  }, []);\n  useEffect(function () {\n    fetchPackagePaymentList();\n  }, [filters]); // UPDATE\n\n  var onUpdatePackagePayment = function onUpdatePackagePayment(idx) {\n    return /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(packagePaymentItem) {\n        var ID, Approval, newPackagePaymentUpdateApi, newPackagePaymentUpdate, res, newPackagePaymentList;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                setIsLoading({\n                  type: 'ADD_DATA',\n                  status: true\n                });\n                _context3.prev = 1;\n                ID = packagePaymentItem.ID, Approval = packagePaymentItem.Approval;\n                newPackagePaymentUpdateApi = {\n                  ID: ID,\n                  Approval: Approval,\n                  Enable: true\n                };\n                newPackagePaymentUpdate = _objectSpread(_objectSpread({}, packagePaymentItem), {}, {\n                  Approval: Approval,\n                  ApprovalName: approvalOptionList.find(function (a) {\n                    return a.value === Approval;\n                  }).title\n                });\n                _context3.next = 7;\n                return packageStudentApi.update(newPackagePaymentUpdateApi);\n\n              case 7:\n                res = _context3.sent;\n\n                if (res.status === 200) {\n                  newPackagePaymentList = _toConsumableArray(packagePaymentList);\n                  newPackagePaymentList.splice(idx, 1, newPackagePaymentUpdate);\n                  setPackagePaymentList(newPackagePaymentList);\n                  showNoti('success', res.data.message);\n                }\n\n                return _context3.abrupt(\"return\", res);\n\n              case 12:\n                _context3.prev = 12;\n                _context3.t0 = _context3[\"catch\"](1);\n                showNoti('danger', _context3.t0.message);\n\n              case 15:\n                _context3.prev = 15;\n                setIsLoading({\n                  type: 'ADD_DATA',\n                  status: false\n                });\n                return _context3.finish(15);\n\n              case 18:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[1, 12, 15, 18]]);\n      }));\n\n      return function (_x) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n  };\n\n  var columns = [_objectSpread(_objectSpread({\n    title: 'Học viên',\n    dataIndex: 'StudentName'\n  }, FilterColumn('StudentID', onSearch, onResetSearch, 'select', dataToSearch.studentList)), {}, {\n    className: activeColumnSearch === 'StudentID' ? 'active-column-search' : ''\n  }), _objectSpread(_objectSpread({\n    title: 'Tên bộ đề',\n    dataIndex: 'SetPackageName'\n  }, FilterColumn('SetPackageID', onSearch, onResetSearch, 'select', dataToSearch.packageList)), {}, {\n    className: activeColumnSearch === 'SetPackageID' ? 'active-column-search' : ''\n  }), {\n    title: 'Loại',\n    dataIndex: 'TypeName'\n  }, {\n    title: 'Giá',\n    dataIndex: 'Price',\n    render: function render(price) {\n      return price ? numberWithCommas(price) : 0;\n    }\n  }, _objectSpread(_objectSpread({\n    title: 'Ngày mua',\n    dataIndex: 'CreatedOn'\n  }, FilterColumn('CreatedOn', onSearch, onResetSearch, 'date-range')), {}, {\n    render: function render(date) {\n      return moment(date).format('DD/MM/YYYY');\n    },\n    className: activeColumnSearch === 'CreatedOn' ? 'active-column-search' : ''\n  }), {\n    title: 'Phương thức',\n    dataIndex: 'PaymentMethodsName'\n  }, {\n    title: 'Trạng thái',\n    dataIndex: 'ApprovalName',\n    render: function render(status) {\n      return status ? status : 'Trống';\n    }\n  }, {\n    align: 'right',\n    render: function render(packageItem, record, idx) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: packageItem.Approval !== 3 && /*#__PURE__*/_jsxDEV(PackagePaymentForm, {\n          isLoading: isLoading,\n          approvalOptionList: approvalOptionList,\n          updateObj: packageItem,\n          handleUpdatePackagePayment: onUpdatePackagePayment(idx)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 7\n        }, _this)\n      }, void 0, false);\n    }\n  }];\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(PowerTable, {\n      currentPage: filters.pageIndex,\n      totalPage: totalPage,\n      getPagination: getPagination,\n      loading: isLoading,\n      Size: \"package-list-table\",\n      addClass: \"basic-header\",\n      dataSource: packagePaymentList,\n      columns: columns,\n      TitlePage: \"Danh s\\xE1ch h\\u1ECDc vi\\xEAn mua b\\u1ED9 \\u0111\\u1EC1\",\n      Extra: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"extra-table\",\n        children: /*#__PURE__*/_jsxDEV(SortBox, {\n          dataOption: sortOptionList,\n          handleSort: onSort\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 4\n    }, this)\n  }, void 0, false);\n}\n\n_s(PackagePayment, \"ytvzHFXjZXor8xnmkKlI5Jh7xtc=\", false, function () {\n  return [useWrap];\n});\n\n_c = PackagePayment;\nexport default PackagePayment;\n\nvar _c;\n\n$RefreshReg$(_c, \"PackagePayment\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/Package/PackagePayment/PackagePayment.tsx"],"names":["moment","React","useEffect","useRef","useState","packageApi","packageStudentApi","studentApi","SortBox","PowerTable","FilterColumn","useWrap","fmSelectArr","numberWithCommas","PackagePaymentForm","PackagePayment","packagePaymentList","setPackagePaymentList","studentList","packageList","dataToSearch","setDataToSearchList","type","status","isLoading","setIsLoading","totalPage","setTotalPage","showNoti","pageSize","activeColumnSearch","setActiveColumnSearch","listFieldInit","pageIndex","sort","sortType","Type","SetPackageID","StudentID","fromDate","toDate","refValue","filters","setFilters","approvalOptionList","value","title","sortOptionList","dataSort","text","getPagination","current","onSort","option","onResetSearch","onSearch","valueSearch","dataIndex","fetchDataToSearchList","Promise","all","getAll","selectAll","then","res","map","r","data","length","fmOptionStudentList","prevState","fmOptionPackageList","message","fetchPackagePaymentList","totalRow","onUpdatePackagePayment","idx","packagePaymentItem","ID","Approval","newPackagePaymentUpdateApi","Enable","newPackagePaymentUpdate","ApprovalName","find","a","update","newPackagePaymentList","splice","columns","className","render","price","date","format","align","packageItem","record"],"mappings":"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","sourcesContent":["import moment from 'moment'\r\nimport React, { useEffect, useRef, useState } from 'react'\r\nimport { packageApi, packageStudentApi, studentApi } from '~/apiBase'\r\nimport SortBox from '~/components/Elements/SortBox'\r\nimport PowerTable from '~/components/PowerTable'\r\nimport FilterColumn from '~/components/Tables/FilterColumn'\r\nimport { useWrap } from '~/context/wrap'\r\nimport { fmSelectArr, numberWithCommas } from '~/utils/functions'\r\nimport PackagePaymentForm from './PackagePaymentForm/PackagePaymentForm'\r\n\r\nfunction PackagePayment() {\r\n\tconst [packagePaymentList, setPackagePaymentList] = useState<IPackageStudent[]>([])\r\n\tconst [dataToSearch, setDataToSearchList] = useState<{ studentList: IOptionCommon[]; packageList: IOptionCommon[] }>({\r\n\t\tstudentList: [],\r\n\t\tpackageList: []\r\n\t})\r\n\tconst [isLoading, setIsLoading] = useState({ type: '', status: false })\r\n\tconst [totalPage, setTotalPage] = useState(null)\r\n\tconst { showNoti, pageSize } = useWrap()\r\n\tconst [activeColumnSearch, setActiveColumnSearch] = useState('')\r\n\t// FILTER\r\n\tconst listFieldInit = {\r\n\t\tpageIndex: 1,\r\n\t\tpageSize: pageSize,\r\n\t\tsort: -1,\r\n\t\tsortType: false,\r\n\r\n\t\tType: 2,\r\n\t\tSetPackageID: null,\r\n\t\tStudentID: null,\r\n\t\tfromDate: '',\r\n\t\ttoDate: ''\r\n\t}\r\n\tlet refValue = useRef({\r\n\t\tpageIndex: 1,\r\n\t\tpageSize: 10,\r\n\t\tsort: -1,\r\n\t\tsortType: false\r\n\t})\r\n\tconst [filters, setFilters] = useState(listFieldInit)\r\n\tconst approvalOptionList = [\r\n\t\t{\r\n\t\t\tvalue: 1,\r\n\t\t\ttitle: 'Chưa thanh toán'\r\n\t\t},\r\n\t\t{\r\n\t\t\tvalue: 2,\r\n\t\t\ttitle: 'Chờ duyệt'\r\n\t\t},\r\n\t\t{\r\n\t\t\tvalue: 3,\r\n\t\t\ttitle: 'Đã duyệt'\r\n\t\t}\r\n\t]\r\n\t// SORT OPTION\r\n\tconst sortOptionList = [\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 1,\r\n\t\t\t\tsortType: true\r\n\t\t\t},\r\n\t\t\tvalue: 3,\r\n\t\t\ttext: 'Giá tăng dần'\r\n\t\t},\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 1,\r\n\t\t\t\tsortType: false\r\n\t\t\t},\r\n\t\t\tvalue: 4,\r\n\t\t\ttext: 'Giá giảm dần'\r\n\t\t}\r\n\t]\r\n\t// PAGINATION\r\n\tconst getPagination = (pageIndex: number, pageSize: number) => {\r\n\t\tif (!pageSize) pageSize = 10\r\n\t\trefValue.current = { ...refValue.current, pageSize, pageIndex }\r\n\t\tsetFilters({ ...filters, ...refValue.current })\r\n\t}\r\n\t// SORT\r\n\tconst onSort = (option) => {\r\n\t\trefValue.current = {\r\n\t\t\t...refValue.current,\r\n\t\t\tsort: option.title.sort,\r\n\t\t\tsortType: option.title.sortType\r\n\t\t}\r\n\t\tsetFilters({ ...listFieldInit, ...refValue.current })\r\n\t}\r\n\t// RESET SEARCH\r\n\tconst onResetSearch = () => {\r\n\t\tsetActiveColumnSearch('')\r\n\t\tsetFilters({ ...listFieldInit, pageSize: refValue.current.pageSize })\r\n\t}\r\n\t// ACTION SEARCH\r\n\tconst onSearch = (valueSearch, dataIndex) => {\r\n\t\tsetActiveColumnSearch(dataIndex)\r\n\t\tif (dataIndex === 'CreatedOn') {\r\n\t\t\tsetFilters({\r\n\t\t\t\t...listFieldInit,\r\n\t\t\t\t...refValue.current,\r\n\t\t\t\tpageIndex: 1,\r\n\t\t\t\t...valueSearch\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tsetFilters({\r\n\t\t\t\t...listFieldInit,\r\n\t\t\t\t...refValue.current,\r\n\t\t\t\tpageIndex: 1,\r\n\t\t\t\t[dataIndex]: valueSearch\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\t// GET DATA IN FIRST TIME\r\n\tconst fetchDataToSearchList = async () => {\r\n\t\tsetIsLoading({ type: 'GET_ALL', status: true })\r\n\t\ttry {\r\n\t\t\tconst [studentList, packageList] = await Promise.all([\r\n\t\t\t\tstudentApi.getAll({ selectAll: true }),\r\n\t\t\t\tpackageApi.getAll({ selectAll: true })\r\n\t\t\t]).then((res) => {\r\n\t\t\t\treturn res.map((r) => (r.status === 200 ? r.data.data : []))\r\n\t\t\t})\r\n\t\t\tif (studentList.length) {\r\n\t\t\t\tconst fmOptionStudentList = fmSelectArr(studentList, 'FullNameUnicode', 'UserInformationID')\r\n\t\t\t\tsetDataToSearchList((prevState) => ({ ...prevState, studentList: fmOptionStudentList }))\r\n\t\t\t}\r\n\t\t\tif (packageList.length) {\r\n\t\t\t\tconst fmOptionPackageList = fmSelectArr(packageList, 'Name', 'ID')\r\n\t\t\t\tsetDataToSearchList((prevState) => ({ ...prevState, packageList: fmOptionPackageList }))\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({ type: 'GET_ALL', status: false })\r\n\t\t}\r\n\t}\r\n\tconst fetchPackagePaymentList = async () => {\r\n\t\tsetIsLoading({ type: 'GET_ALL', status: true })\r\n\t\ttry {\r\n\t\t\tlet res = await packageStudentApi.getAll(filters)\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tif (res.data.totalRow && res.data.data.length) {\r\n\t\t\t\t\tsetPackagePaymentList(res.data.data)\r\n\t\t\t\t\tsetTotalPage(res.data.totalRow)\r\n\t\t\t\t}\r\n\t\t\t} else if (res.status === 204) {\r\n\t\t\t\tshowNoti('danger', 'Không tìm thấy')\r\n\t\t\t\tsetPackagePaymentList([])\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({ type: 'GET_ALL', status: false })\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchDataToSearchList()\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchPackagePaymentList()\r\n\t}, [filters])\r\n\r\n\t// UPDATE\r\n\tconst onUpdatePackagePayment = (idx: number) => {\r\n\t\treturn async (packagePaymentItem: IPackageStudent) => {\r\n\t\t\tsetIsLoading({ type: 'ADD_DATA', status: true })\r\n\t\t\ttry {\r\n\t\t\t\tconst { ID, Approval } = packagePaymentItem\r\n\t\t\t\tconst newPackagePaymentUpdateApi: {\r\n\t\t\t\t\tID: number\r\n\t\t\t\t\tApproval: number\r\n\t\t\t\t\tEnable: boolean\r\n\t\t\t\t} = {\r\n\t\t\t\t\tID,\r\n\t\t\t\t\tApproval,\r\n\t\t\t\t\tEnable: true\r\n\t\t\t\t}\r\n\t\t\t\tconst newPackagePaymentUpdate: IPackageStudent = {\r\n\t\t\t\t\t...packagePaymentItem,\r\n\t\t\t\t\tApproval,\r\n\t\t\t\t\tApprovalName: approvalOptionList.find((a) => a.value === Approval).title\r\n\t\t\t\t}\r\n\t\t\t\tconst res = await packageStudentApi.update(newPackagePaymentUpdateApi)\r\n\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\tconst newPackagePaymentList = [...packagePaymentList]\r\n\t\t\t\t\tnewPackagePaymentList.splice(idx, 1, newPackagePaymentUpdate)\r\n\t\t\t\t\tsetPackagePaymentList(newPackagePaymentList)\r\n\t\t\t\t\tshowNoti('success', res.data.message)\r\n\t\t\t\t}\r\n\t\t\t\treturn res\r\n\t\t\t} catch (error) {\r\n\t\t\t\tshowNoti('danger', error.message)\r\n\t\t\t} finally {\r\n\t\t\t\tsetIsLoading({ type: 'ADD_DATA', status: false })\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Học viên',\r\n\t\t\tdataIndex: 'StudentName',\r\n\t\t\t...FilterColumn('StudentID', onSearch, onResetSearch, 'select', dataToSearch.studentList),\r\n\t\t\tclassName: activeColumnSearch === 'StudentID' ? 'active-column-search' : ''\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Tên bộ đề',\r\n\t\t\tdataIndex: 'SetPackageName',\r\n\t\t\t...FilterColumn('SetPackageID', onSearch, onResetSearch, 'select', dataToSearch.packageList),\r\n\t\t\tclassName: activeColumnSearch === 'SetPackageID' ? 'active-column-search' : ''\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Loại',\r\n\t\t\tdataIndex: 'TypeName'\r\n\t\t},\r\n\r\n\t\t{\r\n\t\t\ttitle: 'Giá',\r\n\t\t\tdataIndex: 'Price',\r\n\t\t\trender: (price) => (price ? numberWithCommas(price) : 0)\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Ngày mua',\r\n\t\t\tdataIndex: 'CreatedOn',\r\n\t\t\t...FilterColumn('CreatedOn', onSearch, onResetSearch, 'date-range'),\r\n\t\t\trender: (date) => moment(date).format('DD/MM/YYYY'),\r\n\t\t\tclassName: activeColumnSearch === 'CreatedOn' ? 'active-column-search' : ''\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Phương thức',\r\n\t\t\tdataIndex: 'PaymentMethodsName'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Trạng thái',\r\n\t\t\tdataIndex: 'ApprovalName',\r\n\t\t\trender: (status) => (status ? status : 'Trống')\r\n\t\t},\r\n\t\t{\r\n\t\t\talign: 'right',\r\n\t\t\trender: (packageItem: IPackageStudent, record, idx) => (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{packageItem.Approval !== 3 && (\r\n\t\t\t\t\t\t<PackagePaymentForm\r\n\t\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t\t\tapprovalOptionList={approvalOptionList}\r\n\t\t\t\t\t\t\tupdateObj={packageItem}\r\n\t\t\t\t\t\t\thandleUpdatePackagePayment={onUpdatePackagePayment(idx)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</>\r\n\t\t\t)\r\n\t\t}\r\n\t]\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<PowerTable\r\n\t\t\t\tcurrentPage={filters.pageIndex}\r\n\t\t\t\ttotalPage={totalPage}\r\n\t\t\t\tgetPagination={getPagination}\r\n\t\t\t\tloading={isLoading}\r\n\t\t\t\tSize=\"package-list-table\"\r\n\t\t\t\taddClass=\"basic-header\"\r\n\t\t\t\tdataSource={packagePaymentList}\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\tTitlePage=\"Danh sách học viên mua bộ đề\"\r\n\t\t\t\tExtra={\r\n\t\t\t\t\t<div className=\"extra-table\">\r\n\t\t\t\t\t\t<SortBox dataOption={sortOptionList} handleSort={onSort} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default PackagePayment\r\n"]},"metadata":{},"sourceType":"module"}