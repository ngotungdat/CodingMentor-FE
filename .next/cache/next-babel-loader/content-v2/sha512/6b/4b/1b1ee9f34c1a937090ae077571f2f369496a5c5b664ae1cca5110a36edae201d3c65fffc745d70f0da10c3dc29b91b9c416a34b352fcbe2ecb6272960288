{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\NewsFeed\\\\SideBarNewsFeed.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Card, Drawer, Input, Select } from 'antd';\nimport Link from 'next/link';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { MoreHorizontal } from 'react-feather';\nimport { packageApi, packageStudentApi } from '~/apiBase';\nimport { VideoCourseStoreApi } from '~/apiBase/video-course-store';\nimport { useWrap } from '~/context/wrap';\nimport { optionCommonPropTypes } from '~/utils/proptypes';\nimport TopPackageNewsFeed from './TopPackageNewsFeed';\nconst {\n  Search\n} = Input;\nconst {\n  Option\n} = Select;\nSideBarNewsFeed.propTypes = {\n  optionList: PropTypes.shape({\n    teamOptionList: optionCommonPropTypes,\n    groupOptionList: optionCommonPropTypes\n  }),\n  filtersData: PropTypes.shape({\n    name: PropTypes.string,\n    idTeam: PropTypes.number,\n    idGroup: PropTypes.number\n  }),\n  handleBack: PropTypes.func,\n  handleFilters: PropTypes.func,\n  groupFormComponent: PropTypes.element\n};\nSideBarNewsFeed.defaultProps = {\n  optionList: {\n    teamOptionList: [],\n    groupOptionList: []\n  },\n  filtersData: {\n    name: '',\n    idTeam: 0,\n    idGroup: 0\n  },\n  handleBack: null,\n  handleFilters: null,\n  groupFormComponent: null\n};\nconst listTodoApi = {\n  pageSize: 30,\n  pageIndex: 1,\n  search: null,\n  categoryId: null,\n  levelId: null,\n  fromDate: null,\n  toDate: null\n};\n\nfunction SideBarNewsFeed(props) {\n  const {\n    optionList,\n    filtersData,\n    handleBack,\n    handleFilters,\n    groupFormComponent\n  } = props;\n  const {\n    name,\n    idTeam,\n    idGroup\n  } = filtersData;\n  const {\n    teamOptionList,\n    groupOptionList\n  } = optionList;\n  const {\n    0: visible,\n    1: setVisible\n  } = useState(false);\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState({\n    type: '',\n    status: true\n  });\n  const {\n    showNoti,\n    userInformation\n  } = useWrap();\n  const {\n    0: topPackageList,\n    1: setTopPackageList\n  } = useState([]);\n  const {\n    0: courses,\n    1: setCourse\n  } = useState([]);\n\n  const showSideBar = () => {\n    setVisible(true);\n  };\n\n  const closeSideBar = () => {\n    setVisible(false);\n  };\n\n  const getVideoCourse = async () => {\n    // ADMIN & HOC VIEN\n    setIsLoading({\n      type: 'GET_ALL',\n      status: true\n    });\n\n    try {\n      if ((userInformation === null || userInformation === void 0 ? void 0 : userInformation.RoleID) == 1 || (userInformation === null || userInformation === void 0 ? void 0 : userInformation.RoleID) == 2) {\n        // ADMIN\n        const res = await VideoCourseStoreApi.getAll(listTodoApi);\n        res.status == 200 && setCourse(res.data.data);\n        setIsLoading({\n          type: 'GET_ALL',\n          status: false\n        });\n      } else {\n        // HOC VIEN\n        const res = await VideoCourseStoreApi.getAllForStudent(_objectSpread({}, listTodoApi));\n        res.status == 200 && setCourse(res.data.data);\n        setIsLoading({\n          type: 'GET_ALL',\n          status: false\n        });\n      }\n    } catch (err) {} finally {\n      setIsLoading({\n        type: 'GET_ALL',\n        status: false\n      });\n    }\n  }; // PACKAGE\n\n\n  const fetchTopPackageList = async () => {\n    try {\n      if ((userInformation === null || userInformation === void 0 ? void 0 : userInformation.RoleID) !== 3) return;\n      const res = await packageApi.getAll({\n        Type: 2\n      });\n\n      if (res.status === 200) {\n        setTopPackageList(res.data.data);\n      }\n    } catch (error) {\n      console.log('fetchTopPackageList', error.message);\n    }\n  };\n\n  useEffect(() => {\n    !!userInformation && getVideoCourse();\n  }, [userInformation]);\n\n  const onBuyPackage = async data => {\n    setIsLoading({\n      type: 'ADD_DATA',\n      status: true\n    });\n\n    try {\n      const {\n        ID,\n        Price,\n        PaymentMethodsID,\n        Note\n      } = data;\n      const newPackageStudent = {\n        StudentID: userInformation.UserInformationID,\n        SetPackageID: ID,\n        Paid: parseInt(Price.toString().replace(/\\D/g, '')),\n        PaymentMethodsID,\n        Note\n      };\n      const res = await packageStudentApi.add(newPackageStudent);\n\n      if (res.status === 200) {\n        showNoti('success', res.data.message);\n        fetchTopPackageList();\n      }\n\n      return res;\n    } catch (error) {\n      showNoti('danger', error.message);\n    } finally {\n      setIsLoading({\n        type: 'ADD_DATA',\n        status: false\n      });\n    }\n  };\n\n  const SideBar = () => /*#__PURE__*/_jsxDEV(Card, {\n    className: \"card-newsfeed\",\n    bordered: false,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-newsfeed-wrap__label\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"card-newsfeed__label font-weight-black mb-1 font-bold\",\n        children: \"Kh\\xF3a h\\u1ECDc video\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        href: \"/video-course\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"font-weight-black\",\n          style: {\n            width: 100,\n            textAlign: 'right'\n          },\n          children: \"Xem th\\xEAm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      className: \"\",\n      bordered: false,\n      children: /*#__PURE__*/_jsxDEV(TopPackageNewsFeed, {\n        isLoading: isLoading.status,\n        topPackageList: courses,\n        handleBuyPackage: onBuyPackage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 3\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sidebar-desktop\",\n      children: SideBar()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sidebar-mobile\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          cursor: 'pointer'\n        },\n        className: \"label-nf font-weight-black\",\n        onClick: () => handleBack && handleBack(),\n        children: \"NewsFeed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-light\",\n        onClick: showSideBar,\n        children: /*#__PURE__*/_jsxDEV(MoreHorizontal, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Drawer, {\n        placement: \"right\",\n        closable: false,\n        onClose: closeSideBar,\n        visible: visible,\n        className: \"drawer-newsfeed\",\n        children: SideBar()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n}\n\nexport default SideBarNewsFeed;","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/NewsFeed/SideBarNewsFeed.tsx"],"names":["Card","Drawer","Input","Select","Link","PropTypes","React","useEffect","useState","MoreHorizontal","packageApi","packageStudentApi","VideoCourseStoreApi","useWrap","optionCommonPropTypes","TopPackageNewsFeed","Search","Option","SideBarNewsFeed","propTypes","optionList","shape","teamOptionList","groupOptionList","filtersData","name","string","idTeam","number","idGroup","handleBack","func","handleFilters","groupFormComponent","element","defaultProps","listTodoApi","pageSize","pageIndex","search","categoryId","levelId","fromDate","toDate","props","visible","setVisible","isLoading","setIsLoading","type","status","showNoti","userInformation","topPackageList","setTopPackageList","courses","setCourse","showSideBar","closeSideBar","getVideoCourse","RoleID","res","getAll","data","getAllForStudent","err","fetchTopPackageList","Type","error","console","log","message","onBuyPackage","ID","Price","PaymentMethodsID","Note","newPackageStudent","StudentID","UserInformationID","SetPackageID","Paid","parseInt","toString","replace","add","SideBar","width","textAlign","cursor"],"mappings":"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","sourcesContent":["import { Card, Drawer, Input, Select } from 'antd'\r\nimport Link from 'next/link'\r\nimport PropTypes from 'prop-types'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { MoreHorizontal } from 'react-feather'\r\nimport { packageApi, packageStudentApi } from '~/apiBase'\r\nimport { VideoCourseStoreApi } from '~/apiBase/video-course-store'\r\nimport { useWrap } from '~/context/wrap'\r\nimport { optionCommonPropTypes } from '~/utils/proptypes'\r\nimport TopPackageNewsFeed from './TopPackageNewsFeed'\r\nconst { Search } = Input\r\nconst { Option } = Select\r\n\r\nSideBarNewsFeed.propTypes = {\r\n\toptionList: PropTypes.shape({\r\n\t\tteamOptionList: optionCommonPropTypes,\r\n\t\tgroupOptionList: optionCommonPropTypes\r\n\t}),\r\n\tfiltersData: PropTypes.shape({\r\n\t\tname: PropTypes.string,\r\n\t\tidTeam: PropTypes.number,\r\n\t\tidGroup: PropTypes.number\r\n\t}),\r\n\thandleBack: PropTypes.func,\r\n\thandleFilters: PropTypes.func,\r\n\tgroupFormComponent: PropTypes.element\r\n}\r\nSideBarNewsFeed.defaultProps = {\r\n\toptionList: {\r\n\t\tteamOptionList: [],\r\n\t\tgroupOptionList: []\r\n\t},\r\n\tfiltersData: {\r\n\t\tname: '',\r\n\t\tidTeam: 0,\r\n\t\tidGroup: 0\r\n\t},\r\n\thandleBack: null,\r\n\thandleFilters: null,\r\n\tgroupFormComponent: null\r\n}\r\n\r\nconst listTodoApi = {\r\n\tpageSize: 30,\r\n\tpageIndex: 1,\r\n\tsearch: null,\r\n\tcategoryId: null,\r\n\tlevelId: null,\r\n\tfromDate: null,\r\n\ttoDate: null\r\n}\r\n\r\nfunction SideBarNewsFeed(props) {\r\n\tconst { optionList, filtersData, handleBack, handleFilters, groupFormComponent } = props\r\n\tconst { name, idTeam, idGroup } = filtersData\r\n\tconst { teamOptionList, groupOptionList } = optionList\r\n\tconst [visible, setVisible] = useState(false)\r\n\tconst [isLoading, setIsLoading] = useState({ type: '', status: true })\r\n\tconst { showNoti, userInformation } = useWrap()\r\n\tconst [topPackageList, setTopPackageList] = useState<IPackage[]>([])\r\n\tconst [courses, setCourse] = useState<any>([])\r\n\r\n\tconst showSideBar = () => {\r\n\t\tsetVisible(true)\r\n\t}\r\n\r\n\tconst closeSideBar = () => {\r\n\t\tsetVisible(false)\r\n\t}\r\n\r\n\tconst getVideoCourse = async () => {\r\n\t\t// ADMIN & HOC VIEN\r\n\t\tsetIsLoading({ type: 'GET_ALL', status: true })\r\n\t\ttry {\r\n\t\t\tif (userInformation?.RoleID == 1 || userInformation?.RoleID == 2) {\r\n\t\t\t\t// ADMIN\r\n\t\t\t\tconst res = await VideoCourseStoreApi.getAll(listTodoApi)\r\n\t\t\t\tres.status == 200 && setCourse(res.data.data)\r\n\t\t\t\tsetIsLoading({ type: 'GET_ALL', status: false })\r\n\t\t\t} else {\r\n\t\t\t\t// HOC VIEN\r\n\t\t\t\tconst res = await VideoCourseStoreApi.getAllForStudent({ ...listTodoApi })\r\n\t\t\t\tres.status == 200 && setCourse(res.data.data)\r\n\t\t\t\tsetIsLoading({ type: 'GET_ALL', status: false })\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({ type: 'GET_ALL', status: false })\r\n\t\t}\r\n\t}\r\n\r\n\t// PACKAGE\r\n\tconst fetchTopPackageList = async () => {\r\n\t\ttry {\r\n\t\t\tif (userInformation?.RoleID !== 3) return\r\n\t\t\tconst res = await packageApi.getAll({ Type: 2 })\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tsetTopPackageList(res.data.data)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('fetchTopPackageList', error.message)\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\t!!userInformation && getVideoCourse()\r\n\t}, [userInformation])\r\n\r\n\tconst onBuyPackage = async (data: { ID: number; Price: string; PaymentMethodsID: number; Note: string }) => {\r\n\t\tsetIsLoading({ type: 'ADD_DATA', status: true })\r\n\t\ttry {\r\n\t\t\tconst { ID, Price, PaymentMethodsID, Note } = data\r\n\t\t\tconst newPackageStudent = {\r\n\t\t\t\tStudentID: userInformation.UserInformationID,\r\n\t\t\t\tSetPackageID: ID,\r\n\t\t\t\tPaid: parseInt(Price.toString().replace(/\\D/g, '')),\r\n\t\t\t\tPaymentMethodsID,\r\n\t\t\t\tNote\r\n\t\t\t}\r\n\t\t\tconst res = await packageStudentApi.add(newPackageStudent)\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tshowNoti('success', res.data.message)\r\n\t\t\t\tfetchTopPackageList()\r\n\t\t\t}\r\n\t\t\treturn res\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'ADD_DATA',\r\n\t\t\t\tstatus: false\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst SideBar = () => (\r\n\t\t<Card className=\"card-newsfeed\" bordered={false}>\r\n\t\t\t<div className=\"card-newsfeed-wrap__label\">\r\n\t\t\t\t<p className=\"card-newsfeed__label font-weight-black mb-1 font-bold\">Khóa học video</p>\r\n\t\t\t\t<Link href=\"/video-course\">\r\n\t\t\t\t\t<a className=\"font-weight-black\" style={{ width: 100, textAlign: 'right' }}>\r\n\t\t\t\t\t\tXem thêm\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t\t<Card className=\"\" bordered={false}>\r\n\t\t\t\t<TopPackageNewsFeed isLoading={isLoading.status} topPackageList={courses} handleBuyPackage={onBuyPackage} />\r\n\t\t\t</Card>\r\n\t\t</Card>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"sidebar-desktop\">{SideBar()}</div>\r\n\t\t\t<div className=\"sidebar-mobile\">\r\n\t\t\t\t<p style={{ cursor: 'pointer' }} className=\"label-nf font-weight-black\" onClick={() => handleBack && handleBack()}>\r\n\t\t\t\t\tNewsFeed\r\n\t\t\t\t</p>\r\n\t\t\t\t<button className=\"btn btn-light\" onClick={showSideBar}>\r\n\t\t\t\t\t<MoreHorizontal />\r\n\t\t\t\t</button>\r\n\t\t\t\t<Drawer placement=\"right\" closable={false} onClose={closeSideBar} visible={visible} className=\"drawer-newsfeed\">\r\n\t\t\t\t\t{SideBar()}\r\n\t\t\t\t</Drawer>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default SideBarNewsFeed\r\n"]},"metadata":{},"sourceType":"module"}