{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\pages\\\\video-learning\\\\index.tsx\",\n    _s = $RefreshSig$(),\n    _this = this,\n    _s3 = $RefreshSig$();\n\nimport { Drawer, Spin } from 'antd';\nimport { useRouter } from 'next/router';\nimport React, { useEffect, useRef, useState } from 'react';\nimport 'react-circular-progressbar/dist/styles.css';\nimport { VideoCourseDetailApi } from '~/apiBase/video-course-details';\nimport { VideoCourseInteraction, VideoCourseOfStudent, VideoCourses } from '~/apiBase/video-learning';\nimport { VideoNoteApi } from '~/apiBase/video-learning/video-note';\nimport HeaderVideo from '~/components/VideoLearning/header';\nimport VideoList from '~/components/VideoLearning/list-video';\nimport VideoTabs from '~/components/VideoLearning/tabs';\nimport { useWrap } from '~/context/wrap';\nimport { usePageVisibility } from '~/utils/functions';\nvar initDetails = {\n  VideoCourseName: '',\n  Slogan: '',\n  Requirements: '',\n  Description: '',\n  ResultsAchieved: '',\n  CourseForObject: '',\n  TotalRating: 0,\n  RatingNumber: 0,\n  TotalStudent: 0,\n  CreatedBy: ''\n};\n\nvar useUnload = function useUnload(fn) {\n  _s();\n\n  var cb = useRef(fn);\n  useEffect(function () {\n    cb.current = fn;\n  }, [fn]);\n  useEffect(function () {\n    var onUnload = function onUnload() {\n      var _cb$current;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return (_cb$current = cb.current) === null || _cb$current === void 0 ? void 0 : _cb$current.call.apply(_cb$current, [cb].concat(args));\n    };\n\n    window.addEventListener('beforeunload', onUnload);\n    return function () {\n      return window.removeEventListener('beforeunload', onUnload);\n    };\n  }, []);\n};\n\n_s(useUnload, \"1QkGLhN67LEP1/FcABelHHfYlL0=\");\n\nvar useBeforeUnload = function useBeforeUnload(fn) {\n  window.onbeforeunload = function () {\n    fn();\n    return 'Bạn thật sự muốn đóng video đang xem?';\n  };\n};\n\nvar VideoLearning = function VideoLearning() {\n  _s3();\n\n  var _s2 = $RefreshSig$();\n\n  var router = useRouter();\n  var ref = useRef(null);\n\n  var _useWrap = useWrap(),\n      titlePage = _useWrap.titlePage,\n      userInformation = _useWrap.userInformation;\n\n  var videoStudy = useRef(null);\n  var boxVideo = useRef(null);\n\n  var _useState = useState(null),\n      currentVideo = _useState[0],\n      setCurrentVideo = _useState[1];\n\n  var _useState2 = useState([]),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useState3 = useState(''),\n      render = _useState3[0],\n      setRender = _useState3[1];\n\n  var _useState4 = useState([]),\n      videos = _useState4[0],\n      setVideos = _useState4[1];\n\n  var _useState5 = useState([]),\n      dataQA = _useState5[0],\n      setDataQA = _useState5[1];\n\n  var _useState6 = useState([]),\n      dataNotification = _useState6[0],\n      setDataNotification = _useState6[1];\n\n  var _useState7 = useState({\n    ID: '',\n    Title: '',\n    Description: '',\n    Type: 0,\n    SectionID: '',\n    Second: 0\n  }),\n      currentLession = _useState7[0],\n      setCurrentLession = _useState7[1];\n\n  useEffect(function () {\n    if (router.query.course !== undefined) {\n      getVideos();\n      getCourseDetails(router.query.course);\n    }\n  }, []); // RELOAD TAB\n\n  useUnload(function (e) {\n    updateTime();\n    e.preventDefault();\n    e.returnValue = '';\n  }); // CLOSE WINDOW OR TAB\n\n  if (true) {\n    useBeforeUnload(function () {\n      return updateTime();\n    });\n  } // HANDLE VISIT PAGE\n\n\n  var handleVisibilityChange = function handleVisibilityChange(visible) {\n    if (videoStudy.current !== null) {\n      if (videoStudy.current.currentTime !== 0) {\n        updateTime();\n      }\n    }\n  };\n\n  var _useState8 = useState(initDetails),\n      details = _useState8[0],\n      setDetails = _useState8[1]; // CALL API DETAILS\n\n\n  var getCourseDetails = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(param) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return VideoCourseDetailApi.getDetails(param);\n\n            case 3:\n              res = _context.sent;\n              res.status == 200 && setDetails(res.data.data);\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function getCourseDetails(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  usePageVisibility(handleVisibilityChange);\n\n  var updateTime = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var temp, res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(videoStudy.current !== null)) {\n                _context2.next = 11;\n                break;\n              }\n\n              if (!(videoStudy.current.currentTime !== 0 && currentLession.ID !== '')) {\n                _context2.next = 11;\n                break;\n              }\n\n              temp = {\n                VideoCourseOfStudentID: router.query.ID,\n                SectionID: currentLession.SectionID,\n                LessonID: currentLession.ID,\n                IsSeen: videoStudy.current.duration / 2 < videoStudy.current.currentTime ? 'True' : 'False',\n                // True - False: đánh dấu đã xem video\n                TimeWatched: videoStudy.current.currentTime // (giây) Thời gian đã xem video\n\n              };\n              _context2.prev = 3;\n              _context2.next = 6;\n              return VideoCourseOfStudent.UpdateSeenAndTimeWatchedVideo(temp);\n\n            case 6:\n              res = _context2.sent;\n              _context2.next = 11;\n              break;\n\n            case 9:\n              _context2.prev = 9;\n              _context2.t0 = _context2[\"catch\"](3);\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[3, 9]]);\n    }));\n\n    return function updateTime() {\n      return _ref2.apply(this, arguments);\n    };\n  }(); //GET DATA\n\n\n  var getVideos = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return VideoCourses.ListSection(router.query.course);\n\n            case 3:\n              res = _context3.sent;\n              res.status == 200 && setVideos(res.data.data);\n              _context3.next = 9;\n              break;\n\n            case 7:\n              _context3.prev = 7;\n              _context3.t0 = _context3[\"catch\"](0);\n\n            case 9:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 7]]);\n    }));\n\n    return function getVideos() {\n      return _ref3.apply(this, arguments);\n    };\n  }(); //GET DATA\n\n\n  var getListQA = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(LessonDetailID) {\n      var temp, res;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              temp = {\n                pageIndex: 1,\n                pageSize: 10,\n                VideoCourseID: router.query.course,\n                LessonDetailID: LessonDetailID,\n                Title: '',\n                sort: 0\n              };\n              _context4.prev = 1;\n              _context4.next = 4;\n              return VideoCourseInteraction.ListQA(temp);\n\n            case 4:\n              res = _context4.sent;\n              res.status == 200 && res.data.data !== undefined ? setDataQA(res.data.data) : setDataQA([]);\n              _context4.next = 10;\n              break;\n\n            case 8:\n              _context4.prev = 8;\n              _context4.t0 = _context4[\"catch\"](1);\n\n            case 10:\n              getListNotification(router.query.course);\n\n            case 11:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[1, 8]]);\n    }));\n\n    return function getListQA(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }(); //GET DATA\n\n\n  var getListNote = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(LessonDetailID) {\n      var temp, res;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              temp = {\n                pageIndex: 1,\n                pageSize: 10,\n                VideoCourseID: router.query.course,\n                LessonDetailID: LessonDetailID,\n                searchCreateby: userInformation === null || userInformation === void 0 ? void 0 : userInformation.UserAccountID,\n                sort: 0\n              };\n              _context5.prev = 1;\n              _context5.next = 4;\n              return VideoCourseInteraction.ListNote(temp);\n\n            case 4:\n              res = _context5.sent;\n              res.status == 200 && res.data.data !== undefined ? setData(res.data.data) : setData([]);\n              setRender(res + '');\n              _context5.next = 11;\n              break;\n\n            case 9:\n              _context5.prev = 9;\n              _context5.t0 = _context5[\"catch\"](1);\n\n            case 11:\n              getListQA(LessonDetailID);\n\n            case 12:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, null, [[1, 9]]);\n    }));\n\n    return function getListNote(_x3) {\n      return _ref5.apply(this, arguments);\n    };\n  }(); //GET DATA NOTIFICATION\n\n\n  var getListNotification = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(videocourseID) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.prev = 0;\n              _context6.next = 3;\n              return VideoCourseInteraction.ListListAnnouncement(videocourseID);\n\n            case 3:\n              res = _context6.sent;\n              res.status == 200 && res.data.data !== undefined ? setDataNotification(res.data.data) : setDataNotification([]);\n              res.status == 204 && setDataNotification([]);\n              setRender(res + '');\n              _context6.next = 11;\n              break;\n\n            case 9:\n              _context6.prev = 9;\n              _context6.t0 = _context6[\"catch\"](0);\n\n            case 11:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6, null, [[0, 9]]);\n    }));\n\n    return function getListNotification(_x4) {\n      return _ref6.apply(this, arguments);\n    };\n  }(); // CALL API CREATE NEW QUESTION\n\n\n  var addNewQuestion = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(comment, title) {\n      var temp;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.prev = 0;\n              temp = {\n                VideoCourseID: router.query.course,\n                LessonDetailID: currentLession.ID,\n                Title: title,\n                TextContent: comment,\n                Type: 1\n              };\n              _context7.next = 4;\n              return VideoCourseInteraction.add(temp);\n\n            case 4:\n              getListQA(currentLession.ID);\n              _context7.next = 9;\n              break;\n\n            case 7:\n              _context7.prev = 7;\n              _context7.t0 = _context7[\"catch\"](0);\n\n            case 9:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7, null, [[0, 7]]);\n    }));\n\n    return function addNewQuestion(_x5, _x6) {\n      return _ref7.apply(this, arguments);\n    };\n  }(); // CALL API CREATE NEW QUESTION\n\n\n  var addNewNotification = /*#__PURE__*/function () {\n    var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(param) {\n      var curTime, temp;\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              _context8.prev = 0;\n              curTime = videoStudy.current.currentTime;\n              temp = {\n                VideoCourseID: router.query.course,\n                LessonDetailID: currentLession.ID,\n                Title: param.title,\n                TextContent: param.newContent,\n                TimeNote: curTime,\n                Type: 3\n              };\n              _context8.next = 5;\n              return VideoCourseInteraction.add(temp);\n\n            case 5:\n              getListNotification(router.query.ID);\n              _context8.next = 10;\n              break;\n\n            case 8:\n              _context8.prev = 8;\n              _context8.t0 = _context8[\"catch\"](0);\n\n            case 10:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8, null, [[0, 8]]);\n    }));\n\n    return function addNewNotification(_x7) {\n      return _ref8.apply(this, arguments);\n    };\n  }(); // DRAWER VIDEO LIST STATE\n\n\n  var _useState9 = useState(false),\n      visible = _useState9[0],\n      setVisible = _useState9[1]; // OPEN DRAWER VIDEO LIST\n\n\n  var showDrawer = function showDrawer() {\n    setVisible(!visible);\n  }; // CLOSE DRAWER VIDEO LIST\n\n\n  var onClose = function onClose() {\n    setVisible(false);\n  };\n\n  var formatTime = function formatTime(seconds) {\n    var minutes = Math.floor(seconds / 60);\n    minutes = minutes >= 10 ? minutes : '0' + minutes;\n    seconds = Math.floor(seconds % 60);\n    seconds = seconds >= 10 ? seconds : '0' + seconds;\n    return minutes + ':' + seconds;\n  }; // DELETE NOTE\n\n\n  var removeItem = /*#__PURE__*/function () {\n    var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(id) {\n      var temp;\n      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              temp = {\n                ID: id\n              };\n              _context9.prev = 1;\n              _context9.next = 4;\n              return VideoNoteApi[\"delete\"](temp);\n\n            case 4:\n              _context9.next = 8;\n              break;\n\n            case 6:\n              _context9.prev = 6;\n              _context9.t0 = _context9[\"catch\"](1);\n\n            case 8:\n              getListNote(currentLession.ID);\n\n            case 9:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9, null, [[1, 6]]);\n    }));\n\n    return function removeItem(_x8) {\n      return _ref9.apply(this, arguments);\n    };\n  }(); // POST DATA EDIT NOTE\n\n\n  var handleFixed = /*#__PURE__*/function () {\n    var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(id, title, note) {\n      var temp;\n      return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              temp = {\n                ID: id,\n                Title: title,\n                TextContent: note\n              };\n              _context10.prev = 1;\n              _context10.next = 4;\n              return VideoNoteApi.update(temp);\n\n            case 4:\n              _context10.next = 8;\n              break;\n\n            case 6:\n              _context10.prev = 6;\n              _context10.t0 = _context10[\"catch\"](1);\n\n            case 8:\n              getListNote(currentLession.ID);\n\n            case 9:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee10, null, [[1, 6]]);\n    }));\n\n    return function handleFixed(_x9, _x10, _x11) {\n      return _ref10.apply(this, arguments);\n    };\n  }(); // HANDLE EDIT QUESTION\n\n\n  var handleEditQuestion = /*#__PURE__*/function () {\n    var _ref11 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11(param) {\n      return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n        while (1) {\n          switch (_context11.prev = _context11.next) {\n            case 0:\n              _context11.prev = 0;\n              _context11.next = 3;\n              return VideoNoteApi.update(param);\n\n            case 3:\n              _context11.next = 7;\n              break;\n\n            case 5:\n              _context11.prev = 5;\n              _context11.t0 = _context11[\"catch\"](0);\n\n            case 7:\n              getListNote(currentLession.ID);\n\n            case 8:\n            case \"end\":\n              return _context11.stop();\n          }\n        }\n      }, _callee11, null, [[0, 5]]);\n    }));\n\n    return function handleEditQuestion(_x12) {\n      return _ref11.apply(this, arguments);\n    };\n  }(); // --- Calculator position of line note  inside video ---\n\n\n  var calPosition = function calPosition(curTime) {\n    var widthVideo = boxVideo.current.offsetWidth;\n    var lengthTimeVideo = Math.round(videoStudy.current.duration);\n    var position = curTime * 100 / lengthTimeVideo; // position = (position * widthVideo) / 100 + 16;\n\n    return position;\n  }; // CREATE NEW NOTE\n\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref12 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12(param) {\n      var curTime, temp;\n      return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n        while (1) {\n          switch (_context12.prev = _context12.next) {\n            case 0:\n              _context12.prev = 0;\n              curTime = videoStudy.current.currentTime;\n              temp = {\n                VideoCourseID: router.query.course,\n                LessonDetailID: currentLession.ID,\n                Title: param.title,\n                TextContent: param.newContent,\n                TimeNote: curTime || 0,\n                Type: 2\n              };\n              _context12.next = 5;\n              return VideoCourseInteraction.add(temp);\n\n            case 5:\n              getListNote(currentLession.ID);\n              _context12.next = 10;\n              break;\n\n            case 8:\n              _context12.prev = 8;\n              _context12.t0 = _context12[\"catch\"](0);\n\n            case 10:\n            case \"end\":\n              return _context12.stop();\n          }\n        }\n      }, _callee12, null, [[0, 8]]);\n    }));\n\n    return function handleSubmit(_x13) {\n      return _ref12.apply(this, arguments);\n    };\n  }(); // -- PAUSE VIDEO\n\n\n  function handlePause() {// videoStudy.current.contentWindow.postMessage('{\"event\":\"command\",\"func\":\"' + 'pauseVideo' + '\",\"args\":\"\"}', '*')\n    // console.log(videoStudy.current.contentWindow.document)\n    // console.log(videoStudy.current.contentWindow.window)\n  }\n\n  var fake = 'http://www.youtube.com/embed/NlOF03DUoWc';\n\n  function Iframe(props) {\n    _s2();\n\n    var _useState10 = useState(0),\n        hei = _useState10[0],\n        setHei = _useState10[1];\n\n    useEffect(function () {\n      if (videoStudy.current.clientWidth > 0) {\n        setHei(videoStudy.current.clientWidth / 1.75);\n      }\n    }, [videoStudy.current && videoStudy.current.clientWidth]);\n    return (\n      /*#__PURE__*/\n      // <div\n      // \tclassName=\"iframe-video\"\n      // \tref={ref}\n      // \tstyle={{ width: '100%', height: hei || 'auto' }}\n      // \tid=\"PStyle\"\n      // \tdangerouslySetInnerHTML={{ __html: props.iframe ? props.iframe : '' }}\n      // />\n      _jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"iframe\", {\n          // ref={ref}\n          id: \"video__course__iframe\",\n          ref: videoStudy,\n          width: \"100%\",\n          height: hei,\n          src: props === null || props === void 0 ? void 0 : props.iframe,\n          frameBorder: \"0\",\n          allow: \"autoplay; clipboard-write; picture-in-picture\",\n          allowFullScreen: true,\n          title: \"Embedded youtube\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 5\n        }, this)\n      }, void 0, false)\n    );\n  } // RENDER\n\n\n  _s2(Iframe, \"vo3D/zA9B7d/47tTadIQmCwW6Fw=\");\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid p-0\",\n    style: {\n      overflow: 'hidden'\n    },\n    children: [/*#__PURE__*/_jsxDEV(HeaderVideo, {\n      params: router.query,\n      onClick: showDrawer\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-9 col-12 p-0\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"wrap-video pl-3\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: ref,\n            className: \"wrap-video__video\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"box-video\",\n              ref: boxVideo,\n              children: [currentVideo === null ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"html-iframe d-flex justify-content-center align-items-between\",\n                  children: /*#__PURE__*/_jsxDEV(Spin, {\n                    tip: \"Loading...\",\n                    style: {\n                      height: 100,\n                      marginTop: '25%'\n                    },\n                    size: \"large\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 352,\n                    columnNumber: 12\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 351,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false) :\n              /*#__PURE__*/\n              // <iframe id=\"movie_player\" ref={videoStudy} className=\"html-iframe\" src={fake} title=\"cc\" allowFullScreen />\n              _jsxDEV(Iframe, {\n                iframe: currentVideo,\n                allow: \"autoplay\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 10\n              }, _this), data.length > 0 && currentLession.Type === 0 ? data.map(function (item) {\n                return /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"/#\",\n                  style: {\n                    left: item.TimeNote + '%'\n                  },\n                  className: \"marked\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    \"data-time\": item.TimeNote\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 363,\n                    columnNumber: 13\n                  }, _this)\n                }, item.ID, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 362,\n                  columnNumber: 12\n                }, _this);\n              }) : '']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 8\n            }, _this), /*#__PURE__*/_jsxDEV(VideoTabs, {\n              videoRef: videoStudy,\n              params: currentLession,\n              details: details,\n              dataNote: data,\n              dataQA: dataQA,\n              onCreateNew: function onCreateNew(p) {\n                return handleSubmit(p);\n              },\n              onPress: function onPress(p) {\n                videoStudy.current.currentTime = p.TimeNote;\n              },\n              onDelete: function onDelete(p) {\n                return removeItem(p.ID);\n              },\n              onEdit: function onEdit(p) {\n                return handleFixed(p.item.ID, p.title, p.content);\n              },\n              onPauseVideo: function onPauseVideo() {\n                return handlePause();\n              },\n              addNewQuest: function addNewQuest(p) {\n                return addNewQuestion(p.comment, p.title);\n              },\n              onEditQuest: function onEditQuest(e) {\n                return handleEditQuestion({\n                  ID: e.item.ID,\n                  Title: e.title,\n                  TextContent: e.content,\n                  Type: 1\n                });\n              },\n              onDeleteQuest: function onDeleteQuest(e) {\n                return handleEditQuestion({\n                  ID: e === null || e === void 0 ? void 0 : e.ID,\n                  Enable: false\n                });\n              },\n              dataNotification: dataNotification,\n              createNewNotification: function createNewNotification(e) {\n                return addNewNotification(e);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 8\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 7\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 6\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 5\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-3 col-12 p-0\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"wrap-menu\",\n          children: /*#__PURE__*/_jsxDEV(VideoList, {\n            onPress: function onPress(p) {\n              setCurrentLession(p);\n              getListNote(p.ID);\n              p.Type === 0 ? setCurrentVideo(p.LinkVideo) : setCurrentVideo(p.LinkHtml);\n            },\n            videos: videos\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 7\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 6\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 5\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(Drawer, {\n      title: \"N\\u1ED9i dung kh\\xF3a h\\u1ECDc\",\n      placement: \"right\",\n      onClose: onClose,\n      visible: visible,\n      className: \"video-drawer\",\n      headerStyle: {\n        paddingTop: 24,\n        paddingBottom: 24,\n        background: '#fff'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrap-menu-drawer\",\n        children: /*#__PURE__*/_jsxDEV(VideoList, {\n          onPress: function onPress(p) {\n            setCurrentLession(p);\n            getListNote(p.ID);\n            setCurrentVideo(p.LinkVideo);\n          },\n          videos: videos\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 6\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 5\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 4\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 342,\n    columnNumber: 3\n  }, _this);\n};\n\n_s3(VideoLearning, \"Z1Qi4jJum5k+XEdstueAUa0uBRU=\", false, function () {\n  return [useRouter, useWrap, useUnload, useBeforeUnload, usePageVisibility];\n});\n\n_c = VideoLearning;\nexport default VideoLearning;\n\nvar _c;\n\n$RefreshReg$(_c, \"VideoLearning\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/pages/video-learning/index.tsx"],"names":["Drawer","Spin","useRouter","React","useEffect","useRef","useState","VideoCourseDetailApi","VideoCourseInteraction","VideoCourseOfStudent","VideoCourses","VideoNoteApi","HeaderVideo","VideoList","VideoTabs","useWrap","usePageVisibility","initDetails","VideoCourseName","Slogan","Requirements","Description","ResultsAchieved","CourseForObject","TotalRating","RatingNumber","TotalStudent","CreatedBy","useUnload","fn","cb","current","onUnload","args","window","addEventListener","removeEventListener","useBeforeUnload","onbeforeunload","VideoLearning","router","ref","titlePage","userInformation","videoStudy","boxVideo","currentVideo","setCurrentVideo","data","setData","render","setRender","videos","setVideos","dataQA","setDataQA","dataNotification","setDataNotification","ID","Title","Type","SectionID","Second","currentLession","setCurrentLession","query","course","undefined","getVideos","getCourseDetails","e","updateTime","preventDefault","returnValue","handleVisibilityChange","visible","currentTime","details","setDetails","param","getDetails","res","status","console","log","temp","VideoCourseOfStudentID","LessonID","IsSeen","duration","TimeWatched","UpdateSeenAndTimeWatchedVideo","ListSection","getListQA","LessonDetailID","pageIndex","pageSize","VideoCourseID","sort","ListQA","getListNotification","getListNote","searchCreateby","UserAccountID","ListNote","videocourseID","ListListAnnouncement","addNewQuestion","comment","title","TextContent","add","addNewNotification","curTime","newContent","TimeNote","setVisible","showDrawer","onClose","formatTime","seconds","minutes","Math","floor","removeItem","id","handleFixed","note","update","handleEditQuestion","calPosition","widthVideo","offsetWidth","lengthTimeVideo","round","position","handleSubmit","handlePause","fake","Iframe","props","hei","setHei","clientWidth","iframe","overflow","height","marginTop","length","map","item","left","p","content","Enable","LinkVideo","LinkHtml","paddingTop","paddingBottom","background"],"mappings":"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","sourcesContent":["import { Drawer, Spin } from 'antd'\r\nimport { useRouter } from 'next/router'\r\nimport React, { useEffect, useRef, useState } from 'react'\r\nimport 'react-circular-progressbar/dist/styles.css'\r\nimport { VideoCourseDetailApi } from '~/apiBase/video-course-details'\r\nimport { VideoCourseInteraction, VideoCourseOfStudent, VideoCourses } from '~/apiBase/video-learning'\r\nimport { VideoNoteApi } from '~/apiBase/video-learning/video-note'\r\nimport HeaderVideo from '~/components/VideoLearning/header'\r\nimport VideoList from '~/components/VideoLearning/list-video'\r\nimport VideoTabs from '~/components/VideoLearning/tabs'\r\nimport { useWrap } from '~/context/wrap'\r\nimport { usePageVisibility } from '~/utils/functions'\r\n\r\nconst initDetails = {\r\n\tVideoCourseName: '',\r\n\tSlogan: '',\r\n\tRequirements: '',\r\n\tDescription: '',\r\n\tResultsAchieved: '',\r\n\tCourseForObject: '',\r\n\tTotalRating: 0,\r\n\tRatingNumber: 0,\r\n\tTotalStudent: 0,\r\n\tCreatedBy: ''\r\n}\r\n\r\nconst useUnload = (fn) => {\r\n\tconst cb = useRef(fn)\r\n\r\n\tuseEffect(() => {\r\n\t\tcb.current = fn\r\n\t}, [fn])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst onUnload = (...args) => cb.current?.(...args)\r\n\t\twindow.addEventListener('beforeunload', onUnload)\r\n\t\treturn () => window.removeEventListener('beforeunload', onUnload)\r\n\t}, [])\r\n}\r\n\r\nconst useBeforeUnload = (fn) => {\r\n\twindow.onbeforeunload = function () {\r\n\t\tfn()\r\n\t\treturn 'Bạn thật sự muốn đóng video đang xem?'\r\n\t}\r\n}\r\n\r\nconst VideoLearning = () => {\r\n\tconst router = useRouter()\r\n\tconst ref = useRef<HTMLDivElement>(null)\r\n\tconst { titlePage, userInformation } = useWrap()\r\n\r\n\tconst videoStudy = useRef(null)\r\n\tconst boxVideo = useRef(null)\r\n\tconst [currentVideo, setCurrentVideo] = useState(null)\r\n\tconst [data, setData] = useState([])\r\n\tconst [render, setRender] = useState('')\r\n\tconst [videos, setVideos] = useState([])\r\n\tconst [dataQA, setDataQA] = useState([])\r\n\tconst [dataNotification, setDataNotification] = useState([])\r\n\tconst [currentLession, setCurrentLession] = useState({\r\n\t\tID: '',\r\n\t\tTitle: '',\r\n\t\tDescription: '',\r\n\t\tType: 0,\r\n\t\tSectionID: '',\r\n\t\tSecond: 0\r\n\t})\r\n\r\n\tuseEffect(() => {\r\n\t\tif (router.query.course !== undefined) {\r\n\t\t\tgetVideos()\r\n\t\t\tgetCourseDetails(router.query.course)\r\n\t\t}\r\n\t}, [])\r\n\r\n\t// RELOAD TAB\r\n\tuseUnload((e) => {\r\n\t\tupdateTime()\r\n\t\te.preventDefault()\r\n\t\te.returnValue = ''\r\n\t})\r\n\r\n\t// CLOSE WINDOW OR TAB\r\n\tif (typeof window !== 'undefined') {\r\n\t\tuseBeforeUnload(() => updateTime())\r\n\t}\r\n\r\n\t// HANDLE VISIT PAGE\r\n\tconst handleVisibilityChange = (visible) => {\r\n\t\tif (videoStudy.current !== null) {\r\n\t\t\tif (videoStudy.current.currentTime !== 0) {\r\n\t\t\t\tupdateTime()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst [details, setDetails] = useState(initDetails)\r\n\r\n\t// CALL API DETAILS\r\n\tconst getCourseDetails = async (param) => {\r\n\t\ttry {\r\n\t\t\tconst res = await VideoCourseDetailApi.getDetails(param)\r\n\t\t\tres.status == 200 && setDetails(res.data.data)\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error)\r\n\t\t}\r\n\t}\r\n\r\n\tusePageVisibility(handleVisibilityChange)\r\n\r\n\tconst updateTime = async () => {\r\n\t\tif (videoStudy.current !== null) {\r\n\t\t\tif (videoStudy.current.currentTime !== 0 && currentLession.ID !== '') {\r\n\t\t\t\tlet temp = {\r\n\t\t\t\t\tVideoCourseOfStudentID: router.query.ID,\r\n\t\t\t\t\tSectionID: currentLession.SectionID,\r\n\t\t\t\t\tLessonID: currentLession.ID,\r\n\t\t\t\t\tIsSeen: videoStudy.current.duration / 2 < videoStudy.current.currentTime ? 'True' : 'False', // True - False: đánh dấu đã xem video\r\n\t\t\t\t\tTimeWatched: videoStudy.current.currentTime // (giây) Thời gian đã xem video\r\n\t\t\t\t}\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst res = await VideoCourseOfStudent.UpdateSeenAndTimeWatchedVideo(temp)\r\n\t\t\t\t} catch (error) {}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//GET DATA\r\n\tconst getVideos = async () => {\r\n\t\ttry {\r\n\t\t\tconst res = await VideoCourses.ListSection(router.query.course)\r\n\t\t\tres.status == 200 && setVideos(res.data.data)\r\n\t\t} catch (err) {\r\n\t\t\t// showNoti(\"danger\", err);\r\n\t\t}\r\n\t}\r\n\r\n\t//GET DATA\r\n\tconst getListQA = async (LessonDetailID) => {\r\n\t\tconst temp = {\r\n\t\t\tpageIndex: 1,\r\n\t\t\tpageSize: 10,\r\n\t\t\tVideoCourseID: router.query.course,\r\n\t\t\tLessonDetailID: LessonDetailID,\r\n\t\t\tTitle: '',\r\n\t\t\tsort: 0\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tconst res = await VideoCourseInteraction.ListQA(temp)\r\n\t\t\tres.status == 200 && res.data.data !== undefined ? setDataQA(res.data.data) : setDataQA([])\r\n\t\t} catch (err) {}\r\n\t\tgetListNotification(router.query.course)\r\n\t}\r\n\r\n\t//GET DATA\r\n\tconst getListNote = async (LessonDetailID) => {\r\n\t\tconst temp = {\r\n\t\t\tpageIndex: 1,\r\n\t\t\tpageSize: 10,\r\n\t\t\tVideoCourseID: router.query.course,\r\n\t\t\tLessonDetailID: LessonDetailID,\r\n\t\t\tsearchCreateby: userInformation?.UserAccountID,\r\n\t\t\tsort: 0\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tconst res = await VideoCourseInteraction.ListNote(temp)\r\n\t\t\tres.status == 200 && res.data.data !== undefined ? setData(res.data.data) : setData([])\r\n\t\t\tsetRender(res + '')\r\n\t\t} catch (err) {}\r\n\t\tgetListQA(LessonDetailID)\r\n\t}\r\n\r\n\t//GET DATA NOTIFICATION\r\n\tconst getListNotification = async (videocourseID) => {\r\n\t\ttry {\r\n\t\t\tconst res = await VideoCourseInteraction.ListListAnnouncement(videocourseID)\r\n\t\t\tres.status == 200 && res.data.data !== undefined ? setDataNotification(res.data.data) : setDataNotification([])\r\n\t\t\tres.status == 204 && setDataNotification([])\r\n\t\t\tsetRender(res + '')\r\n\t\t} catch (err) {}\r\n\t}\r\n\r\n\t// CALL API CREATE NEW QUESTION\r\n\tconst addNewQuestion = async (comment, title) => {\r\n\t\ttry {\r\n\t\t\tlet temp = {\r\n\t\t\t\tVideoCourseID: router.query.course,\r\n\t\t\t\tLessonDetailID: currentLession.ID,\r\n\t\t\t\tTitle: title,\r\n\t\t\t\tTextContent: comment,\r\n\t\t\t\tType: 1\r\n\t\t\t}\r\n\t\t\tawait VideoCourseInteraction.add(temp)\r\n\t\t\tgetListQA(currentLession.ID)\r\n\t\t} catch (error) {}\r\n\t}\r\n\r\n\t// CALL API CREATE NEW QUESTION\r\n\tconst addNewNotification = async (param) => {\r\n\t\ttry {\r\n\t\t\tlet curTime = videoStudy.current.currentTime\r\n\t\t\tlet temp = {\r\n\t\t\t\tVideoCourseID: router.query.course,\r\n\t\t\t\tLessonDetailID: currentLession.ID,\r\n\t\t\t\tTitle: param.title,\r\n\t\t\t\tTextContent: param.newContent,\r\n\t\t\t\tTimeNote: curTime,\r\n\t\t\t\tType: 3\r\n\t\t\t}\r\n\t\t\tawait VideoCourseInteraction.add(temp)\r\n\t\t\tgetListNotification(router.query.ID)\r\n\t\t} catch (error) {}\r\n\t}\r\n\r\n\t// DRAWER VIDEO LIST STATE\r\n\tconst [visible, setVisible] = useState(false)\r\n\r\n\t// OPEN DRAWER VIDEO LIST\r\n\tconst showDrawer = () => {\r\n\t\tsetVisible(!visible)\r\n\t}\r\n\r\n\t// CLOSE DRAWER VIDEO LIST\r\n\tconst onClose = () => {\r\n\t\tsetVisible(false)\r\n\t}\r\n\r\n\tconst formatTime = (seconds) => {\r\n\t\tlet minutes: any = Math.floor(seconds / 60)\r\n\t\tminutes = minutes >= 10 ? minutes : '0' + minutes\r\n\t\tseconds = Math.floor(seconds % 60)\r\n\t\tseconds = seconds >= 10 ? seconds : '0' + seconds\r\n\t\treturn minutes + ':' + seconds\r\n\t}\r\n\r\n\t// DELETE NOTE\r\n\tconst removeItem = async (id) => {\r\n\t\tlet temp = {\r\n\t\t\tID: id\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tawait VideoNoteApi.delete(temp)\r\n\t\t} catch (error) {}\r\n\t\tgetListNote(currentLession.ID)\r\n\t}\r\n\r\n\t// POST DATA EDIT NOTE\r\n\tconst handleFixed = async (id, title, note) => {\r\n\t\tlet temp = {\r\n\t\t\tID: id,\r\n\t\t\tTitle: title,\r\n\t\t\tTextContent: note\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tawait VideoNoteApi.update(temp)\r\n\t\t} catch (error) {}\r\n\t\tgetListNote(currentLession.ID)\r\n\t}\r\n\r\n\t// HANDLE EDIT QUESTION\r\n\tconst handleEditQuestion = async (param) => {\r\n\t\ttry {\r\n\t\t\tawait VideoNoteApi.update(param)\r\n\t\t} catch (error) {}\r\n\t\tgetListNote(currentLession.ID)\r\n\t}\r\n\r\n\t// --- Calculator position of line note  inside video ---\r\n\tconst calPosition = (curTime) => {\r\n\t\tlet widthVideo = boxVideo.current.offsetWidth\r\n\t\tlet lengthTimeVideo = Math.round(videoStudy.current.duration)\r\n\r\n\t\tlet position = (curTime * 100) / lengthTimeVideo\r\n\t\t// position = (position * widthVideo) / 100 + 16;\r\n\r\n\t\treturn position\r\n\t}\r\n\r\n\t// CREATE NEW NOTE\r\n\tconst handleSubmit = async (param) => {\r\n\t\ttry {\r\n\t\t\tlet curTime = videoStudy.current.currentTime\r\n\t\t\tlet temp = {\r\n\t\t\t\tVideoCourseID: router.query.course,\r\n\t\t\t\tLessonDetailID: currentLession.ID,\r\n\t\t\t\tTitle: param.title,\r\n\t\t\t\tTextContent: param.newContent,\r\n\t\t\t\tTimeNote: curTime || 0,\r\n\t\t\t\tType: 2\r\n\t\t\t}\r\n\t\t\tawait VideoCourseInteraction.add(temp)\r\n\t\t\tgetListNote(currentLession.ID)\r\n\t\t} catch (error) {}\r\n\t}\r\n\r\n\t// -- PAUSE VIDEO\r\n\tfunction handlePause() {\r\n\t\t// videoStudy.current.contentWindow.postMessage('{\"event\":\"command\",\"func\":\"' + 'pauseVideo' + '\",\"args\":\"\"}', '*')\r\n\t\t// console.log(videoStudy.current.contentWindow.document)\r\n\t\t// console.log(videoStudy.current.contentWindow.window)\r\n\t}\r\n\r\n\tconst fake = 'http://www.youtube.com/embed/NlOF03DUoWc'\r\n\r\n\tfunction Iframe(props) {\r\n\t\tconst [hei, setHei] = useState(0)\r\n\t\tuseEffect(() => {\r\n\t\t\tif (videoStudy.current.clientWidth > 0) {\r\n\t\t\t\tsetHei(videoStudy.current.clientWidth / 1.75)\r\n\t\t\t}\r\n\t\t}, [videoStudy.current && videoStudy.current.clientWidth])\r\n\r\n\t\treturn (\r\n\t\t\t// <div\r\n\t\t\t// \tclassName=\"iframe-video\"\r\n\t\t\t// \tref={ref}\r\n\t\t\t// \tstyle={{ width: '100%', height: hei || 'auto' }}\r\n\t\t\t// \tid=\"PStyle\"\r\n\t\t\t// \tdangerouslySetInnerHTML={{ __html: props.iframe ? props.iframe : '' }}\r\n\t\t\t// />\r\n\t\t\t<>\r\n\t\t\t\t<iframe\r\n\t\t\t\t\t// ref={ref}\r\n\t\t\t\t\tid=\"video__course__iframe\"\r\n\t\t\t\t\tref={videoStudy}\r\n\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\theight={hei}\r\n\t\t\t\t\tsrc={props?.iframe}\r\n\t\t\t\t\tframeBorder=\"0\"\r\n\t\t\t\t\tallow=\"autoplay; clipboard-write; picture-in-picture\"\r\n\t\t\t\t\tallowFullScreen\r\n\t\t\t\t\ttitle=\"Embedded youtube\"\r\n\t\t\t\t></iframe>\r\n\t\t\t\t{/* <ReactPlayer ref={videoStudy} width=\"900px\" height=\"600px\" url={fake} /> */}\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\t// RENDER\r\n\treturn (\r\n\t\t<div className=\"container-fluid p-0\" style={{ overflow: 'hidden' }}>\r\n\t\t\t<HeaderVideo params={router.query} onClick={showDrawer} />\r\n\t\t\t<div className=\"row\">\r\n\t\t\t\t<div className=\"col-md-9 col-12 p-0\">\r\n\t\t\t\t\t<div className=\"wrap-video pl-3\">\r\n\t\t\t\t\t\t<div ref={ref} className=\"wrap-video__video\">\r\n\t\t\t\t\t\t\t<div className=\"box-video\" ref={boxVideo}>\r\n\t\t\t\t\t\t\t\t{currentVideo === null ? (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"html-iframe d-flex justify-content-center align-items-between\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Spin tip=\"Loading...\" style={{ height: 100, marginTop: '25%' }} size=\"large\"></Spin>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t// <iframe id=\"movie_player\" ref={videoStudy} className=\"html-iframe\" src={fake} title=\"cc\" allowFullScreen />\r\n\t\t\t\t\t\t\t\t\t<Iframe iframe={currentVideo} allow=\"autoplay\" />\r\n\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t{data.length > 0 && currentLession.Type === 0\r\n\t\t\t\t\t\t\t\t\t? data.map((item) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<a href=\"/#\" key={item.ID} style={{ left: item.TimeNote + '%' }} className=\"marked\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div data-time={item.TimeNote}></div>\r\n\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t  ))\r\n\t\t\t\t\t\t\t\t\t: ''}\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<VideoTabs\r\n\t\t\t\t\t\t\t\tvideoRef={videoStudy}\r\n\t\t\t\t\t\t\t\tparams={currentLession}\r\n\t\t\t\t\t\t\t\tdetails={details}\r\n\t\t\t\t\t\t\t\tdataNote={data}\r\n\t\t\t\t\t\t\t\tdataQA={dataQA}\r\n\t\t\t\t\t\t\t\tonCreateNew={(p) => handleSubmit(p)}\r\n\t\t\t\t\t\t\t\tonPress={(p) => {\r\n\t\t\t\t\t\t\t\t\tvideoStudy.current.currentTime = p.TimeNote\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tonDelete={(p) => removeItem(p.ID)}\r\n\t\t\t\t\t\t\t\tonEdit={(p) => handleFixed(p.item.ID, p.title, p.content)}\r\n\t\t\t\t\t\t\t\tonPauseVideo={() => handlePause()}\r\n\t\t\t\t\t\t\t\taddNewQuest={(p) => addNewQuestion(p.comment, p.title)}\r\n\t\t\t\t\t\t\t\tonEditQuest={(e) =>\r\n\t\t\t\t\t\t\t\t\thandleEditQuestion({\r\n\t\t\t\t\t\t\t\t\t\tID: e.item.ID,\r\n\t\t\t\t\t\t\t\t\t\tTitle: e.title,\r\n\t\t\t\t\t\t\t\t\t\tTextContent: e.content,\r\n\t\t\t\t\t\t\t\t\t\tType: 1\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tonDeleteQuest={(e) => handleEditQuestion({ ID: e?.ID, Enable: false })}\r\n\t\t\t\t\t\t\t\tdataNotification={dataNotification}\r\n\t\t\t\t\t\t\t\tcreateNewNotification={(e) => addNewNotification(e)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"col-md-3 col-12 p-0\">\r\n\t\t\t\t\t<div className=\"wrap-menu\">\r\n\t\t\t\t\t\t<VideoList\r\n\t\t\t\t\t\t\tonPress={(p) => {\r\n\t\t\t\t\t\t\t\tsetCurrentLession(p)\r\n\t\t\t\t\t\t\t\tgetListNote(p.ID)\r\n\t\t\t\t\t\t\t\tp.Type === 0 ? setCurrentVideo(p.LinkVideo) : setCurrentVideo(p.LinkHtml)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tvideos={videos}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<Drawer\r\n\t\t\t\ttitle=\"Nội dung khóa học\"\r\n\t\t\t\tplacement=\"right\"\r\n\t\t\t\tonClose={onClose}\r\n\t\t\t\tvisible={visible}\r\n\t\t\t\tclassName=\"video-drawer\"\r\n\t\t\t\theaderStyle={{\r\n\t\t\t\t\tpaddingTop: 24,\r\n\t\t\t\t\tpaddingBottom: 24,\r\n\t\t\t\t\tbackground: '#fff'\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<div className=\"wrap-menu-drawer\">\r\n\t\t\t\t\t<VideoList\r\n\t\t\t\t\t\tonPress={(p) => {\r\n\t\t\t\t\t\t\tsetCurrentLession(p)\r\n\t\t\t\t\t\t\tgetListNote(p.ID)\r\n\t\t\t\t\t\t\tsetCurrentVideo(p.LinkVideo)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tvideos={videos}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</Drawer>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default VideoLearning\r\n"]},"metadata":{},"sourceType":"module"}