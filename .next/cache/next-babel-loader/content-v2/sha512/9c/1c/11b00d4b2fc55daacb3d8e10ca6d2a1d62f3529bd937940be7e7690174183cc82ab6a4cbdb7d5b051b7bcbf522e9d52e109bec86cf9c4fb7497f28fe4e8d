{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"D:/MonaMedia/Project/CodingMentor/CodingMentor-FE/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"D:/MonaMedia/Project/CodingMentor/CodingMentor-FE/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\CodingMentor\\\\CodingMentor-FE\\\\src\\\\components\\\\Global\\\\Option\\\\RoomForm.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Form, Input, Modal, Select, Spin, Tooltip } from 'antd';\nimport router from 'next/router';\nimport React, { useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useWrap } from '~/context/wrap';\nvar RoomForm = /*#__PURE__*/React.memo(_c = _s(function (props) {\n  _s();\n\n  var _useForm = useForm(),\n      reset = _useForm.reset,\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit,\n      control = _useForm.control,\n      setValue = _useForm.setValue,\n      _useForm$formState = _useForm.formState,\n      isSubmitting = _useForm$formState.isSubmitting,\n      errors = _useForm$formState.errors,\n      isSubmitted = _useForm$formState.isSubmitted;\n\n  var branchID = parseInt(router.query.slug);\n\n  var _useState = useState(false),\n      isModalVisible = _useState[0],\n      setIsModalVisible = _useState[1];\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti;\n\n  var _Form$useForm = Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var Option = Select.Option;\n\n  var _useState2 = useState(false),\n      disableCenter = _useState2[0],\n      setDisableCenter = _useState2[1];\n\n  var isLoading = props.isLoading,\n      _onSubmit = props._onSubmit,\n      roomID = props.roomID,\n      rowData = props.rowData,\n      getIndex = props.getIndex,\n      dataCenter = props.dataCenter;\n\n  var _useState3 = useState(false),\n      loadingSelect = _useState3[0],\n      setLoadingSelect = _useState3[1]; // HANDLE SUBMIT\n\n\n  var onFinish = handleSubmit(function (data) {\n    var res = _onSubmit(data);\n\n    res.then(function (rs) {\n      console.log('result is: ', rs);\n      rs && rs.status == 200 && (setIsModalVisible(false), form.resetFields());\n    });\n  }); // ON CHANGE SELECT\n\n  var onChangeSelect = function onChangeSelect(name) {\n    return function (value) {\n      setValue(name, value);\n    };\n  };\n\n  useEffect(function () {\n    if (isModalVisible) {\n      if (branchID) {\n        setValue('BranchID', branchID);\n        setDisableCenter(true);\n        form.setFieldsValue(_objectSpread(_objectSpread({}, rowData), {}, {\n          BranchID: branchID\n        }));\n      }\n\n      if (roomID) {\n        getIndex(); // Cập nhật giá trị khi show form update\n\n        Object.keys(rowData).forEach(function (key) {\n          setValue(key, rowData[key]);\n        });\n        form.setFieldsValue(rowData);\n      }\n    }\n  }, [isModalVisible]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [roomID ? /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-icon edit\",\n      onClick: function onClick() {\n        setIsModalVisible(true);\n      },\n      children: /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: \"C\\u1EADp nh\\u1EADt\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-edit\",\n          style: {\n            color: '#34c4a4',\n            fontSize: 16,\n            marginBottom: -1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 7\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 6\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }, _this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-warning add-new\",\n      onClick: function onClick() {\n        setIsModalVisible(true);\n      },\n      children: \"Th\\xEAm m\\u1EDBi\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }, _this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"\".concat(roomID ? 'Sửa' : 'Tạo', \" ph\\xF2ng trong trung t\\xE2m\"),\n      visible: isModalVisible,\n      onCancel: function onCancel() {\n        return setIsModalVisible(false);\n      },\n      footer: null,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-fluid\",\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          form: form,\n          onFinish: onFinish,\n          layout: \"vertical\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                name: \"BranchID\",\n                label: \"Trung t\\xE2m\",\n                rules: [{\n                  required: true,\n                  message: 'Bạn không được để trống'\n                }],\n                children: /*#__PURE__*/_jsxDEV(Select, {\n                  loading: loadingSelect,\n                  disabled: disableCenter,\n                  style: {\n                    width: '100%'\n                  },\n                  className: \"style-input\",\n                  showSearch: true,\n                  optionFilterProp: \"children\",\n                  onChange: onChangeSelect('BranchID') // defaultValue={branchID ? branchID : \"\"}\n                  ,\n                  children: dataCenter === null || dataCenter === void 0 ? void 0 : dataCenter.map(function (item, index) {\n                    return /*#__PURE__*/_jsxDEV(Option, {\n                      value: item.ID,\n                      children: item.BranchName\n                    }, index, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 109,\n                      columnNumber: 12\n                    }, _this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 10\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 9\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 8\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                name: \"RoomCode\",\n                label: \"M\\xE3 ph\\xF2ng\",\n                rules: [{\n                  required: true,\n                  message: 'Bạn không được để trống'\n                }],\n                children: /*#__PURE__*/_jsxDEV(Input, {\n                  placeholder: \"\",\n                  className: \"style-input\",\n                  onChange: function onChange(e) {\n                    return setValue('RoomCode', e.target.value);\n                  },\n                  allowClear: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 10\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 9\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 8\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 7\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                name: \"RoomName\",\n                label: \"T\\xEAn ph\\xF2ng\",\n                rules: [{\n                  required: true,\n                  message: 'Bạn không được để trống'\n                }],\n                children: /*#__PURE__*/_jsxDEV(Input, {\n                  placeholder: \"\",\n                  className: \"style-input\",\n                  onChange: function onChange(e) {\n                    return setValue('RoomName', e.target.value);\n                  },\n                  allowClear: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 125,\n                  columnNumber: 10\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 9\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 8\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 7\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row \",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 mt-3\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-primary w-100\",\n                children: [\"L\\u01B0u\", isLoading.type == 'ADD_DATA' && isLoading.status && /*#__PURE__*/_jsxDEV(Spin, {\n                  className: \"loading-base\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 63\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 9\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 8\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 7\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 6\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 5\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 4\n    }, _this)]\n  }, void 0, true);\n}, \"Nsp3K8va+mD42OKixxXi/nd9xeA=\", false, function () {\n  return [useForm, useWrap, Form.useForm];\n}));\n_c2 = RoomForm;\nexport default RoomForm;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"RoomForm$React.memo\");\n$RefreshReg$(_c2, \"RoomForm\");","map":{"version":3,"sources":["D:/MonaMedia/Project/CodingMentor/CodingMentor-FE/src/components/Global/Option/RoomForm.tsx"],"names":["Form","Input","Modal","Select","Spin","Tooltip","router","React","useEffect","useState","useForm","useWrap","RoomForm","memo","props","reset","register","handleSubmit","control","setValue","formState","isSubmitting","errors","isSubmitted","branchID","parseInt","query","slug","isModalVisible","setIsModalVisible","showNoti","form","Option","disableCenter","setDisableCenter","isLoading","_onSubmit","roomID","rowData","getIndex","dataCenter","loadingSelect","setLoadingSelect","onFinish","data","res","then","rs","console","log","status","resetFields","onChangeSelect","name","value","setFieldsValue","BranchID","Object","keys","forEach","key","color","fontSize","marginBottom","required","message","width","map","item","index","ID","BranchName","e","target","type"],"mappings":"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","sourcesContent":["import { Form, Input, Modal, Select, Spin, Tooltip } from 'antd'\r\nimport router from 'next/router'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { useWrap } from '~/context/wrap'\r\n\r\nconst RoomForm = React.memo((props: any) => {\r\n\tconst {\r\n\t\treset,\r\n\t\tregister,\r\n\t\thandleSubmit,\r\n\t\tcontrol,\r\n\t\tsetValue,\r\n\t\tformState: { isSubmitting, errors, isSubmitted }\r\n\t} = useForm()\r\n\tconst branchID = parseInt(router.query.slug as string)\r\n\tconst [isModalVisible, setIsModalVisible] = useState(false)\r\n\tconst { showNoti } = useWrap()\r\n\tconst [form] = Form.useForm()\r\n\tconst { Option } = Select\r\n\r\n\tconst [disableCenter, setDisableCenter] = useState(false)\r\n\tconst { isLoading, _onSubmit, roomID, rowData, getIndex, dataCenter } = props\r\n\r\n\tconst [loadingSelect, setLoadingSelect] = useState(false)\r\n\r\n\t// HANDLE SUBMIT\r\n\tconst onFinish = handleSubmit((data: any) => {\r\n\t\tlet res = _onSubmit(data)\r\n\t\tres.then(function (rs: any) {\r\n\t\t\tconsole.log('result is: ', rs)\r\n\t\t\trs && rs.status == 200 && (setIsModalVisible(false), form.resetFields())\r\n\t\t})\r\n\t})\r\n\r\n\t// ON CHANGE SELECT\r\n\tconst onChangeSelect = (name) => (value) => {\r\n\t\tsetValue(name, value)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isModalVisible) {\r\n\t\t\tif (branchID) {\r\n\t\t\t\tsetValue('BranchID', branchID)\r\n\t\t\t\tsetDisableCenter(true)\r\n\t\t\t\tform.setFieldsValue({\r\n\t\t\t\t\t...rowData,\r\n\t\t\t\t\tBranchID: branchID\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tif (roomID) {\r\n\t\t\t\tgetIndex()\r\n\t\t\t\t// Cập nhật giá trị khi show form update\r\n\t\t\t\tObject.keys(rowData).forEach(function (key) {\r\n\t\t\t\t\tsetValue(key, rowData[key])\r\n\t\t\t\t})\r\n\t\t\t\tform.setFieldsValue(rowData)\r\n\t\t\t}\r\n\t\t}\r\n\t}, [isModalVisible])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{roomID ? (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"btn btn-icon edit\"\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsetIsModalVisible(true)\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Tooltip title=\"Cập nhật\">\r\n\t\t\t\t\t\t<i className=\"fas fa-edit\" style={{ color: '#34c4a4', fontSize: 16, marginBottom: -1 }}></i>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t</button>\r\n\t\t\t) : (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"btn btn-warning add-new\"\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsetIsModalVisible(true)\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\tThêm mới\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\r\n\t\t\t<Modal\r\n\t\t\t\ttitle={`${roomID ? 'Sửa' : 'Tạo'} phòng trong trung tâm`}\r\n\t\t\t\tvisible={isModalVisible}\r\n\t\t\t\tonCancel={() => setIsModalVisible(false)}\r\n\t\t\t\tfooter={null}\r\n\t\t\t>\r\n\t\t\t\t<div className=\"container-fluid\">\r\n\t\t\t\t\t<Form form={form} onFinish={onFinish} layout=\"vertical\">\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t\t\t<Form.Item name=\"BranchID\" label=\"Trung tâm\" rules={[{ required: true, message: 'Bạn không được để trống' }]}>\r\n\t\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t\tloading={loadingSelect}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={disableCenter}\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ width: '100%' }}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"style-input\"\r\n\t\t\t\t\t\t\t\t\t\tshowSearch\r\n\t\t\t\t\t\t\t\t\t\toptionFilterProp=\"children\"\r\n\t\t\t\t\t\t\t\t\t\tonChange={onChangeSelect('BranchID')}\r\n\t\t\t\t\t\t\t\t\t\t// defaultValue={branchID ? branchID : \"\"}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{dataCenter?.map((item, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<Option key={index} value={item.ID}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{item.BranchName}\r\n\t\t\t\t\t\t\t\t\t\t\t</Option>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t\t\t<Form.Item name=\"RoomCode\" label=\"Mã phòng\" rules={[{ required: true, message: 'Bạn không được để trống' }]}>\r\n\t\t\t\t\t\t\t\t\t<Input placeholder=\"\" className=\"style-input\" onChange={(e) => setValue('RoomCode', e.target.value)} allowClear={true} />\r\n\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t\t\t<Form.Item name=\"RoomName\" label=\"Tên phòng\" rules={[{ required: true, message: 'Bạn không được để trống' }]}>\r\n\t\t\t\t\t\t\t\t\t<Input placeholder=\"\" className=\"style-input\" onChange={(e) => setValue('RoomName', e.target.value)} allowClear={true} />\r\n\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"row \">\r\n\t\t\t\t\t\t\t<div className=\"col-12 mt-3\">\r\n\t\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary w-100\">\r\n\t\t\t\t\t\t\t\t\tLưu\r\n\t\t\t\t\t\t\t\t\t{isLoading.type == 'ADD_DATA' && isLoading.status && <Spin className=\"loading-base\" />}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t</>\r\n\t)\r\n})\r\n\r\nexport default RoomForm\r\n"]},"metadata":{},"sourceType":"module"}