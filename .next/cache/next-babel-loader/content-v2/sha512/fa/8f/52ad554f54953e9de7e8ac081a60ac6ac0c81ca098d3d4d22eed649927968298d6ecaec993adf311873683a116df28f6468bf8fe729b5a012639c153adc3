{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Profile\\\\ProfileCustomer\\\\InfoDiscountCard\\\\InfoDiscountCard.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport { discountApi } from '~/apiBase';\nimport PowerTable from '~/components/PowerTable';\nimport { useWrap } from '~/context/wrap';\nimport { numberWithCommas } from '~/utils/functions';\n\nvar InfoDiscountCard = function InfoDiscountCard(props) {\n  _s();\n\n  var studentID = props.studentID;\n\n  var _useState = useState(null),\n      dataSource = _useState[0],\n      setDataSource = _useState[1];\n\n  var _useState2 = useState({\n    type: '',\n    status: false\n  }),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti,\n      pageSize = _useWrap.pageSize;\n\n  var _useState3 = useState(null),\n      totalPage = _useState3[0],\n      setTotalPage = _useState3[1];\n\n  var _useState4 = useState(1),\n      currentPage = _useState4[0],\n      setCurrentPage = _useState4[1];\n\n  var listTodoApi = {\n    pageSize: pageSize,\n    pageIndex: 1,\n    StudentID: studentID\n  };\n\n  var _useState5 = useState(listTodoApi),\n      todoApi = _useState5[0],\n      setTodoApi = _useState5[1];\n\n  var getDataSource = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setIsLoading({\n                type: 'GET_ALL',\n                status: true\n              });\n              _context.prev = 1;\n              _context.next = 4;\n              return discountApi.discountStudent(todoApi);\n\n            case 4:\n              res = _context.sent;\n              res.status == 200 && (setDataSource(res.data.data), setTotalPage(res.data.totalRow));\n              res.status == 204 && setDataSource([]);\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](1);\n              showNoti('danger', _context.t0.message);\n\n            case 12:\n              _context.prev = 12;\n              setIsLoading({\n                type: 'GET_ALL',\n                status: false\n              });\n              return _context.finish(12);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 9, 12, 15]]);\n    }));\n\n    return function getDataSource() {\n      return _ref.apply(this, arguments);\n    };\n  }(); // -------------- GET PAGE_NUMBER -----------------\n\n\n  var _getPagination = function getPagination(pageNumber) {\n    setCurrentPage(pageNumber);\n    setTodoApi(_objectSpread(_objectSpread({}, todoApi), {}, {\n      pageIndex: pageNumber\n    }));\n  };\n\n  var columns = [{\n    title: 'Mã khuyến mãi',\n    dataIndex: 'DiscountCode',\n    render: function render(text) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-black\",\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 22\n      }, _this);\n    }\n  }, {\n    title: 'Giá trị',\n    dataIndex: 'Discount',\n    render: function render(text, data) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-black\",\n        children: data.DiscountType == 1 ? numberWithCommas(text) : text + '%'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 28\n      }, _this);\n    }\n  }, {\n    title: 'Loại',\n    dataIndex: 'DiscountType',\n    render: function render(type) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [type == 1 && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"tag gray\",\n          children: \"T\\xEDnh theo ti\\u1EC1n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 20\n        }, _this), type == 2 && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"tag yellow\",\n          children: \"T\\xEDnh theo ph\\u1EA7n tr\\u0103m\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 20\n        }, _this)]\n      }, void 0, true);\n    }\n  }, {\n    title: 'Tiền khuyến mãi tối đa',\n    dataIndex: 'MaxDiscountPrice',\n    render: function render(text) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-black\",\n        children: numberWithCommas(text)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 22\n      }, _this);\n    }\n  }]; // ============== USE EFFECT - FETCH DATA ===================\n\n  useEffect(function () {\n    getDataSource();\n  }, [todoApi]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(PowerTable, {\n      currentPage: currentPage,\n      totalPage: totalPage && totalPage,\n      getPagination: function getPagination(pageNumber) {\n        return _getPagination(pageNumber);\n      },\n      loading: isLoading,\n      addClass: \"basic-header\",\n      TitlePage: \"Danh s\\xE1ch ch\\u01B0\\u01A1ng tr\\xECnh\",\n      dataSource: dataSource,\n      columns: columns\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 4\n    }, _this)\n  }, void 0, false);\n};\n\n_s(InfoDiscountCard, \"voOmOdAwbX1KpopmXagZA3MXTbw=\", false, function () {\n  return [useWrap];\n});\n\n_c = InfoDiscountCard;\nexport default InfoDiscountCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"InfoDiscountCard\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Profile/ProfileCustomer/InfoDiscountCard/InfoDiscountCard.tsx"],"names":["React","useState","useEffect","discountApi","PowerTable","useWrap","numberWithCommas","InfoDiscountCard","props","studentID","dataSource","setDataSource","type","status","isLoading","setIsLoading","showNoti","pageSize","totalPage","setTotalPage","currentPage","setCurrentPage","listTodoApi","pageIndex","StudentID","todoApi","setTodoApi","getDataSource","discountStudent","res","data","totalRow","message","getPagination","pageNumber","columns","title","dataIndex","render","text","DiscountType"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { discountApi } from '~/apiBase'\r\nimport PowerTable from '~/components/PowerTable'\r\nimport { useWrap } from '~/context/wrap'\r\nimport { numberWithCommas } from '~/utils/functions'\r\n\r\nconst InfoDiscountCard = (props) => {\r\n\tconst { studentID } = props\r\n\tconst [dataSource, setDataSource] = useState(null)\r\n\tconst [isLoading, setIsLoading] = useState({\r\n\t\ttype: '',\r\n\t\tstatus: false\r\n\t})\r\n\tconst { showNoti, pageSize } = useWrap()\r\n\tconst [totalPage, setTotalPage] = useState(null)\r\n\tconst [currentPage, setCurrentPage] = useState(1)\r\n\r\n\tconst listTodoApi = {\r\n\t\tpageSize: pageSize,\r\n\t\tpageIndex: 1,\r\n\t\tStudentID: studentID\r\n\t}\r\n\tconst [todoApi, setTodoApi] = useState(listTodoApi)\r\n\r\n\tconst getDataSource = async () => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'GET_ALL',\r\n\t\t\tstatus: true\r\n\t\t})\r\n\t\ttry {\r\n\t\t\tlet res = await discountApi.discountStudent(todoApi)\r\n\t\t\tres.status == 200 && (setDataSource(res.data.data), setTotalPage(res.data.totalRow))\r\n\t\t\tres.status == 204 && setDataSource([])\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'GET_ALL',\r\n\t\t\t\tstatus: false\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// -------------- GET PAGE_NUMBER -----------------\r\n\tconst getPagination = (pageNumber: number) => {\r\n\t\tsetCurrentPage(pageNumber)\r\n\r\n\t\tsetTodoApi({\r\n\t\t\t...todoApi,\r\n\t\t\tpageIndex: pageNumber\r\n\t\t})\r\n\t}\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Mã khuyến mãi',\r\n\t\t\tdataIndex: 'DiscountCode',\r\n\t\t\trender: (text) => <p className=\"font-weight-black\">{text}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Giá trị',\r\n\t\t\tdataIndex: 'Discount',\r\n\t\t\trender: (text, data) => <p className=\"font-weight-black\">{data.DiscountType == 1 ? numberWithCommas(text) : text + '%'}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Loại',\r\n\t\t\tdataIndex: 'DiscountType',\r\n\t\t\trender: (type) => (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{type == 1 && <span className=\"tag gray\">Tính theo tiền</span>}\r\n\t\t\t\t\t{type == 2 && <span className=\"tag yellow\">Tính theo phần trăm</span>}\r\n\t\t\t\t</>\r\n\t\t\t)\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Tiền khuyến mãi tối đa',\r\n\t\t\tdataIndex: 'MaxDiscountPrice',\r\n\t\t\trender: (text) => <p className=\"font-weight-black\">{numberWithCommas(text)}</p>\r\n\t\t}\r\n\t]\r\n\r\n\t// ============== USE EFFECT - FETCH DATA ===================\r\n\tuseEffect(() => {\r\n\t\tgetDataSource()\r\n\t}, [todoApi])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<PowerTable\r\n\t\t\t\tcurrentPage={currentPage}\r\n\t\t\t\ttotalPage={totalPage && totalPage}\r\n\t\t\t\tgetPagination={(pageNumber: number) => getPagination(pageNumber)}\r\n\t\t\t\tloading={isLoading}\r\n\t\t\t\taddClass=\"basic-header\"\r\n\t\t\t\tTitlePage=\"Danh sách chương trình\"\r\n\t\t\t\tdataSource={dataSource}\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t/>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default InfoDiscountCard\r\n"]},"metadata":{},"sourceType":"module"}