{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\ExamList\\\\ExamForm\\\\EditPoint.tsx\";\nimport { Input, Modal, Spin, Tooltip } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { Edit } from 'react-feather';\nimport { examDetailApi } from '~/apiBase';\nimport { useWrap } from '~/context/wrap';\nimport { useExamDetail } from '~/pages/question-bank/exam-list/exam-detail/[slug]';\n\nconst EditPoint = props => {\n  const {\n    quesItem,\n    dataQuestion,\n    listQuestionGroup\n  } = props;\n  const {\n    0: isModalVisible,\n    1: setIsModalVisible\n  } = useState(false);\n  const {\n    0: valuePoint,\n    1: setValuePoint\n  } = useState(quesItem ? quesItem.Point : listQuestionGroup.length > 0 ? listQuestionGroup[0].Point : null);\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const {\n    showNoti\n  } = useWrap();\n  const {\n    onEditPoint\n  } = useExamDetail();\n  const {\n    0: listQuestion,\n    1: setListQuestion\n  } = useState(listQuestionGroup);\n\n  const showModal = () => {\n    setIsModalVisible(true);\n  };\n\n  const handleOk = () => {\n    setIsModalVisible(false);\n    console.log('handleOk: ', valuePoint);\n  };\n\n  const handleCancel = () => {\n    setIsModalVisible(false);\n  };\n\n  const numberCheck = str => {\n    if (str === undefined || str === null) {\n      return false;\n    } else {\n      return /^[0-9,. ]*$/.test(str);\n    }\n  };\n\n  const onChange_EditPoint = e => {\n    let value = numberCheck(e.target.value) ? e.target.value : valuePoint;\n    setValuePoint(value.replace(',', '.'));\n\n    if (!quesItem) {\n      listQuestion.forEach(element => {\n        element.Point = value;\n      });\n      setListQuestion([...listQuestion]);\n    }\n  };\n\n  const onSubmitData = async () => {\n    console.log('onSubmitData');\n    let itemDelete = {\n      ID: dataQuestion.ID,\n      Enable: true,\n      ExerciseOrExerciseGroup: quesItem ? [{\n        Point: valuePoint,\n        ExerciseOrExerciseGroupID: quesItem.ExerciseID\n      }] : listQuestion\n    };\n    console.log('=======================================');\n    console.log('quesItem: ', quesItem);\n    console.log('listQuestion: ', listQuestion);\n    console.log('itemDelete.ExerciseOrExerciseGroup: ', itemDelete.ExerciseOrExerciseGroup);\n    setIsLoading(true);\n\n    try {\n      let res = await examDetailApi.update(itemDelete);\n\n      if (res.status == 200) {\n        onEditPoint(itemDelete.ExerciseOrExerciseGroup, dataQuestion.ID);\n        setIsModalVisible(false);\n        showNoti('success', 'Cập nhật điểm thành công');\n      }\n    } catch (error) {\n      showNoti('danger', error.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {}, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n      title: \"S\\u1EEDa \\u0111i\\u1EC3m\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-icon edit\",\n        onClick: showModal,\n        children: /*#__PURE__*/_jsxDEV(Edit, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"S\\u1EEDa \\u0111i\\u1EC3m\",\n      visible: isModalVisible,\n      onOk: handleOk,\n      onCancel: handleCancel,\n      footer: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-light mr-2\",\n          onClick: handleCancel,\n          children: \"H\\u1EE7y\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: () => onSubmitData(),\n          children: [\"L\\u01B0u\", isLoading && /*#__PURE__*/_jsxDEV(Spin, {\n            className: \"loading-base\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 22\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 6\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(Input, {\n        className: \"style-input\",\n        value: valuePoint,\n        onChange: e => onChange_EditPoint(e),\n        onPressEnter: onSubmitData,\n        allowClear: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n\nexport default EditPoint;","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/ExamList/ExamForm/EditPoint.tsx"],"names":["Input","Modal","Spin","Tooltip","React","useEffect","useState","Edit","examDetailApi","useWrap","useExamDetail","EditPoint","props","quesItem","dataQuestion","listQuestionGroup","isModalVisible","setIsModalVisible","valuePoint","setValuePoint","Point","length","isLoading","setIsLoading","showNoti","onEditPoint","listQuestion","setListQuestion","showModal","handleOk","console","log","handleCancel","numberCheck","str","undefined","test","onChange_EditPoint","e","value","target","replace","forEach","element","onSubmitData","itemDelete","ID","Enable","ExerciseOrExerciseGroup","ExerciseOrExerciseGroupID","ExerciseID","res","update","status","error","message"],"mappings":"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","sourcesContent":["import { Input, Modal, Spin, Tooltip } from 'antd'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { Edit } from 'react-feather'\r\nimport { examDetailApi } from '~/apiBase'\r\nimport { useWrap } from '~/context/wrap'\r\nimport { useExamDetail } from '~/pages/question-bank/exam-list/exam-detail/[slug]'\r\n\r\nconst EditPoint = (props) => {\r\n\tconst { quesItem, dataQuestion, listQuestionGroup } = props\r\n\tconst [isModalVisible, setIsModalVisible] = useState(false)\r\n\tconst [valuePoint, setValuePoint] = useState(quesItem ? quesItem.Point : listQuestionGroup.length > 0 ? listQuestionGroup[0].Point : null)\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst { showNoti } = useWrap()\r\n\tconst { onEditPoint } = useExamDetail()\r\n\tconst [listQuestion, setListQuestion] = useState(listQuestionGroup)\r\n\r\n\tconst showModal = () => {\r\n\t\tsetIsModalVisible(true)\r\n\t}\r\n\r\n\tconst handleOk = () => {\r\n\t\tsetIsModalVisible(false)\r\n\r\n\t\tconsole.log('handleOk: ', valuePoint)\r\n\t}\r\n\r\n\tconst handleCancel = () => {\r\n\t\tsetIsModalVisible(false)\r\n\t}\r\n\r\n\tconst numberCheck = (str) => {\r\n\t\tif (str === undefined || str === null) {\r\n\t\t\treturn false\r\n\t\t} else {\r\n\t\t\treturn /^[0-9,. ]*$/.test(str)\r\n\t\t}\r\n\t}\r\n\r\n\tconst onChange_EditPoint = (e) => {\r\n\t\tlet value = numberCheck(e.target.value) ? e.target.value : valuePoint\r\n\t\tsetValuePoint(value.replace(',', '.'))\r\n\t\tif (!quesItem) {\r\n\t\t\tlistQuestion.forEach((element) => {\r\n\t\t\t\telement.Point = value\r\n\t\t\t})\r\n\t\t\tsetListQuestion([...listQuestion])\r\n\t\t}\r\n\t}\r\n\r\n\tconst onSubmitData = async () => {\r\n\t\tconsole.log('onSubmitData')\r\n\r\n\t\tlet itemDelete = {\r\n\t\t\tID: dataQuestion.ID,\r\n\t\t\tEnable: true,\r\n\t\t\tExerciseOrExerciseGroup: quesItem\r\n\t\t\t\t? [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tPoint: valuePoint,\r\n\t\t\t\t\t\t\tExerciseOrExerciseGroupID: quesItem.ExerciseID\r\n\t\t\t\t\t\t}\r\n\t\t\t\t  ]\r\n\t\t\t\t: listQuestion\r\n\t\t}\r\n\r\n\t\tconsole.log('=======================================')\r\n\t\tconsole.log('quesItem: ', quesItem)\r\n\r\n\t\tconsole.log('listQuestion: ', listQuestion)\r\n\r\n\t\tconsole.log('itemDelete.ExerciseOrExerciseGroup: ', itemDelete.ExerciseOrExerciseGroup)\r\n\r\n\t\tsetIsLoading(true)\r\n\t\ttry {\r\n\t\t\tlet res = await examDetailApi.update(itemDelete)\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tonEditPoint(itemDelete.ExerciseOrExerciseGroup, dataQuestion.ID)\r\n\t\t\t\tsetIsModalVisible(false)\r\n\t\t\t\tshowNoti('success', 'Cập nhật điểm thành công')\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {}, [])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Tooltip title=\"Sửa điểm\">\r\n\t\t\t\t<button className=\"btn btn-icon edit\" onClick={showModal}>\r\n\t\t\t\t\t<Edit />\r\n\t\t\t\t</button>\r\n\t\t\t</Tooltip>\r\n\t\t\t<Modal\r\n\t\t\t\ttitle=\"Sửa điểm\"\r\n\t\t\t\tvisible={isModalVisible}\r\n\t\t\t\tonOk={handleOk}\r\n\t\t\t\tonCancel={handleCancel}\r\n\t\t\t\tfooter={\r\n\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t<button className=\"btn btn-light mr-2\" onClick={handleCancel}>\r\n\t\t\t\t\t\t\tHủy\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button className=\"btn btn-primary\" onClick={() => onSubmitData()}>\r\n\t\t\t\t\t\t\tLưu\r\n\t\t\t\t\t\t\t{isLoading && <Spin className=\"loading-base\" />}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t<Input className=\"style-input\" value={valuePoint} onChange={(e) => onChange_EditPoint(e)} onPressEnter={onSubmitData} allowClear />\r\n\t\t\t</Modal>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default EditPoint\r\n"]},"metadata":{},"sourceType":"module"}