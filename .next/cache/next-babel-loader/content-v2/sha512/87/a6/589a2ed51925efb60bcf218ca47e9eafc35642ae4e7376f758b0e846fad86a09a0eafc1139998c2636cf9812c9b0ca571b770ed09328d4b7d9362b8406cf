{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\CodingMentor\\\\CodingMentor-FE\\\\src\\\\components\\\\Global\\\\CreateCourseOnline\\\\ScheduleOnline\\\\ScheduleOnlineItem.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { Collapse, Spin } from 'antd';\nimport Checkbox from 'antd/lib/checkbox/Checkbox';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport SelectField from '~/components/FormControl/SelectField';\nimport { useWrap } from '~/context/wrap';\nimport { optionCommonPropTypes } from '~/utils/proptypes';\nconst {\n  Panel\n} = Collapse; //   scheduleObj = {\n//     \"ID\": 1,\n//     \"eventName\": \"26/07 - Hữu Minh Teacher 10 [20:00-21:00]-[Phòng 2]\",\n//     \"Color\": \"orange\",\n//     \"Tiet\": {\n//         \"CurriculumsDetailID\": 140,\n//         \"CurriculumsDetailName\": \"1: Sinh\"\n//     },\n//     \"date\": \"2021-07-26\",\n//     \"TeacherID\": 1060,\n//     \"TeacherName\": \"Hữu Minh Teacher 10[20:00-21:00]\",\n//     \"CaID\": 5,\n//     \"CaName\": \"Ca: 20:00 - 21:00\",\n// }\n\nconst ScheduleOnlineItem = props => {\n  const {\n    handleChangeStatusSchedule,\n    handleChangeValueSchedule,\n    handleAheadSchedule,\n    //\n    scheduleObj,\n    isLoading,\n    isUnavailable,\n    isEditView,\n    isClickAheadSchedule,\n    //\n    optionTeacherList,\n    optionStudyTime,\n    //\n    saveBeforeAheadSchedule\n  } = props; // IF NOT OWNER SCHEDULE < LOCK\n\n  const {\n    0: isLockSchedule,\n    1: setIsLockSchedule\n  } = useState(false);\n  const {\n    userInformation\n  } = useWrap();\n  const {\n    ID,\n    eventName,\n    Tiet,\n    CaID,\n    TeacherID,\n    // EDIT\n    Date,\n    TeacherName,\n    SubjectName,\n    StudyTimeID\n  } = scheduleObj;\n  const defaultValuesInit = {\n    TeacherID: TeacherID,\n    StudyTimeID: CaID || StudyTimeID\n  };\n  const schema = yup.object().shape({\n    StudyTimeID: yup.number().min(1, 'Bạn cần chọn ca học').required('Bạn không được để trống'),\n    TeacherID: yup.number().min(1, 'Bạn cần chọn giáo viên').required('Bạn không được để trống')\n  });\n  const form = useForm({\n    defaultValues: defaultValuesInit,\n    resolver: yupResolver(schema),\n    mode: 'all'\n  });\n\n  const checkHandleChangeStatusSchedule = (vl, type) => {\n    if (!handleChangeStatusSchedule) return;\n    handleChangeStatusSchedule(vl, type);\n  };\n\n  const checkHandleChangeValueSchedule = (uid, key, vl) => {\n    if (!handleChangeValueSchedule) return;\n    handleChangeValueSchedule(uid, key, vl);\n  };\n\n  const setSiblingsFieldToDefault = () => {\n    form.setValue('TeacherID', 0);\n  };\n\n  const checkHandleAheadSchedule = (courseScheduleId, teacherId) => {\n    if (!handleAheadSchedule) return;\n    handleAheadSchedule(courseScheduleId, teacherId);\n  }; // CHECK IF VALUE DO NOT IN THE SELECT => CHANGE VALUE TO DEFAULT (0)\n\n\n  useEffect(() => {\n    form.clearErrors();\n\n    if ((isLoading.type === 'CHECK_SCHEDULE' || isLoading.type === 'ADD_DATA') && !isLoading.status && Array.isArray(optionTeacherList) && optionTeacherList.length > 0) {\n      if (isEditView) {\n        form.setValue('TeacherID', TeacherID);\n      } else {\n        form.setValue('TeacherID', optionTeacherList[0].value);\n      }\n\n      form.setValue('StudyTimeID', CaID || StudyTimeID);\n    }\n  }, [scheduleObj, optionTeacherList, isLoading]);\n  useEffect(() => {\n    setIsLockSchedule(false);\n\n    if ((userInformation === null || userInformation === void 0 ? void 0 : userInformation.RoleID) === 2 && TeacherID !== 0 && TeacherID !== (userInformation === null || userInformation === void 0 ? void 0 : userInformation.UserInformationID)) {\n      setIsLockSchedule(true);\n    }\n\n    if ((scheduleObj === null || scheduleObj === void 0 ? void 0 : scheduleObj.TeacherAttendanceID) !== 0) {\n      setIsLockSchedule(true);\n    }\n  }, [scheduleObj]);\n  return /*#__PURE__*/_jsxDEV(Panel, _objectSpread(_objectSpread({}, props), {}, {\n    header: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"info-course-item\",\n      children: [(scheduleObj === null || scheduleObj === void 0 ? void 0 : scheduleObj.TeacherAttendanceID) == 0 && /*#__PURE__*/_jsxDEV(Checkbox, {\n        onChange: () => {\n          if (isUnavailable) {\n            checkHandleChangeStatusSchedule(scheduleObj, 2);\n          } else {\n            checkHandleChangeStatusSchedule(scheduleObj, 1);\n          }\n        },\n        checked: isUnavailable,\n        disabled: isLockSchedule\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"title\",\n        children: eventName || `${moment(Date).format('DD/MM')} - ${TeacherName}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"info-course-list\",\n        children: /*#__PURE__*/_jsxDEV(\"li\", {\n          children: (Tiet === null || Tiet === void 0 ? void 0 : Tiet.CurriculumsDetailName) || SubjectName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 5\n    }, this),\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"info-course-select\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12\",\n          children: /*#__PURE__*/_jsxDEV(SelectField, {\n            form: form,\n            name: \"StudyTimeID\",\n            placeholder: \"Ch\\u1ECDn ca\",\n            optionList: optionStudyTime,\n            onChangeSelect: value => {\n              setSiblingsFieldToDefault();\n              checkHandleChangeValueSchedule(ID, 'CaID', value);\n            },\n            disabled: isLockSchedule\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12\",\n          children: /*#__PURE__*/_jsxDEV(SelectField, {\n            form: form,\n            name: \"TeacherID\",\n            isLoading: isLoading.type === 'CHECK_SCHEDULE' && isLoading.status,\n            placeholder: \"Ch\\u1ECDn gi\\xE1o vi\\xEAn\",\n            optionList: optionTeacherList,\n            onChangeSelect: value => {\n              if (isEditView) {\n                checkHandleChangeValueSchedule(ID, 'TeacherID', value);\n              }\n            },\n            disabled: isLockSchedule\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 6\n        }, this), isEditView && !isClickAheadSchedule && typeof ID === 'number' && saveBeforeAheadSchedule && (scheduleObj === null || scheduleObj === void 0 ? void 0 : scheduleObj.TeacherAttendanceID) == 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 text-right\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-secondary\",\n            disabled: isLoading.type === 'AHEAD_SCHEDULE' && isLoading.status || isLockSchedule,\n            onClick: () => checkHandleAheadSchedule(ID, TeacherID),\n            children: [\"L\\xF9i bu\\u1ED5i h\\u1ECDc\", isLoading.type === 'AHEAD_SCHEDULE' && isLoading.status && /*#__PURE__*/_jsxDEV(Spin, {\n              className: \"loading-base\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 70\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 8\n        }, this), (scheduleObj === null || scheduleObj === void 0 ? void 0 : scheduleObj.TeacherAttendanceID) !== 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: '#dd4667',\n            fontSize: 14,\n            width: '100%',\n            textAlign: 'left'\n          },\n          children: \"\\u0110\\xE3 \\u0111i\\u1EC3m danh\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 4\n    }, this)\n  }), void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 3\n  }, this);\n};\n\nScheduleOnlineItem.propTypes = {\n  handleChangeValueSchedule: PropTypes.func,\n  handleChangeStatusSchedule: PropTypes.func,\n  handleAheadSchedule: PropTypes.func,\n  //\n  scheduleObj: PropTypes.shape({\n    ID: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    eventName: PropTypes.string,\n    Tiet: PropTypes.shape({\n      CurriculumsDetailID: PropTypes.number,\n      CurriculumsDetailName: PropTypes.string,\n      SubjectID: PropTypes.number\n    }),\n    TeacherID: PropTypes.number,\n    TeacherName: PropTypes.string,\n    CaID: PropTypes.number,\n    CaName: PropTypes.string,\n    StudyTimeID: PropTypes.number,\n    SubjectName: PropTypes.string,\n    Date: PropTypes.string\n  }),\n  isUnavailable: PropTypes.bool,\n  isEditView: PropTypes.bool,\n  isLoading: PropTypes.shape({\n    type: PropTypes.string.isRequired,\n    status: PropTypes.bool.isRequired\n  }),\n  isClickAheadSchedule: PropTypes.bool,\n  //\n  optionTeacherList: optionCommonPropTypes,\n  optionStudyTime: optionCommonPropTypes,\n  //\n  saveBeforeAheadSchedule: PropTypes.bool\n};\nScheduleOnlineItem.defaultProps = {\n  handleChangeValueSchedule: null,\n  handleChangeStatusSchedule: null,\n  handleAheadSchedule: null,\n  //\n  scheduleObj: {},\n  isUnavailable: false,\n  isEditView: false,\n  isLoading: {\n    type: '',\n    status: false\n  },\n  isClickAheadSchedule: false,\n  //\n  optionTeacherList: [],\n  optionStudyTime: [],\n  //\n  saveBeforeAheadSchedule: true\n};\nexport default ScheduleOnlineItem;","map":{"version":3,"sources":["D:/MonaMedia/Project/CodingMentor/CodingMentor-FE/src/components/Global/CreateCourseOnline/ScheduleOnline/ScheduleOnlineItem.tsx"],"names":["yupResolver","Collapse","Spin","Checkbox","moment","PropTypes","React","useEffect","useState","useForm","yup","SelectField","useWrap","optionCommonPropTypes","Panel","ScheduleOnlineItem","props","handleChangeStatusSchedule","handleChangeValueSchedule","handleAheadSchedule","scheduleObj","isLoading","isUnavailable","isEditView","isClickAheadSchedule","optionTeacherList","optionStudyTime","saveBeforeAheadSchedule","isLockSchedule","setIsLockSchedule","userInformation","ID","eventName","Tiet","CaID","TeacherID","Date","TeacherName","SubjectName","StudyTimeID","defaultValuesInit","schema","object","shape","number","min","required","form","defaultValues","resolver","mode","checkHandleChangeStatusSchedule","vl","type","checkHandleChangeValueSchedule","uid","key","setSiblingsFieldToDefault","setValue","checkHandleAheadSchedule","courseScheduleId","teacherId","clearErrors","status","Array","isArray","length","value","RoleID","UserInformationID","TeacherAttendanceID","format","CurriculumsDetailName","color","fontSize","width","textAlign","propTypes","func","oneOfType","string","CurriculumsDetailID","SubjectID","CaName","bool","isRequired","defaultProps"],"mappings":"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","sourcesContent":["import { yupResolver } from '@hookform/resolvers/yup'\r\nimport { Collapse, Spin } from 'antd'\r\nimport Checkbox from 'antd/lib/checkbox/Checkbox'\r\nimport moment from 'moment'\r\nimport PropTypes from 'prop-types'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport * as yup from 'yup'\r\nimport SelectField from '~/components/FormControl/SelectField'\r\nimport { useWrap } from '~/context/wrap'\r\nimport { optionCommonPropTypes } from '~/utils/proptypes'\r\nconst { Panel } = Collapse\r\n\r\n//   scheduleObj = {\r\n//     \"ID\": 1,\r\n//     \"eventName\": \"26/07 - Hữu Minh Teacher 10 [20:00-21:00]-[Phòng 2]\",\r\n//     \"Color\": \"orange\",\r\n//     \"Tiet\": {\r\n//         \"CurriculumsDetailID\": 140,\r\n//         \"CurriculumsDetailName\": \"1: Sinh\"\r\n//     },\r\n//     \"date\": \"2021-07-26\",\r\n//     \"TeacherID\": 1060,\r\n//     \"TeacherName\": \"Hữu Minh Teacher 10[20:00-21:00]\",\r\n//     \"CaID\": 5,\r\n//     \"CaName\": \"Ca: 20:00 - 21:00\",\r\n// }\r\nconst ScheduleOnlineItem = (props) => {\r\n\tconst {\r\n\t\thandleChangeStatusSchedule,\r\n\t\thandleChangeValueSchedule,\r\n\t\thandleAheadSchedule,\r\n\t\t//\r\n\t\tscheduleObj,\r\n\t\tisLoading,\r\n\t\tisUnavailable,\r\n\t\tisEditView,\r\n\t\tisClickAheadSchedule,\r\n\t\t//\r\n\t\toptionTeacherList,\r\n\t\toptionStudyTime,\r\n\t\t//\r\n\t\tsaveBeforeAheadSchedule\r\n\t} = props\r\n\t// IF NOT OWNER SCHEDULE < LOCK\r\n\tconst [isLockSchedule, setIsLockSchedule] = useState(false)\r\n\tconst { userInformation } = useWrap()\r\n\r\n\tconst {\r\n\t\tID,\r\n\t\teventName,\r\n\t\tTiet,\r\n\t\tCaID,\r\n\t\tTeacherID,\r\n\t\t// EDIT\r\n\t\tDate,\r\n\t\tTeacherName,\r\n\t\tSubjectName,\r\n\t\tStudyTimeID\r\n\t} = scheduleObj\r\n\tconst defaultValuesInit = {\r\n\t\tTeacherID: TeacherID,\r\n\t\tStudyTimeID: CaID || StudyTimeID\r\n\t}\r\n\tconst schema = yup.object().shape({\r\n\t\tStudyTimeID: yup.number().min(1, 'Bạn cần chọn ca học').required('Bạn không được để trống'),\r\n\t\tTeacherID: yup.number().min(1, 'Bạn cần chọn giáo viên').required('Bạn không được để trống')\r\n\t})\r\n\tconst form = useForm({\r\n\t\tdefaultValues: defaultValuesInit,\r\n\t\tresolver: yupResolver(schema),\r\n\t\tmode: 'all'\r\n\t})\r\n\r\n\tconst checkHandleChangeStatusSchedule = (vl, type) => {\r\n\t\tif (!handleChangeStatusSchedule) return\r\n\t\thandleChangeStatusSchedule(vl, type)\r\n\t}\r\n\tconst checkHandleChangeValueSchedule = (uid, key, vl) => {\r\n\t\tif (!handleChangeValueSchedule) return\r\n\t\thandleChangeValueSchedule(uid, key, vl)\r\n\t}\r\n\tconst setSiblingsFieldToDefault = () => {\r\n\t\tform.setValue('TeacherID', 0)\r\n\t}\r\n\tconst checkHandleAheadSchedule = (courseScheduleId: number, teacherId: number) => {\r\n\t\tif (!handleAheadSchedule) return\r\n\t\thandleAheadSchedule(courseScheduleId, teacherId)\r\n\t}\r\n\t// CHECK IF VALUE DO NOT IN THE SELECT => CHANGE VALUE TO DEFAULT (0)\r\n\tuseEffect(() => {\r\n\t\tform.clearErrors()\r\n\t\tif (\r\n\t\t\t(isLoading.type === 'CHECK_SCHEDULE' || isLoading.type === 'ADD_DATA') &&\r\n\t\t\t!isLoading.status &&\r\n\t\t\tArray.isArray(optionTeacherList) &&\r\n\t\t\toptionTeacherList.length > 0\r\n\t\t) {\r\n\t\t\tif (isEditView) {\r\n\t\t\t\tform.setValue('TeacherID', TeacherID)\r\n\t\t\t} else {\r\n\t\t\t\tform.setValue('TeacherID', optionTeacherList[0].value)\r\n\t\t\t}\r\n\t\t\tform.setValue('StudyTimeID', CaID || StudyTimeID)\r\n\t\t}\r\n\t}, [scheduleObj, optionTeacherList, isLoading])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetIsLockSchedule(false)\r\n\t\tif (userInformation?.RoleID === 2 && TeacherID !== 0 && TeacherID !== userInformation?.UserInformationID) {\r\n\t\t\tsetIsLockSchedule(true)\r\n\t\t}\r\n\t\tif (scheduleObj?.TeacherAttendanceID !== 0) {\r\n\t\t\tsetIsLockSchedule(true)\r\n\t\t}\r\n\t}, [scheduleObj])\r\n\r\n\treturn (\r\n\t\t<Panel\r\n\t\t\t{...props}\r\n\t\t\theader={\r\n\t\t\t\t<div className=\"info-course-item\">\r\n\t\t\t\t\t{scheduleObj?.TeacherAttendanceID == 0 && (\r\n\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\tonChange={() => {\r\n\t\t\t\t\t\t\t\tif (isUnavailable) {\r\n\t\t\t\t\t\t\t\t\tcheckHandleChangeStatusSchedule(scheduleObj, 2)\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tcheckHandleChangeStatusSchedule(scheduleObj, 1)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tchecked={isUnavailable}\r\n\t\t\t\t\t\t\tdisabled={isLockSchedule}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<p className=\"title\">{eventName || `${moment(Date).format('DD/MM')} - ${TeacherName}`}</p>\r\n\t\t\t\t\t<ul className=\"info-course-list\">\r\n\t\t\t\t\t\t<li>{Tiet?.CurriculumsDetailName || SubjectName}</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t<div className=\"info-course-select\">\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t<SelectField\r\n\t\t\t\t\t\t\tform={form}\r\n\t\t\t\t\t\t\tname=\"StudyTimeID\"\r\n\t\t\t\t\t\t\tplaceholder=\"Chọn ca\"\r\n\t\t\t\t\t\t\toptionList={optionStudyTime}\r\n\t\t\t\t\t\t\tonChangeSelect={(value) => {\r\n\t\t\t\t\t\t\t\tsetSiblingsFieldToDefault()\r\n\t\t\t\t\t\t\t\tcheckHandleChangeValueSchedule(ID, 'CaID', value)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tdisabled={isLockSchedule}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t<SelectField\r\n\t\t\t\t\t\t\tform={form}\r\n\t\t\t\t\t\t\tname=\"TeacherID\"\r\n\t\t\t\t\t\t\tisLoading={isLoading.type === 'CHECK_SCHEDULE' && isLoading.status}\r\n\t\t\t\t\t\t\tplaceholder=\"Chọn giáo viên\"\r\n\t\t\t\t\t\t\toptionList={optionTeacherList}\r\n\t\t\t\t\t\t\tonChangeSelect={(value) => {\r\n\t\t\t\t\t\t\t\tif (isEditView) {\r\n\t\t\t\t\t\t\t\t\tcheckHandleChangeValueSchedule(ID, 'TeacherID', value)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tdisabled={isLockSchedule}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{isEditView &&\r\n\t\t\t\t\t\t!isClickAheadSchedule &&\r\n\t\t\t\t\t\ttypeof ID === 'number' &&\r\n\t\t\t\t\t\tsaveBeforeAheadSchedule &&\r\n\t\t\t\t\t\tscheduleObj?.TeacherAttendanceID == 0 && (\r\n\t\t\t\t\t\t\t<div className=\"col-12 text-right\">\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-secondary\"\r\n\t\t\t\t\t\t\t\t\tdisabled={(isLoading.type === 'AHEAD_SCHEDULE' && isLoading.status) || isLockSchedule}\r\n\t\t\t\t\t\t\t\t\tonClick={() => checkHandleAheadSchedule(ID, TeacherID)}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tLùi buổi học\r\n\t\t\t\t\t\t\t\t\t{isLoading.type === 'AHEAD_SCHEDULE' && isLoading.status && <Spin className=\"loading-base\" />}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t{scheduleObj?.TeacherAttendanceID !== 0 && (\r\n\t\t\t\t\t\t<div style={{ color: '#dd4667', fontSize: 14, width: '100%', textAlign: 'left' }}>Đã điểm danh</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Panel>\r\n\t)\r\n}\r\nScheduleOnlineItem.propTypes = {\r\n\thandleChangeValueSchedule: PropTypes.func,\r\n\thandleChangeStatusSchedule: PropTypes.func,\r\n\thandleAheadSchedule: PropTypes.func,\r\n\t//\r\n\tscheduleObj: PropTypes.shape({\r\n\t\tID: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\teventName: PropTypes.string,\r\n\t\tTiet: PropTypes.shape({\r\n\t\t\tCurriculumsDetailID: PropTypes.number,\r\n\t\t\tCurriculumsDetailName: PropTypes.string,\r\n\t\t\tSubjectID: PropTypes.number\r\n\t\t}),\r\n\t\tTeacherID: PropTypes.number,\r\n\t\tTeacherName: PropTypes.string,\r\n\t\tCaID: PropTypes.number,\r\n\t\tCaName: PropTypes.string,\r\n\t\tStudyTimeID: PropTypes.number,\r\n\t\tSubjectName: PropTypes.string,\r\n\t\tDate: PropTypes.string\r\n\t}),\r\n\tisUnavailable: PropTypes.bool,\r\n\tisEditView: PropTypes.bool,\r\n\tisLoading: PropTypes.shape({\r\n\t\ttype: PropTypes.string.isRequired,\r\n\t\tstatus: PropTypes.bool.isRequired\r\n\t}),\r\n\tisClickAheadSchedule: PropTypes.bool,\r\n\t//\r\n\toptionTeacherList: optionCommonPropTypes,\r\n\toptionStudyTime: optionCommonPropTypes,\r\n\t//\r\n\tsaveBeforeAheadSchedule: PropTypes.bool\r\n}\r\nScheduleOnlineItem.defaultProps = {\r\n\thandleChangeValueSchedule: null,\r\n\thandleChangeStatusSchedule: null,\r\n\thandleAheadSchedule: null,\r\n\t//\r\n\tscheduleObj: {},\r\n\tisUnavailable: false,\r\n\tisEditView: false,\r\n\tisLoading: { type: '', status: false },\r\n\tisClickAheadSchedule: false,\r\n\t//\r\n\toptionTeacherList: [],\r\n\toptionStudyTime: [],\r\n\t//\r\n\tsaveBeforeAheadSchedule: true\r\n}\r\nexport default ScheduleOnlineItem\r\n"]},"metadata":{},"sourceType":"module"}