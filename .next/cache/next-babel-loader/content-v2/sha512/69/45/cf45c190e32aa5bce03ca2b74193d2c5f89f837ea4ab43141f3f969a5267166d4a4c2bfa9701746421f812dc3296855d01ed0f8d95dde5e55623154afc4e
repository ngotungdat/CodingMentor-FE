{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\Teacher\\\\TeacherSalary\\\\teacher-confirm-form.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Form, Modal, Spin, Tooltip } from 'antd';\nimport React, { useState } from 'react';\nimport { teacherSalaryApi } from '~/apiBase/staff-manage/teacher-salary';\nimport { useWrap } from '~/context/wrap';\n\nvar ConfirmForm = function ConfirmForm(_ref) {\n  _s();\n\n  var record = _ref.record,\n      setParams = _ref.setParams,\n      params = _ref.params;\n\n  var _useState = useState(false),\n      isVisible = _useState[0],\n      setIsVisible = _useState[1];\n\n  var _Form$useForm = Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti;\n\n  var _useState2 = useState({\n    type: '',\n    loading: false\n  }),\n      submitLoading = _useState2[0],\n      setSubmitLoading = _useState2[1];\n\n  var dataForm = {\n    ID: record.ID,\n    AdvanceSalary: record.AdvanceSalary,\n    Bonus: record.Bonus,\n    NoteBonus: record.NoteBonus,\n    isClosing: true,\n    StatusID: record.StatusID,\n    isDonePaid: record.isDonePaid\n  };\n\n  var _onSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setSubmitLoading({\n                type: 'UPLOADING',\n                loading: true\n              });\n              _context.prev = 1;\n              _context.next = 4;\n              return teacherSalaryApi.update(_objectSpread(_objectSpread({}, dataForm), {}, {\n                StatusID: record.StatusID == 3 ? 4 : 5\n              }));\n\n            case 4:\n              res = _context.sent;\n\n              if (res.status == 200) {\n                form.resetFields();\n                params && setParams(_objectSpread({}, params));\n                setIsVisible(false);\n              }\n\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](1);\n              showNoti('danger', _context.t0.message);\n\n            case 11:\n              _context.prev = 11;\n              setSubmitLoading({\n                type: 'UPLOADING',\n                loading: false\n              });\n              console.log(dataForm);\n              return _context.finish(11);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 8, 11, 15]]);\n    }));\n\n    return function _onSubmit() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var _getText = function _getText() {\n    return record.StatusID == 3 ? 'Xác Nhận Lương Của Bạn Là Chính Xác' : 'Xác Nhận Đã Thanh Toán Lương';\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [record.StatusID == 1 && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"font-weight-primary\",\n      children: \"Ch\\u01B0a x\\xE1c nh\\u1EADn l\\u01B0\\u01A1ng\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 29\n    }, _this), record.StatusID == 3 && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-icon edit\",\n      onClick: function onClick() {\n        return setIsVisible(true);\n      },\n      children: /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: \"C\\u1EADp nh\\u1EADt\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-edit\",\n          style: {\n            color: '#34c4a4',\n            fontSize: 16,\n            marginBottom: -1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 7\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 6\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }, _this), record.StatusID == 4 && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"font-weight-primary\",\n      children: \"\\u0110\\xE3 x\\xE1c nh\\u1EADn\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 29\n    }, _this), record.StatusID == 5 && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"font-weight-primary\",\n      children: \"\\u0110\\xE3 nh\\u1EADn l\\u01B0\\u01A1ng\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 29\n    }, _this), /*#__PURE__*/_jsxDEV(Modal, {\n      centered: true,\n      title: 'Xác Nhận Lương',\n      onCancel: function onCancel() {\n        return setIsVisible(false);\n      },\n      visible: isVisible,\n      footer: false,\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        form: form,\n        layout: \"vertical\",\n        onFinish: _onSubmit,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12 mb-2 justify-content-center\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center blue bold\",\n              style: {\n                fontSize: 20\n              },\n              children: _getText()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 8\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 7\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12 mt-3\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-primary w-100\",\n              children: [\"X\\xE1c nh\\u1EADn\", submitLoading.type == 'UPLOADING' && submitLoading.loading && /*#__PURE__*/_jsxDEV(Spin, {\n                className: \"loading-base\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 72\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 8\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 7\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 6\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 5\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 4\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(ConfirmForm, \"ebdwO5+58VELmRmUCw96ffVTLkc=\", false, function () {\n  return [Form.useForm, useWrap];\n});\n\n_c = ConfirmForm;\nexport default ConfirmForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"ConfirmForm\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/Teacher/TeacherSalary/teacher-confirm-form.tsx"],"names":["Form","Modal","Spin","Tooltip","React","useState","teacherSalaryApi","useWrap","ConfirmForm","record","setParams","params","isVisible","setIsVisible","useForm","form","showNoti","type","loading","submitLoading","setSubmitLoading","dataForm","ID","AdvanceSalary","Bonus","NoteBonus","isClosing","StatusID","isDonePaid","_onSubmit","update","res","status","resetFields","message","console","log","_getText","color","fontSize","marginBottom"],"mappings":"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","sourcesContent":["import { Form, Modal, Spin, Tooltip } from 'antd'\r\nimport React, { useState } from 'react'\r\nimport { teacherSalaryApi } from '~/apiBase/staff-manage/teacher-salary'\r\nimport { useWrap } from '~/context/wrap'\r\n\r\nconst ConfirmForm = ({ record, setParams, params }) => {\r\n\tconst [isVisible, setIsVisible] = useState(false)\r\n\tconst [form] = Form.useForm()\r\n\tconst { showNoti } = useWrap()\r\n\tconst [submitLoading, setSubmitLoading] = useState({ type: '', loading: false })\r\n\r\n\tconst dataForm = {\r\n\t\tID: record.ID,\r\n\t\tAdvanceSalary: record.AdvanceSalary,\r\n\t\tBonus: record.Bonus,\r\n\t\tNoteBonus: record.NoteBonus,\r\n\t\tisClosing: true,\r\n\t\tStatusID: record.StatusID,\r\n\t\tisDonePaid: record.isDonePaid\r\n\t}\r\n\r\n\tconst _onSubmit = async () => {\r\n\t\tsetSubmitLoading({ type: 'UPLOADING', loading: true })\r\n\t\ttry {\r\n\t\t\tlet res = await teacherSalaryApi.update({ ...dataForm, StatusID: record.StatusID == 3 ? 4 : 5 })\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tform.resetFields()\r\n\t\t\t\tparams && setParams({ ...params })\r\n\t\t\t\tsetIsVisible(false)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetSubmitLoading({ type: 'UPLOADING', loading: false })\r\n\t\t\tconsole.log(dataForm)\r\n\t\t}\r\n\t}\r\n\r\n\tconst _getText = () => {\r\n\t\treturn record.StatusID == 3 ? 'Xác Nhận Lương Của Bạn Là Chính Xác' : 'Xác Nhận Đã Thanh Toán Lương'\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{record.StatusID == 1 && <p className=\"font-weight-primary\">Chưa xác nhận lương</p>}\r\n\t\t\t{record.StatusID == 3 && (\r\n\t\t\t\t<button className=\"btn btn-icon edit\" onClick={() => setIsVisible(true)}>\r\n\t\t\t\t\t<Tooltip title=\"Cập nhật\">\r\n\t\t\t\t\t\t<i className=\"fas fa-edit\" style={{ color: '#34c4a4', fontSize: 16, marginBottom: -1 }}></i>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\t\t\t{record.StatusID == 4 && <p className=\"font-weight-primary\">Đã xác nhận</p>}\r\n\t\t\t{record.StatusID == 5 && <p className=\"font-weight-primary\">Đã nhận lương</p>}\r\n\t\t\t<Modal centered title={'Xác Nhận Lương'} onCancel={() => setIsVisible(false)} visible={isVisible} footer={false}>\r\n\t\t\t\t<Form form={form} layout=\"vertical\" onFinish={_onSubmit}>\r\n\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t<div className=\"col-12 mb-2 justify-content-center\">\r\n\t\t\t\t\t\t\t<div className=\"text-center blue bold\" style={{ fontSize: 20 }}>\r\n\t\t\t\t\t\t\t\t{_getText()}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"col-12 mt-3\">\r\n\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary w-100\">\r\n\t\t\t\t\t\t\t\tXác nhận\r\n\t\t\t\t\t\t\t\t{submitLoading.type == 'UPLOADING' && submitLoading.loading && <Spin className=\"loading-base\" />}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form>\r\n\t\t\t</Modal>\r\n\t\t</>\r\n\t)\r\n}\r\nexport default ConfirmForm\r\n"]},"metadata":{},"sourceType":"module"}