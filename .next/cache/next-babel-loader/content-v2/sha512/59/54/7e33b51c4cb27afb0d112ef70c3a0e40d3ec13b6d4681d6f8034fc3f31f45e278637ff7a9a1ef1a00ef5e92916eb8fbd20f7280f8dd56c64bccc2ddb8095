{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\CodingMentor\\\\CodingMentor-FE\\\\src\\\\components\\\\CourseCalendar\\\\modal-history.tsx\";\nimport { Modal, Tooltip, Spin } from 'antd';\nimport moment from 'moment';\nimport React, { useState, useEffect } from 'react';\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\nimport { useWrap } from '~/context/wrap';\nimport { CalendarApi } from '~/apiBase/Calendar/calendar';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faHistory } from '@fortawesome/free-solid-svg-icons';\nimport PowerTable from '../PowerTable';\nmoment.locale('vi');\n\nconst ModalHistory = props => {\n  const {\n    ID,\n    title\n  } = props;\n  const {\n    showNoti\n  } = useWrap();\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: details,\n    1: setDetails\n  } = useState('');\n  const {\n    0: visible,\n    1: setVisible\n  } = useState(false);\n  useEffect(() => {\n    if (visible) {\n      _getDetails();\n    }\n  }, [visible]);\n\n  const _getDetails = async () => {\n    setLoading(true);\n\n    try {\n      const res = await CalendarApi.getHistory(ID);\n\n      if (res.status == 200 || res.status == 204) {\n        setDetails(res.data.data);\n      }\n    } catch (error) {\n      showNoti('danger', error === null || error === void 0 ? void 0 : error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const columns = [{\n    title: 'Hành động',\n    dataIndex: 'Action',\n    key: 'Action',\n    width: 250,\n    render: text => /*#__PURE__*/_jsxDEV(\"a\", {\n      children: text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 22\n    }, this)\n  }, {\n    title: 'Lý do',\n    dataIndex: 'Reason',\n    key: 'Reason',\n    width: 200,\n    render: text => /*#__PURE__*/_jsxDEV(\"a\", {\n      children: text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 22\n    }, this)\n  }, {\n    title: 'Thời gian',\n    dataIndex: 'CreatedDate',\n    key: 'CreatedDate',\n    width: 100,\n    render: text => /*#__PURE__*/_jsxDEV(\"a\", {\n      children: moment(text).format('DD/MM/YYYY HH:MM')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 22\n    }, this)\n  }, {\n    title: 'Thao tác',\n    dataIndex: 'CreatedByFullName',\n    key: 'CreatedByFullName',\n    width: 150,\n    align: 'right',\n    render: text => /*#__PURE__*/_jsxDEV(\"a\", {\n      children: text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 22\n    }, this)\n  }];\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n      title: \"L\\u1ECBch s\\u1EED thay \\u0111\\u1ED5i\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: () => setVisible(true),\n        children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faHistory,\n          size: \"1x\",\n          color: \"#727272\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        zIndex: 999\n      },\n      children: /*#__PURE__*/_jsxDEV(Modal, {\n        title: 'Lịch sử thay đổi: ' + title,\n        visible: visible,\n        onCancel: () => setVisible(false),\n        footer: null,\n        centered: true,\n        width: 1200,\n        children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '100%',\n            height: '100%',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center'\n          },\n          children: /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 7\n        }, this) : /*#__PURE__*/_jsxDEV(PowerTable, {\n          columns: columns,\n          dataSource: details,\n          pagination: {\n            current: 1,\n            pageSize: 20\n          },\n          size: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n\nexport default ModalHistory;","map":{"version":3,"sources":["D:/MonaMedia/Project/CodingMentor/CodingMentor-FE/src/components/CourseCalendar/modal-history.tsx"],"names":["Modal","Tooltip","Spin","moment","React","useState","useEffect","useWrap","CalendarApi","FontAwesomeIcon","faHistory","PowerTable","locale","ModalHistory","props","ID","title","showNoti","loading","setLoading","details","setDetails","visible","setVisible","_getDetails","res","getHistory","status","data","error","message","columns","dataIndex","key","width","render","text","format","align","zIndex","height","display","alignItems","justifyContent","current","pageSize"],"mappings":"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","sourcesContent":["import { Modal, Tooltip, Spin } from 'antd'\r\nimport moment from 'moment'\r\nimport React, { useState, useEffect } from 'react'\r\nimport 'react-big-calendar/lib/css/react-big-calendar.css'\r\nimport { useWrap } from '~/context/wrap'\r\nimport _ from '~/appConfig'\r\nimport { CalendarApi } from '~/apiBase/Calendar/calendar'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faHistory } from '@fortawesome/free-solid-svg-icons'\r\nimport PowerTable from '../PowerTable'\r\nimport { IconProp } from '@fortawesome/fontawesome-svg-core'\r\n\r\nmoment.locale('vi')\r\n\r\nconst ModalHistory = (props: any) => {\r\n\tconst { ID, title } = props\r\n\tconst { showNoti } = useWrap()\r\n\r\n\tconst [loading, setLoading] = useState<boolean>(false)\r\n\tconst [details, setDetails] = useState<any>('')\r\n\tconst [visible, setVisible] = useState(false)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (visible) {\r\n\t\t\t_getDetails()\r\n\t\t}\r\n\t}, [visible])\r\n\r\n\tconst _getDetails = async () => {\r\n\t\tsetLoading(true)\r\n\t\ttry {\r\n\t\t\tconst res: any = await CalendarApi.getHistory(ID)\r\n\t\t\tif (res.status == 200 || res.status == 204) {\r\n\t\t\t\tsetDetails(res.data.data)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error?.message)\r\n\t\t} finally {\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Hành động',\r\n\t\t\tdataIndex: 'Action',\r\n\t\t\tkey: 'Action',\r\n\t\t\twidth: 250,\r\n\t\t\trender: (text) => <a>{text}</a>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Lý do',\r\n\t\t\tdataIndex: 'Reason',\r\n\t\t\tkey: 'Reason',\r\n\t\t\twidth: 200,\r\n\t\t\trender: (text) => <a>{text}</a>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Thời gian',\r\n\t\t\tdataIndex: 'CreatedDate',\r\n\t\t\tkey: 'CreatedDate',\r\n\t\t\twidth: 100,\r\n\t\t\trender: (text) => <a>{moment(text).format('DD/MM/YYYY HH:MM')}</a>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Thao tác',\r\n\t\t\tdataIndex: 'CreatedByFullName',\r\n\t\t\tkey: 'CreatedByFullName',\r\n\t\t\twidth: 150,\r\n\t\t\talign: 'right',\r\n\t\t\trender: (text) => <a>{text}</a>\r\n\t\t}\r\n\t]\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Tooltip title=\"Lịch sử thay đổi\">\r\n\t\t\t\t<div onClick={() => setVisible(true)}>\r\n\t\t\t\t\t<FontAwesomeIcon icon={faHistory as IconProp} size=\"1x\" color=\"#727272\" />\r\n\t\t\t\t</div>\r\n\t\t\t</Tooltip>\r\n\r\n\t\t\t<div style={{ zIndex: 999 }}>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\ttitle={'Lịch sử thay đổi: ' + title}\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\tonCancel={() => setVisible(false)}\r\n\t\t\t\t\tfooter={null}\r\n\t\t\t\t\tcentered\r\n\t\t\t\t\twidth={1200}\r\n\t\t\t\t>\r\n\t\t\t\t\t{loading ? (\r\n\t\t\t\t\t\t<div style={{ width: '100%', height: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n\t\t\t\t\t\t\t<Spin />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<PowerTable columns={columns} dataSource={details} pagination={{ current: 1, pageSize: 20 }} size=\"small\" />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Modal>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default ModalHistory\r\n"]},"metadata":{},"sourceType":"module"}