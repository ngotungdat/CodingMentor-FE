{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _toConsumableArray from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\pages\\\\staff\\\\staff-list\\\\index.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Tooltip } from 'antd';\nimport moment from 'moment';\nimport React, { useEffect, useState } from 'react';\nimport { areaApi, branchApi, jobApi, parentsApi, puroseApi, sourceInfomationApi, staffApi, staffSalaryApi, userInformationApi } from '~/apiBase';\nimport FilterBase from '~/components/Elements/FilterBase/FilterBase';\nimport SortBox from '~/components/Elements/SortBox';\nimport ExpandTable from '~/components/ExpandTable';\nimport ResetPassForm from '~/components/Global/StaffList/ResetPassForm';\nimport SalaryStaffNested from '~/components/Global/StaffList/SalaryStaffNested';\nimport StaffForm from '~/components/Global/StaffList/StaffForm';\nimport LayoutBase from '~/components/LayoutBase';\nimport FilterColumn from '~/components/Tables/FilterColumn';\nimport { useWrap } from '~/context/wrap';\nimport Link from 'next/link';\nimport { Eye } from 'react-feather';\nvar pageIndex = 1;\nvar listFieldSearch = {\n  pageIndex: 1,\n  FullNameUnicode: null\n};\nvar listFieldFilter = {\n  pageIndex: 1,\n  fromDate: null,\n  toDate: null,\n  RoleID: null,\n  BranchID: null,\n  AreaID: null,\n  StatusID: null\n};\nvar dataOption = [{\n  dataSort: {\n    sort: 0,\n    sortType: false\n  },\n  text: 'Tên Z-A'\n}, {\n  dataSort: {\n    sort: 0,\n    sortType: true\n  },\n  text: 'Tên A-Z '\n}]; // -- FOR DIFFERENT VIEW --\n\nvar optionGender = [{\n  value: 0,\n  title: 'Nữ'\n}, {\n  value: 1,\n  title: 'Nam'\n}, {\n  value: 0,\n  title: 'Khác'\n}];\nvar listApi = [{\n  api: areaApi,\n  text: 'Tỉnh/Tp',\n  name: 'Area'\n}, {\n  api: jobApi,\n  text: 'Công việc',\n  name: 'Job'\n}, {\n  api: puroseApi,\n  text: 'Mục đích học',\n  name: 'Purposes'\n}, {\n  api: branchApi,\n  text: 'Trung tâm',\n  name: 'Branch'\n}, {\n  api: parentsApi,\n  text: 'Phụ huynh',\n  name: 'Parent'\n}, {\n  api: sourceInfomationApi,\n  text: 'Nguồn khách hàng',\n  name: 'SourceInformation'\n}, {\n  api: userInformationApi,\n  text: 'Nguồn khách hàng',\n  name: 'Role'\n}, {\n  api: staffApi,\n  text: 'Nguồn khách hàng',\n  name: 'Counselors'\n}];\n\nvar StaffList = function StaffList() {\n  _s();\n\n  var _useState = useState({\n    Area: [],\n    DistrictID: [],\n    WardID: [],\n    Role: [],\n    Branch: [],\n    Purposes: [],\n    SourceInformation: [],\n    Parent: [],\n    Counselors: []\n  }),\n      listDataForm = _useState[0],\n      setListDataForm = _useState[1];\n\n  var _useState2 = useState(false),\n      isOpenReset = _useState2[0],\n      setIsOpenReset = _useState2[1]; // ------ BASE USESTATE TABLE -------\n\n\n  var _useState3 = useState([]),\n      dataSource = _useState3[0],\n      setDataSource = _useState3[1];\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti,\n      pageSize = _useWrap.pageSize,\n      userInformation = _useWrap.userInformation;\n\n  var listTodoApi = {\n    pageSize: pageSize,\n    pageIndex: pageIndex,\n    sort: null,\n    sortType: null,\n    fromDate: null,\n    toDate: null,\n    FullNameUnicode: null,\n    RoleID: null,\n    BranchID: null,\n    AreaID: null\n  };\n\n  var _useState4 = useState({\n    type: '',\n    status: false\n  }),\n      isLoading = _useState4[0],\n      setIsLoading = _useState4[1];\n\n  var _useState5 = useState(null),\n      totalPage = _useState5[0],\n      setTotalPage = _useState5[1];\n\n  var _useState6 = useState(null),\n      indexRow = _useState6[0],\n      setIndexRow = _useState6[1];\n\n  var _useState7 = useState(1),\n      currentPage = _useState7[0],\n      setCurrentPage = _useState7[1];\n\n  var _useState8 = useState(listTodoApi),\n      todoApi = _useState8[0],\n      setTodoApi = _useState8[1]; // GET LIST ROLES\n\n\n  var _useState9 = useState([{\n    name: 'AreaID',\n    title: 'Tỉnh/TP',\n    col: 'col-md-6 col-12',\n    type: 'select',\n    optionList: null,\n    // Gọi api xong trả data vào đây\n    value: null\n  }, {\n    name: 'BranchID',\n    title: 'Trung tâm',\n    col: 'col-md-6 col-12',\n    type: 'select',\n    optionList: null,\n    value: null\n  }, {\n    name: 'RoleID',\n    title: 'Chức vụ',\n    col: 'col-md-6 col-12',\n    type: 'select',\n    optionList: null,\n    value: null\n  }, {\n    name: 'StatusID',\n    title: 'Trạng thái',\n    col: 'col-md-6 col-12',\n    type: 'select',\n    optionList: [{\n      value: 0,\n      title: 'Hoạt động'\n    }, {\n      value: 1,\n      title: 'Không Hoạt động'\n    }],\n    value: null\n  }, {\n    name: 'date-range',\n    title: 'Từ - đến',\n    col: 'col-12',\n    type: 'date-range',\n    value: null\n  }]),\n      dataFilter = _useState9[0],\n      setDataFilter = _useState9[1]; // FOR STUDENT FORM\n  // ------------- ADD data to list --------------\n\n\n  var makeNewData = function makeNewData(data, name) {\n    var newData = null;\n\n    switch (name) {\n      case 'Area':\n        newData = data.map(function (item) {\n          return {\n            title: item.AreaName,\n            value: item.AreaID\n          };\n        });\n        setDataFunc('AreaID', newData);\n        break;\n\n      case 'DistrictID':\n        newData = data.map(function (item) {\n          return {\n            title: item.DistrictName,\n            value: item.ID\n          };\n        });\n        break;\n\n      case 'WardID':\n        newData = data.map(function (item) {\n          return {\n            title: item.WardName,\n            value: item.ID\n          };\n        });\n        break;\n\n      case 'Branch':\n        newData = data.map(function (item) {\n          return {\n            title: item.BranchName,\n            value: item.ID\n          };\n        });\n        setDataFunc('BranchID', newData);\n        break;\n\n      case 'Job':\n        newData = data.map(function (item) {\n          return {\n            title: item.JobName,\n            value: item.JobID\n          };\n        });\n        break;\n\n      case 'Purposes':\n        newData = data.map(function (item) {\n          return {\n            title: item.PurposesName,\n            value: item.PurposesID\n          };\n        });\n        break;\n\n      case 'Parent':\n        newData = data.map(function (item) {\n          return {\n            title: item.FullNameUnicode,\n            value: item.UserInformationID\n          };\n        });\n        break;\n\n      case 'SourceInformation':\n        newData = data.map(function (item) {\n          return {\n            title: item.SourceInformationName,\n            value: item.SourceInformationID\n          };\n        });\n        setDataFunc('SourceInformationID', newData);\n        break;\n\n      case 'Counselors':\n        newData = data.map(function (item) {\n          return {\n            title: item.FullNameUnicode,\n            value: item.UserInformationID\n          };\n        });\n        break;\n\n      case 'Role':\n        newData = data.map(function (item) {\n          return {\n            title: item.name,\n            value: item.ID\n          };\n        });\n        break;\n\n      default:\n        break;\n    }\n\n    return newData;\n  };\n\n  var getDataTolist = function getDataTolist(data, name) {\n    var newData = makeNewData(data, name);\n    Object.keys(listDataForm).forEach(function (key) {\n      if (key == name) {\n        listDataForm[key] = newData;\n      }\n    });\n    setListDataForm(_objectSpread({}, listDataForm));\n  }; // ----------- GET DATA SOURCE ---------------\n\n\n  var getDataStudentForm = function getDataStudentForm(arrApi) {\n    arrApi.forEach(function (item, index) {\n      ;\n\n      _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                res = null;\n                _context.prev = 1;\n\n                if (!(item.name == 'Counselors')) {\n                  _context.next = 8;\n                  break;\n                }\n\n                _context.next = 5;\n                return item.api.getAll({\n                  pageIndex: 1,\n                  pageSize: 99999,\n                  RoleID: 6,\n                  StatusID: 0,\n                  Enable: true\n                });\n\n              case 5:\n                res = _context.sent;\n                _context.next = 17;\n                break;\n\n              case 8:\n                if (!(item.name == 'Role')) {\n                  _context.next = 14;\n                  break;\n                }\n\n                _context.next = 11;\n                return item.api.getRole(1);\n\n              case 11:\n                res = _context.sent;\n                _context.next = 17;\n                break;\n\n              case 14:\n                _context.next = 16;\n                return item.api.getAll({\n                  pageIndex: 1,\n                  pageSize: 99999,\n                  Enable: true\n                });\n\n              case 16:\n                res = _context.sent;\n\n              case 17:\n                res.status == 200 && getDataTolist(res.data.data, item.name);\n                res.status == 204 && console.log(item.text + ' Không có dữ liệu');\n                _context.next = 24;\n                break;\n\n              case 21:\n                _context.prev = 21;\n                _context.t0 = _context[\"catch\"](1);\n                console.log(_context.t0);\n\n              case 24:\n                _context.prev = 24;\n                return _context.finish(24);\n\n              case 26:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 21, 24, 26]]);\n      }))();\n    });\n  }; // GET DATA SOURCE\n\n\n  var getDataSource = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setIsLoading({\n                type: 'GET_ALL',\n                status: true\n              });\n              _context2.prev = 1;\n              _context2.next = 4;\n              return staffApi.getAll(todoApi);\n\n            case 4:\n              res = _context2.sent;\n              res.status == 200 && (setDataSource(res.data.data), setTotalPage(res.data.totalRow));\n              res.status == 204 && setDataSource([]);\n              _context2.next = 12;\n              break;\n\n            case 9:\n              _context2.prev = 9;\n              _context2.t0 = _context2[\"catch\"](1);\n              showNoti('danger', _context2.t0.message);\n\n            case 12:\n              _context2.prev = 12;\n              setIsLoading({\n                type: 'GET_ALL',\n                status: false\n              });\n              return _context2.finish(12);\n\n            case 15:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 9, 12, 15]]);\n    }));\n\n    return function getDataSource() {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // ------ SET DATA FUN ------\n\n\n  var setDataFunc = function setDataFunc(name, data) {\n    dataFilter.every(function (item, index) {\n      if (item.name == name) {\n        item.optionList = data;\n        return false;\n      }\n\n      return true;\n    });\n    setDataFilter(_toConsumableArray(dataFilter));\n  }; // ---------------- AFTER SUBMIT -----------------\n\n\n  var afterPost = function afterPost(mes) {\n    // showNoti(\"success\", \"Thêm nhân viên thành công\");\n    setTodoApi(_objectSpread(_objectSpread({}, listTodoApi), {}, {\n      pageIndex: 1\n    }));\n    setCurrentPage(1);\n  }; // ----------- SUBMI FORM ------------\n\n\n  var returnBranchName = function returnBranchName(branchID) {\n    var newArr = [];\n    var listID = branchID.split(',');\n    listID.forEach(function (item) {\n      var newObj = {\n        ID: parseInt(item),\n        BranchName: listDataForm === null || listDataForm === void 0 ? void 0 : listDataForm.Branch.find(function (a) {\n          return a.value === parseInt(item);\n        }).title\n      };\n      newObj && newArr.push(newObj);\n    });\n    return newArr;\n  };\n\n  var _onSubmitSalary = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              setIsLoading({\n                type: 'ADD_DATA',\n                status: true\n              });\n              res = null;\n              _context3.prev = 2;\n              _context3.next = 5;\n              return staffSalaryApi.update(data);\n\n            case 5:\n              res = _context3.sent;\n\n              if (res.status == 200) {\n                showNoti('success', 'Thêm lương thành công');\n              }\n\n              _context3.next = 12;\n              break;\n\n            case 9:\n              _context3.prev = 9;\n              _context3.t0 = _context3[\"catch\"](2);\n              showNoti('danger', _context3.t0.message);\n\n            case 12:\n              _context3.prev = 12;\n              setIsLoading({\n                type: 'ADD_DATA',\n                status: false\n              });\n              return _context3.finish(12);\n\n            case 15:\n              return _context3.abrupt(\"return\", res);\n\n            case 16:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[2, 9, 12, 15]]);\n    }));\n\n    return function onSubmitSalary(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var _onSubmit = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(data) {\n      var res, _res;\n\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              if (typeof data.Branch != 'undefined') {\n                data.Branch = data.Branch.toString();\n              } else {\n                data.Branch = '';\n              }\n\n              setIsLoading({\n                type: 'ADD_DATA',\n                status: true\n              });\n              res = null;\n              _context4.prev = 3;\n\n              if (!data.UserInformationID) {\n                _context4.next = 11;\n                break;\n              }\n\n              _context4.next = 7;\n              return staffApi.update(data);\n\n            case 7:\n              res = _context4.sent;\n\n              if (res.status == 200) {\n                // let newDataSource = [...dataSource];\n                // newDataSource.splice(indexRow, 1, {\n                // \t...data,\n                // \tBranch: returnBranchName(data.Branch),\n                // \tRoleName: dataRoles.find((item) => item.value == data.RoleID)?.title\n                // });\n                // setDataSource(newDataSource);\n                setTodoApi(_objectSpread({}, todoApi));\n                showNoti('success', res.data.message);\n              }\n\n              _context4.next = 15;\n              break;\n\n            case 11:\n              _context4.next = 13;\n              return staffApi.add(data);\n\n            case 13:\n              res = _context4.sent;\n              ((_res = res) === null || _res === void 0 ? void 0 : _res.status) == 200 && afterPost(res.data.message);\n\n            case 15:\n              _context4.next = 20;\n              break;\n\n            case 17:\n              _context4.prev = 17;\n              _context4.t0 = _context4[\"catch\"](3);\n              showNoti('danger', _context4.t0.message);\n\n            case 20:\n              _context4.prev = 20;\n              setIsLoading({\n                type: 'ADD_DATA',\n                status: false\n              });\n              return _context4.finish(20);\n\n            case 23:\n              return _context4.abrupt(\"return\", res);\n\n            case 24:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[3, 17, 20, 23]]);\n    }));\n\n    return function onSubmit(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }(); // -------------- CHECK FIELD ---------------------\n\n\n  var checkField = function checkField(valueSearch, dataIndex) {\n    var newList = _objectSpread({}, listFieldSearch);\n\n    Object.keys(newList).forEach(function (key) {\n      if (key != dataIndex) {\n        if (key != 'pageIndex') {\n          newList[key] = null;\n        }\n      } else {\n        newList[key] = valueSearch;\n      }\n    });\n    return newList;\n  }; // -------------- HANDLE FILTER ------------------\n\n\n  var _handleFilter = function handleFilter(listFilter) {\n    var newListFilter = _objectSpread({}, listFieldFilter);\n\n    listFilter.forEach(function (item, index) {\n      var key = item.name;\n      Object.keys(newListFilter).forEach(function (keyFilter) {\n        if (keyFilter == key) {\n          newListFilter[key] = item.value;\n        }\n      });\n    });\n    setTodoApi(_objectSpread(_objectSpread(_objectSpread({}, listTodoApi), newListFilter), {}, {\n      pageIndex: 1\n    }));\n  }; // --------------- HANDLE SORT ----------------------\n\n\n  var _handleSort = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(option) {\n      var newTodoApi;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              newTodoApi = _objectSpread(_objectSpread({}, listTodoApi), {}, {\n                pageIndex: 1,\n                sort: option.title.sort,\n                sortType: option.title.sortType\n              });\n              setCurrentPage(1), setTodoApi(newTodoApi);\n\n            case 2:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function handleSort(_x3) {\n      return _ref5.apply(this, arguments);\n    };\n  }(); // ------------ ON SEARCH -----------------------\n\n\n  var onSearch = function onSearch(valueSearch, dataIndex) {\n    var clearKey = dataIndex == 'FullNameUnicode' ? {\n      FullNameUnicode: valueSearch\n    } : dataIndex == 'ChineseName' ? {\n      ChineseName: valueSearch\n    } : dataIndex == 'Mobile' ? {\n      Mobile: valueSearch\n    } : {\n      Email: valueSearch\n    };\n    setTodoApi(_objectSpread(_objectSpread(_objectSpread({}, todoApi), clearKey), listFieldFilter));\n  }; // HANDLE RESET\n\n\n  var resetListFieldSearch = function resetListFieldSearch() {\n    Object.keys(listFieldSearch).forEach(function (key) {\n      if (key != 'pageIndex') {\n        listFieldSearch[key] = null;\n      }\n    });\n  };\n\n  var handleReset = function handleReset() {\n    setTodoApi(_objectSpread(_objectSpread({}, listTodoApi), {}, {\n      pageIndex: 1\n    }));\n    setCurrentPage(1), resetListFieldSearch();\n  }; // -------------- GET PAGE_NUMBER -----------------\n\n\n  var _getPagination = function getPagination(pageNumber) {\n    pageIndex = pageNumber;\n    setCurrentPage(pageNumber);\n    setTodoApi(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, todoApi), listFieldSearch), listFieldFilter), {}, {\n      pageIndex: pageIndex\n    }));\n  }; // ============== USE EFFECT - FETCH DATA ===================\n\n\n  useEffect(function () {\n    getDataSource();\n  }, [todoApi]);\n  useEffect(function () {\n    getDataStudentForm(listApi);\n  }, []);\n\n  var _onSubmitPromoteStaff = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(data) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              setIsLoading({\n                type: 'PROMOTE',\n                status: true\n              });\n              _context6.prev = 1;\n              _context6.next = 4;\n              return staffApi.update({\n                RoleID: 2,\n                UserInformationID: data\n              });\n\n            case 4:\n              res = _context6.sent;\n\n              if (!(res.status == 200)) {\n                _context6.next = 9;\n                break;\n              }\n\n              setTodoApi(_objectSpread({}, todoApi));\n              showNoti('success', 'Chuyển vị trí thành công!');\n              return _context6.abrupt(\"return\", true);\n\n            case 9:\n              _context6.next = 14;\n              break;\n\n            case 11:\n              _context6.prev = 11;\n              _context6.t0 = _context6[\"catch\"](1);\n              showNoti('danger', _context6.t0.message);\n\n            case 14:\n              _context6.prev = 14;\n              setIsLoading({\n                type: 'PROMOTE',\n                status: false\n              });\n              return _context6.finish(14);\n\n            case 17:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6, null, [[1, 11, 14, 17]]);\n    }));\n\n    return function _onSubmitPromoteStaff(_x4) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  var columns = [{\n    width: 120,\n    title: 'Mã',\n    dataIndex: 'UserCode',\n    fixed: 'left'\n  }, _objectSpread(_objectSpread({\n    title: 'Họ tên',\n    dataIndex: 'FullNameUnicode',\n    fixed: 'left',\n    width: 200\n  }, FilterColumn('FullNameUnicode', onSearch, handleReset, 'text')), {}, {\n    render: function render(text) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-black\",\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 609,\n        columnNumber: 22\n      }, _this);\n    }\n  }), {\n    width: 100,\n    title: 'Giới tính',\n    dataIndex: 'Gender',\n    render: function render(gender) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: gender == 0 ? 'Nữ' : gender == 1 ? 'Nam' : 'Khác'\n      }, void 0, false);\n    }\n  }, {\n    width: 100,\n    title: 'Tài khoản',\n    dataIndex: 'UserName'\n  }, {\n    title: 'Email',\n    width: 100,\n    dataIndex: 'Email',\n    render: function render(text) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-black\",\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 626,\n        columnNumber: 22\n      }, _this);\n    }\n  }, {\n    title: 'Vị trí',\n    width: 120,\n    dataIndex: 'RoleName'\n  }, {\n    width: 150,\n    title: 'Ngày nhận việc',\n    dataIndex: 'Jobdate',\n    render: function render(date) {\n      return date && moment(date).format('DD/MM/YYYY');\n    }\n  }, {\n    width: 150,\n    title: 'Facebook',\n    dataIndex: 'LinkFaceBook',\n    render: function render(link) {\n      return link && /*#__PURE__*/_jsxDEV(\"a\", {\n        className: \"font-weight-black\",\n        href: link,\n        target: \"_blank\",\n        children: \"Link\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 645,\n        columnNumber: 6\n      }, _this);\n    }\n  }, {\n    title: 'Trạng thái',\n    width: 150,\n    dataIndex: 'StatusID',\n    className: 'text-center',\n    render: function render(status) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"tag \".concat(status == 0 ? 'green' : 'gray'),\n          children: status == 0 ? 'Hoạt động' : 'Khóa'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 655,\n          columnNumber: 27\n        }, _this)\n      }, void 0, false);\n    }\n  }, {\n    title: '',\n    dataIndex: '',\n    width: userInformation !== null && (userInformation === null || userInformation === void 0 ? void 0 : userInformation.RoleID) === 5 ? 0 : 180,\n    render: function render(text, data, index) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: userInformation !== null && (userInformation === null || userInformation === void 0 ? void 0 : userInformation.RoleID) !== 5 && /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: function onClick(e) {\n            return e.stopPropagation();\n          },\n          children: [/*#__PURE__*/_jsxDEV(StaffForm, {\n            getIndex: function getIndex() {\n              return setIndexRow(index);\n            },\n            index: index,\n            rowData: data,\n            rowID: data.UserInformationID,\n            isLoading: isLoading,\n            onSubmit: function onSubmit(data) {\n              return _onSubmit(data);\n            },\n            onSubmitSalary: function onSubmitSalary(data) {\n              return _onSubmitSalary(data);\n            },\n            listDataForm: listDataForm\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 665,\n            columnNumber: 8\n          }, _this), /*#__PURE__*/_jsxDEV(ResetPassForm, {\n            dataRow: data\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 675,\n            columnNumber: 8\n          }, _this), data.RoleID === 5 && /*#__PURE__*/_jsxDEV(Link, {\n            href: {\n              pathname: '/staff/teacher-list/teacher-detail/[slug]',\n              query: {\n                slug: data.UserInformationID\n              }\n            },\n            children: /*#__PURE__*/_jsxDEV(Tooltip, {\n              title: \"Chi ti\\u1EBFt gi\\u1EA3ng d\\u1EA1y\",\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                className: \"btn btn-icon\",\n                children: /*#__PURE__*/_jsxDEV(Eye, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 685,\n                  columnNumber: 12\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 684,\n                columnNumber: 11\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 683,\n              columnNumber: 10\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 677,\n            columnNumber: 9\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 664,\n          columnNumber: 7\n        }, _this)\n      }, void 0, false);\n    }\n  }];\n\n  var expandedRowRender = function expandedRowRender(data) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(SalaryStaffNested, {\n        staffID: data.UserInformationID\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 708,\n        columnNumber: 5\n      }, _this)\n    }, void 0, false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(ExpandTable, {\n      currentPage: currentPage,\n      totalPage: totalPage && totalPage,\n      getPagination: function getPagination(pageNumber) {\n        return _getPagination(pageNumber);\n      },\n      loading: isLoading,\n      addClass: \"basic-header\",\n      columns: columns,\n      dataSource: dataSource,\n      TitlePage: \"Danh s\\xE1ch nh\\xE2n vi\\xEAn\",\n      TitleCard: userInformation !== null && (userInformation === null || userInformation === void 0 ? void 0 : userInformation.RoleID) !== 5 ? /*#__PURE__*/_jsxDEV(StaffForm, {\n        isLoading: isLoading,\n        onSubmit: function onSubmit(data) {\n          return _onSubmit(data);\n        },\n        listDataForm: listDataForm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 726,\n        columnNumber: 7\n      }, _this) : null,\n      Extra: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"extra-table\",\n        children: [/*#__PURE__*/_jsxDEV(FilterBase, {\n          dataFilter: dataFilter,\n          handleFilter: function handleFilter(listFilter) {\n            return _handleFilter(listFilter);\n          },\n          handleReset: handleReset\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 731,\n          columnNumber: 7\n        }, _this), /*#__PURE__*/_jsxDEV(SortBox, {\n          handleSort: function handleSort(value) {\n            return _handleSort(value);\n          },\n          dataOption: dataOption\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 732,\n          columnNumber: 7\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 730,\n        columnNumber: 6\n      }, _this),\n      expandable: {\n        expandedRowRender: expandedRowRender\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 715,\n      columnNumber: 4\n    }, _this)\n  }, void 0, false);\n};\n\n_s(StaffList, \"1TgQIzgzb1VDQO+835zL1UIG+mc=\", false, function () {\n  return [useWrap];\n});\n\n_c = StaffList;\nStaffList.layout = LayoutBase;\nexport default StaffList;\n\nvar _c;\n\n$RefreshReg$(_c, \"StaffList\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/pages/staff/staff-list/index.tsx"],"names":["Tooltip","moment","React","useEffect","useState","areaApi","branchApi","jobApi","parentsApi","puroseApi","sourceInfomationApi","staffApi","staffSalaryApi","userInformationApi","FilterBase","SortBox","ExpandTable","ResetPassForm","SalaryStaffNested","StaffForm","LayoutBase","FilterColumn","useWrap","Link","Eye","pageIndex","listFieldSearch","FullNameUnicode","listFieldFilter","fromDate","toDate","RoleID","BranchID","AreaID","StatusID","dataOption","dataSort","sort","sortType","text","optionGender","value","title","listApi","api","name","StaffList","Area","DistrictID","WardID","Role","Branch","Purposes","SourceInformation","Parent","Counselors","listDataForm","setListDataForm","isOpenReset","setIsOpenReset","dataSource","setDataSource","showNoti","pageSize","userInformation","listTodoApi","type","status","isLoading","setIsLoading","totalPage","setTotalPage","indexRow","setIndexRow","currentPage","setCurrentPage","todoApi","setTodoApi","col","optionList","dataFilter","setDataFilter","makeNewData","data","newData","map","item","AreaName","setDataFunc","DistrictName","ID","WardName","BranchName","JobName","JobID","PurposesName","PurposesID","UserInformationID","SourceInformationName","SourceInformationID","getDataTolist","Object","keys","forEach","key","getDataStudentForm","arrApi","index","res","getAll","Enable","getRole","console","log","getDataSource","totalRow","message","every","afterPost","mes","returnBranchName","branchID","newArr","listID","split","newObj","parseInt","find","a","push","onSubmitSalary","update","onSubmit","toString","add","checkField","valueSearch","dataIndex","newList","handleFilter","listFilter","newListFilter","keyFilter","handleSort","option","newTodoApi","onSearch","clearKey","ChineseName","Mobile","Email","resetListFieldSearch","handleReset","getPagination","pageNumber","_onSubmitPromoteStaff","columns","width","fixed","render","gender","date","format","link","className","e","stopPropagation","pathname","query","slug","expandedRowRender","layout"],"mappings":"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","sourcesContent":["import { Tooltip } from 'antd'\r\nimport moment from 'moment'\r\nimport React, { useEffect, useState } from 'react'\r\nimport {\r\n\tareaApi,\r\n\tbranchApi,\r\n\tjobApi,\r\n\tparentsApi,\r\n\tpuroseApi,\r\n\tsourceInfomationApi,\r\n\tstaffApi,\r\n\tstaffSalaryApi,\r\n\tuserInformationApi\r\n} from '~/apiBase'\r\nimport FilterBase from '~/components/Elements/FilterBase/FilterBase'\r\nimport SortBox from '~/components/Elements/SortBox'\r\nimport ExpandTable from '~/components/ExpandTable'\r\nimport ResetPassForm from '~/components/Global/StaffList/ResetPassForm'\r\nimport SalaryStaffNested from '~/components/Global/StaffList/SalaryStaffNested'\r\nimport StaffForm from '~/components/Global/StaffList/StaffForm'\r\nimport LayoutBase from '~/components/LayoutBase'\r\nimport FilterColumn from '~/components/Tables/FilterColumn'\r\nimport { useWrap } from '~/context/wrap'\r\nimport Link from 'next/link'\r\nimport { Eye } from 'react-feather'\r\n\r\nlet pageIndex = 1\r\n\r\ninterface dataRoles {\r\n\ttitle: string\r\n\tvalue: number\r\n}\r\n\r\nlet listFieldSearch = {\r\n\tpageIndex: 1,\r\n\tFullNameUnicode: null\r\n}\r\n\r\nlet listFieldFilter = {\r\n\tpageIndex: 1,\r\n\tfromDate: null,\r\n\ttoDate: null,\r\n\tRoleID: null,\r\n\tBranchID: null,\r\n\tAreaID: null,\r\n\tStatusID: null\r\n}\r\n\r\nconst dataOption = [\r\n\t{\r\n\t\tdataSort: {\r\n\t\t\tsort: 0,\r\n\t\t\tsortType: false\r\n\t\t},\r\n\t\ttext: 'Tên Z-A'\r\n\t},\r\n\t{\r\n\t\tdataSort: {\r\n\t\t\tsort: 0,\r\n\t\t\tsortType: true\r\n\t\t},\r\n\t\ttext: 'Tên A-Z '\r\n\t}\r\n]\r\n\r\n// -- FOR DIFFERENT VIEW --\r\n\r\ninterface objData {\r\n\ttitle: string\r\n\tvalue: number\r\n}\r\n\r\ninterface listDataForm {\r\n\tArea: Array<objData>\r\n\tDistrictID: Array<objData>\r\n\tWardID: Array<objData>\r\n\tRole: Array<objData>\r\n\tBranch: Array<objData>\r\n\tPurposes: Array<objData>\r\n\tSourceInformation: Array<objData>\r\n\tParent: Array<objData>\r\n\tCounselors: Array<objData>\r\n}\r\n\r\nconst optionGender = [\r\n\t{\r\n\t\tvalue: 0,\r\n\t\ttitle: 'Nữ'\r\n\t},\r\n\t{\r\n\t\tvalue: 1,\r\n\t\ttitle: 'Nam'\r\n\t},\r\n\t{\r\n\t\tvalue: 0,\r\n\t\ttitle: 'Khác'\r\n\t}\r\n]\r\n\r\nconst listApi = [\r\n\t{\r\n\t\tapi: areaApi,\r\n\t\ttext: 'Tỉnh/Tp',\r\n\t\tname: 'Area'\r\n\t},\r\n\r\n\t{\r\n\t\tapi: jobApi,\r\n\t\ttext: 'Công việc',\r\n\t\tname: 'Job'\r\n\t},\r\n\t{\r\n\t\tapi: puroseApi,\r\n\t\ttext: 'Mục đích học',\r\n\t\tname: 'Purposes'\r\n\t},\r\n\t{\r\n\t\tapi: branchApi,\r\n\t\ttext: 'Trung tâm',\r\n\t\tname: 'Branch'\r\n\t},\r\n\t{\r\n\t\tapi: parentsApi,\r\n\t\ttext: 'Phụ huynh',\r\n\t\tname: 'Parent'\r\n\t},\r\n\t{\r\n\t\tapi: sourceInfomationApi,\r\n\t\ttext: 'Nguồn khách hàng',\r\n\t\tname: 'SourceInformation'\r\n\t},\r\n\t{\r\n\t\tapi: userInformationApi,\r\n\t\ttext: 'Nguồn khách hàng',\r\n\t\tname: 'Role'\r\n\t},\r\n\t{\r\n\t\tapi: staffApi,\r\n\t\ttext: 'Nguồn khách hàng',\r\n\t\tname: 'Counselors'\r\n\t}\r\n]\r\n\r\nconst StaffList = () => {\r\n\tconst [listDataForm, setListDataForm] = useState<listDataForm>({\r\n\t\tArea: [],\r\n\t\tDistrictID: [],\r\n\t\tWardID: [],\r\n\t\tRole: [],\r\n\t\tBranch: [],\r\n\t\tPurposes: [],\r\n\t\tSourceInformation: [],\r\n\t\tParent: [],\r\n\t\tCounselors: []\r\n\t})\r\n\r\n\tconst [isOpenReset, setIsOpenReset] = useState(false)\r\n\r\n\t// ------ BASE USESTATE TABLE -------\r\n\r\n\tconst [dataSource, setDataSource] = useState<IStaff[]>([])\r\n\tconst { showNoti, pageSize, userInformation } = useWrap()\r\n\tconst listTodoApi = {\r\n\t\tpageSize: pageSize,\r\n\t\tpageIndex: pageIndex,\r\n\t\tsort: null,\r\n\t\tsortType: null,\r\n\t\tfromDate: null,\r\n\t\ttoDate: null,\r\n\t\tFullNameUnicode: null,\r\n\t\tRoleID: null,\r\n\t\tBranchID: null,\r\n\t\tAreaID: null\r\n\t}\r\n\tconst [isLoading, setIsLoading] = useState({\r\n\t\ttype: '',\r\n\t\tstatus: false\r\n\t})\r\n\tconst [totalPage, setTotalPage] = useState(null)\r\n\tconst [indexRow, setIndexRow] = useState(null)\r\n\tconst [currentPage, setCurrentPage] = useState(1)\r\n\tconst [todoApi, setTodoApi] = useState(listTodoApi)\r\n\t// GET LIST ROLES\r\n\r\n\tconst [dataFilter, setDataFilter] = useState([\r\n\t\t{\r\n\t\t\tname: 'AreaID',\r\n\t\t\ttitle: 'Tỉnh/TP',\r\n\t\t\tcol: 'col-md-6 col-12',\r\n\t\t\ttype: 'select',\r\n\t\t\toptionList: null, // Gọi api xong trả data vào đây\r\n\t\t\tvalue: null\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'BranchID',\r\n\t\t\ttitle: 'Trung tâm',\r\n\t\t\tcol: 'col-md-6 col-12',\r\n\t\t\ttype: 'select',\r\n\t\t\toptionList: null,\r\n\t\t\tvalue: null\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'RoleID',\r\n\t\t\ttitle: 'Chức vụ',\r\n\t\t\tcol: 'col-md-6 col-12',\r\n\t\t\ttype: 'select',\r\n\t\t\toptionList: null,\r\n\t\t\tvalue: null\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'StatusID',\r\n\t\t\ttitle: 'Trạng thái',\r\n\t\t\tcol: 'col-md-6 col-12',\r\n\t\t\ttype: 'select',\r\n\t\t\toptionList: [\r\n\t\t\t\t{\r\n\t\t\t\t\tvalue: 0,\r\n\t\t\t\t\ttitle: 'Hoạt động'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tvalue: 1,\r\n\t\t\t\t\ttitle: 'Không Hoạt động'\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tvalue: null\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'date-range',\r\n\t\t\ttitle: 'Từ - đến',\r\n\t\t\tcol: 'col-12',\r\n\t\t\ttype: 'date-range',\r\n\t\t\tvalue: null\r\n\t\t}\r\n\t])\r\n\r\n\t// FOR STUDENT FORM\r\n\t// ------------- ADD data to list --------------\r\n\r\n\tconst makeNewData = (data, name) => {\r\n\t\tlet newData = null\r\n\t\tswitch (name) {\r\n\t\t\tcase 'Area':\r\n\t\t\t\tnewData = data.map((item) => ({\r\n\t\t\t\t\ttitle: item.AreaName,\r\n\t\t\t\t\tvalue: item.AreaID\r\n\t\t\t\t}))\r\n\t\t\t\tsetDataFunc('AreaID', newData)\r\n\t\t\t\tbreak\r\n\t\t\tcase 'DistrictID':\r\n\t\t\t\tnewData = data.map((item) => ({\r\n\t\t\t\t\ttitle: item.DistrictName,\r\n\t\t\t\t\tvalue: item.ID\r\n\t\t\t\t}))\r\n\t\t\t\tbreak\r\n\t\t\tcase 'WardID':\r\n\t\t\t\tnewData = data.map((item) => ({\r\n\t\t\t\t\ttitle: item.WardName,\r\n\t\t\t\t\tvalue: item.ID\r\n\t\t\t\t}))\r\n\t\t\t\tbreak\r\n\t\t\tcase 'Branch':\r\n\t\t\t\tnewData = data.map((item) => ({\r\n\t\t\t\t\ttitle: item.BranchName,\r\n\t\t\t\t\tvalue: item.ID\r\n\t\t\t\t}))\r\n\t\t\t\tsetDataFunc('BranchID', newData)\r\n\t\t\t\tbreak\r\n\t\t\tcase 'Job':\r\n\t\t\t\tnewData = data.map((item) => ({\r\n\t\t\t\t\ttitle: item.JobName,\r\n\t\t\t\t\tvalue: item.JobID\r\n\t\t\t\t}))\r\n\t\t\t\tbreak\r\n\t\t\tcase 'Purposes':\r\n\t\t\t\tnewData = data.map((item) => ({\r\n\t\t\t\t\ttitle: item.PurposesName,\r\n\t\t\t\t\tvalue: item.PurposesID\r\n\t\t\t\t}))\r\n\t\t\t\tbreak\r\n\t\t\tcase 'Parent':\r\n\t\t\t\tnewData = data.map((item) => ({\r\n\t\t\t\t\ttitle: item.FullNameUnicode,\r\n\t\t\t\t\tvalue: item.UserInformationID\r\n\t\t\t\t}))\r\n\t\t\t\tbreak\r\n\t\t\tcase 'SourceInformation':\r\n\t\t\t\tnewData = data.map((item) => ({\r\n\t\t\t\t\ttitle: item.SourceInformationName,\r\n\t\t\t\t\tvalue: item.SourceInformationID\r\n\t\t\t\t}))\r\n\t\t\t\tsetDataFunc('SourceInformationID', newData)\r\n\t\t\t\tbreak\r\n\t\t\tcase 'Counselors':\r\n\t\t\t\tnewData = data.map((item) => ({\r\n\t\t\t\t\ttitle: item.FullNameUnicode,\r\n\t\t\t\t\tvalue: item.UserInformationID\r\n\t\t\t\t}))\r\n\t\t\t\tbreak\r\n\t\t\tcase 'Role':\r\n\t\t\t\tnewData = data.map((item) => ({\r\n\t\t\t\t\ttitle: item.name,\r\n\t\t\t\t\tvalue: item.ID\r\n\t\t\t\t}))\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tbreak\r\n\t\t}\r\n\r\n\t\treturn newData\r\n\t}\r\n\r\n\tconst getDataTolist = (data: any, name: any) => {\r\n\t\tlet newData = makeNewData(data, name)\r\n\r\n\t\tObject.keys(listDataForm).forEach(function (key) {\r\n\t\t\tif (key == name) {\r\n\t\t\t\tlistDataForm[key] = newData\r\n\t\t\t}\r\n\t\t})\r\n\t\tsetListDataForm({ ...listDataForm })\r\n\t}\r\n\r\n\t// ----------- GET DATA SOURCE ---------------\r\n\tconst getDataStudentForm = (arrApi) => {\r\n\t\tarrApi.forEach((item, index) => {\r\n\t\t\t;(async () => {\r\n\t\t\t\tlet res = null\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (item.name == 'Counselors') {\r\n\t\t\t\t\t\tres = await item.api.getAll({\r\n\t\t\t\t\t\t\tpageIndex: 1,\r\n\t\t\t\t\t\t\tpageSize: 99999,\r\n\t\t\t\t\t\t\tRoleID: 6,\r\n\t\t\t\t\t\t\tStatusID: 0,\r\n\t\t\t\t\t\t\tEnable: true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (item.name == 'Role') {\r\n\t\t\t\t\t\tres = await item.api.getRole(1)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tres = await item.api.getAll({\r\n\t\t\t\t\t\t\tpageIndex: 1,\r\n\t\t\t\t\t\t\tpageSize: 99999,\r\n\t\t\t\t\t\t\tEnable: true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tres.status == 200 && getDataTolist(res.data.data, item.name)\r\n\r\n\t\t\t\t\tres.status == 204 && console.log(item.text + ' Không có dữ liệu')\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.log(error)\r\n\t\t\t\t} finally {\r\n\t\t\t\t}\r\n\t\t\t})()\r\n\t\t})\r\n\t}\r\n\r\n\t// GET DATA SOURCE\r\n\tconst getDataSource = async () => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'GET_ALL',\r\n\t\t\tstatus: true\r\n\t\t})\r\n\r\n\t\ttry {\r\n\t\t\tlet res = await staffApi.getAll(todoApi)\r\n\t\t\tres.status == 200 && (setDataSource(res.data.data), setTotalPage(res.data.totalRow))\r\n\t\t\tres.status == 204 && setDataSource([])\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'GET_ALL',\r\n\t\t\t\tstatus: false\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// ------ SET DATA FUN ------\r\n\tconst setDataFunc = (name, data) => {\r\n\t\tdataFilter.every((item, index) => {\r\n\t\t\tif (item.name == name) {\r\n\t\t\t\titem.optionList = data\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\treturn true\r\n\t\t})\r\n\t\tsetDataFilter([...dataFilter])\r\n\t}\r\n\r\n\t// ---------------- AFTER SUBMIT -----------------\r\n\tconst afterPost = (mes) => {\r\n\t\t// showNoti(\"success\", \"Thêm nhân viên thành công\");\r\n\t\tsetTodoApi({\r\n\t\t\t...listTodoApi,\r\n\t\t\tpageIndex: 1\r\n\t\t})\r\n\t\tsetCurrentPage(1)\r\n\t}\r\n\r\n\t// ----------- SUBMI FORM ------------\r\n\tconst returnBranchName = (branchID) => {\r\n\t\tlet newArr = []\r\n\t\tlet listID = branchID.split(',')\r\n\r\n\t\tlistID.forEach((item) => {\r\n\t\t\tlet newObj = {\r\n\t\t\t\tID: parseInt(item),\r\n\t\t\t\tBranchName: listDataForm?.Branch.find((a) => a.value === parseInt(item)).title\r\n\t\t\t}\r\n\r\n\t\t\tnewObj && newArr.push(newObj)\r\n\t\t})\r\n\r\n\t\treturn newArr\r\n\t}\r\n\r\n\tconst onSubmitSalary = async (data: any) => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'ADD_DATA',\r\n\t\t\tstatus: true\r\n\t\t})\r\n\t\tlet res = null\r\n\t\ttry {\r\n\t\t\tres = await staffSalaryApi.update(data)\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tshowNoti('success', 'Thêm lương thành công')\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'ADD_DATA',\r\n\t\t\t\tstatus: false\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\tconst onSubmit = async (data: any) => {\r\n\t\tif (typeof data.Branch != 'undefined') {\r\n\t\t\tdata.Branch = data.Branch.toString()\r\n\t\t} else {\r\n\t\t\tdata.Branch = ''\r\n\t\t}\r\n\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'ADD_DATA',\r\n\t\t\tstatus: true\r\n\t\t})\r\n\t\tlet res = null\r\n\t\ttry {\r\n\t\t\tif (data.UserInformationID) {\r\n\t\t\t\tres = await staffApi.update(data)\r\n\t\t\t\tif (res.status == 200) {\r\n\t\t\t\t\t// let newDataSource = [...dataSource];\r\n\t\t\t\t\t// newDataSource.splice(indexRow, 1, {\r\n\t\t\t\t\t// \t...data,\r\n\t\t\t\t\t// \tBranch: returnBranchName(data.Branch),\r\n\t\t\t\t\t// \tRoleName: dataRoles.find((item) => item.value == data.RoleID)?.title\r\n\t\t\t\t\t// });\r\n\t\t\t\t\t// setDataSource(newDataSource);\r\n\t\t\t\t\tsetTodoApi({ ...todoApi })\r\n\t\t\t\t\tshowNoti('success', res.data.message)\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tres = await staffApi.add(data)\r\n\t\t\t\tres?.status == 200 && afterPost(res.data.message)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'ADD_DATA',\r\n\t\t\t\tstatus: false\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\t// -------------- CHECK FIELD ---------------------\r\n\tconst checkField = (valueSearch, dataIndex) => {\r\n\t\tlet newList = { ...listFieldSearch }\r\n\t\tObject.keys(newList).forEach(function (key) {\r\n\t\t\tif (key != dataIndex) {\r\n\t\t\t\tif (key != 'pageIndex') {\r\n\t\t\t\t\tnewList[key] = null\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tnewList[key] = valueSearch\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn newList\r\n\t}\r\n\r\n\t// -------------- HANDLE FILTER ------------------\r\n\tconst handleFilter = (listFilter) => {\r\n\t\tlet newListFilter = { ...listFieldFilter }\r\n\t\tlistFilter.forEach((item, index) => {\r\n\t\t\tlet key = item.name\r\n\t\t\tObject.keys(newListFilter).forEach((keyFilter) => {\r\n\t\t\t\tif (keyFilter == key) {\r\n\t\t\t\t\tnewListFilter[key] = item.value\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t\tsetTodoApi({ ...listTodoApi, ...newListFilter, pageIndex: 1 })\r\n\t}\r\n\r\n\t// --------------- HANDLE SORT ----------------------\r\n\tconst handleSort = async (option) => {\r\n\t\tlet newTodoApi = {\r\n\t\t\t...listTodoApi,\r\n\t\t\tpageIndex: 1,\r\n\t\t\tsort: option.title.sort,\r\n\t\t\tsortType: option.title.sortType\r\n\t\t}\r\n\t\tsetCurrentPage(1), setTodoApi(newTodoApi)\r\n\t}\r\n\r\n\t// ------------ ON SEARCH -----------------------\r\n\tconst onSearch = (valueSearch, dataIndex) => {\r\n\t\tlet clearKey =\r\n\t\t\tdataIndex == 'FullNameUnicode'\r\n\t\t\t\t? { FullNameUnicode: valueSearch }\r\n\t\t\t\t: dataIndex == 'ChineseName'\r\n\t\t\t\t? { ChineseName: valueSearch }\r\n\t\t\t\t: dataIndex == 'Mobile'\r\n\t\t\t\t? { Mobile: valueSearch }\r\n\t\t\t\t: { Email: valueSearch }\r\n\r\n\t\tsetTodoApi({\r\n\t\t\t...todoApi,\r\n\t\t\t...clearKey,\r\n\t\t\t...listFieldFilter\r\n\t\t})\r\n\t}\r\n\r\n\t// HANDLE RESET\r\n\tconst resetListFieldSearch = () => {\r\n\t\tObject.keys(listFieldSearch).forEach(function (key) {\r\n\t\t\tif (key != 'pageIndex') {\r\n\t\t\t\tlistFieldSearch[key] = null\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tconst handleReset = () => {\r\n\t\tsetTodoApi({\r\n\t\t\t...listTodoApi,\r\n\t\t\tpageIndex: 1\r\n\t\t})\r\n\t\tsetCurrentPage(1), resetListFieldSearch()\r\n\t}\r\n\r\n\t// -------------- GET PAGE_NUMBER -----------------\r\n\tconst getPagination = (pageNumber: number) => {\r\n\t\tpageIndex = pageNumber\r\n\t\tsetCurrentPage(pageNumber)\r\n\t\tsetTodoApi({\r\n\t\t\t...todoApi,\r\n\t\t\t...listFieldSearch,\r\n\t\t\t...listFieldFilter,\r\n\t\t\tpageIndex: pageIndex\r\n\t\t})\r\n\t}\r\n\r\n\t// ============== USE EFFECT - FETCH DATA ===================\r\n\tuseEffect(() => {\r\n\t\tgetDataSource()\r\n\t}, [todoApi])\r\n\r\n\tuseEffect(() => {\r\n\t\tgetDataStudentForm(listApi)\r\n\t}, [])\r\n\r\n\tconst _onSubmitPromoteStaff = async (data) => {\r\n\t\tsetIsLoading({ type: 'PROMOTE', status: true })\r\n\t\ttry {\r\n\t\t\tlet res = await staffApi.update({ RoleID: 2, UserInformationID: data })\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tsetTodoApi({ ...todoApi })\r\n\t\t\t\tshowNoti('success', 'Chuyển vị trí thành công!')\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({ type: 'PROMOTE', status: false })\r\n\t\t}\r\n\t}\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\twidth: 120,\r\n\t\t\ttitle: 'Mã',\r\n\t\t\tdataIndex: 'UserCode',\r\n\t\t\tfixed: 'left'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Họ tên',\r\n\t\t\tdataIndex: 'FullNameUnicode',\r\n\t\t\tfixed: 'left',\r\n\t\t\twidth: 200,\r\n\t\t\t...FilterColumn('FullNameUnicode', onSearch, handleReset, 'text'),\r\n\t\t\trender: (text) => <p className=\"font-weight-black\">{text}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\twidth: 100,\r\n\t\t\ttitle: 'Giới tính',\r\n\t\t\tdataIndex: 'Gender',\r\n\t\t\trender: (gender) => <>{gender == 0 ? 'Nữ' : gender == 1 ? 'Nam' : 'Khác'}</>\r\n\t\t},\r\n\t\t{\r\n\t\t\twidth: 100,\r\n\t\t\ttitle: 'Tài khoản',\r\n\t\t\tdataIndex: 'UserName'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Email',\r\n\t\t\twidth: 100,\r\n\t\t\tdataIndex: 'Email',\r\n\t\t\trender: (text) => <p className=\"font-weight-black\">{text}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Vị trí',\r\n\t\t\twidth: 120,\r\n\t\t\tdataIndex: 'RoleName'\r\n\t\t},\r\n\t\t{\r\n\t\t\twidth: 150,\r\n\t\t\ttitle: 'Ngày nhận việc',\r\n\t\t\tdataIndex: 'Jobdate',\r\n\t\t\trender: (date: any) => date && moment(date).format('DD/MM/YYYY')\r\n\t\t},\r\n\t\t{\r\n\t\t\twidth: 150,\r\n\t\t\ttitle: 'Facebook',\r\n\t\t\tdataIndex: 'LinkFaceBook',\r\n\t\t\trender: (link) =>\r\n\t\t\t\tlink && (\r\n\t\t\t\t\t<a className=\"font-weight-black\" href={link} target=\"_blank\">\r\n\t\t\t\t\t\tLink\r\n\t\t\t\t\t</a>\r\n\t\t\t\t)\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Trạng thái',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'StatusID',\r\n\t\t\tclassName: 'text-center',\r\n\t\t\trender: (status) => <>{<span className={`tag ${status == 0 ? 'green' : 'gray'}`}>{status == 0 ? 'Hoạt động' : 'Khóa'}</span>}</>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '',\r\n\t\t\tdataIndex: '',\r\n\t\t\twidth: userInformation !== null && userInformation?.RoleID === 5 ? 0 : 180,\r\n\t\t\trender: (text, data, index) => (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{userInformation !== null && userInformation?.RoleID !== 5 && (\r\n\t\t\t\t\t\t<div onClick={(e) => e.stopPropagation()}>\r\n\t\t\t\t\t\t\t<StaffForm\r\n\t\t\t\t\t\t\t\tgetIndex={() => setIndexRow(index)}\r\n\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\trowData={data}\r\n\t\t\t\t\t\t\t\trowID={data.UserInformationID}\r\n\t\t\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t\t\t\tonSubmit={(data: any) => onSubmit(data)}\r\n\t\t\t\t\t\t\t\tonSubmitSalary={(data: any) => onSubmitSalary(data)}\r\n\t\t\t\t\t\t\t\tlistDataForm={listDataForm}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<ResetPassForm dataRow={data} />\r\n\t\t\t\t\t\t\t{data.RoleID === 5 && (\r\n\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\thref={{\r\n\t\t\t\t\t\t\t\t\t\tpathname: '/staff/teacher-list/teacher-detail/[slug]',\r\n\t\t\t\t\t\t\t\t\t\tquery: { slug: data.UserInformationID }\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Tooltip title=\"Chi tiết giảng dạy\">\r\n\t\t\t\t\t\t\t\t\t\t<a className=\"btn btn-icon\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Eye />\r\n\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{/* {userInformation && userInformation?.RoleID == 1 && data.RoleID == 5 && (\r\n\t\t\t\t\t\t\t\t<PromoteTeacher\r\n\t\t\t\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t\t\t\t\ttype=\"staff\"\r\n\t\t\t\t\t\t\t\t\trecord={data}\r\n\t\t\t\t\t\t\t\t\t_onSubmitPromoteStaff={() => _onSubmitPromoteStaff(data.UserInformationID)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)} */}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</>\r\n\t\t\t)\r\n\t\t}\r\n\t]\r\n\r\n\tconst expandedRowRender = (data) => {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<SalaryStaffNested staffID={data.UserInformationID} />\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ExpandTable\r\n\t\t\t\tcurrentPage={currentPage}\r\n\t\t\t\ttotalPage={totalPage && totalPage}\r\n\t\t\t\tgetPagination={(pageNumber: number) => getPagination(pageNumber)}\r\n\t\t\t\tloading={isLoading}\r\n\t\t\t\taddClass=\"basic-header\"\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\tdataSource={dataSource}\r\n\t\t\t\tTitlePage=\"Danh sách nhân viên\"\r\n\t\t\t\tTitleCard={\r\n\t\t\t\t\tuserInformation !== null && userInformation?.RoleID !== 5 ? (\r\n\t\t\t\t\t\t<StaffForm isLoading={isLoading} onSubmit={(data: any) => onSubmit(data)} listDataForm={listDataForm} />\r\n\t\t\t\t\t) : null\r\n\t\t\t\t}\r\n\t\t\t\tExtra={\r\n\t\t\t\t\t<div className=\"extra-table\">\r\n\t\t\t\t\t\t<FilterBase dataFilter={dataFilter} handleFilter={(listFilter: any) => handleFilter(listFilter)} handleReset={handleReset} />\r\n\t\t\t\t\t\t<SortBox handleSort={(value) => handleSort(value)} dataOption={dataOption} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\texpandable={{ expandedRowRender }}\r\n\t\t\t/>\r\n\t\t</>\r\n\t)\r\n}\r\nStaffList.layout = LayoutBase\r\n\r\nexport default StaffList\r\n"]},"metadata":{},"sourceType":"module"}