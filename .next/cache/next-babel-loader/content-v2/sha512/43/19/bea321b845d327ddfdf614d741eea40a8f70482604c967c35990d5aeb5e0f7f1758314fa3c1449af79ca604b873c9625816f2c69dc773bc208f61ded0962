{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _toConsumableArray from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\Teacher\\\\Teacher\\\\Teacher.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Tooltip } from 'antd';\nimport moment from 'moment';\nimport Link from 'next/link';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { Eye } from 'react-feather';\nimport { areaApi, branchApi, districtApi, staffSalaryApi, teacherApi, userInformationApi, wardApi } from '~/apiBase';\nimport SortBox from '~/components/Elements/SortBox';\nimport ExpandTable from '~/components/ExpandTable';\nimport FilterColumn from '~/components/Tables/FilterColumn';\nimport { useWrap } from '~/context/wrap';\nimport { fmSelectArr } from '~/utils/functions';\nimport StaffSalaryForm from '../../Option/StaffSalaryForm';\nimport SalaryTeacherNested from './SalaryTeacherNested';\nimport TeacherFilterForm from './TeacherFilterForm';\nimport TeacherForm from './TeacherForm';\n\nvar Teacher = function Teacher() {\n  _s();\n\n  var _dataStaff$;\n\n  var _useState = useState([]),\n      teacherList = _useState[0],\n      setTeacherList = _useState[1];\n\n  var _useState2 = useState({\n    areaList: [],\n    branchListTotal: [],\n    districtList: [],\n    wardList: []\n  }),\n      optionAreaSystemList = _useState2[0],\n      setOptionAreaSystemList = _useState2[1];\n\n  var _useState3 = useState([]),\n      branchList = _useState3[0],\n      setBranchList = _useState3[1];\n\n  var _useState4 = useState({\n    type: '',\n    status: false\n  }),\n      isLoading = _useState4[0],\n      setIsLoading = _useState4[1];\n\n  var _useState5 = useState(null),\n      totalPage = _useState5[0],\n      setTotalPage = _useState5[1];\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti,\n      pageSize = _useWrap.pageSize,\n      userInformation = _useWrap.userInformation;\n\n  var _useState6 = useState(''),\n      activeColumnSearch = _useState6[0],\n      setActiveColumnSearch = _useState6[1]; // FILTER\n\n\n  var listFieldInit = {\n    pageIndex: 1,\n    pageSize: pageSize,\n    sort: 1,\n    sortType: false,\n    AreaID: '',\n    FullNameUnicode: '',\n    fromDate: '',\n    toDate: '',\n    StatusID: null\n  };\n  var refValue = useRef({\n    pageIndex: 1,\n    pageSize: 10,\n    sort: 1,\n    sortType: false\n  });\n\n  var _useState7 = useState(listFieldInit),\n      filters = _useState7[0],\n      setFilters = _useState7[1]; // ADD SALARY TO NEW TEACHER\n\n\n  var _useState8 = useState(false),\n      isClearForm = _useState8[0],\n      setIsClearForm = _useState8[1];\n\n  var _useState9 = useState(false),\n      openSalaryForm = _useState9[0],\n      setOpenSalaryForm = _useState9[1];\n\n  var _useState10 = useState([]),\n      dataStaff = _useState10[0],\n      setDataStaff = _useState10[1];\n\n  var optionGenderList = [{\n    title: 'Nữ',\n    value: 0\n  }, {\n    title: 'Nam',\n    value: 1\n  }, {\n    title: 'Khác',\n    value: 2\n  }];\n  var optionStatusList = [{\n    title: 'Hoạt động',\n    value: 0\n  }, {\n    title: 'Khóa',\n    value: 1\n  }]; // SORT OPTION\n\n  var sortOptionList = [{\n    dataSort: {\n      sort: 0,\n      sortType: true\n    },\n    value: 1,\n    text: 'Tên tăng dần'\n  }, {\n    dataSort: {\n      sort: 0,\n      sortType: false\n    },\n    value: 2,\n    text: 'Tên giảm dần'\n  }, {\n    dataSort: {\n      sort: 2,\n      sortType: true\n    },\n    value: 3,\n    text: 'Ngày nhận việc tăng dần'\n  }, {\n    dataSort: {\n      sort: 2,\n      sortType: false\n    },\n    value: 4,\n    text: 'Ngày nhận việc giảm dần'\n  }]; // FILTER\n\n  var onFilter = function onFilter(obj) {\n    setFilters(_objectSpread(_objectSpread(_objectSpread({}, listFieldInit), refValue.current), {}, {\n      pageIndex: 1,\n      fromDate: moment(obj.fromDate).format('YYYY/MM/DD'),\n      toDate: moment(obj.toDate).format('YYYY/MM/DD')\n    }));\n  }; // PAGINATION\n\n\n  var getPagination = function getPagination(pageIndex, pageSize) {\n    if (!pageSize) pageSize = 10;\n    refValue.current = _objectSpread(_objectSpread({}, refValue.current), {}, {\n      pageSize: pageSize,\n      pageIndex: pageIndex\n    });\n    setFilters(_objectSpread(_objectSpread({}, filters), refValue.current));\n  }; // SORT\n\n\n  var onSort = function onSort(option) {\n    refValue.current = _objectSpread(_objectSpread({}, refValue.current), {}, {\n      sort: option.title.sort,\n      sortType: option.title.sortType\n    });\n    setFilters(_objectSpread(_objectSpread({}, listFieldInit), refValue.current));\n  }; // RESET SEARCH\n\n\n  var onResetSearch = function onResetSearch() {\n    setActiveColumnSearch('');\n    setFilters(_objectSpread(_objectSpread({}, listFieldInit), {}, {\n      pageSize: refValue.current.pageSize\n    }));\n  }; // ACTION SEARCH\n\n\n  var onSearch = function onSearch(valueSearch, dataIndex) {\n    setActiveColumnSearch(dataIndex);\n    setFilters(_objectSpread(_objectSpread(_objectSpread({}, listFieldInit), refValue.current), {}, _defineProperty({\n      pageIndex: 1\n    }, dataIndex, valueSearch)));\n  }; // GET AREA\n\n\n  var fetchAreaList = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res, newAreaList;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return areaApi.getAll({\n                selectAll: true\n              });\n\n            case 3:\n              res = _context.sent;\n\n              if (res.status === 200 && res.data.totalRow && res.data.data.length) {\n                newAreaList = fmSelectArr(res.data.data, 'AreaName', 'AreaID');\n                setOptionAreaSystemList(function (prevState) {\n                  return _objectSpread(_objectSpread({}, prevState), {}, {\n                    areaList: newAreaList\n                  });\n                });\n              }\n\n              _context.next = 9;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function fetchAreaList() {\n      return _ref.apply(this, arguments);\n    };\n  }(); // BRANCH BY AREA\n\n\n  var fetchBranchList = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var res, newBranchList;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return branchApi.getAll({\n                pageSize: 9999\n              });\n\n            case 3:\n              res = _context2.sent;\n\n              if (res.status === 200 && res.data.totalRow && res.data.data.length) {\n                newBranchList = fmSelectArr(res.data.data, 'BranchName', 'ID');\n                setOptionAreaSystemList(function (prevState) {\n                  return _objectSpread(_objectSpread({}, prevState), {}, {\n                    branchListTotal: newBranchList\n                  });\n                });\n              }\n\n              _context2.next = 10;\n              break;\n\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](0);\n              showNoti('danger', _context2.t0.message);\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 7]]);\n    }));\n\n    return function fetchBranchList() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    fetchAreaList();\n    fetchBranchList();\n  }, []); // DISTRICT BY AREA\n\n  var fetchDistrictByAreaID = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id) {\n      var res, newDistrictList;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return districtApi.getAll({\n                AreaID: id\n              });\n\n            case 3:\n              res = _context3.sent;\n\n              if (res.status === 200 && res.data.totalRow && res.data.data.length) {\n                newDistrictList = fmSelectArr(res.data.data, 'DistrictName', 'ID');\n                setOptionAreaSystemList(_objectSpread(_objectSpread({}, optionAreaSystemList), {}, {\n                  districtList: newDistrictList,\n                  wardList: []\n                }));\n              }\n\n              _context3.next = 10;\n              break;\n\n            case 7:\n              _context3.prev = 7;\n              _context3.t0 = _context3[\"catch\"](0);\n              showNoti('danger', _context3.t0.message);\n\n            case 10:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 7]]);\n    }));\n\n    return function fetchDistrictByAreaID(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }(); // WARD BY DISTRICT\n\n\n  var fetchWardByDistrictID = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(id) {\n      var res, newWardList;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              setIsLoading({\n                type: 'FETCH_WARD_BY_DISTRICT',\n                status: true\n              });\n              _context4.prev = 1;\n              _context4.next = 4;\n              return wardApi.getAll({\n                DistrictID: id\n              });\n\n            case 4:\n              res = _context4.sent;\n\n              if (res.status === 200 && res.data.totalRow && res.data.data.length) {\n                newWardList = fmSelectArr(res.data.data, 'WardName', 'ID');\n                setOptionAreaSystemList(_objectSpread(_objectSpread({}, optionAreaSystemList), {}, {\n                  wardList: newWardList\n                }));\n              }\n\n              _context4.next = 11;\n              break;\n\n            case 8:\n              _context4.prev = 8;\n              _context4.t0 = _context4[\"catch\"](1);\n              showNoti('danger', _context4.t0.message);\n\n            case 11:\n              _context4.prev = 11;\n              setIsLoading({\n                type: 'FETCH_WARD_BY_DISTRICT',\n                status: false\n              });\n              return _context4.finish(11);\n\n            case 14:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[1, 8, 11, 14]]);\n    }));\n\n    return function fetchWardByDistrictID(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }(); // BRANCH BY AREA\n\n\n  var fetchBranchByAreaId = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(id) {\n      var res, newBranchList;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              setIsLoading({\n                type: 'FETCH_DATA_BY_AREA',\n                status: true\n              });\n              _context5.prev = 1;\n              _context5.next = 4;\n              return branchApi.getAll({\n                areaID: id,\n                Enable: true\n              });\n\n            case 4:\n              res = _context5.sent;\n\n              if (res.status === 200 && res.data.totalRow) {\n                newBranchList = res.data.data.map(function (item) {\n                  return {\n                    title: item.BranchName,\n                    value: item.ID\n                  };\n                });\n                setBranchList(newBranchList);\n              }\n\n              if (res.status === 204) {\n                setBranchList([]);\n              }\n\n              _context5.next = 12;\n              break;\n\n            case 9:\n              _context5.prev = 9;\n              _context5.t0 = _context5[\"catch\"](1);\n              showNoti('danger', _context5.t0.message);\n\n            case 12:\n              _context5.prev = 12;\n              setIsLoading({\n                type: 'FETCH_DATA_BY_AREA',\n                status: false\n              });\n              return _context5.finish(12);\n\n            case 15:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, null, [[1, 9, 12, 15]]);\n    }));\n\n    return function fetchBranchByAreaId(_x3) {\n      return _ref5.apply(this, arguments);\n    };\n  }(); // GET DATA IN FIRST TIME\n\n\n  var fetchTeacherList = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              setIsLoading({\n                type: 'GET_ALL',\n                status: true\n              });\n              _context6.prev = 1;\n              _context6.next = 4;\n              return teacherApi.getAll(filters);\n\n            case 4:\n              res = _context6.sent;\n\n              if (res.status === 200) {\n                if (res.data.totalRow && res.data.data.length) {\n                  setTeacherList(res.data.data);\n                  setTotalPage(res.data.totalRow);\n                }\n              } else if (res.status === 204) {\n                setTeacherList([]);\n              }\n\n              _context6.next = 11;\n              break;\n\n            case 8:\n              _context6.prev = 8;\n              _context6.t0 = _context6[\"catch\"](1);\n              showNoti('danger', _context6.t0.message);\n\n            case 11:\n              _context6.prev = 11;\n              setIsLoading({\n                type: 'GET_ALL',\n                status: false\n              });\n              return _context6.finish(11);\n\n            case 14:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6, null, [[1, 8, 11, 14]]);\n    }));\n\n    return function fetchTeacherList() {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    fetchTeacherList();\n  }, [filters]); // SALARY\n\n  var onOpenSalaryForm = function onOpenSalaryForm(userID) {\n    setIsClearForm(false);\n    setOpenSalaryForm(true);\n    getInfoTeacherToAddSalary(userID);\n  };\n\n  var onCloseSalaryForm = function onCloseSalaryForm() {\n    setIsClearForm(true);\n    setOpenSalaryForm(false);\n    setDataStaff([]);\n  };\n\n  var getInfoTeacherToAddSalary = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(userID) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.prev = 0;\n              _context7.next = 3;\n              return userInformationApi.getByID(userID);\n\n            case 3:\n              res = _context7.sent;\n              res.status === 200 && setDataStaff([res.data.data]);\n              _context7.next = 10;\n              break;\n\n            case 7:\n              _context7.prev = 7;\n              _context7.t0 = _context7[\"catch\"](0);\n              showNoti('danger', _context7.t0.message);\n\n            case 10:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7, null, [[0, 7]]);\n    }));\n\n    return function getInfoTeacherToAddSalary(_x4) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  var saveSalary = /*#__PURE__*/function () {\n    var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(obj) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              setIsLoading({\n                type: 'ADD_DATA',\n                status: true\n              });\n              _context8.prev = 1;\n              _context8.next = 4;\n              return staffSalaryApi.add(obj);\n\n            case 4:\n              res = _context8.sent;\n\n              if (res.status === 200) {\n                onCloseSalaryForm();\n                showNoti('success', res.data.message);\n              }\n\n              _context8.next = 11;\n              break;\n\n            case 8:\n              _context8.prev = 8;\n              _context8.t0 = _context8[\"catch\"](1);\n              showNoti('danger', _context8.t0.message);\n\n            case 11:\n              _context8.prev = 11;\n              setIsLoading({\n                type: 'ADD_DATA',\n                status: false\n              });\n              return _context8.finish(11);\n\n            case 14:\n              return _context8.abrupt(\"return\", res);\n\n            case 15:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8, null, [[1, 8, 11, 14]]);\n    }));\n\n    return function saveSalary(_x5) {\n      return _ref8.apply(this, arguments);\n    };\n  }(); // CREATE\n\n\n  var onCreateTeacher = /*#__PURE__*/function () {\n    var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(data) {\n      var res, newTeacher;\n      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              setIsLoading({\n                type: 'ADD_DATA',\n                status: true\n              });\n              _context9.prev = 1;\n              newTeacher = _objectSpread(_objectSpread({}, data), {}, {\n                Branch: data.Branch.join(',')\n              });\n              _context9.next = 5;\n              return teacherApi.add(newTeacher);\n\n            case 5:\n              res = _context9.sent;\n\n              if (res.status === 200) {\n                onOpenSalaryForm(res.data.data.UserInformationID);\n                showNoti('success', res.data.message);\n                onResetSearch(); // <== khi tạo xong r reset search để trở về trang đầu tiên\n              }\n\n              _context9.next = 12;\n              break;\n\n            case 9:\n              _context9.prev = 9;\n              _context9.t0 = _context9[\"catch\"](1);\n              showNoti('danger', _context9.t0.message);\n\n            case 12:\n              _context9.prev = 12;\n              setIsLoading({\n                type: 'ADD_DATA',\n                status: false\n              });\n              return _context9.finish(12);\n\n            case 15:\n              return _context9.abrupt(\"return\", res);\n\n            case 16:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9, null, [[1, 9, 12, 15]]);\n    }));\n\n    return function onCreateTeacher(_x6) {\n      return _ref9.apply(this, arguments);\n    };\n  }(); // UPDATE\n\n\n  var onUpdateTeacher = /*#__PURE__*/function () {\n    var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(newObj, idx) {\n      var res, newTeacherAPI, newTeacherList, newBranch;\n      return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              setIsLoading({\n                type: 'ADD_DATA',\n                status: true\n              });\n              _context10.prev = 1;\n              newTeacherAPI = _objectSpread(_objectSpread({}, newObj), {}, {\n                Branch: newObj.Branch.join(',')\n              });\n              _context10.next = 5;\n              return teacherApi.update(newTeacherAPI);\n\n            case 5:\n              res = _context10.sent;\n\n              if (res.status === 200) {\n                newTeacherList = _toConsumableArray(teacherList);\n                newBranch = optionAreaSystemList.branchListTotal.filter(function (ob) {\n                  return newObj.Branch.some(function (nb) {\n                    return nb === ob.value;\n                  });\n                }).map(function (b) {\n                  return {\n                    ID: b.value,\n                    BranchName: b.title\n                  };\n                });\n                newTeacherList.splice(idx, 1, _objectSpread(_objectSpread({}, newObj), {}, {\n                  // AreaName: areaList.find((a) => a.value === newObj.AreaID).title,\n                  Branch: newBranch\n                }));\n                setTeacherList(newTeacherList);\n                showNoti('success', res.data.message);\n              }\n\n              _context10.next = 12;\n              break;\n\n            case 9:\n              _context10.prev = 9;\n              _context10.t0 = _context10[\"catch\"](1);\n              showNoti('danger', _context10.t0.message);\n\n            case 12:\n              _context10.prev = 12;\n              setIsLoading({\n                type: 'ADD_DATA',\n                status: false\n              });\n              return _context10.abrupt(\"return\", res);\n\n            case 16:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee10, null, [[1, 9, 12, 16]]);\n    }));\n\n    return function onUpdateTeacher(_x7, _x8) {\n      return _ref10.apply(this, arguments);\n    };\n  }();\n\n  var _onSubmitPromoteTeacher = /*#__PURE__*/function () {\n    var _ref11 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11(data) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n        while (1) {\n          switch (_context11.prev = _context11.next) {\n            case 0:\n              setIsLoading({\n                type: 'PROMOTE',\n                status: true\n              });\n              _context11.prev = 1;\n              _context11.next = 4;\n              return teacherApi.updateRole({\n                RoleID: 5,\n                UserInformationID: data\n              });\n\n            case 4:\n              res = _context11.sent;\n\n              if (!(res.status == 200)) {\n                _context11.next = 9;\n                break;\n              }\n\n              setFilters(_objectSpread({}, filters));\n              showNoti('success', 'Thăng cấp thành công!');\n              return _context11.abrupt(\"return\", true);\n\n            case 9:\n              _context11.next = 14;\n              break;\n\n            case 11:\n              _context11.prev = 11;\n              _context11.t0 = _context11[\"catch\"](1);\n              showNoti('danger', _context11.t0.message);\n\n            case 14:\n              _context11.prev = 14;\n              setIsLoading({\n                type: 'PROMOTE',\n                status: false\n              });\n              return _context11.finish(14);\n\n            case 17:\n            case \"end\":\n              return _context11.stop();\n          }\n        }\n      }, _callee11, null, [[1, 11, 14, 17]]);\n    }));\n\n    return function _onSubmitPromoteTeacher(_x9) {\n      return _ref11.apply(this, arguments);\n    };\n  }();\n\n  var columns = [{\n    title: 'Mã giáo viên',\n    dataIndex: 'UserCode',\n    fixed: 'left',\n    render: function render(code) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-black\",\n        children: code\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 22\n      }, _this);\n    }\n  }, _objectSpread(_objectSpread({\n    title: 'Họ và tên',\n    dataIndex: 'FullNameUnicode'\n  }, FilterColumn('FullNameUnicode', onSearch, onResetSearch, 'text')), {}, {\n    className: activeColumnSearch === 'FullNameUnicode' ? 'active-column-search' : '',\n    render: function render(text) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-primary\",\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 22\n      }, _this);\n    },\n    fixed: 'left'\n  }), _objectSpread(_objectSpread({\n    width: 120,\n    title: 'Tên tiếng Trung',\n    dataIndex: 'ChineseName'\n  }, FilterColumn('ChineseName', onSearch, onResetSearch, 'text')), {}, {\n    render: function render(text) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-primary\",\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 22\n      }, _this);\n    }\n  }), _objectSpread(_objectSpread({\n    title: 'Tỉnh/TP',\n    dataIndex: 'AreaName'\n  }, FilterColumn('AreaID', onSearch, onResetSearch, 'select', optionAreaSystemList.areaList)), {}, {\n    className: activeColumnSearch === 'AreaID' ? 'active-column-search' : ''\n  }), {\n    width: 120,\n    title: 'Giới tính',\n    dataIndex: 'Gender',\n    render: function render(genderID) {\n      return optionGenderList.find(function (o) {\n        return o.value === genderID;\n      }).title;\n    }\n  }, {\n    title: 'SĐT',\n    width: 120,\n    dataIndex: 'Mobile',\n    // ...FilterColumn('Mobile', onSearch, onResetSearch, 'text'),\n    render: function render(text) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-primary\",\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 22\n      }, _this);\n    }\n  }, {\n    title: 'Email',\n    width: 180,\n    dataIndex: 'Email',\n    // ...FilterColumn('Email', onSearch, onResetSearch, 'text'),\n    render: function render(text) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-primary\",\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 22\n      }, _this);\n    }\n  }, {\n    title: 'Ngày nhận việc',\n    width: 150,\n    dataIndex: 'Jobdate',\n    render: function render(date) {\n      return date && moment(date).format('DD/MM/YYYY');\n    }\n  }, {\n    title: 'Facebook',\n    width: 150,\n    dataIndex: 'LinkFaceBook',\n    render: function render(link) {\n      return link && /*#__PURE__*/_jsxDEV(\"a\", {\n        className: \"font-weight-black\",\n        href: link,\n        target: \"_blank\",\n        children: \"Link\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 6\n      }, _this);\n    }\n  }, _objectSpread(_objectSpread({\n    title: 'Trạng thái',\n    width: 150,\n    dataIndex: 'StatusID',\n    align: 'center'\n  }, FilterColumn('StatusID', onSearch, onResetSearch, 'select', optionStatusList)), {}, {\n    render: function render(status) {\n      return status ? /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"tag gray\",\n        children: \"Kh\\xF3a\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 34\n      }, _this) : /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"tag green\",\n        children: \"Ho\\u1EA1t \\u0111\\u1ED9ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 75\n      }, _this);\n    }\n  }), {\n    width: 140,\n    align: 'center',\n    render: function render(value, _, idx) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: function onClick(e) {\n          return e.stopPropagation();\n        },\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          href: {\n            pathname: '/staff/teacher-list/teacher-detail/[slug]',\n            query: {\n              slug: _.UserInformationID\n            }\n          },\n          children: /*#__PURE__*/_jsxDEV(Tooltip, {\n            title: \"Chi ti\\u1EBFt gi\\u1EA3ng d\\u1EA1y\",\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"btn btn-icon\",\n              children: /*#__PURE__*/_jsxDEV(Eye, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 501,\n                columnNumber: 9\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 8\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 7\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(TeacherForm, {\n          isLoading: isLoading,\n          isUpdate: true,\n          updateObj: value,\n          indexUpdateObj: idx,\n          handleUpdateTeacher: onUpdateTeacher //\n          ,\n          optionStatusList: optionStatusList,\n          optionGenderList: optionGenderList,\n          optionAreaSystemList: optionAreaSystemList,\n          handleFetchDistrict: fetchDistrictByAreaID,\n          handleFetchWard: fetchWardByDistrictID,\n          optionBranchList: optionAreaSystemList.branchListTotal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 6\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 492,\n        columnNumber: 5\n      }, _this);\n    }\n  }];\n\n  var expandedRowRender = function expandedRowRender(item) {\n    return /*#__PURE__*/_jsxDEV(SalaryTeacherNested, {\n      teacherID: item.UserInformationID\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 533,\n      columnNumber: 10\n    }, _this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(StaffSalaryForm, {\n      showInTeacherView: true,\n      isLoading: isLoading,\n      isOpenModalFromOutSide: openSalaryForm,\n      openModalFromOutSide: onCloseSalaryForm,\n      dataStaff: dataStaff,\n      dataIDStaff: (_dataStaff$ = dataStaff[0]) === null || _dataStaff$ === void 0 ? void 0 : _dataStaff$.UserInformationID,\n      _onSubmit: function _onSubmit(data) {\n        return saveSalary(data);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 538,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(ExpandTable, {\n      currentPage: filters.pageIndex,\n      totalPage: totalPage,\n      getPagination: getPagination,\n      loading: isLoading,\n      addClass: \"basic-header\",\n      columns: columns,\n      dataSource: teacherList,\n      TitlePage: \"Danh s\\xE1ch gi\\xE1o vi\\xEAn\",\n      TitleCard: /*#__PURE__*/_jsxDEV(TeacherForm, {\n        isClearForm: isClearForm,\n        isLoading: isLoading,\n        optionAreaSystemList: optionAreaSystemList,\n        optionBranchList: branchList,\n        handleCreateTeacher: onCreateTeacher,\n        handleFetchBranch: fetchBranchByAreaId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 557,\n        columnNumber: 6\n      }, _this),\n      Extra: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"extra-table\",\n        children: [/*#__PURE__*/_jsxDEV(TeacherFilterForm, {\n          handleFilter: onFilter,\n          handleResetFilter: onResetSearch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 568,\n          columnNumber: 7\n        }, _this), /*#__PURE__*/_jsxDEV(SortBox, {\n          handleSort: onSort,\n          dataOption: sortOptionList\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 7\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 567,\n        columnNumber: 6\n      }, _this),\n      expandable: {\n        expandedRowRender: expandedRowRender\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 547,\n      columnNumber: 4\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(Teacher, \"KSpVBqxLT6zJVKNpTA7jDdjdWqI=\", false, function () {\n  return [useWrap];\n});\n\n_c = Teacher;\nexport default Teacher;\n\nvar _c;\n\n$RefreshReg$(_c, \"Teacher\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/Teacher/Teacher/Teacher.tsx"],"names":["Tooltip","moment","Link","React","useEffect","useRef","useState","Eye","areaApi","branchApi","districtApi","staffSalaryApi","teacherApi","userInformationApi","wardApi","SortBox","ExpandTable","FilterColumn","useWrap","fmSelectArr","StaffSalaryForm","SalaryTeacherNested","TeacherFilterForm","TeacherForm","Teacher","teacherList","setTeacherList","areaList","branchListTotal","districtList","wardList","optionAreaSystemList","setOptionAreaSystemList","branchList","setBranchList","type","status","isLoading","setIsLoading","totalPage","setTotalPage","showNoti","pageSize","userInformation","activeColumnSearch","setActiveColumnSearch","listFieldInit","pageIndex","sort","sortType","AreaID","FullNameUnicode","fromDate","toDate","StatusID","refValue","filters","setFilters","isClearForm","setIsClearForm","openSalaryForm","setOpenSalaryForm","dataStaff","setDataStaff","optionGenderList","title","value","optionStatusList","sortOptionList","dataSort","text","onFilter","obj","current","format","getPagination","onSort","option","onResetSearch","onSearch","valueSearch","dataIndex","fetchAreaList","getAll","selectAll","res","data","totalRow","length","newAreaList","prevState","fetchBranchList","newBranchList","message","fetchDistrictByAreaID","id","newDistrictList","fetchWardByDistrictID","DistrictID","newWardList","fetchBranchByAreaId","areaID","Enable","map","item","BranchName","ID","fetchTeacherList","onOpenSalaryForm","userID","getInfoTeacherToAddSalary","onCloseSalaryForm","getByID","saveSalary","add","onCreateTeacher","newTeacher","Branch","join","UserInformationID","onUpdateTeacher","newObj","idx","newTeacherAPI","update","newTeacherList","newBranch","filter","ob","some","nb","b","splice","_onSubmitPromoteTeacher","updateRole","RoleID","columns","fixed","render","code","className","width","genderID","find","o","date","link","align","_","e","stopPropagation","pathname","query","slug","expandedRowRender"],"mappings":"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","sourcesContent":["import { Tooltip } from 'antd'\r\nimport moment from 'moment'\r\nimport Link from 'next/link'\r\nimport React, { useEffect, useRef, useState } from 'react'\r\nimport { Eye } from 'react-feather'\r\nimport { areaApi, branchApi, districtApi, staffSalaryApi, teacherApi, userInformationApi, wardApi } from '~/apiBase'\r\nimport SortBox from '~/components/Elements/SortBox'\r\nimport ExpandTable from '~/components/ExpandTable'\r\nimport FilterColumn from '~/components/Tables/FilterColumn'\r\nimport { useWrap } from '~/context/wrap'\r\nimport { fmSelectArr } from '~/utils/functions'\r\nimport StaffSalaryForm from '../../Option/StaffSalaryForm'\r\nimport PromoteTeacher from './PromoteTeacher'\r\nimport SalaryTeacherNested from './SalaryTeacherNested'\r\nimport TeacherFilterForm from './TeacherFilterForm'\r\nimport TeacherForm from './TeacherForm'\r\n\r\nconst Teacher = () => {\r\n\tconst [teacherList, setTeacherList] = useState<ITeacher[]>([])\r\n\tconst [optionAreaSystemList, setOptionAreaSystemList] = useState<{\r\n\t\tareaList: IOptionCommon[]\r\n\t\tbranchListTotal: IOptionCommon[]\r\n\t\tdistrictList: IOptionCommon[]\r\n\t\twardList: IOptionCommon[]\r\n\t}>({\r\n\t\tareaList: [],\r\n\t\tbranchListTotal: [],\r\n\t\tdistrictList: [],\r\n\t\twardList: []\r\n\t})\r\n\tconst [branchList, setBranchList] = useState([])\r\n\tconst [isLoading, setIsLoading] = useState({\r\n\t\ttype: '',\r\n\t\tstatus: false\r\n\t})\r\n\tconst [totalPage, setTotalPage] = useState(null)\r\n\tconst { showNoti, pageSize, userInformation } = useWrap()\r\n\tconst [activeColumnSearch, setActiveColumnSearch] = useState('')\r\n\t// FILTER\r\n\tconst listFieldInit = {\r\n\t\tpageIndex: 1,\r\n\t\tpageSize: pageSize,\r\n\t\tsort: 1,\r\n\t\tsortType: false,\r\n\t\tAreaID: '',\r\n\t\tFullNameUnicode: '',\r\n\t\tfromDate: '',\r\n\t\ttoDate: '',\r\n\t\tStatusID: null\r\n\t}\r\n\tlet refValue = useRef({\r\n\t\tpageIndex: 1,\r\n\t\tpageSize: 10,\r\n\t\tsort: 1,\r\n\t\tsortType: false\r\n\t})\r\n\tconst [filters, setFilters] = useState(listFieldInit)\r\n\t// ADD SALARY TO NEW TEACHER\r\n\tconst [isClearForm, setIsClearForm] = useState(false)\r\n\tconst [openSalaryForm, setOpenSalaryForm] = useState(false)\r\n\tconst [dataStaff, setDataStaff] = useState([])\r\n\tconst optionGenderList = [\r\n\t\t{ title: 'Nữ', value: 0 },\r\n\t\t{ title: 'Nam', value: 1 },\r\n\t\t{ title: 'Khác', value: 2 }\r\n\t]\r\n\tconst optionStatusList = [\r\n\t\t{ title: 'Hoạt động', value: 0 },\r\n\t\t{ title: 'Khóa', value: 1 }\r\n\t]\r\n\t// SORT OPTION\r\n\tconst sortOptionList = [\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 0,\r\n\t\t\t\tsortType: true\r\n\t\t\t},\r\n\t\t\tvalue: 1,\r\n\t\t\ttext: 'Tên tăng dần'\r\n\t\t},\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 0,\r\n\t\t\t\tsortType: false\r\n\t\t\t},\r\n\t\t\tvalue: 2,\r\n\t\t\ttext: 'Tên giảm dần'\r\n\t\t},\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 2,\r\n\t\t\t\tsortType: true\r\n\t\t\t},\r\n\t\t\tvalue: 3,\r\n\t\t\ttext: 'Ngày nhận việc tăng dần'\r\n\t\t},\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 2,\r\n\t\t\t\tsortType: false\r\n\t\t\t},\r\n\t\t\tvalue: 4,\r\n\t\t\ttext: 'Ngày nhận việc giảm dần'\r\n\t\t}\r\n\t]\r\n\t// FILTER\r\n\tconst onFilter = (obj) => {\r\n\t\tsetFilters({\r\n\t\t\t...listFieldInit,\r\n\t\t\t...refValue.current,\r\n\t\t\tpageIndex: 1,\r\n\t\t\tfromDate: moment(obj.fromDate).format('YYYY/MM/DD'),\r\n\t\t\ttoDate: moment(obj.toDate).format('YYYY/MM/DD')\r\n\t\t})\r\n\t}\r\n\t// PAGINATION\r\n\tconst getPagination = (pageIndex: number, pageSize: number) => {\r\n\t\tif (!pageSize) pageSize = 10\r\n\t\trefValue.current = {\r\n\t\t\t...refValue.current,\r\n\t\t\tpageSize,\r\n\t\t\tpageIndex\r\n\t\t}\r\n\t\tsetFilters({\r\n\t\t\t...filters,\r\n\t\t\t...refValue.current\r\n\t\t})\r\n\t}\r\n\t// SORT\r\n\tconst onSort = (option) => {\r\n\t\trefValue.current = {\r\n\t\t\t...refValue.current,\r\n\t\t\tsort: option.title.sort,\r\n\t\t\tsortType: option.title.sortType\r\n\t\t}\r\n\t\tsetFilters({\r\n\t\t\t...listFieldInit,\r\n\t\t\t...refValue.current\r\n\t\t})\r\n\t}\r\n\t// RESET SEARCH\r\n\tconst onResetSearch = () => {\r\n\t\tsetActiveColumnSearch('')\r\n\t\tsetFilters({\r\n\t\t\t...listFieldInit,\r\n\t\t\tpageSize: refValue.current.pageSize\r\n\t\t})\r\n\t}\r\n\t// ACTION SEARCH\r\n\tconst onSearch = (valueSearch, dataIndex) => {\r\n\t\tsetActiveColumnSearch(dataIndex)\r\n\t\tsetFilters({\r\n\t\t\t...listFieldInit,\r\n\t\t\t...refValue.current,\r\n\t\t\tpageIndex: 1,\r\n\t\t\t[dataIndex]: valueSearch\r\n\t\t})\r\n\t}\r\n\t// GET AREA\r\n\tconst fetchAreaList = async () => {\r\n\t\ttry {\r\n\t\t\tconst res = await areaApi.getAll({\r\n\t\t\t\tselectAll: true\r\n\t\t\t})\r\n\t\t\tif (res.status === 200 && res.data.totalRow && res.data.data.length) {\r\n\t\t\t\tconst newAreaList = fmSelectArr(res.data.data, 'AreaName', 'AreaID')\r\n\t\t\t\tsetOptionAreaSystemList((prevState) => ({\r\n\t\t\t\t\t...prevState,\r\n\t\t\t\t\tareaList: newAreaList\r\n\t\t\t\t}))\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\t// showNoti('danger', error.message);\r\n\t\t}\r\n\t}\r\n\t// BRANCH BY AREA\r\n\tconst fetchBranchList = async () => {\r\n\t\ttry {\r\n\t\t\tlet res = await branchApi.getAll({\r\n\t\t\t\tpageSize: 9999\r\n\t\t\t})\r\n\t\t\tif (res.status === 200 && res.data.totalRow && res.data.data.length) {\r\n\t\t\t\tconst newBranchList = fmSelectArr(res.data.data, 'BranchName', 'ID')\r\n\t\t\t\tsetOptionAreaSystemList((prevState) => ({\r\n\t\t\t\t\t...prevState,\r\n\t\t\t\t\tbranchListTotal: newBranchList\r\n\t\t\t\t}))\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t}\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tfetchAreaList()\r\n\t\tfetchBranchList()\r\n\t}, [])\r\n\t// DISTRICT BY AREA\r\n\tconst fetchDistrictByAreaID = async (id: number) => {\r\n\t\ttry {\r\n\t\t\tconst res = await districtApi.getAll({\r\n\t\t\t\tAreaID: id\r\n\t\t\t})\r\n\t\t\tif (res.status === 200 && res.data.totalRow && res.data.data.length) {\r\n\t\t\t\tconst newDistrictList = fmSelectArr(res.data.data, 'DistrictName', 'ID')\r\n\t\t\t\tsetOptionAreaSystemList({\r\n\t\t\t\t\t...optionAreaSystemList,\r\n\t\t\t\t\tdistrictList: newDistrictList,\r\n\t\t\t\t\twardList: []\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t}\r\n\t}\r\n\t// WARD BY DISTRICT\r\n\tconst fetchWardByDistrictID = async (id: number) => {\r\n\t\tsetIsLoading({ type: 'FETCH_WARD_BY_DISTRICT', status: true })\r\n\t\ttry {\r\n\t\t\tconst res = await wardApi.getAll({\r\n\t\t\t\tDistrictID: id\r\n\t\t\t})\r\n\t\t\tif (res.status === 200 && res.data.totalRow && res.data.data.length) {\r\n\t\t\t\tconst newWardList = fmSelectArr(res.data.data, 'WardName', 'ID')\r\n\t\t\t\tsetOptionAreaSystemList({\r\n\t\t\t\t\t...optionAreaSystemList,\r\n\t\t\t\t\twardList: newWardList\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({ type: 'FETCH_WARD_BY_DISTRICT', status: false })\r\n\t\t}\r\n\t}\r\n\t// BRANCH BY AREA\r\n\tconst fetchBranchByAreaId = async (id: number) => {\r\n\t\tsetIsLoading({ type: 'FETCH_DATA_BY_AREA', status: true })\r\n\t\ttry {\r\n\t\t\tlet res = await branchApi.getAll({\r\n\t\t\t\tareaID: id,\r\n\t\t\t\tEnable: true\r\n\t\t\t})\r\n\t\t\tif (res.status === 200 && res.data.totalRow) {\r\n\t\t\t\tconst newBranchList = res.data.data.map((item) => ({\r\n\t\t\t\t\ttitle: item.BranchName,\r\n\t\t\t\t\tvalue: item.ID\r\n\t\t\t\t}))\r\n\r\n\t\t\t\tsetBranchList(newBranchList)\r\n\t\t\t}\r\n\t\t\tif (res.status === 204) {\r\n\t\t\t\tsetBranchList([])\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({ type: 'FETCH_DATA_BY_AREA', status: false })\r\n\t\t}\r\n\t}\r\n\t// GET DATA IN FIRST TIME\r\n\tconst fetchTeacherList = async () => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'GET_ALL',\r\n\t\t\tstatus: true\r\n\t\t})\r\n\t\ttry {\r\n\t\t\tlet res = await teacherApi.getAll(filters)\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tif (res.data.totalRow && res.data.data.length) {\r\n\t\t\t\t\tsetTeacherList(res.data.data)\r\n\t\t\t\t\tsetTotalPage(res.data.totalRow)\r\n\t\t\t\t}\r\n\t\t\t} else if (res.status === 204) {\r\n\t\t\t\tsetTeacherList([])\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'GET_ALL',\r\n\t\t\t\tstatus: false\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tfetchTeacherList()\r\n\t}, [filters])\r\n\r\n\t// SALARY\r\n\tconst onOpenSalaryForm = (userID) => {\r\n\t\tsetIsClearForm(false)\r\n\t\tsetOpenSalaryForm(true)\r\n\t\tgetInfoTeacherToAddSalary(userID)\r\n\t}\r\n\tconst onCloseSalaryForm = () => {\r\n\t\tsetIsClearForm(true)\r\n\t\tsetOpenSalaryForm(false)\r\n\t\tsetDataStaff([])\r\n\t}\r\n\tconst getInfoTeacherToAddSalary = async (userID) => {\r\n\t\ttry {\r\n\t\t\tconst res = await userInformationApi.getByID(userID)\r\n\t\t\tres.status === 200 && setDataStaff([res.data.data])\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t}\r\n\t}\r\n\r\n\tconst saveSalary = async (obj) => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'ADD_DATA',\r\n\t\t\tstatus: true\r\n\t\t})\r\n\t\tlet res\r\n\t\ttry {\r\n\t\t\tres = await staffSalaryApi.add(obj)\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tonCloseSalaryForm()\r\n\t\t\t\tshowNoti('success', res.data.message)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'ADD_DATA',\r\n\t\t\t\tstatus: false\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn res\r\n\t}\r\n\t// CREATE\r\n\tconst onCreateTeacher = async (data: any) => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'ADD_DATA',\r\n\t\t\tstatus: true\r\n\t\t})\r\n\t\tlet res\r\n\t\ttry {\r\n\t\t\tconst newTeacher = {\r\n\t\t\t\t...data,\r\n\t\t\t\tBranch: data.Branch.join(',')\r\n\t\t\t}\r\n\t\t\tres = await teacherApi.add(newTeacher)\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tonOpenSalaryForm(res.data.data.UserInformationID)\r\n\t\t\t\tshowNoti('success', res.data.message)\r\n\t\t\t\tonResetSearch() // <== khi tạo xong r reset search để trở về trang đầu tiên\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'ADD_DATA',\r\n\t\t\t\tstatus: false\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn res\r\n\t}\r\n\t// UPDATE\r\n\tconst onUpdateTeacher = async (newObj: any, idx: number) => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'ADD_DATA',\r\n\t\t\tstatus: true\r\n\t\t})\r\n\t\tlet res\r\n\t\ttry {\r\n\t\t\tconst newTeacherAPI = {\r\n\t\t\t\t...newObj,\r\n\t\t\t\tBranch: newObj.Branch.join(',')\r\n\t\t\t}\r\n\t\t\tres = await teacherApi.update(newTeacherAPI)\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tconst newTeacherList = [...teacherList]\r\n\t\t\t\tconst newBranch = optionAreaSystemList.branchListTotal\r\n\t\t\t\t\t.filter((ob) => newObj.Branch.some((nb) => nb === ob.value))\r\n\t\t\t\t\t.map((b) => ({\r\n\t\t\t\t\t\tID: b.value,\r\n\t\t\t\t\t\tBranchName: b.title\r\n\t\t\t\t\t}))\r\n\t\t\t\tnewTeacherList.splice(idx, 1, {\r\n\t\t\t\t\t...newObj,\r\n\t\t\t\t\t// AreaName: areaList.find((a) => a.value === newObj.AreaID).title,\r\n\t\t\t\t\tBranch: newBranch\r\n\t\t\t\t})\r\n\t\t\t\tsetTeacherList(newTeacherList)\r\n\t\t\t\tshowNoti('success', res.data.message)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'ADD_DATA',\r\n\t\t\t\tstatus: false\r\n\t\t\t})\r\n\t\t\treturn res\r\n\t\t}\r\n\t}\r\n\r\n\tconst _onSubmitPromoteTeacher = async (data) => {\r\n\t\tsetIsLoading({ type: 'PROMOTE', status: true })\r\n\t\ttry {\r\n\t\t\tlet res = await teacherApi.updateRole({ RoleID: 5, UserInformationID: data })\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tsetFilters({ ...filters })\r\n\t\t\t\tshowNoti('success', 'Thăng cấp thành công!')\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({ type: 'PROMOTE', status: false })\r\n\t\t}\r\n\t}\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Mã giáo viên',\r\n\t\t\tdataIndex: 'UserCode',\r\n\t\t\tfixed: 'left',\r\n\t\t\trender: (code) => <p className=\"font-weight-black\">{code}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Họ và tên',\r\n\t\t\tdataIndex: 'FullNameUnicode',\r\n\t\t\t...FilterColumn('FullNameUnicode', onSearch, onResetSearch, 'text'),\r\n\t\t\tclassName: activeColumnSearch === 'FullNameUnicode' ? 'active-column-search' : '',\r\n\t\t\trender: (text) => <p className=\"font-weight-primary\">{text}</p>,\r\n\t\t\tfixed: 'left'\r\n\t\t},\r\n\t\t{\r\n\t\t\twidth: 120,\r\n\t\t\ttitle: 'Tên tiếng Trung',\r\n\t\t\tdataIndex: 'ChineseName',\r\n\t\t\t...FilterColumn('ChineseName', onSearch, onResetSearch, 'text'),\r\n\t\t\trender: (text) => <p className=\"font-weight-primary\">{text}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Tỉnh/TP',\r\n\t\t\tdataIndex: 'AreaName',\r\n\t\t\t...FilterColumn('AreaID', onSearch, onResetSearch, 'select', optionAreaSystemList.areaList),\r\n\t\t\tclassName: activeColumnSearch === 'AreaID' ? 'active-column-search' : ''\r\n\t\t},\r\n\t\t{\r\n\t\t\twidth: 120,\r\n\t\t\ttitle: 'Giới tính',\r\n\t\t\tdataIndex: 'Gender',\r\n\t\t\trender: (genderID) => optionGenderList.find((o) => o.value === genderID).title\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'SĐT',\r\n\t\t\twidth: 120,\r\n\t\t\tdataIndex: 'Mobile',\r\n\t\t\t// ...FilterColumn('Mobile', onSearch, onResetSearch, 'text'),\r\n\t\t\trender: (text) => <p className=\"font-weight-primary\">{text}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Email',\r\n\t\t\twidth: 180,\r\n\t\t\tdataIndex: 'Email',\r\n\t\t\t// ...FilterColumn('Email', onSearch, onResetSearch, 'text'),\r\n\t\t\trender: (text) => <p className=\"font-weight-primary\">{text}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Ngày nhận việc',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'Jobdate',\r\n\t\t\trender: (date) => date && moment(date).format('DD/MM/YYYY')\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Facebook',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'LinkFaceBook',\r\n\t\t\trender: (link) =>\r\n\t\t\t\tlink && (\r\n\t\t\t\t\t<a className=\"font-weight-black\" href={link} target=\"_blank\">\r\n\t\t\t\t\t\tLink\r\n\t\t\t\t\t</a>\r\n\t\t\t\t)\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Trạng thái',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'StatusID',\r\n\t\t\talign: 'center',\r\n\t\t\t...FilterColumn('StatusID', onSearch, onResetSearch, 'select', optionStatusList),\r\n\t\t\trender: (status) => (status ? <span className=\"tag gray\">Khóa</span> : <span className=\"tag green\">Hoạt động</span>)\r\n\t\t},\r\n\r\n\t\t{\r\n\t\t\twidth: 140,\r\n\t\t\talign: 'center',\r\n\t\t\trender: (value, _, idx) => (\r\n\t\t\t\t<div onClick={(e) => e.stopPropagation()}>\r\n\t\t\t\t\t<Link\r\n\t\t\t\t\t\thref={{\r\n\t\t\t\t\t\t\tpathname: '/staff/teacher-list/teacher-detail/[slug]',\r\n\t\t\t\t\t\t\tquery: { slug: _.UserInformationID }\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Tooltip title=\"Chi tiết giảng dạy\">\r\n\t\t\t\t\t\t\t<a className=\"btn btn-icon\">\r\n\t\t\t\t\t\t\t\t<Eye />\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t<TeacherForm\r\n\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t\tisUpdate={true}\r\n\t\t\t\t\t\tupdateObj={value}\r\n\t\t\t\t\t\tindexUpdateObj={idx}\r\n\t\t\t\t\t\thandleUpdateTeacher={onUpdateTeacher}\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\toptionStatusList={optionStatusList}\r\n\t\t\t\t\t\toptionGenderList={optionGenderList}\r\n\t\t\t\t\t\toptionAreaSystemList={optionAreaSystemList}\r\n\t\t\t\t\t\thandleFetchDistrict={fetchDistrictByAreaID}\r\n\t\t\t\t\t\thandleFetchWard={fetchWardByDistrictID}\r\n\t\t\t\t\t\toptionBranchList={optionAreaSystemList.branchListTotal}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{/* {userInformation && userInformation?.RoleID == 1 && (\r\n\t\t\t\t\t\t<PromoteTeacher\r\n\t\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t\t\ttype=\"teacher\"\r\n\t\t\t\t\t\t\trecord={_}\r\n\t\t\t\t\t\t\t_onSubmitPromoteTeacher={() => _onSubmitPromoteTeacher(_.UserInformationID)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)} */}\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t}\r\n\t]\r\n\r\n\tconst expandedRowRender = (item: ITeacher) => {\r\n\t\treturn <SalaryTeacherNested teacherID={item.UserInformationID} />\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<StaffSalaryForm\r\n\t\t\t\tshowInTeacherView={true}\r\n\t\t\t\tisLoading={isLoading}\r\n\t\t\t\tisOpenModalFromOutSide={openSalaryForm}\r\n\t\t\t\topenModalFromOutSide={onCloseSalaryForm}\r\n\t\t\t\tdataStaff={dataStaff}\r\n\t\t\t\tdataIDStaff={dataStaff[0]?.UserInformationID}\r\n\t\t\t\t_onSubmit={(data: any) => saveSalary(data)}\r\n\t\t\t/>\r\n\t\t\t<ExpandTable\r\n\t\t\t\tcurrentPage={filters.pageIndex}\r\n\t\t\t\ttotalPage={totalPage}\r\n\t\t\t\tgetPagination={getPagination}\r\n\t\t\t\tloading={isLoading}\r\n\t\t\t\taddClass=\"basic-header\"\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\tdataSource={teacherList}\r\n\t\t\t\tTitlePage=\"Danh sách giáo viên\"\r\n\t\t\t\tTitleCard={\r\n\t\t\t\t\t<TeacherForm\r\n\t\t\t\t\t\tisClearForm={isClearForm}\r\n\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t\toptionAreaSystemList={optionAreaSystemList}\r\n\t\t\t\t\t\toptionBranchList={branchList}\r\n\t\t\t\t\t\thandleCreateTeacher={onCreateTeacher}\r\n\t\t\t\t\t\thandleFetchBranch={fetchBranchByAreaId}\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t\tExtra={\r\n\t\t\t\t\t<div className=\"extra-table\">\r\n\t\t\t\t\t\t<TeacherFilterForm handleFilter={onFilter} handleResetFilter={onResetSearch} />\r\n\t\t\t\t\t\t<SortBox handleSort={onSort} dataOption={sortOptionList} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\texpandable={{ expandedRowRender }}\r\n\t\t\t/>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default Teacher\r\n"]},"metadata":{},"sourceType":"module"}