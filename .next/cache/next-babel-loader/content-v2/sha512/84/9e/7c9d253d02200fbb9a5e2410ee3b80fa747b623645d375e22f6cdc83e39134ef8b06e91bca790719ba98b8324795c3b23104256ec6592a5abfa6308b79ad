{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\ScheduleStudyStudent\\\\ScheduleStudyStudent.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Card } from 'antd';\nimport moment from 'moment';\nimport React, { useEffect, useState } from 'react';\nimport { scheduleZoomApi } from '~/apiBase';\nimport TitlePage from '~/components/TitlePage';\nimport { useDebounce } from '~/context/useDebounce';\nimport { useWrap } from '~/context/wrap';\nimport CDCalendar from '../CourseList/CourseListDetail/CourseDetailCalendar/Calendar';\n\nvar ScheduleStudyStudent = function ScheduleStudyStudent() {\n  _s();\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti;\n\n  var _useState = useState({\n    type: '',\n    status: false\n  }),\n      isLoading = _useState[0],\n      setIsLoading = _useState[1];\n\n  var _useState2 = useState([]),\n      scheduleStudentList = _useState2[0],\n      setScheduleStudentList = _useState2[1];\n\n  var _useState3 = useState({\n    StartTime: moment().startOf('month').format('YYYY/MM/DD'),\n    EndTime: moment().endOf('month').format('YYYY/MM/DD')\n  }),\n      filters = _useState3[0],\n      setFilters = _useState3[1];\n\n  var fetchScheduleStudyStudent = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              setIsLoading({\n                type: 'FETCH_SCHEDULE_STUDENT',\n                status: true\n              });\n              _context.next = 4;\n              return scheduleZoomApi.getAll(filters);\n\n            case 4:\n              res = _context.sent;\n\n              if (res.status === 200) {\n                setScheduleStudentList(res.data.data);\n              }\n\n              if (res.status === 204) {\n                showNoti('danger', 'Lịch dạy trống');\n              }\n\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](0);\n              showNoti('danger', _context.t0.message);\n\n            case 12:\n              _context.prev = 12;\n              setIsLoading({\n                type: 'FETCH_SCHEDULE_STUDENT',\n                status: false\n              });\n              return _context.finish(12);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 9, 12, 15]]);\n    }));\n\n    return function fetchScheduleStudyStudent() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    fetchScheduleStudyStudent();\n  }, [filters]);\n\n  var fetchNewScheduleList = function fetchNewScheduleList(date) {\n    var fmDate;\n\n    if (date !== null && date !== void 0 && date.start && date !== null && date !== void 0 && date.end) {\n      fmDate = {\n        StartTime: moment(date.start).format('YYYY/MM/DD'),\n        EndTime: moment(date.end).format('YYYY/MM/DD')\n      };\n    }\n\n    if (Array.isArray(date) && date.length >= 1) {\n      fmDate = {\n        StartTime: moment(date[0]).format('YYYY/MM/DD'),\n        EndTime: moment(date[date.length - 1]).format('YYYY/MM/DD')\n      };\n    }\n\n    setFilters(fmDate || _objectSpread({}, filters));\n  };\n\n  var debounceFetchScheduleList = useDebounce(fetchNewScheduleList, 200, []);\n\n  var onHandleZoom = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data) {\n      var idx, btnID, btnName, scheduleID;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              try {\n                //0 - ,1-Bắt đầu , 2-Vào lớp học, 3-Kết thúc\n                idx = data.idx, btnID = data.btnID, btnName = data.btnName, scheduleID = data.scheduleID;\n\n                if (btnID === 2 && scheduleID) {\n                  window.open(\"/course/zoom-view/\".concat(scheduleID));\n                }\n              } catch (error) {\n                showNoti('danger', error.message);\n                console.log('fetchConfigAccount', error.message);\n              }\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function onHandleZoom(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // CALENDAR FORMAT\n\n\n  var calendarFm = function calendarFm(calendarArr) {\n    var rs = calendarArr.map(function (c, idx) {\n      var ID = c.ID,\n          Title = c.Title,\n          CourseID = c.CourseID,\n          BranchName = c.BranchName,\n          RoomName = c.RoomName,\n          SubjectName = c.SubjectName,\n          StartTime = c.StartTime,\n          EndTime = c.EndTime,\n          ButtonID = c.ButtonID,\n          ButtonName = c.ButtonName,\n          IsExam = c.IsExam,\n          ExamTopicID = c.ExamTopicID,\n          CurriculumsDetailID = c.CurriculumsDetailID,\n          TeacherAttendanceID = c.TeacherAttendanceID;\n      var studyTimeStart = moment(StartTime).format('HH:mm');\n      var studyTimeEnd = moment(EndTime).format('HH:mm');\n      var studyTime = \"\".concat(studyTimeStart, \" - \").concat(studyTimeEnd);\n      return {\n        id: +ID,\n        title: '',\n        start: moment(StartTime).toDate(),\n        end: moment(EndTime).toDate(),\n        CurriculumsDetailID: CurriculumsDetailID,\n        resource: {\n          ID: ID,\n          CourseID: CourseID,\n          CourseName: Title,\n          RoomName: RoomName,\n          BranchName: BranchName,\n          SubjectName: SubjectName,\n          //\n          StudyTimeName: studyTime,\n          //\n          ButtonID: ButtonID,\n          ButtonName: ButtonName,\n          idx: idx,\n          IsExam: IsExam,\n          ExamTopicID: ExamTopicID,\n          CurriculumsDetailID: CurriculumsDetailID,\n          TeacherAttendanceID: TeacherAttendanceID\n        }\n      };\n    });\n    return rs;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row\",\n    children: [/*#__PURE__*/_jsxDEV(TitlePage, {\n      title: \"L\\u1ECBch h\\u1ECDc c\\u1EE7a h\\u1ECDc vi\\xEAn\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-12\",\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        children: /*#__PURE__*/_jsxDEV(CDCalendar, {\n          isLoaded: isLoading.type === 'FETCH_SCHEDULE_STUDENT' && isLoading.status ? false : true,\n          eventList: calendarFm(scheduleStudentList),\n          isStudyZoom: true,\n          fetchStudyZoom: debounceFetchScheduleList,\n          handleStudyZoom: onHandleZoom\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 6\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 5\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 4\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 135,\n    columnNumber: 3\n  }, _this);\n};\n\n_s(ScheduleStudyStudent, \"Z9l22qf4Sh8S1x7ZiuGNTcfsxFQ=\", false, function () {\n  return [useWrap, useDebounce];\n});\n\n_c = ScheduleStudyStudent;\nexport default ScheduleStudyStudent;\n\nvar _c;\n\n$RefreshReg$(_c, \"ScheduleStudyStudent\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/ScheduleStudyStudent/ScheduleStudyStudent.tsx"],"names":["Card","moment","React","useEffect","useState","scheduleZoomApi","TitlePage","useDebounce","useWrap","CDCalendar","ScheduleStudyStudent","showNoti","type","status","isLoading","setIsLoading","scheduleStudentList","setScheduleStudentList","StartTime","startOf","format","EndTime","endOf","filters","setFilters","fetchScheduleStudyStudent","getAll","res","data","message","fetchNewScheduleList","date","fmDate","start","end","Array","isArray","length","debounceFetchScheduleList","onHandleZoom","idx","btnID","btnName","scheduleID","window","open","error","console","log","calendarFm","calendarArr","rs","map","c","ID","Title","CourseID","BranchName","RoomName","SubjectName","ButtonID","ButtonName","IsExam","ExamTopicID","CurriculumsDetailID","TeacherAttendanceID","studyTimeStart","studyTimeEnd","studyTime","id","title","toDate","resource","CourseName","StudyTimeName"],"mappings":"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","sourcesContent":["import { Card } from 'antd';\r\nimport moment from 'moment';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { scheduleZoomApi } from '~/apiBase';\r\nimport TitlePage from '~/components/TitlePage';\r\nimport { useDebounce } from '~/context/useDebounce';\r\nimport { useWrap } from '~/context/wrap';\r\nimport CDCalendar from '../CourseList/CourseListDetail/CourseDetailCalendar/Calendar';\r\n\r\nconst ScheduleStudyStudent = () => {\r\n\tconst { showNoti } = useWrap();\r\n\tconst [isLoading, setIsLoading] = useState({\r\n\t\ttype: '',\r\n\t\tstatus: false\r\n\t});\r\n\tconst [scheduleStudentList, setScheduleStudentList] = useState<IScheduleZoom[]>([]);\r\n\tconst [filters, setFilters] = useState({\r\n\t\tStartTime: moment().startOf('month').format('YYYY/MM/DD'),\r\n\t\tEndTime: moment().endOf('month').format('YYYY/MM/DD')\r\n\t});\r\n\r\n\tconst fetchScheduleStudyStudent = async () => {\r\n\t\ttry {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'FETCH_SCHEDULE_STUDENT',\r\n\t\t\t\tstatus: true\r\n\t\t\t});\r\n\t\t\tconst res = await scheduleZoomApi.getAll(filters);\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tsetScheduleStudentList(res.data.data);\r\n\t\t\t}\r\n\t\t\tif (res.status === 204) {\r\n\t\t\t\tshowNoti('danger', 'Lịch dạy trống');\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'FETCH_SCHEDULE_STUDENT',\r\n\t\t\t\tstatus: false\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchScheduleStudyStudent();\r\n\t}, [filters]);\r\n\r\n\tconst fetchNewScheduleList = (date) => {\r\n\t\tlet fmDate;\r\n\t\tif (date?.start && date?.end) {\r\n\t\t\tfmDate = {\r\n\t\t\t\tStartTime: moment(date.start).format('YYYY/MM/DD'),\r\n\t\t\t\tEndTime: moment(date.end).format('YYYY/MM/DD')\r\n\t\t\t};\r\n\t\t}\r\n\t\tif (Array.isArray(date) && date.length >= 1) {\r\n\t\t\tfmDate = {\r\n\t\t\t\tStartTime: moment(date[0]).format('YYYY/MM/DD'),\r\n\t\t\t\tEndTime: moment(date[date.length - 1]).format('YYYY/MM/DD')\r\n\t\t\t};\r\n\t\t}\r\n\t\tsetFilters(fmDate || { ...filters });\r\n\t};\r\n\tconst debounceFetchScheduleList = useDebounce(fetchNewScheduleList, 200, []);\r\n\r\n\tconst onHandleZoom = async (data: { idx: number; btnID: number; btnName?: string; scheduleID: number }) => {\r\n\t\ttry {\r\n\t\t\t//0 - ,1-Bắt đầu , 2-Vào lớp học, 3-Kết thúc\r\n\t\t\tconst { idx, btnID, btnName, scheduleID } = data;\r\n\t\t\tif (btnID === 2 && scheduleID) {\r\n\t\t\t\twindow.open(`/course/zoom-view/${scheduleID}`);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message);\r\n\t\t\tconsole.log('fetchConfigAccount', error.message);\r\n\t\t}\r\n\t};\r\n\r\n\t// CALENDAR FORMAT\r\n\tconst calendarFm = (calendarArr: IScheduleZoom[]) => {\r\n\t\tconst rs = calendarArr.map((c, idx) => {\r\n\t\t\tconst {\r\n\t\t\t\tID,\r\n\t\t\t\tTitle,\r\n\t\t\t\tCourseID,\r\n\t\t\t\tBranchName,\r\n\t\t\t\tRoomName,\r\n\t\t\t\tSubjectName,\r\n\t\t\t\tStartTime,\r\n\t\t\t\tEndTime,\r\n\t\t\t\t//\r\n\t\t\t\tButtonID,\r\n\t\t\t\tButtonName,\r\n\t\t\t\t//\r\n\t\t\t\tIsExam,\r\n\t\t\t\tExamTopicID,\r\n\t\t\t\tCurriculumsDetailID,\r\n\t\t\t\tTeacherAttendanceID\r\n\t\t\t} = c;\r\n\t\t\tconst studyTimeStart = moment(StartTime).format('HH:mm');\r\n\t\t\tconst studyTimeEnd = moment(EndTime).format('HH:mm');\r\n\t\t\tconst studyTime = `${studyTimeStart} - ${studyTimeEnd}`;\r\n\r\n\t\t\treturn {\r\n\t\t\t\tid: +ID,\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tstart: moment(StartTime).toDate(),\r\n\t\t\t\tend: moment(EndTime).toDate(),\r\n\t\t\t\tCurriculumsDetailID: CurriculumsDetailID,\r\n\t\t\t\tresource: {\r\n\t\t\t\t\tID,\r\n\t\t\t\t\tCourseID,\r\n\t\t\t\t\tCourseName: Title,\r\n\t\t\t\t\tRoomName,\r\n\t\t\t\t\tBranchName,\r\n\t\t\t\t\tSubjectName,\r\n\t\t\t\t\t//\r\n\t\t\t\t\tStudyTimeName: studyTime,\r\n\t\t\t\t\t//\r\n\t\t\t\t\tButtonID,\r\n\t\t\t\t\tButtonName,\r\n\t\t\t\t\tidx,\r\n\t\t\t\t\tIsExam,\r\n\t\t\t\t\tExamTopicID,\r\n\t\t\t\t\tCurriculumsDetailID,\r\n\t\t\t\t\tTeacherAttendanceID\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t});\r\n\t\treturn rs;\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"row\">\r\n\t\t\t<TitlePage title=\"Lịch học của học viên\" />\r\n\t\t\t<div className=\"col-12\">\r\n\t\t\t\t<Card>\r\n\t\t\t\t\t<CDCalendar\r\n\t\t\t\t\t\tisLoaded={isLoading.type === 'FETCH_SCHEDULE_STUDENT' && isLoading.status ? false : true}\r\n\t\t\t\t\t\teventList={calendarFm(scheduleStudentList)}\r\n\t\t\t\t\t\tisStudyZoom={true}\r\n\t\t\t\t\t\tfetchStudyZoom={debounceFetchScheduleList}\r\n\t\t\t\t\t\thandleStudyZoom={onHandleZoom}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Card>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default ScheduleStudyStudent;\r\n"]},"metadata":{},"sourceType":"module"}