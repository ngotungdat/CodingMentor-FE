{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\Package\\\\Package\\\\PackageForm\\\\PackageForm.tsx\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { Form, Modal, Spin, Tooltip } from 'antd';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport InputTextField from '~/components/FormControl/InputTextField';\nimport RadioField from '~/components/FormControl/RadioField';\nimport TextAreaField from '~/components/FormControl/TextAreaField';\nimport UploadAvatarField from '~/components/FormControl/UploadAvatarField';\nimport { numberWithCommas } from '~/utils/functions';\nimport { radioCommonPropTypes } from '~/utils/proptypes';\nimport PriceField from '~/components/FormControl/PriceField';\nPackageForm.propTypes = {\n  isUpdate: PropTypes.bool,\n  updateObj: PropTypes.shape({}),\n  isLoading: PropTypes.shape({\n    type: PropTypes.string.isRequired,\n    status: PropTypes.bool.isRequired\n  }),\n  handleCreatePackage: PropTypes.func,\n  handleUpdatePackage: PropTypes.func,\n  paymentMethodOptionList: radioCommonPropTypes\n};\nPackageForm.defaultProps = {\n  isUpdate: false,\n  updateObj: {},\n  isLoading: {\n    type: '',\n    status: false\n  },\n  handleCreatePackage: null,\n  handleUpdatePackage: null,\n  paymentMethodOptionList: []\n};\n\nfunction PackageForm(props) {\n  _s();\n\n  var isUpdate = props.isUpdate,\n      isLoading = props.isLoading,\n      updateObj = props.updateObj,\n      handleCreatePackage = props.handleCreatePackage,\n      handleUpdatePackage = props.handleUpdatePackage,\n      paymentMethodOptionList = props.paymentMethodOptionList;\n\n  var _useState = useState(false),\n      isModalVisible = _useState[0],\n      setIsModalVisible = _useState[1];\n\n  var _useState2 = useState(false),\n      showMoreField = _useState2[0],\n      setShowMoreField = _useState2[1];\n\n  var openModal = function openModal() {\n    return setIsModalVisible(true);\n  };\n\n  var closeModal = function closeModal() {\n    return setIsModalVisible(false);\n  };\n\n  var schema = yup.object().shape({\n    Name: yup.string().required('Bạn không được để trống'),\n    Level: yup.number().typeError('Bạn không được để trống').min(1, 'Level thấp nhất là 1').max(6, 'Level cao nhất là 6').required('Bạn không được để trống'),\n    Type: yup.number().required('Bạn không được để trống'),\n    Description: yup.string().nullable(),\n    Avatar: yup.string(),\n    Price: yup.string().notRequired().when('Type', function (Type, schema) {\n      if (parseInt(Type) === 2) {\n        return yup.string().required('Bạn không được để trống');\n      }\n\n      return yup.string().notRequired();\n    })\n  });\n  var defaultValuesInit = {\n    Name: '',\n    Level: 1,\n    Type: 1,\n    Avatar: '',\n    Price: '',\n    Description: ''\n  };\n  var form = useForm({\n    defaultValues: defaultValuesInit,\n    resolver: yupResolver(schema)\n  });\n  useEffect(function () {\n    if (isUpdate && updateObj) {\n      if (updateObj.Type === 2) setShowMoreField(true);\n      form.reset(_objectSpread(_objectSpread({}, updateObj), {}, {\n        Price: !updateObj.Price ? '' : numberWithCommas(updateObj.Price)\n      }));\n    }\n  }, [updateObj]);\n\n  var packageListSwitchFunc = function packageListSwitchFunc(data) {\n    switch (isUpdate) {\n      case true:\n        if (!handleUpdatePackage) return;\n        handleUpdatePackage(data).then(function (res) {\n          if (res && res.status === 200) {\n            closeModal();\n          }\n        });\n        break;\n\n      case false:\n        if (!handleCreatePackage) return;\n        handleCreatePackage(data).then(function (res) {\n          if (res && res.status === 200) {\n            closeModal();\n            form.reset(_objectSpread({}, defaultValuesInit));\n          }\n        });\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [isUpdate ? /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-icon edit\",\n      onClick: openModal,\n      children: /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: \"C\\u1EADp nh\\u1EADt\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-edit\",\n          style: {\n            color: '#34c4a4',\n            fontSize: 16,\n            marginBottom: -1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-warning add-new\",\n      onClick: openModal,\n      children: \"T\\u1EA1o b\\u1ED9 \\u0111\\u1EC1 m\\u1EDBi\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      style: {\n        top: 50\n      },\n      title: isUpdate ? 'Cập nhật bộ đề' : 'Tạo bộ đề mới',\n      visible: isModalVisible,\n      footer: null,\n      onCancel: closeModal,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrap-form\",\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          layout: \"vertical\",\n          onFinish: form.handleSubmit(packageListSwitchFunc),\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-12 col-12\",\n              children: /*#__PURE__*/_jsxDEV(InputTextField, {\n                isRequired: true,\n                form: form,\n                name: \"Name\",\n                label: \"T\\xEAn b\\u1ED9 \\u0111\\u1EC1\",\n                placeholder: \"Nh\\u1EADp t\\xEAn b\\u1ED9 \\u0111\\u1EC1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 col-12\",\n              children: /*#__PURE__*/_jsxDEV(UploadAvatarField, {\n                form: form,\n                name: \"Avatar\",\n                label: \"Thumbnail\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 col-12\",\n              children: [/*#__PURE__*/_jsxDEV(RadioField, {\n                form: form,\n                name: \"Type\",\n                label: \"Ch\\u1ECDn lo\\u1EA1i\",\n                radioList: paymentMethodOptionList,\n                handleChange: function handleChange(typeID) {\n                  typeID === 2 ? setShowMoreField(true) : setShowMoreField(false);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 9\n              }, this), showMoreField && /*#__PURE__*/_jsxDEV(PriceField, {\n                isRequired: true,\n                form: form,\n                name: \"Price\",\n                label: \"Gi\\xE1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 27\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-12 col-12 mb-5\",\n              children: /*#__PURE__*/_jsxDEV(TextAreaField, {\n                form: form,\n                name: \"Description\",\n                label: \"M\\xF4 t\\u1EA3\",\n                placeholder: \"Nh\\u1EADp m\\xF4 t\\u1EA3\",\n                rows: 5\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-12 col-12 mt-3 \",\n              style: {\n                textAlign: 'center'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-primary\",\n                disabled: isLoading.type == 'ADD_DATA' && isLoading.status,\n                children: [isUpdate ? 'Cập nhật' : 'Khởi tạo', isLoading.type == 'ADD_DATA' && isLoading.status && /*#__PURE__*/_jsxDEV(Spin, {\n                  className: \"loading-base\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 63\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n}\n\n_s(PackageForm, \"99GkKH+YI0wI0bwWil6h6vPjeug=\", false, function () {\n  return [useForm];\n});\n\n_c = PackageForm;\nexport default PackageForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"PackageForm\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/Package/Package/PackageForm/PackageForm.tsx"],"names":["yupResolver","Form","Modal","Spin","Tooltip","PropTypes","React","useEffect","useState","useForm","yup","InputTextField","RadioField","TextAreaField","UploadAvatarField","numberWithCommas","radioCommonPropTypes","PriceField","PackageForm","propTypes","isUpdate","bool","updateObj","shape","isLoading","type","string","isRequired","status","handleCreatePackage","func","handleUpdatePackage","paymentMethodOptionList","defaultProps","props","isModalVisible","setIsModalVisible","showMoreField","setShowMoreField","openModal","closeModal","schema","object","Name","required","Level","number","typeError","min","max","Type","Description","nullable","Avatar","Price","notRequired","when","parseInt","defaultValuesInit","form","defaultValues","resolver","reset","packageListSwitchFunc","data","then","res","color","fontSize","marginBottom","top","handleSubmit","typeID","textAlign"],"mappings":"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","sourcesContent":["import { yupResolver } from '@hookform/resolvers/yup'\r\nimport { Form, Modal, Spin, Tooltip } from 'antd'\r\nimport PropTypes from 'prop-types'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport * as yup from 'yup'\r\nimport InputTextField from '~/components/FormControl/InputTextField'\r\nimport RadioField from '~/components/FormControl/RadioField'\r\nimport TextAreaField from '~/components/FormControl/TextAreaField'\r\nimport UploadAvatarField from '~/components/FormControl/UploadAvatarField'\r\nimport { numberWithCommas } from '~/utils/functions'\r\nimport { radioCommonPropTypes } from '~/utils/proptypes'\r\nimport PriceField from '~/components/FormControl/PriceField'\r\n\r\nPackageForm.propTypes = {\r\n\tisUpdate: PropTypes.bool,\r\n\tupdateObj: PropTypes.shape({}),\r\n\tisLoading: PropTypes.shape({ type: PropTypes.string.isRequired, status: PropTypes.bool.isRequired }),\r\n\thandleCreatePackage: PropTypes.func,\r\n\thandleUpdatePackage: PropTypes.func,\r\n\tpaymentMethodOptionList: radioCommonPropTypes\r\n}\r\nPackageForm.defaultProps = {\r\n\tisUpdate: false,\r\n\tupdateObj: {},\r\n\tisLoading: { type: '', status: false },\r\n\thandleCreatePackage: null,\r\n\thandleUpdatePackage: null,\r\n\tpaymentMethodOptionList: []\r\n}\r\n\r\nfunction PackageForm(props) {\r\n\tconst { isUpdate, isLoading, updateObj, handleCreatePackage, handleUpdatePackage, paymentMethodOptionList } = props\r\n\tconst [isModalVisible, setIsModalVisible] = useState(false)\r\n\tconst [showMoreField, setShowMoreField] = useState(false)\r\n\tconst openModal = () => setIsModalVisible(true)\r\n\tconst closeModal = () => setIsModalVisible(false)\r\n\r\n\tconst schema = yup.object().shape({\r\n\t\tName: yup.string().required('Bạn không được để trống'),\r\n\t\tLevel: yup\r\n\t\t\t.number()\r\n\t\t\t.typeError('Bạn không được để trống')\r\n\t\t\t.min(1, 'Level thấp nhất là 1')\r\n\t\t\t.max(6, 'Level cao nhất là 6')\r\n\t\t\t.required('Bạn không được để trống'),\r\n\t\tType: yup.number().required('Bạn không được để trống'),\r\n\t\tDescription: yup.string().nullable(),\r\n\t\tAvatar: yup.string(),\r\n\t\tPrice: yup\r\n\t\t\t.string()\r\n\t\t\t.notRequired()\r\n\t\t\t.when('Type', (Type, schema) => {\r\n\t\t\t\tif (parseInt(Type) === 2) {\r\n\t\t\t\t\treturn yup.string().required('Bạn không được để trống')\r\n\t\t\t\t}\r\n\t\t\t\treturn yup.string().notRequired()\r\n\t\t\t})\r\n\t})\r\n\tconst defaultValuesInit = {\r\n\t\tName: '',\r\n\t\tLevel: 1,\r\n\t\tType: 1,\r\n\t\tAvatar: '',\r\n\t\tPrice: '',\r\n\t\tDescription: ''\r\n\t}\r\n\tconst form = useForm({\r\n\t\tdefaultValues: defaultValuesInit,\r\n\t\tresolver: yupResolver(schema)\r\n\t})\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isUpdate && updateObj) {\r\n\t\t\tif (updateObj.Type === 2) setShowMoreField(true)\r\n\t\t\tform.reset({ ...updateObj, Price: !updateObj.Price ? '' : numberWithCommas(updateObj.Price) })\r\n\t\t}\r\n\t}, [updateObj])\r\n\r\n\tconst packageListSwitchFunc = (data: {\r\n\t\tName: string\r\n\t\tLevel: number\r\n\t\tType: number\r\n\t\tAvatar: string\r\n\t\tPrice: string\r\n\t\tDescription: string\r\n\t}) => {\r\n\t\tswitch (isUpdate) {\r\n\t\t\tcase true:\r\n\t\t\t\tif (!handleUpdatePackage) return\r\n\t\t\t\thandleUpdatePackage(data).then((res) => {\r\n\t\t\t\t\tif (res && res.status === 200) {\r\n\t\t\t\t\t\tcloseModal()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tbreak\r\n\t\t\tcase false:\r\n\t\t\t\tif (!handleCreatePackage) return\r\n\t\t\t\thandleCreatePackage(data).then((res) => {\r\n\t\t\t\t\tif (res && res.status === 200) {\r\n\t\t\t\t\t\tcloseModal()\r\n\t\t\t\t\t\tform.reset({ ...defaultValuesInit })\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{isUpdate ? (\r\n\t\t\t\t<button className=\"btn btn-icon edit\" onClick={openModal}>\r\n\t\t\t\t\t<Tooltip title=\"Cập nhật\">\r\n\t\t\t\t\t\t<i className=\"fas fa-edit\" style={{ color: '#34c4a4', fontSize: 16, marginBottom: -1 }}></i>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t</button>\r\n\t\t\t) : (\r\n\t\t\t\t<button className=\"btn btn-warning add-new\" onClick={openModal}>\r\n\t\t\t\t\tTạo bộ đề mới\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\r\n\t\t\t<Modal\r\n\t\t\t\tstyle={{ top: 50 }}\r\n\t\t\t\ttitle={isUpdate ? 'Cập nhật bộ đề' : 'Tạo bộ đề mới'}\r\n\t\t\t\tvisible={isModalVisible}\r\n\t\t\t\tfooter={null}\r\n\t\t\t\tonCancel={closeModal}\r\n\t\t\t>\r\n\t\t\t\t<div className=\"wrap-form\">\r\n\t\t\t\t\t<Form layout=\"vertical\" onFinish={form.handleSubmit(packageListSwitchFunc)}>\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t<div className=\"col-md-12 col-12\">\r\n\t\t\t\t\t\t\t\t<InputTextField isRequired form={form} name=\"Name\" label=\"Tên bộ đề\" placeholder=\"Nhập tên bộ đề\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-md-6 col-12\">\r\n\t\t\t\t\t\t\t\t<UploadAvatarField form={form} name=\"Avatar\" label=\"Thumbnail\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-md-6 col-12\">\r\n\t\t\t\t\t\t\t\t<RadioField\r\n\t\t\t\t\t\t\t\t\tform={form}\r\n\t\t\t\t\t\t\t\t\tname=\"Type\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"Chọn loại\"\r\n\t\t\t\t\t\t\t\t\tradioList={paymentMethodOptionList}\r\n\t\t\t\t\t\t\t\t\thandleChange={(typeID: number) => {\r\n\t\t\t\t\t\t\t\t\t\ttypeID === 2 ? setShowMoreField(true) : setShowMoreField(false)\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t{showMoreField && <PriceField isRequired form={form} name=\"Price\" label=\"Giá\" />}\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div className=\"col-md-12 col-12 mb-5\">\r\n\t\t\t\t\t\t\t\t<TextAreaField form={form} name=\"Description\" label=\"Mô tả\" placeholder=\"Nhập mô tả\" rows={5} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-md-12 col-12 mt-3 \" style={{ textAlign: 'center' }}>\r\n\t\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary\" disabled={isLoading.type == 'ADD_DATA' && isLoading.status}>\r\n\t\t\t\t\t\t\t\t\t{isUpdate ? 'Cập nhật' : 'Khởi tạo'}\r\n\t\t\t\t\t\t\t\t\t{isLoading.type == 'ADD_DATA' && isLoading.status && <Spin className=\"loading-base\" />}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default PackageForm\r\n"]},"metadata":{},"sourceType":"module"}