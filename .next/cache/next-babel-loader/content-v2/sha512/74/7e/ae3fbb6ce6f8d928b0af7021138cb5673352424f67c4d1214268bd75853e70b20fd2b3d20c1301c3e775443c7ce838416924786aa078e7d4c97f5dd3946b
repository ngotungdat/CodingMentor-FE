{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\CourseCalendar\\\\rate.tsx\";\nimport { Button, Input, Popover, Rate, Spin } from 'antd';\nimport moment from 'moment';\nimport React, { useState, useEffect } from 'react';\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\nimport { useWrap } from '~/context/wrap';\nimport { CalendarApi } from '~/apiBase/Calendar/calendar';\nconst {\n  TextArea\n} = Input;\nmoment.locale('vi');\n\nconst RateEvent = props => {\n  const {\n    title,\n    ID,\n    getData,\n    Status\n  } = props;\n  const {\n    showNoti,\n    userInformation\n  } = useWrap();\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: errorText,\n    1: setErrorText\n  } = useState('');\n  const {\n    0: rate,\n    1: setRate\n  } = useState(5);\n  const {\n    0: reason,\n    1: setReason\n  } = useState('');\n\n  const isTeach = () => {\n    return !!userInformation && userInformation.RoleID == 2 ? true : false;\n  };\n\n  useEffect(() => {\n    setErrorText('');\n  }, []);\n\n  const _bookEvent = async Sta => {\n    setLoading(true);\n\n    if (!reason) {\n      setErrorText(`Vui lòng nhập nội dung`);\n    } else {\n      try {\n        const res = await (!isTeach() ? CalendarApi.update({\n          ID: ID,\n          StarRating: rate,\n          StudentRemark: reason\n        }) : CalendarApi.update({\n          ID: ID,\n          TeacherRemark: reason\n        }));\n\n        if (res.status == 200 || res.status == 204) {\n          showNoti('success', 'Thành công');\n          getData();\n        }\n      } catch (error) {\n        showNoti('danger', error === null || error === void 0 ? void 0 : error.message);\n      } finally {\n        setLoading(false);\n      }\n    }\n  };\n\n  const content = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-100 wrap-calendar-x\",\n      style: {\n        minWidth: 350\n      },\n      children: [!isTeach() && /*#__PURE__*/_jsxDEV(Rate, {\n        defaultValue: rate,\n        onChange: e => setRate(e),\n        count: 5\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 20\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-2 mt-3\",\n        children: [\"Nh\\u1EADp n\\u1ED9i dung\", /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: 'red'\n          },\n          children: \" *\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(TextArea, {\n        onChange: e => setReason(e.target.value),\n        className: \"ant-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 5\n      }, this), !errorText && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2\",\n        style: {\n          color: 'red'\n        },\n        children: errorText || ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => _bookEvent(3),\n        size: \"middle\",\n        className: \"btn-primary w-100 mt-2\",\n        children: [\"L\\u01B0u l\\u1EA1i \", loading && /*#__PURE__*/_jsxDEV(Spin, {\n          className: \"ml-2\",\n          size: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 26\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 4\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"wrap-calendar-x\",\n    style: {\n      zIndex: 999\n    },\n    children: /*#__PURE__*/_jsxDEV(Popover, {\n      content: content,\n      title: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontWeight: 'bold'\n        },\n        children: `Đánh giá: ${title}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 12\n      }, this),\n      trigger: \"hover\",\n      placement: \"rightTop\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        size: \"middle\",\n        className: \"btn-blue w-100 mt-2 shadow\",\n        children: \"\\u0110\\xE1nh gi\\xE1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 3\n  }, this);\n};\n\nexport default RateEvent;","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/CourseCalendar/rate.tsx"],"names":["Button","Input","Popover","Rate","Spin","moment","React","useState","useEffect","useWrap","CalendarApi","TextArea","locale","RateEvent","props","title","ID","getData","Status","showNoti","userInformation","loading","setLoading","errorText","setErrorText","rate","setRate","reason","setReason","isTeach","RoleID","_bookEvent","Sta","res","update","StarRating","StudentRemark","TeacherRemark","status","error","message","content","minWidth","e","color","target","value","zIndex","fontWeight"],"mappings":"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","sourcesContent":["import { Button, Input, Popover, Rate, Spin } from 'antd'\r\nimport moment from 'moment'\r\nimport React, { useState, useEffect } from 'react'\r\nimport 'react-big-calendar/lib/css/react-big-calendar.css'\r\nimport { useWrap } from '~/context/wrap'\r\nimport _ from '~/appConfig'\r\nimport { CalendarApi } from '~/apiBase/Calendar/calendar'\r\n\r\nconst { TextArea } = Input\r\nmoment.locale('vi')\r\n\r\nconst RateEvent = (props: any) => {\r\n\tconst { title, ID, getData, Status } = props\r\n\tconst { showNoti, userInformation } = useWrap()\r\n\r\n\tconst [loading, setLoading] = useState<boolean>(false)\r\n\tconst [errorText, setErrorText] = useState<any>('')\r\n\tconst [rate, setRate] = useState<any>(5)\r\n\tconst [reason, setReason] = useState<any>('')\r\n\r\n\tconst isTeach = () => {\r\n\t\treturn !!userInformation && userInformation.RoleID == 2 ? true : false\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetErrorText('')\r\n\t}, [])\r\n\r\n\tconst _bookEvent = async (Sta: number) => {\r\n\t\tsetLoading(true)\r\n\t\tif (!reason) {\r\n\t\t\tsetErrorText(`Vui lòng nhập nội dung`)\r\n\t\t} else {\r\n\t\t\ttry {\r\n\t\t\t\tconst res: any = await (!isTeach()\r\n\t\t\t\t\t? CalendarApi.update({ ID: ID, StarRating: rate, StudentRemark: reason })\r\n\t\t\t\t\t: CalendarApi.update({ ID: ID, TeacherRemark: reason }))\r\n\t\t\t\tif (res.status == 200 || res.status == 204) {\r\n\t\t\t\t\tshowNoti('success', 'Thành công')\r\n\t\t\t\t\tgetData()\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tshowNoti('danger', error?.message)\r\n\t\t\t} finally {\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst content = () => {\r\n\t\treturn (\r\n\t\t\t<div className=\"w-100 wrap-calendar-x\" style={{ minWidth: 350 }}>\r\n\t\t\t\t{!isTeach() && <Rate defaultValue={rate} onChange={(e) => setRate(e)} count={5} />}\r\n\r\n\t\t\t\t<div className=\"mb-2 mt-3\">\r\n\t\t\t\t\tNhập nội dung<span style={{ color: 'red' }}> *</span>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<TextArea onChange={(e: any) => setReason(e.target.value)} className=\"ant-input\" />\r\n\r\n\t\t\t\t{!errorText && (\r\n\t\t\t\t\t<div className=\"mt-2\" style={{ color: 'red' }}>\r\n\t\t\t\t\t\t{errorText || ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<Button onClick={() => _bookEvent(3)} size=\"middle\" className=\"btn-primary w-100 mt-2\">\r\n\t\t\t\t\tLưu lại {loading && <Spin className=\"ml-2\" size=\"small\" />}\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"wrap-calendar-x\" style={{ zIndex: 999 }}>\r\n\t\t\t<Popover\r\n\t\t\t\tcontent={content}\r\n\t\t\t\ttitle={<div style={{ fontWeight: 'bold' }}>{`Đánh giá: ${title}`}</div>}\r\n\t\t\t\ttrigger=\"hover\"\r\n\t\t\t\tplacement=\"rightTop\"\r\n\t\t\t>\r\n\t\t\t\t<Button size=\"middle\" className=\"btn-blue w-100 mt-2 shadow\">\r\n\t\t\t\t\tĐánh giá\r\n\t\t\t\t</Button>\r\n\t\t\t</Popover>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default RateEvent\r\n"]},"metadata":{},"sourceType":"module"}