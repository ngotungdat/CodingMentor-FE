{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\pages\\\\staff\\\\teacher-salary\\\\index.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { EllipsisOutlined } from '@ant-design/icons';\nimport { Card, DatePicker, Dropdown, Popconfirm, Spin } from 'antd';\nimport moment from 'moment';\nimport React, { useEffect, useRef, useState } from 'react';\nimport XLSX from 'xlsx';\nimport { teacherSalaryApi } from '~/apiBase/staff-manage/teacher-salary';\nimport SortBox from '~/components/Elements/SortBox';\nimport ExpandTable from '~/components/ExpandTable';\nimport LayoutBase from '~/components/LayoutBase';\nimport FilterColumn from '~/components/Tables/FilterColumn';\nimport { useWrap } from '~/context/wrap';\nimport { numberWithCommas } from '~/utils/functions';\nimport ConfirmForm from '../../../components/Global/Teacher/TeacherSalary/confirm-form';\nimport SalaryOfTeacherDetail from '../../../components/Global/Teacher/TeacherSalary/salary-of-teacher-detail';\nimport TeacherFixExam from '../../../components/Global/Teacher/TeacherSalary/teacher-fix-exam';\nconst now = new Date();\n\nconst SalaryReview = () => {\n  const {\n    0: totalPage,\n    1: setTotalPage\n  } = useState(null);\n  const [visible, setVisible] = React.useState(false);\n  const {\n    0: dropDownVisible,\n    1: setDropDownVisible\n  } = useState(false);\n  const {\n    0: payRoll,\n    1: setPayRoll\n  } = useState([]);\n  const {\n    0: currentPage,\n    1: setCurrentPage\n  } = useState(1);\n  const {\n    showNoti,\n    userInformation,\n    pageSize\n  } = useWrap();\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState({\n    type: 'GET_ALL',\n    status: false\n  });\n  const months = ['Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6', 'Tháng 7', 'Tháng 8', 'Tháng 9', 'Tháng 10', 'Tháng 11', 'Tháng 12'];\n\n  const getLastYear = () => {\n    return now.getMonth() == 0 ? now.getFullYear() - 1 : now.getFullYear();\n  };\n\n  const getDateNumber = number => {\n    return number > 10 ? number : number == 0 ? '12' : '0' + number;\n  };\n\n  const paramDefault = {\n    pageIndex: currentPage,\n    pageSize: pageSize,\n    // selectAll: true,\n    Year: getLastYear(),\n    Month: getDateNumber(now.getMonth()),\n    TeacherName: null,\n    TeacherID: null,\n    StatusID: null,\n    sort: null,\n    sortType: null\n  };\n  const {\n    0: params,\n    1: setParams\n  } = useState(paramDefault);\n  let listFieldSearch = {\n    pageIndex: 1,\n    TeacherName: null\n  }; // SORT\n\n  const sortOptionList = [{\n    dataSort: {\n      sort: 0,\n      sortType: false\n    },\n    value: 1,\n    text: 'Tên giảm dần'\n  }, {\n    dataSort: {\n      sort: 0,\n      sortType: true\n    },\n    value: 2,\n    text: 'Tên tăng dần '\n  }, {\n    dataSort: {\n      sort: 1,\n      sortType: false\n    },\n    value: 3,\n    text: 'Lương tổng giảm dần'\n  }, {\n    dataSort: {\n      sort: 1,\n      sortType: true\n    },\n    value: 4,\n    text: 'Lương tổng tăng dần '\n  }];\n  let refValue = useRef({\n    pageIndex: 1,\n    pageSize: pageSize,\n    sort: -1,\n    sortType: false\n  }); // ------------ ON SEARCH -----------------------\n\n  const checkField = (valueSearch, dataIndex) => {\n    let newList = _objectSpread({}, listFieldSearch);\n\n    Object.keys(newList).forEach(function (key) {\n      if (key != dataIndex) {\n        if (key != 'pageIndex') {\n          newList[key] = null;\n        }\n      } else {\n        newList[key] = valueSearch;\n      }\n    });\n    return newList;\n  };\n\n  const onSearch = (valueSearch, dataIndex) => {\n    let clearKey = checkField(valueSearch, dataIndex);\n    setParams(_objectSpread(_objectSpread({}, params), clearKey));\n  }; // HANDLE RESET\n\n\n  const resetListFieldSearch = () => {\n    Object.keys(listFieldSearch).forEach(function (key) {\n      if (key != 'pageIndex') {\n        listFieldSearch[key] = null;\n      }\n    });\n  };\n\n  const handleReset = () => {\n    setParams(_objectSpread(_objectSpread({}, paramDefault), {}, {\n      pageIndex: 1\n    }));\n    setCurrentPage(1), resetListFieldSearch();\n  }; // SORT\n\n\n  const onSort = option => {\n    refValue.current = _objectSpread(_objectSpread({}, refValue.current), {}, {\n      sort: option.title.sort,\n      sortType: option.title.sortType\n    });\n    setParams(_objectSpread(_objectSpread({}, params), {}, {\n      sort: option.title.sort,\n      sortType: option.title.sortType\n    }));\n  };\n\n  const columns = [_objectSpread({\n    title: 'Giáo viên',\n    dataIndex: 'TeacherName',\n    render: (price, record) => /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"font-weight-primary\",\n      children: price\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 47\n    }, this)\n  }, FilterColumn('TeacherName', onSearch, handleReset, 'text')), {\n    title: 'Thưởng',\n    width: 150,\n    dataIndex: 'Bonus',\n    render: (price, record) => /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"font-weight-green\",\n      children: numberWithCommas(price)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 47\n    }, this)\n  }, {\n    title: 'Trạng Thái',\n    dataIndex: 'StatusName',\n    filters: [{\n      text: 'Chưa chốt lương',\n      value: 1\n    }, {\n      text: 'Đã gửi yêu cầu xác nhận',\n      value: 3\n    }, {\n      text: 'Đã xác nhận',\n      value: 4\n    }, {\n      text: 'Đã nhận lương',\n      value: 5\n    }],\n    onFilter: (value, record) => record.StatusID === value,\n    render: (price, record) => /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [record.StatusID == 1 && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"tag red\",\n        children: price\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 31\n      }, this), record.StatusID == 3 && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"tag yellow\",\n        children: price\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 31\n      }, this), record.StatusID == 4 && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"tag blue\",\n        children: price\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 31\n      }, this), record.StatusID == 5 && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"tag green\",\n        children: price\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 31\n      }, this)]\n    }, void 0, true)\n  }, {\n    title: 'Khấu trừ',\n    width: 150,\n    dataIndex: 'AdvanceSalary',\n    render: (price, record) => /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"font-weight-primary\",\n      children: numberWithCommas(price)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 47\n    }, this)\n  }, {\n    title: 'Lương cơ bản',\n    width: 150,\n    dataIndex: 'BasicSalary',\n    render: (price, record) => /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"font-weight-green\",\n      children: numberWithCommas(price)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 47\n    }, this)\n  }, {\n    title: 'Lương tháng',\n    width: 150,\n    dataIndex: 'Salary',\n    align: 'center',\n    render: (price, record) => /*#__PURE__*/_jsxDEV(SalaryOfTeacherDetail, {\n      price: price,\n      record: record\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 47\n    }, this)\n  }, {\n    title: 'Lương chấm bài',\n    width: 150,\n    dataIndex: 'SalaryFixExam',\n    render: (price, record) => /*#__PURE__*/_jsxDEV(TeacherFixExam, {\n      price: price,\n      record: record\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 47\n    }, this)\n  }, {\n    title: 'Tổng lương',\n    width: 150,\n    dataIndex: 'TotalSalary',\n    render: (price, record) => /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"font-weight-green\",\n      children: numberWithCommas(price)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 47\n    }, this)\n  }, {\n    title: 'Cập nhật',\n    width: 100,\n    render: (text, record) => /*#__PURE__*/_jsxDEV(ConfirmForm, {\n      isLoading: isLoading,\n      record: record,\n      userInformationID: userInformation.UserInformationID,\n      setParams: setParams,\n      params: params\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 5\n    }, this)\n  }];\n\n  const getDataPayroll = async page => {\n    setIsLoading({\n      type: 'GET_ALL',\n      status: true\n    });\n\n    try {\n      let res = await teacherSalaryApi.getAll(_objectSpread(_objectSpread({}, params), {}, {\n        pageIndex: page\n      }));\n\n      if (res.status == 200) {\n        setPayRoll(res.data.data);\n        setTotalPage(res.data.totalRow);\n        setDropDownVisible(false);\n      }\n\n      if (res.status == 204) {\n        setPayRoll([]);\n        setDropDownVisible(false);\n      }\n    } catch (error) {} finally {\n      setIsLoading({\n        type: 'GET_ALL',\n        status: false\n      });\n    }\n  };\n\n  const postSalaryOfTeacherClosing = async () => {\n    setIsLoading({\n      type: 'GET_ALL',\n      status: true\n    });\n\n    try {\n      let res = await teacherSalaryApi.salaryTeacher();\n\n      if (res.status == 200) {\n        setParams(_objectSpread({}, params));\n        showNoti('success', 'Thành công!');\n        setDropDownVisible(false);\n      }\n\n      if (res.status == 204) {\n        showNoti('success', 'Lương đã được tính rồi!');\n        setDropDownVisible(false);\n      }\n    } catch (error) {\n      showNoti('danger', error.message);\n    } finally {\n      setVisible(false);\n      setIsLoading({\n        type: 'GET_ALL',\n        status: false\n      });\n    }\n  };\n\n  const getPagination = pageNumber => {\n    setCurrentPage(pageNumber);\n    setParams(_objectSpread(_objectSpread({}, params), {}, {\n      pageIndex: currentPage\n    }));\n  };\n\n  const onChangeMonth = value => {\n    setParams(_objectSpread(_objectSpread({}, params), {}, {\n      Month: Number(value.getMonth() + 1),\n      Year: Number(value.getFullYear())\n    }));\n  };\n\n  function daysInMonth(month, year) {\n    return new Date(year, month, 0).getDate();\n  }\n\n  const showPopconfirm = () => {\n    setVisible(true);\n  };\n\n  const handleCancel = () => {\n    setVisible(false);\n  };\n\n  const renderTitle = () => {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"font-weight-primary\",\n      children: [\"X\\xE1c nh\\u1EADn t\\xEDnh l\\u01B0\\u01A1ng t\\u1EEB 01-\", getDateNumber(now.getMonth()), \"-\", getLastYear(), \" \\u0111\\u1EBFn\", ' ', daysInMonth(getDateNumber(now.getMonth()), getLastYear()), \"-\", getDateNumber(now.getMonth()), \"-\", getLastYear(), \" ?\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 4\n    }, this);\n  };\n\n  const menu = () => {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-md-none\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          title: \"Thao t\\xE1c\",\n          style: {\n            width: 300\n          },\n          children: [userInformation && (userInformation.RoleID === 1 || userInformation.RoleID === 2) && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-success mb-4 w-100\",\n            disabled: isLoading.type === 'EXCEL' && isLoading.status,\n            onClick: () => {\n              exportExcelFile();\n            },\n            children: isLoading.type === 'EXCEL' && isLoading.status ? /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 59\n            }, this) : 'Xuất file Excel'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(Popconfirm, {\n            title: renderTitle,\n            visible: visible,\n            className: \"style-input w-100 mb-4\",\n            onConfirm: postSalaryOfTeacherClosing,\n            onCancel: handleCancel,\n            okButtonProps: {\n              loading: isLoading.status\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: showPopconfirm,\n              className: \"btn btn-warning add-new\",\n              children: \"T\\xEDnh l\\u01B0\\u01A1ng th\\xE1ng tr\\u01B0\\u1EDBc\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(DatePicker, {\n            className: \"style-input w-100 mb-4\",\n            defaultValue: moment(new Date(), 'MM/yyyy'),\n            onChange: (e, a) => onChangeMonth(e._d),\n            picker: \"month\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-md-none\",\n            children: /*#__PURE__*/_jsxDEV(SortBox, {\n              space: false,\n              width: 278,\n              handleSort: onSort,\n              dataOption: sortOptionList\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 5\n      }, this)\n    }, void 0, false);\n  };\n\n  const exportExcelFile = async () => {\n    setIsLoading({\n      type: 'EXCEL',\n      status: true\n    });\n\n    try {\n      let res = await teacherSalaryApi.exportExcel({\n        year: params.Year,\n        month: params.Month\n      });\n\n      if (res.status === 200) {\n        let temp = [];\n        res.data.data.forEach((item, index) => temp.push({\n          A: index + 1,\n          B: item.BankAccountNumber,\n          C: item.BankAccountHolderName,\n          D: `${item.Bank}/${item.BankBranch}`,\n          E: item.Salary,\n          F: item.Reason,\n          G: item.RoleName\n        }));\n        createExcelFile1(temp);\n      }\n\n      if (res.status === 204) {\n        showNoti('danger', 'Không có dữ liệu lương!');\n      }\n    } catch (error) {} finally {\n      setIsLoading({\n        type: 'EXCEL',\n        status: false\n      });\n    }\n  };\n\n  const createExcelFile1 = async data => {\n    let wb = XLSX.utils.book_new();\n    /* Initial row */\n\n    var ws = XLSX.utils.json_to_sheet([], {\n      header: ['DANH SÁCH GIAO DỊCH (LIST OF TRANSACTIONS)'],\n      skipHeader: false\n    });\n    /* Write data starting at E2 */\n\n    XLSX.utils.sheet_add_json(ws, [{\n      A: 'STT (1)',\n      B: 'Số  Số tài khoản (2)',\n      C: 'Tên đơn vị thụ hưởng (3)',\n      D: 'Ngân hàng thụ hưởng/Chi nhánh (4)',\n      E: 'Số tiền (5)',\n      F: 'Chi tiết thanh toán (6)',\n      G: 'Chức vụ (7)'\n    }], {\n      skipHeader: true,\n      origin: 'A2'\n    });\n    /* Write data starting at A2 */\n\n    XLSX.utils.sheet_add_json(ws, data, {\n      skipHeader: true,\n      origin: 'A3'\n    }); // set width\n\n    let wscols = [{\n      wch: 8\n    }, {\n      wch: 20\n    }, {\n      wch: 22\n    }, {\n      wch: 32\n    }, {\n      wch: 18\n    }, {\n      wch: 24\n    }, {\n      wch: 22\n    }, {\n      wch: 22\n    }];\n    let wsrows = [{\n      hpt: 22\n    }];\n    ws['!cols'] = wscols;\n    ws['!rows'] = wsrows; // });\n\n    XLSX.utils.book_append_sheet(wb, ws, 'Bảng lương giáo viên');\n    XLSX.writeFile(wb, 'bangluong.xlsx', {\n      type: 'binary',\n      bookType: 'xlsx'\n    });\n  };\n\n  useEffect(() => {\n    getDataPayroll(currentPage);\n  }, [params]);\n\n  const expandedRowRender = (data, index) => {\n    console.log('data: ', data);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row m-0 p-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bold mr-2\",\n        children: \"Ghi ch\\xFA:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [data === null || data === void 0 ? void 0 : data.NoteBonus, \"\\u0110\\xE2y l\\xE0 n\\u01A1i ghi ch\\xFA s\\u1EBD xu\\u1EA5t...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 4\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(ExpandTable, {\n    currentPage: currentPage,\n    loading: isLoading,\n    totalPage: totalPage && totalPage,\n    getPagination: pageNumber => getPagination(pageNumber),\n    addClass: \"basic-header\",\n    TitlePage: \"Duy\\u1EC7t l\\u01B0\\u01A1ng gi\\xE1o vi\\xEAn\",\n    dataSource: payRoll,\n    columns: columns // handleExpand={(data) => setItemDetail(data)}\n    ,\n    expandable: {\n      expandedRowRender\n    },\n    Extra: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"extra-table d-none d-sm-inline-block\",\n      children: [/*#__PURE__*/_jsxDEV(DatePicker, {\n        defaultValue: moment(new Date(getLastYear() + '-' + getDateNumber(now.getMonth())), 'MM/yyyy'),\n        onChange: (e, a) => onChangeMonth(e._d),\n        picker: \"month\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(SortBox, {\n        space: true,\n        width: 200,\n        handleSort: onSort,\n        dataOption: sortOptionList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 5\n    }, this),\n    TitleCard: /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-none d-sm-inline-block\",\n        children: /*#__PURE__*/_jsxDEV(Popconfirm, {\n          title: renderTitle,\n          visible: visible,\n          onConfirm: postSalaryOfTeacherClosing,\n          onCancel: handleCancel,\n          okButtonProps: {\n            loading: isLoading.status\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: showPopconfirm,\n            className: \"btn btn-warning add-new\",\n            children: \"T\\xEDnh l\\u01B0\\u01A1ng th\\xE1ng tr\\u01B0\\u1EDBc\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-inline-block d-sm-none col-md-3 w-25\",\n        children: /*#__PURE__*/_jsxDEV(Dropdown, {\n          overlay: menu,\n          trigger: ['click'],\n          visible: dropDownVisible,\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"ant-dropdown-link\",\n            onClick: e => {\n              e.preventDefault();\n              setDropDownVisible(!dropDownVisible);\n            },\n            children: /*#__PURE__*/_jsxDEV(EllipsisOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 516,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 509,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 459,\n    columnNumber: 3\n  }, this);\n};\n\nSalaryReview.layout = LayoutBase;\nexport default SalaryReview;","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/pages/staff/teacher-salary/index.tsx"],"names":["EllipsisOutlined","Card","DatePicker","Dropdown","Popconfirm","Spin","moment","React","useEffect","useRef","useState","XLSX","teacherSalaryApi","SortBox","ExpandTable","LayoutBase","FilterColumn","useWrap","numberWithCommas","ConfirmForm","SalaryOfTeacherDetail","TeacherFixExam","now","Date","SalaryReview","totalPage","setTotalPage","visible","setVisible","dropDownVisible","setDropDownVisible","payRoll","setPayRoll","currentPage","setCurrentPage","showNoti","userInformation","pageSize","isLoading","setIsLoading","type","status","months","getLastYear","getMonth","getFullYear","getDateNumber","number","paramDefault","pageIndex","Year","Month","TeacherName","TeacherID","StatusID","sort","sortType","params","setParams","listFieldSearch","sortOptionList","dataSort","value","text","refValue","checkField","valueSearch","dataIndex","newList","Object","keys","forEach","key","onSearch","clearKey","resetListFieldSearch","handleReset","onSort","option","current","title","columns","render","price","record","width","filters","onFilter","align","UserInformationID","getDataPayroll","page","res","getAll","data","totalRow","error","postSalaryOfTeacherClosing","salaryTeacher","message","getPagination","pageNumber","onChangeMonth","Number","daysInMonth","month","year","getDate","showPopconfirm","handleCancel","renderTitle","menu","RoleID","exportExcelFile","loading","e","a","_d","exportExcel","temp","item","index","push","A","B","BankAccountNumber","C","BankAccountHolderName","D","Bank","BankBranch","E","Salary","F","Reason","G","RoleName","createExcelFile1","wb","utils","book_new","ws","json_to_sheet","header","skipHeader","sheet_add_json","origin","wscols","wch","wsrows","hpt","book_append_sheet","writeFile","bookType","expandedRowRender","console","log","NoteBonus","preventDefault","layout"],"mappings":"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","sourcesContent":["import { EllipsisOutlined } from '@ant-design/icons'\r\nimport { Card, DatePicker, Dropdown, Popconfirm, Spin, Tooltip } from 'antd'\r\nimport moment from 'moment'\r\nimport React, { useEffect, useRef, useState } from 'react'\r\nimport XLSX from 'xlsx'\r\nimport { teacherSalaryApi } from '~/apiBase/staff-manage/teacher-salary'\r\nimport SortBox from '~/components/Elements/SortBox'\r\nimport ExpandTable from '~/components/ExpandTable'\r\nimport LayoutBase from '~/components/LayoutBase'\r\nimport PowerTable from '~/components/PowerTable'\r\nimport FilterColumn from '~/components/Tables/FilterColumn'\r\nimport { useWrap } from '~/context/wrap'\r\nimport { numberWithCommas } from '~/utils/functions'\r\nimport ConfirmForm from '../../../components/Global/Teacher/TeacherSalary/confirm-form'\r\nimport SalaryOfTeacherDetail from '../../../components/Global/Teacher/TeacherSalary/salary-of-teacher-detail'\r\nimport TeacherFixExam from '../../../components/Global/Teacher/TeacherSalary/teacher-fix-exam'\r\n\r\nconst now = new Date()\r\n\r\nconst SalaryReview = () => {\r\n\tconst [totalPage, setTotalPage] = useState(null)\r\n\tconst [visible, setVisible] = React.useState(false)\r\n\tconst [dropDownVisible, setDropDownVisible] = useState(false)\r\n\tconst [payRoll, setPayRoll] = useState<ITeacherSalary[]>([])\r\n\tconst [currentPage, setCurrentPage] = useState(1)\r\n\tconst { showNoti, userInformation, pageSize } = useWrap()\r\n\tconst [isLoading, setIsLoading] = useState({\r\n\t\ttype: 'GET_ALL',\r\n\t\tstatus: false\r\n\t})\r\n\tconst months = [\r\n\t\t'Tháng 1',\r\n\t\t'Tháng 2',\r\n\t\t'Tháng 3',\r\n\t\t'Tháng 4',\r\n\t\t'Tháng 5',\r\n\t\t'Tháng 6',\r\n\t\t'Tháng 7',\r\n\t\t'Tháng 8',\r\n\t\t'Tháng 9',\r\n\t\t'Tháng 10',\r\n\t\t'Tháng 11',\r\n\t\t'Tháng 12'\r\n\t]\r\n\r\n\tconst getLastYear = () => {\r\n\t\treturn now.getMonth() == 0 ? now.getFullYear() - 1 : now.getFullYear()\r\n\t}\r\n\r\n\tconst getDateNumber = (number) => {\r\n\t\treturn number > 10 ? number : number == 0 ? '12' : '0' + number\r\n\t}\r\n\r\n\tconst paramDefault = {\r\n\t\tpageIndex: currentPage,\r\n\t\tpageSize: pageSize,\r\n\t\t// selectAll: true,\r\n\t\tYear: getLastYear(),\r\n\t\tMonth: getDateNumber(now.getMonth()),\r\n\t\tTeacherName: null,\r\n\t\tTeacherID: null,\r\n\t\tStatusID: null,\r\n\t\tsort: null,\r\n\t\tsortType: null\r\n\t}\r\n\tconst [params, setParams] = useState(paramDefault)\r\n\r\n\tlet listFieldSearch = {\r\n\t\tpageIndex: 1,\r\n\t\tTeacherName: null\r\n\t}\r\n\t// SORT\r\n\tconst sortOptionList = [\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 0,\r\n\t\t\t\tsortType: false\r\n\t\t\t},\r\n\t\t\tvalue: 1,\r\n\t\t\ttext: 'Tên giảm dần'\r\n\t\t},\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 0,\r\n\t\t\t\tsortType: true\r\n\t\t\t},\r\n\t\t\tvalue: 2,\r\n\t\t\ttext: 'Tên tăng dần '\r\n\t\t},\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 1,\r\n\t\t\t\tsortType: false\r\n\t\t\t},\r\n\t\t\tvalue: 3,\r\n\t\t\ttext: 'Lương tổng giảm dần'\r\n\t\t},\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 1,\r\n\t\t\t\tsortType: true\r\n\t\t\t},\r\n\t\t\tvalue: 4,\r\n\t\t\ttext: 'Lương tổng tăng dần '\r\n\t\t}\r\n\t]\r\n\r\n\tlet refValue = useRef({\r\n\t\tpageIndex: 1,\r\n\t\tpageSize: pageSize,\r\n\t\tsort: -1,\r\n\t\tsortType: false\r\n\t})\r\n\r\n\t// ------------ ON SEARCH -----------------------\r\n\r\n\tconst checkField = (valueSearch, dataIndex) => {\r\n\t\tlet newList = { ...listFieldSearch }\r\n\t\tObject.keys(newList).forEach(function (key) {\r\n\t\t\tif (key != dataIndex) {\r\n\t\t\t\tif (key != 'pageIndex') {\r\n\t\t\t\t\tnewList[key] = null\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tnewList[key] = valueSearch\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn newList\r\n\t}\r\n\r\n\tconst onSearch = (valueSearch, dataIndex) => {\r\n\t\tlet clearKey = checkField(valueSearch, dataIndex)\r\n\r\n\t\tsetParams({\r\n\t\t\t...params,\r\n\t\t\t...clearKey\r\n\t\t})\r\n\t}\r\n\r\n\t// HANDLE RESET\r\n\tconst resetListFieldSearch = () => {\r\n\t\tObject.keys(listFieldSearch).forEach(function (key) {\r\n\t\t\tif (key != 'pageIndex') {\r\n\t\t\t\tlistFieldSearch[key] = null\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tconst handleReset = () => {\r\n\t\tsetParams({\r\n\t\t\t...paramDefault,\r\n\t\t\tpageIndex: 1\r\n\t\t})\r\n\t\tsetCurrentPage(1), resetListFieldSearch()\r\n\t}\r\n\r\n\t// SORT\r\n\tconst onSort = (option) => {\r\n\t\trefValue.current = { ...refValue.current, sort: option.title.sort, sortType: option.title.sortType }\r\n\t\tsetParams({ ...params, sort: option.title.sort, sortType: option.title.sortType })\r\n\t}\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Giáo viên',\r\n\t\t\tdataIndex: 'TeacherName',\r\n\t\t\trender: (price, record: ITeacherSalary) => <p className=\"font-weight-primary\">{price}</p>,\r\n\t\t\t...FilterColumn('TeacherName', onSearch, handleReset, 'text')\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Thưởng',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'Bonus',\r\n\t\t\trender: (price, record: ITeacherSalary) => <p className=\"font-weight-green\">{numberWithCommas(price)}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Trạng Thái',\r\n\t\t\tdataIndex: 'StatusName',\r\n\t\t\tfilters: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: 'Chưa chốt lương',\r\n\t\t\t\t\tvalue: 1\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: 'Đã gửi yêu cầu xác nhận',\r\n\t\t\t\t\tvalue: 3\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: 'Đã xác nhận',\r\n\t\t\t\t\tvalue: 4\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: 'Đã nhận lương',\r\n\t\t\t\t\tvalue: 5\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tonFilter: (value, record) => record.StatusID === value,\r\n\t\t\trender: (price, record: any) => (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{record.StatusID == 1 && <span className=\"tag red\">{price}</span>}\r\n\t\t\t\t\t{record.StatusID == 3 && <span className=\"tag yellow\">{price}</span>}\r\n\t\t\t\t\t{record.StatusID == 4 && <span className=\"tag blue\">{price}</span>}\r\n\t\t\t\t\t{record.StatusID == 5 && <span className=\"tag green\">{price}</span>}\r\n\t\t\t\t</>\r\n\t\t\t)\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Khấu trừ',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'AdvanceSalary',\r\n\t\t\trender: (price, record: ITeacherSalary) => <p className=\"font-weight-primary\">{numberWithCommas(price)}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Lương cơ bản',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'BasicSalary',\r\n\t\t\trender: (price, record: ITeacherSalary) => <p className=\"font-weight-green\">{numberWithCommas(price)}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Lương tháng',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'Salary',\r\n\t\t\talign: 'center',\r\n\t\t\trender: (price, record: ITeacherSalary) => <SalaryOfTeacherDetail price={price} record={record} />\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Lương chấm bài',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'SalaryFixExam',\r\n\t\t\trender: (price, record: ITeacherSalary) => <TeacherFixExam price={price} record={record} />\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Tổng lương',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'TotalSalary',\r\n\t\t\trender: (price, record: ITeacherSalary) => <p className=\"font-weight-green\">{numberWithCommas(price)}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Cập nhật',\r\n\t\t\twidth: 100,\r\n\t\t\trender: (text, record) => (\r\n\t\t\t\t<ConfirmForm\r\n\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\trecord={record}\r\n\t\t\t\t\tuserInformationID={userInformation.UserInformationID}\r\n\t\t\t\t\tsetParams={setParams}\r\n\t\t\t\t\tparams={params}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t}\r\n\t]\r\n\r\n\tconst getDataPayroll = async (page: any) => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'GET_ALL',\r\n\t\t\tstatus: true\r\n\t\t})\r\n\t\ttry {\r\n\t\t\tlet res = await teacherSalaryApi.getAll({ ...params, pageIndex: page })\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tsetPayRoll(res.data.data)\r\n\t\t\t\tsetTotalPage(res.data.totalRow)\r\n\t\t\t\tsetDropDownVisible(false)\r\n\t\t\t}\r\n\t\t\tif (res.status == 204) {\r\n\t\t\t\tsetPayRoll([])\r\n\t\t\t\tsetDropDownVisible(false)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'GET_ALL',\r\n\t\t\t\tstatus: false\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst postSalaryOfTeacherClosing = async () => {\r\n\t\tsetIsLoading({ type: 'GET_ALL', status: true })\r\n\t\ttry {\r\n\t\t\tlet res = await teacherSalaryApi.salaryTeacher()\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tsetParams({ ...params })\r\n\t\t\t\tshowNoti('success', 'Thành công!')\r\n\t\t\t\tsetDropDownVisible(false)\r\n\t\t\t}\r\n\t\t\tif (res.status == 204) {\r\n\t\t\t\tshowNoti('success', 'Lương đã được tính rồi!')\r\n\t\t\t\tsetDropDownVisible(false)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetVisible(false)\r\n\t\t\tsetIsLoading({ type: 'GET_ALL', status: false })\r\n\t\t}\r\n\t}\r\n\r\n\tconst getPagination = (pageNumber: number) => {\r\n\t\tsetCurrentPage(pageNumber)\r\n\t\tsetParams({\r\n\t\t\t...params,\r\n\t\t\tpageIndex: currentPage\r\n\t\t})\r\n\t}\r\n\r\n\tconst onChangeMonth = (value) => {\r\n\t\tsetParams({ ...params, Month: Number(value.getMonth() + 1), Year: Number(value.getFullYear()) })\r\n\t}\r\n\r\n\tfunction daysInMonth(month, year) {\r\n\t\treturn new Date(year, month, 0).getDate()\r\n\t}\r\n\r\n\tconst showPopconfirm = () => {\r\n\t\tsetVisible(true)\r\n\t}\r\n\r\n\tconst handleCancel = () => {\r\n\t\tsetVisible(false)\r\n\t}\r\n\r\n\tconst renderTitle = () => {\r\n\t\treturn (\r\n\t\t\t<p className=\"font-weight-primary\">\r\n\t\t\t\tXác nhận tính lương từ 01-{getDateNumber(now.getMonth())}-{getLastYear()} đến{' '}\r\n\t\t\t\t{daysInMonth(getDateNumber(now.getMonth()), getLastYear())}-{getDateNumber(now.getMonth())}-{getLastYear()} ?\r\n\t\t\t</p>\r\n\t\t)\r\n\t}\r\n\r\n\tconst menu = () => {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<div className=\"d-md-none\">\r\n\t\t\t\t\t<Card title=\"Thao tác\" style={{ width: 300 }}>\r\n\t\t\t\t\t\t{userInformation && (userInformation.RoleID === 1 || userInformation.RoleID === 2) && (\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-success mb-4 w-100\"\r\n\t\t\t\t\t\t\t\tdisabled={isLoading.type === 'EXCEL' && isLoading.status}\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\texportExcelFile()\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{isLoading.type === 'EXCEL' && isLoading.status ? <Spin /> : 'Xuất file Excel'}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<Popconfirm\r\n\t\t\t\t\t\t\ttitle={renderTitle}\r\n\t\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\t\tclassName=\"style-input w-100 mb-4\"\r\n\t\t\t\t\t\t\tonConfirm={postSalaryOfTeacherClosing}\r\n\t\t\t\t\t\t\tonCancel={handleCancel}\r\n\t\t\t\t\t\t\tokButtonProps={{ loading: isLoading.status }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<button onClick={showPopconfirm} className=\"btn btn-warning add-new\">\r\n\t\t\t\t\t\t\t\tTính lương tháng trước\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Popconfirm>\r\n\r\n\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\tclassName=\"style-input w-100 mb-4\"\r\n\t\t\t\t\t\t\tdefaultValue={moment(new Date(), 'MM/yyyy')}\r\n\t\t\t\t\t\t\tonChange={(e: any, a) => onChangeMonth(e._d)}\r\n\t\t\t\t\t\t\tpicker=\"month\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<div className=\"d-md-none\">\r\n\t\t\t\t\t\t\t<SortBox space={false} width={278} handleSort={onSort} dataOption={sortOptionList} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\tconst exportExcelFile = async () => {\r\n\t\tsetIsLoading({ type: 'EXCEL', status: true })\r\n\t\ttry {\r\n\t\t\tlet res = await teacherSalaryApi.exportExcel({ year: params.Year, month: params.Month })\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tlet temp = []\r\n\t\t\t\tres.data.data.forEach((item, index) =>\r\n\t\t\t\t\ttemp.push({\r\n\t\t\t\t\t\tA: index + 1,\r\n\t\t\t\t\t\tB: item.BankAccountNumber,\r\n\t\t\t\t\t\tC: item.BankAccountHolderName,\r\n\t\t\t\t\t\tD: `${item.Bank}/${item.BankBranch}`,\r\n\t\t\t\t\t\tE: item.Salary,\r\n\t\t\t\t\t\tF: item.Reason,\r\n\t\t\t\t\t\tG: item.RoleName\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\tcreateExcelFile1(temp)\r\n\t\t\t}\r\n\t\t\tif (res.status === 204) {\r\n\t\t\t\tshowNoti('danger', 'Không có dữ liệu lương!')\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({ type: 'EXCEL', status: false })\r\n\t\t}\r\n\t}\r\n\r\n\tconst createExcelFile1 = async (data) => {\r\n\t\tlet wb = XLSX.utils.book_new()\r\n\r\n\t\t/* Initial row */\r\n\t\tvar ws = XLSX.utils.json_to_sheet([], {\r\n\t\t\theader: ['DANH SÁCH GIAO DỊCH (LIST OF TRANSACTIONS)'],\r\n\t\t\tskipHeader: false\r\n\t\t})\r\n\t\t/* Write data starting at E2 */\r\n\t\tXLSX.utils.sheet_add_json(\r\n\t\t\tws,\r\n\t\t\t[\r\n\t\t\t\t{\r\n\t\t\t\t\tA: 'STT (1)',\r\n\t\t\t\t\tB: 'Số  Số tài khoản (2)',\r\n\t\t\t\t\tC: 'Tên đơn vị thụ hưởng (3)',\r\n\t\t\t\t\tD: 'Ngân hàng thụ hưởng/Chi nhánh (4)',\r\n\t\t\t\t\tE: 'Số tiền (5)',\r\n\t\t\t\t\tF: 'Chi tiết thanh toán (6)',\r\n\t\t\t\t\tG: 'Chức vụ (7)'\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\t{ skipHeader: true, origin: 'A2' }\r\n\t\t)\r\n\r\n\t\t/* Write data starting at A2 */\r\n\t\tXLSX.utils.sheet_add_json(ws, data, { skipHeader: true, origin: 'A3' })\r\n\r\n\t\t// set width\r\n\t\tlet wscols = [{ wch: 8 }, { wch: 20 }, { wch: 22 }, { wch: 32 }, { wch: 18 }, { wch: 24 }, { wch: 22 }, { wch: 22 }]\r\n\t\tlet wsrows = [{ hpt: 22 }]\r\n\t\tws['!cols'] = wscols\r\n\t\tws['!rows'] = wsrows\r\n\t\t// });\r\n\t\tXLSX.utils.book_append_sheet(wb, ws, 'Bảng lương giáo viên')\r\n\t\tXLSX.writeFile(wb, 'bangluong.xlsx', { type: 'binary', bookType: 'xlsx' })\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tgetDataPayroll(currentPage)\r\n\t}, [params])\r\n\r\n\tconst expandedRowRender = (data, index) => {\r\n\t\tconsole.log('data: ', data)\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"row m-0 p-0\">\r\n\t\t\t\t<div className=\"bold mr-2\">Ghi chú:</div>\r\n\t\t\t\t<div>{data?.NoteBonus}Đây là nơi ghi chú sẽ xuất...</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ExpandTable\r\n\t\t\tcurrentPage={currentPage}\r\n\t\t\tloading={isLoading}\r\n\t\t\ttotalPage={totalPage && totalPage}\r\n\t\t\tgetPagination={(pageNumber: number) => getPagination(pageNumber)}\r\n\t\t\taddClass=\"basic-header\"\r\n\t\t\tTitlePage=\"Duyệt lương giáo viên\"\r\n\t\t\tdataSource={payRoll}\r\n\t\t\tcolumns={columns}\r\n\t\t\t// handleExpand={(data) => setItemDetail(data)}\r\n\t\t\texpandable={{ expandedRowRender }}\r\n\t\t\tExtra={\r\n\t\t\t\t<div className=\"extra-table d-none d-sm-inline-block\">\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tdefaultValue={moment(new Date(getLastYear() + '-' + getDateNumber(now.getMonth())), 'MM/yyyy')}\r\n\t\t\t\t\t\tonChange={(e: any, a) => onChangeMonth(e._d)}\r\n\t\t\t\t\t\tpicker=\"month\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<SortBox space={true} width={200} handleSort={onSort} dataOption={sortOptionList} />\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\tTitleCard={\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className=\"d-none d-sm-inline-block\">\r\n\t\t\t\t\t\t{/* {userInformation && (userInformation.RoleID === 1 || userInformation.RoleID === 2) && (\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-success mr-1\"\r\n\t\t\t\t\t\t\t\tstyle={{ width: 130 }}\r\n\t\t\t\t\t\t\t\tdisabled={isLoading.type === 'EXCEL' && isLoading.status}\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\texportExcelFile()\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{isLoading.type === 'EXCEL' && isLoading.status ? <Spin /> : 'Xuất file Excel'}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t)} */}\r\n\t\t\t\t\t\t<Popconfirm\r\n\t\t\t\t\t\t\ttitle={renderTitle}\r\n\t\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\t\tonConfirm={postSalaryOfTeacherClosing}\r\n\t\t\t\t\t\t\tonCancel={handleCancel}\r\n\t\t\t\t\t\t\tokButtonProps={{ loading: isLoading.status }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<button onClick={showPopconfirm} className=\"btn btn-warning add-new\">\r\n\t\t\t\t\t\t\t\tTính lương tháng trước\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"d-inline-block d-sm-none col-md-3 w-25\">\r\n\t\t\t\t\t\t<Dropdown overlay={menu} trigger={['click']} visible={dropDownVisible}>\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\tclassName=\"ant-dropdown-link\"\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\t\tsetDropDownVisible(!dropDownVisible)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<EllipsisOutlined />\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</Dropdown>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nSalaryReview.layout = LayoutBase\r\nexport default SalaryReview\r\n"]},"metadata":{},"sourceType":"module"}