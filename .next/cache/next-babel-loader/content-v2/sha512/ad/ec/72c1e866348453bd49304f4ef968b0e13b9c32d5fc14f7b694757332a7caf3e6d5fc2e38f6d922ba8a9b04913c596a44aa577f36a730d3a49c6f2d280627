{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\pages\\\\question-bank\\\\exam-list\\\\exam-detail\\\\[slug].tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { AlignRightOutlined } from '@ant-design/icons';\nimport { Card, Popover, Skeleton, Spin } from 'antd';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport { createContext, useContext, useEffect, useRef, useState } from 'react';\nimport { Bookmark, Info } from 'react-feather';\nimport { examDetailApi, examTopicApi } from '~/apiBase';\nimport PopupConfirm from '~/components/Elements/PopupConfirm';\nimport TitlePage from '~/components/Elements/TitlePage';\nimport AddQuestionAuto from '~/components/Global/ExamDetail/AddQuestionAuto';\nimport AddQuestionModal from '~/components/Global/ExamDetail/AddQuestionModal';\nimport ChoiceList from '~/components/Global/ExamList/ExamShow/ChoiceList';\nimport DragList from '~/components/Global/ExamList/ExamShow/DragList';\nimport MapList from '~/components/Global/ExamList/ExamShow/MapList';\nimport MultipleList from '~/components/Global/ExamList/ExamShow/MultipleList';\nimport SpeakingList from '~/components/Global/ExamList/ExamShow/Speaking';\nimport TypingList from '~/components/Global/ExamList/ExamShow/TypingList';\nimport WrapList from '~/components/Global/ExamList/ExamShow/WrapList';\nimport WrittingList from '~/components/Global/ExamList/ExamShow/WrittingList';\nimport LayoutBase from '~/components/LayoutBase';\nimport { useWrap } from '~/context/wrap';\nconst listAlphabet = ['A', 'B', 'C', 'D', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V'];\nconst ExamDetailContext = /*#__PURE__*/createContext({\n  onAddQuestion: () => {},\n  onDeleteQuestion: () => {},\n  onEditPoint: () => {},\n  onRemoveQuestionAdd: data => {},\n  onGetListQuestionID: data => {},\n  getDataChange: data => {},\n  isGetQuestion: false,\n  listQuestionAddOutside: [],\n  listQuestionID: [],\n  listGroupID: [],\n  dataChange: [],\n  isChangePosition: false\n});\n\nconst ExamDetail = () => {\n  const {\n    showNoti\n  } = useWrap();\n  const {\n    0: rr,\n    1: setRerender\n  } = useState(''); // ĐỂ CÁI NÀY BUỘC NÓ RERENDER - BÙA CHÚ CẢ\n\n  const {\n    0: arPosition,\n    1: setArPositions\n  } = useState([]);\n  const router = useRouter();\n  const examID = parseInt(router.query.slug);\n  const {\n    0: dataExamDetail,\n    1: setDataExamDetail\n  } = useState([]);\n  const {\n    0: examTopicDetail,\n    1: setExamTopicDetail\n  } = useState(null);\n  const {\n    0: listQuestionID,\n    1: setListQuestionID\n  } = useState([]); // Lấy tất cả ID đã có\n\n  const {\n    0: listGroupID,\n    1: setListGroupID\n  } = useState([]); // Lấy tất cả group ID đã có\n\n  const {\n    0: listQuestionAddOutside,\n    1: setListQuestionAddOutside\n  } = useState([]); // Lấy tất cả ID vừa add\n\n  const {\n    0: isGetQuestion,\n    1: setIsGetQuestion\n  } = useState(false);\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const {\n    0: totalPageIndex,\n    1: setTotalPageIndex\n  } = useState(0);\n  const boxEl = useRef(null);\n  const {\n    0: loadingQuestion,\n    1: setLoadingQuestion\n  } = useState(false);\n  const listTodoApi = {\n    pageIndex: 1,\n    pageSize: 10,\n    ExamTopicID: examID\n  };\n  const {\n    0: todoApi,\n    1: setTodoApi\n  } = useState(listTodoApi);\n  const {\n    0: listExam,\n    1: setListExam\n  } = useState([]);\n  const {\n    0: loadingExam,\n    1: setLoadingExam\n  } = useState(false);\n  const {\n    0: loadingDetail,\n    1: setLoadingDetail\n  } = useState(false);\n  const {\n    0: dataChange,\n    1: setDataChange\n  } = useState([]);\n  const {\n    0: loadingPosition,\n    1: setLoadingPosition\n  } = useState(false);\n  const {\n    0: isChangePosition,\n    1: setIsChangePosition\n  } = useState(false);\n  const {\n    0: isConfirmChange,\n    1: setIsConfirmChange\n  } = useState(false);\n  const {\n    0: visiblePopover,\n    1: setVisiblePopover\n  } = useState(false);\n\n  const setArPosition = param => {\n    setArPositions(param);\n  };\n\n  const getPosi = (ar, it) => {\n    for (let i = 0; i < ar.length; i++) {\n      if (ar[i].value == it) {\n        return i;\n      }\n    }\n\n    return -1;\n  };\n\n  const removeItem = (ar, po, old) => {\n    let temp = [];\n\n    for (let i = 0; i < ar.length; i++) {\n      if (i !== po) {\n        temp.push(ar[i]);\n      }\n    }\n\n    if (old > 0) {\n      addItem(old, temp);\n    } else {\n      setArPosition(temp);\n    }\n  };\n\n  const addItem = async (item, ar) => {\n    let temp = ar;\n    let po = await getPosi(arPosition, item);\n\n    if (po == -1) {\n      temp.push({\n        value: item,\n        label: item\n      });\n      setArPosition(temp);\n    }\n\n    reRender(po);\n  };\n\n  const addOldItem = async item => {\n    let temp = arPosition;\n    let po = await getPosi(arPosition, item);\n\n    if (po == -1) {\n      temp.push({\n        value: item,\n        label: item\n      });\n      setArPosition(temp);\n    }\n\n    let now = new Date();\n    setRerender(item + now + '');\n  };\n\n  const handleChange = async (value, old) => {\n    let po = await getPosi(arPosition, value);\n    reRender(value);\n\n    if (po !== -1) {\n      await removeItem(arPosition, po, old);\n    }\n  };\n\n  const reRender = value => {\n    let now = new Date();\n    value !== undefined ? setRerender(value + now + '') : setRerender('fuck - ' + now + '');\n  }; // ---- GET LIST EXAM ----\n\n\n  const getListExam = async () => {\n    try {\n      let res = await examTopicApi.getAll({\n        setlectAll: true,\n        CurriculumID: examTopicDetail.CurriculumID,\n        Type: examTopicDetail.Type\n      });\n\n      if (res.status == 200) {\n        setListExam(res.data.data);\n      }\n    } catch (error) {\n      showNoti('danger', error.message);\n    } finally {\n      setLoadingExam(false);\n      setIsLoading(false);\n    }\n  }; // ---- GET ALL LIST QUESTION ID ----\n\n\n  const getAllListQuestionID = async () => {\n    let cloneListQuestionID = [...listQuestionID];\n    let cloneListGroupID = [...listGroupID];\n\n    try {\n      let res = await examDetailApi.getAll(_objectSpread(_objectSpread({}, todoApi), {}, {\n        pageSize: 9999,\n        pageIndex: 1\n      }));\n\n      if (res.status == 200) {\n        res.data.data.forEach(item => {\n          if (item.Enable) {\n            item.ExerciseGroupID !== 0 && cloneListGroupID.push(item.ExerciseGroupID);\n            dataChange.push({\n              ID: item.ID,\n              Index: null\n            });\n            item.ExerciseTopic.forEach(ques => {\n              cloneListQuestionID.push(ques.ExerciseID);\n            });\n          }\n        });\n        setListGroupID([...cloneListGroupID]);\n        setListQuestionID([...cloneListQuestionID]);\n        setDataChange([...dataChange]);\n      }\n    } catch (error) {} finally {\n      setIsLoading(false);\n    }\n  }; // ---- GET LIST QUESTION IN EXAM ----\n\n\n  const getExamDetail = async () => {\n    let cloneListQuestionID = [...listQuestionID];\n    let cloneListGroupID = [...listGroupID];\n\n    try {\n      let res = await examDetailApi.getAll(todoApi);\n\n      if (res.status == 200) {\n        setDataExamDetail(res.data.data);\n        let cloneData = [...dataExamDetail];\n        res.data.data.forEach((item, index) => {\n          cloneData.push(item);\n        });\n        setDataExamDetail([...cloneData]);\n        res.data.data.forEach(item => {\n          if (item.Enable) {\n            item.ExerciseGroupID !== 0 && cloneListGroupID.push(item.ExerciseGroupID);\n            item.ExerciseTopic.forEach(ques => {\n              cloneListQuestionID.push(ques.ExerciseID);\n            });\n          }\n        });\n        setListGroupID([...cloneListGroupID]);\n        setListQuestionID([...cloneListQuestionID]);\n        setListQuestionAddOutside([]); // Caculator pageindex\n\n        let totalPage = Math.ceil(res.data.totalRow / 10);\n        setTotalPageIndex(totalPage);\n      }\n    } catch (error) {\n      showNoti('danger', error.message);\n    } finally {\n      setLoadingQuestion(false);\n      setIsLoading(false);\n    }\n  };\n\n  const getExamTopicDetail = async () => {\n    listExam.length == 0 && setLoadingExam(true);\n    setLoadingDetail(true);\n\n    try {\n      let res = await examTopicApi.getByID(examID);\n\n      if (res.status == 200) {\n        setExamTopicDetail(res.data.data);\n      }\n    } catch (error) {\n      showNoti('danger', error.message);\n    } finally {\n      setLoadingDetail(false);\n    }\n  }; // RETURN QUESTION TYPE\n\n\n  const returnQuestionType = (item, index) => {\n    const type = item.Type;\n\n    switch (type) {\n      case 1:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(WrapList, {\n            dataQuestion: item,\n            listQuestionID: listQuestionID,\n            arPosition: arPosition,\n            handleChange: handleChange,\n            addOldItem: addOldItem,\n            children: /*#__PURE__*/_jsxDEV(ChoiceList, {\n              isDoingTest: false,\n              listQuestionID: listQuestionID,\n              dataQuestion: item,\n              listAlphabet: listAlphabet,\n              showScore: true,\n              arPosition: arPosition,\n              handleChange: handleChange,\n              addOldItem: addOldItem\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 7\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 6\n        }, this);\n\n      case 2:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(WrapList, {\n            dataQuestion: item,\n            listQuestionID: listQuestionID,\n            arPosition: arPosition,\n            handleChange: handleChange,\n            addOldItem: addOldItem,\n            children: /*#__PURE__*/_jsxDEV(DragList, {\n              isDoingTest: false,\n              listQuestionID: listQuestionID,\n              dataQuestion: item,\n              listAlphabet: listAlphabet\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 7\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 6\n        }, this);\n\n      case 3:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(WrapList, {\n            dataQuestion: item,\n            listQuestionID: listQuestionID,\n            arPosition: arPosition,\n            handleChange: handleChange,\n            addOldItem: addOldItem,\n            children: /*#__PURE__*/_jsxDEV(TypingList, {\n              isDoingTest: false,\n              listQuestionID: listQuestionID,\n              dataQuestion: item,\n              listAlphabet: listAlphabet\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 7\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 6\n        }, this);\n\n      case 4:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(WrapList, {\n            dataQuestion: item,\n            listQuestionID: listQuestionID,\n            children: /*#__PURE__*/_jsxDEV(MultipleList, {\n              isDoingTest: false,\n              listQuestionID: listQuestionID,\n              dataQuestion: item,\n              listAlphabet: listAlphabet,\n              arPosition: arPosition,\n              handleChange: handleChange,\n              addOldItem: addOldItem\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 7\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 6\n        }, this);\n\n      case 5:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(WrapList, {\n            dataQuestion: item,\n            listQuestionID: listQuestionID,\n            arPosition: arPosition,\n            handleChange: handleChange,\n            addOldItem: addOldItem,\n            children: /*#__PURE__*/_jsxDEV(MapList, {\n              isDoingTest: false,\n              listQuestionID: listQuestionID,\n              dataQuestion: item,\n              listAlphabet: listAlphabet\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 7\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 6\n        }, this);\n\n      case 6:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(WrapList, {\n            dataQuestion: item,\n            listQuestionID: listQuestionID,\n            arPosition: arPosition,\n            handleChange: handleChange,\n            children: /*#__PURE__*/_jsxDEV(WrittingList, {\n              isDoingTest: false,\n              listQuestionID: listQuestionID,\n              dataQuestion: item,\n              listAlphabet: listAlphabet,\n              arPosition: arPosition,\n              handleChange: handleChange,\n              removeItem: removeItem,\n              addOldItem: addOldItem\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 7\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 6\n        }, this);\n\n      case 7:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(WrapList, {\n            dataQuestion: item,\n            listQuestionID: listQuestionID,\n            handleChange: handleChange,\n            addOldItem: addOldItem,\n            children: /*#__PURE__*/_jsxDEV(SpeakingList, {\n              isDoingTest: false,\n              listQuestionID: listQuestionID,\n              dataQuestion: item,\n              listAlphabet: listAlphabet,\n              arPosition: arPosition,\n              handleChange: handleChange,\n              addOldItem: addOldItem\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 7\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 6\n        }, this);\n\n      default:\n        return;\n    }\n  }; // ON ADD QUESTION TO EXAM\n\n\n  const onAddQuestion = () => {\n    setIsGetQuestion(true);\n  }; // ON FETCH DATA\n\n\n  const onFetchData = () => {\n    setIsLoading(true);\n    setListGroupID([]);\n    setListQuestionID([]);\n    setDataExamDetail([]);\n    setTodoApi(listTodoApi);\n    setIsGetQuestion(false);\n  }; // ON DELETE QUESTION\n\n\n  const onDeleteQuestion = dataDelete => {\n    let cloneListQuestionID = [];\n    let cloneListGroupID = [];\n    let cloneDataExam = [...dataExamDetail];\n    let indexQues = cloneDataExam.findIndex(item => item.ID == dataDelete.ID);\n    cloneDataExam.splice(indexQues, 1);\n    cloneDataExam.forEach(item => {\n      item.ExerciseGroupID !== 0 && cloneListGroupID.push(item.ExerciseGroupID);\n      item.ExerciseTopic.forEach(ques => {\n        cloneListQuestionID.push(ques.ExerciseID);\n      });\n    });\n    setListGroupID([...cloneListGroupID]);\n    setListQuestionID([...cloneListQuestionID]);\n    setDataExamDetail([...cloneDataExam]);\n  }; // ON EDIT POINT\n\n\n  const onEditPoint = (dataEdit, detailID) => {\n    dataExamDetail.every((item, index) => {\n      if (detailID == item.ID) {\n        item.ExerciseTopic[0].Point = dataEdit[0].Point;\n        return false;\n      }\n\n      return true;\n    });\n    setDataExamDetail([...dataExamDetail]);\n  }; // ON REMOVE QUESTION ADD IN LIST\n\n\n  const onRemoveQuestionAdd = objectQuestion => {\n    let index = listQuestionAddOutside.findIndex(item => item.ExerciseOrExerciseGroupID == objectQuestion.ExerciseOrExerciseGroupID);\n    listQuestionAddOutside.splice(index, 1);\n    setListQuestionAddOutside([...listQuestionAddOutside]);\n  }; // ON GET LIST QUESTION ID\n\n\n  const onGetListQuestionID = objectQuestion => {\n    listQuestionAddOutside.push(objectQuestion);\n    setListQuestionAddOutside([...listQuestionAddOutside]);\n  }; // SCROLL TO TOP\n\n\n  const scrollToTop = () => {\n    boxEl.current.scrollTo(0, 0);\n  }; // ON SCROLL\n\n\n  const onScroll = () => {\n    const scrollHeight = boxEl.current.scrollHeight;\n    const offsetHeight = boxEl.current.offsetHeight;\n    const scrollTop = boxEl.current.scrollTop;\n\n    if (scrollTop > scrollHeight - offsetHeight - 50) {\n      if (todoApi.pageIndex < totalPageIndex) {\n        (dataExamDetail === null || dataExamDetail === void 0 ? void 0 : dataExamDetail.length) !== 0 && setLoadingQuestion(true);\n\n        if (scrollTop > 0 && loadingQuestion == false) {\n          setTodoApi(_objectSpread(_objectSpread({}, todoApi), {}, {\n            pageIndex: todoApi.pageIndex + 1\n          }));\n        }\n      }\n    }\n  }; // ACTION CHANGE POSITION\n\n\n  const actionChangePosition = async () => {\n    console.log('dataChange: ', dataChange);\n    setLoadingPosition(true); // let cloneListQuestionID = [];\n    // let cloneListGroupID = [];\n\n    try {\n      let res = await examDetailApi.changePosition(dataChange);\n\n      if (res.status === 200) {\n        showNoti('success', 'Đổi vị trí thành công');\n        onFetchData();\n        setIsConfirmChange(false);\n        setIsChangePosition(false); // changePositionInArray();\n        // res.data.data.forEach((item) => {\n        // \tif (item.Enable) {\n        // \t\titem.ExerciseGroupID !== 0 && cloneListGroupID.push(item.ExerciseGroupID);\n        // \t\titem.ExerciseTopic.forEach((ques) => {\n        // \t\t\tcloneListQuestionID.push(ques.ExerciseID);\n        // \t\t});\n        // \t}\n        // });\n        // setListGroupID([...cloneListGroupID]);\n        // setListQuestionID([...cloneListQuestionID]);\n      }\n    } catch (error) {\n      showNoti('danger', error.message);\n    } finally {\n      setLoadingPosition(false);\n    }\n  }; // const changePositionInArray = () => {\n  // \tlet dataFrom = null;\n  // \tlet dataTo = null;\n  // \tlet indexFrom = null;\n  // \tlet indexTo = null;\n  // \tdataExamDetail.every((item, index) => {\n  // \t\tif (item.ID === dataChange.IDChangeOne) {\n  // \t\t\tdataFrom = item;\n  // \t\t\tindexFrom = index;\n  // \t\t}\n  // \t\tif (item.ID === dataChange.IDChangeTwo) {\n  // \t\t\tdataTo = item;\n  // \t\t\tindexTo = index;\n  // \t\t}\n  // \t\tif (dataFrom && dataTo) {\n  // \t\t\treturn false;\n  // \t\t} else {\n  // \t\t\treturn true;\n  // \t\t}\n  // \t});\n  // \tdataExamDetail[indexFrom] = dataTo;\n  // \tdataExamDetail[indexTo] = dataFrom;\n  // \tsetDataExamDetail([...dataExamDetail]);\n  // };\n  // START CHANGE POSITION\n\n\n  const startChangePosition = () => {\n    !isChangePosition && setIsChangePosition(true);\n    isChangePosition && setIsConfirmChange(true);\n  }; // GET DATA CHANGE\n\n\n  const getDataChange = data => {\n    setDataChange([...data]);\n  };\n\n  useEffect(() => {\n    setIsLoading(true);\n    getExamTopicDetail();\n  }, [examID]);\n  useEffect(() => {\n    if (examTopicDetail) {\n      if (listExam.length == 0) {\n        getListExam();\n      }\n    }\n  }, [examTopicDetail]);\n  useEffect(() => {\n    onFetchData();\n    scrollToTop();\n  }, [examID]);\n  useEffect(() => {\n    getExamDetail();\n  }, [todoApi]); // useEffect(() => {\n  // \tif (dataChange.IDChangeOne && dataChange.IDChangeTwo) {\n  // \t\tactionChangePosition();\n  // \t}\n  // }, [dataChange]);\n\n  useEffect(() => {\n    getAllListQuestionID();\n    setIsLoading(true);\n\n    window.onclick = function (ev) {\n      console.log('TEST: ', ev.target);\n\n      if (ev.target.nodeName !== 'BUTTON') {\n        setVisiblePopover(false);\n      }\n    };\n  }, []);\n\n  const contentButton = /*#__PURE__*/_jsxDEV(\"div\", {\n    onClick: () => setVisiblePopover(false),\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-primary d-block w-100 text-center mb-2\",\n      onClick: startChangePosition,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex align-items-center\",\n        children: [/*#__PURE__*/_jsxDEV(AlignRightOutlined, {\n          className: \"mr-2\",\n          style: {\n            width: '18px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 588,\n          columnNumber: 6\n        }, this), isChangePosition ? 'Lưu' : 'Sắp xếp']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 586,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(AddQuestionAuto, {\n      dataExam: examTopicDetail,\n      onFetchData: onFetchData,\n      examTopicID: examID\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 592,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(AddQuestionModal, {\n      dataExam: examTopicDetail,\n      onFetchData: onFetchData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 593,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 585,\n    columnNumber: 3\n  }, this);\n\n  const content = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"question-bank-info\",\n    children: /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"list\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"list-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"list-title\",\n            children: \"Gi\\xE1o tr\\xECnh:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 602,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"list-text\",\n            children: examTopicDetail === null || examTopicDetail === void 0 ? void 0 : examTopicDetail.CurriculumName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 603,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 601,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"list-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"list-title\",\n            children: \"T\\u1ED5ng s\\u1ED1 c\\xE2u\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 606,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"list-text\",\n            children: listQuestionID === null || listQuestionID === void 0 ? void 0 : listQuestionID.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 607,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 605,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 600,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"list-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"list-title\",\n            children: \"D\\u1EA1ng \\u0111\\u1EC1 thi:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 612,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"list-text\",\n            children: examTopicDetail === null || examTopicDetail === void 0 ? void 0 : examTopicDetail.TypeName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 613,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 611,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"list-item mb-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"list-title\",\n            children: \"Th\\u1EDDi gian:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 617,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"list-text\",\n            children: [examTopicDetail === null || examTopicDetail === void 0 ? void 0 : examTopicDetail.Time, \" ph\\xFAt\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 618,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 616,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 610,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 599,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 598,\n    columnNumber: 3\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(ExamDetailContext.Provider, {\n    value: {\n      onAddQuestion,\n      onEditPoint,\n      isGetQuestion: isGetQuestion,\n      onGetListQuestionID,\n      listQuestionAddOutside,\n      listQuestionID: listQuestionID,\n      listGroupID: listGroupID,\n      onRemoveQuestionAdd,\n      onDeleteQuestion,\n      dataChange: dataChange,\n      getDataChange,\n      isChangePosition: isChangePosition\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"question-create exam\",\n      children: [/*#__PURE__*/_jsxDEV(PopupConfirm, {\n        okText: \"\\u0110\\u1ED3ng \\xFD\",\n        cancelText: \"H\\u1EE7y\",\n        isOpen: isConfirmChange,\n        onOk: actionChangePosition,\n        onCancel: () => setIsConfirmChange(false),\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontWeight: 500\n          },\n          children: \"Thay \\u0111\\u1ED5i v\\u1ECB tr\\xED c\\xE2u h\\u1ECFi ngay b\\xE2y gi\\u1EDD?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 650,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 643,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(TitlePage, {\n        title: \"T\\u1EA1o \\u0111\\u1EC1 thi\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 653,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-9 col-12\",\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            className: \"card-detail-exam card-detail-question\",\n            title: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"title-question-bank\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"title-big\",\n                children: [/*#__PURE__*/_jsxDEV(Bookmark, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 662,\n                  columnNumber: 11\n                }, this), \" \", examTopicDetail === null || examTopicDetail === void 0 ? void 0 : examTopicDetail.Name]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 661,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(Popover, {\n                content: content,\n                trigger: \"hover\",\n                placement: \"bottomLeft\",\n                children: loadingDetail ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-md-3\",\n                    children: /*#__PURE__*/_jsxDEV(Skeleton, {\n                      paragraph: false,\n                      loading: true,\n                      title: true,\n                      active: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 668,\n                      columnNumber: 14\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 667,\n                    columnNumber: 13\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-md-3\",\n                    children: /*#__PURE__*/_jsxDEV(Skeleton, {\n                      paragraph: false,\n                      loading: true,\n                      title: true,\n                      active: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 671,\n                      columnNumber: 14\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 670,\n                    columnNumber: 13\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-md-3\",\n                    children: /*#__PURE__*/_jsxDEV(Skeleton, {\n                      paragraph: false,\n                      loading: true,\n                      title: true,\n                      active: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 674,\n                      columnNumber: 14\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 673,\n                    columnNumber: 13\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 666,\n                  columnNumber: 12\n                }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"list-detail-question\",\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"icon-detail-question\",\n                      children: /*#__PURE__*/_jsxDEV(Info, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 681,\n                        columnNumber: 15\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 680,\n                      columnNumber: 14\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 679,\n                    columnNumber: 13\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"title\",\n                      children: \"Gi\\xE1o tr\\xECnh:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 685,\n                      columnNumber: 14\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text text-curriculum\",\n                      children: examTopicDetail === null || examTopicDetail === void 0 ? void 0 : examTopicDetail.CurriculumName\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 686,\n                      columnNumber: 14\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 684,\n                    columnNumber: 13\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 678,\n                  columnNumber: 12\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 664,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 660,\n              columnNumber: 9\n            }, this),\n            extra: /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: /*#__PURE__*/_jsxDEV(Popover, {\n                visible: visiblePopover,\n                content: contentButton,\n                placement: \"bottomRight\",\n                title: null,\n                trigger: \"click\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-light btn-function\",\n                  onClick: () => setVisiblePopover(!visiblePopover),\n                  children: \"Ch\\u1EE9c n\\u0103ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 712,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 711,\n                columnNumber: 10\n              }, this)\n            }, void 0, false),\n            children: [loadingPosition && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-all\",\n              children: /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 721,\n                columnNumber: 10\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 720,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"question-list\",\n              ref: boxEl,\n              onScroll: onScroll,\n              children: [isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center mt-3\",\n                children: /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 727,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 726,\n                columnNumber: 10\n              }, this) : dataExamDetail.length == 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-center\",\n                children: /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"\\u0110\\u1EC1 thi hi\\u1EC7n ch\\u01B0a c\\xF3 c\\xE2u h\\u1ECFi n\\xE0o\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 731,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 730,\n                columnNumber: 10\n              }, this) : dataExamDetail === null || dataExamDetail === void 0 ? void 0 : dataExamDetail.map((item, index) => item.Enable && returnQuestionType(item, index)), loadingQuestion && /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(Skeleton, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 739,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 738,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 724,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 657,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 656,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-3 col-12 fixed-card\",\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            className: \"card-exam-bank\",\n            title: \"Danh s\\xE1ch \\u0111\\u1EC1 c\\xF9ng gi\\xE1o tr\\xECnh\",\n            children: /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"list-exam-bank\",\n              children: loadingExam ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center mt-4\",\n                children: [/*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 751,\n                  columnNumber: 11\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"d-block\",\n                  children: \"\\u0110ang t\\u1EA3i danh s\\xE1ch...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 752,\n                  columnNumber: 11\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 750,\n                columnNumber: 10\n              }, this) : (listExam === null || listExam === void 0 ? void 0 : listExam.length) > 0 ? listExam.map((item, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                className: item.ID == examID ? 'active' : '',\n                children: /*#__PURE__*/_jsxDEV(Link, {\n                  href: {\n                    pathname: '/question-bank/exam-list/exam-detail/[slug]',\n                    query: {\n                      slug: item.ID\n                    }\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"a\", {\n                    className: \"\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"number\",\n                      children: [index + 1, \"/\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 764,\n                      columnNumber: 14\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text\",\n                      children: item.Name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 765,\n                      columnNumber: 14\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 763,\n                    columnNumber: 13\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 757,\n                  columnNumber: 12\n                }, this)\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 756,\n                columnNumber: 11\n              }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-italic\",\n                children: \"Kh\\xF4ng c\\xF3 d\\u1EEF li\\u1EC7u\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 771,\n                columnNumber: 10\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 748,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 747,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 746,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 655,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 642,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 626,\n    columnNumber: 3\n  }, this);\n};\n\nExamDetail.layout = LayoutBase;\nexport default ExamDetail;\nexport const useExamDetail = () => useContext(ExamDetailContext);","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/pages/question-bank/exam-list/exam-detail/[slug].tsx"],"names":["AlignRightOutlined","Card","Popover","Skeleton","Spin","Link","useRouter","createContext","useContext","useEffect","useRef","useState","Bookmark","Info","examDetailApi","examTopicApi","PopupConfirm","TitlePage","AddQuestionAuto","AddQuestionModal","ChoiceList","DragList","MapList","MultipleList","SpeakingList","TypingList","WrapList","WrittingList","LayoutBase","useWrap","listAlphabet","ExamDetailContext","onAddQuestion","onDeleteQuestion","onEditPoint","onRemoveQuestionAdd","data","onGetListQuestionID","getDataChange","isGetQuestion","listQuestionAddOutside","listQuestionID","listGroupID","dataChange","isChangePosition","ExamDetail","showNoti","rr","setRerender","arPosition","setArPositions","router","examID","parseInt","query","slug","dataExamDetail","setDataExamDetail","examTopicDetail","setExamTopicDetail","setListQuestionID","setListGroupID","setListQuestionAddOutside","setIsGetQuestion","isLoading","setIsLoading","totalPageIndex","setTotalPageIndex","boxEl","loadingQuestion","setLoadingQuestion","listTodoApi","pageIndex","pageSize","ExamTopicID","todoApi","setTodoApi","listExam","setListExam","loadingExam","setLoadingExam","loadingDetail","setLoadingDetail","setDataChange","loadingPosition","setLoadingPosition","setIsChangePosition","isConfirmChange","setIsConfirmChange","visiblePopover","setVisiblePopover","setArPosition","param","getPosi","ar","it","i","length","value","removeItem","po","old","temp","push","addItem","item","label","reRender","addOldItem","now","Date","handleChange","undefined","getListExam","res","getAll","setlectAll","CurriculumID","Type","status","error","message","getAllListQuestionID","cloneListQuestionID","cloneListGroupID","forEach","Enable","ExerciseGroupID","ID","Index","ExerciseTopic","ques","ExerciseID","getExamDetail","cloneData","index","totalPage","Math","ceil","totalRow","getExamTopicDetail","getByID","returnQuestionType","type","onFetchData","dataDelete","cloneDataExam","indexQues","findIndex","splice","dataEdit","detailID","every","Point","objectQuestion","ExerciseOrExerciseGroupID","scrollToTop","current","scrollTo","onScroll","scrollHeight","offsetHeight","scrollTop","actionChangePosition","console","log","changePosition","startChangePosition","window","onclick","ev","target","nodeName","contentButton","width","content","CurriculumName","TypeName","Time","fontWeight","Name","map","pathname","layout","useExamDetail"],"mappings":"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","sourcesContent":["import { AlignRightOutlined } from '@ant-design/icons'\r\nimport { Card, Popover, Skeleton, Spin } from 'antd'\r\nimport Link from 'next/link'\r\nimport { useRouter } from 'next/router'\r\nimport { createContext, useContext, useEffect, useRef, useState } from 'react'\r\nimport { Bookmark, Info } from 'react-feather'\r\nimport { examDetailApi, examTopicApi } from '~/apiBase'\r\nimport PopupConfirm from '~/components/Elements/PopupConfirm'\r\nimport TitlePage from '~/components/Elements/TitlePage'\r\nimport AddQuestionAuto from '~/components/Global/ExamDetail/AddQuestionAuto'\r\nimport AddQuestionModal from '~/components/Global/ExamDetail/AddQuestionModal'\r\nimport ChoiceList from '~/components/Global/ExamList/ExamShow/ChoiceList'\r\nimport DragList from '~/components/Global/ExamList/ExamShow/DragList'\r\nimport MapList from '~/components/Global/ExamList/ExamShow/MapList'\r\nimport MultipleList from '~/components/Global/ExamList/ExamShow/MultipleList'\r\nimport SpeakingList from '~/components/Global/ExamList/ExamShow/Speaking'\r\nimport TypingList from '~/components/Global/ExamList/ExamShow/TypingList'\r\nimport WrapList from '~/components/Global/ExamList/ExamShow/WrapList'\r\nimport WrittingList from '~/components/Global/ExamList/ExamShow/WrittingList'\r\nimport LayoutBase from '~/components/LayoutBase'\r\nimport { useWrap } from '~/context/wrap'\r\n\r\nconst listAlphabet = ['A', 'B', 'C', 'D', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V']\r\n\r\ntype objectQuestionAddOutside = {\r\n\ttype: number\r\n\tExerciseOrExerciseGroupID: number\r\n}\r\n\r\nexport type IProps = {\r\n\tonAddQuestion: Function\r\n\tonGetListQuestionID: Function\r\n\tonRemoveQuestionAdd: Function\r\n\tonDeleteQuestion: Function\r\n\tonEditPoint: Function\r\n\tgetDataChange: Function\r\n\tisGetQuestion: boolean\r\n\tlistQuestionAddOutside: Array<objectQuestionAddOutside>\r\n\tlistQuestionID: Array<number>\r\n\tlistGroupID: Array<number>\r\n\tdataChange: Array<{\r\n\t\tID: number\r\n\t\tIndex: number\r\n\t}>\r\n\tisChangePosition: boolean\r\n}\r\n\r\nconst ExamDetailContext = createContext<IProps>({\r\n\tonAddQuestion: () => {},\r\n\tonDeleteQuestion: () => {},\r\n\tonEditPoint: () => {},\r\n\tonRemoveQuestionAdd: (data) => {},\r\n\tonGetListQuestionID: (data) => {},\r\n\tgetDataChange: (data) => {},\r\n\tisGetQuestion: false,\r\n\tlistQuestionAddOutside: [],\r\n\tlistQuestionID: [],\r\n\tlistGroupID: [],\r\n\tdataChange: [],\r\n\tisChangePosition: false\r\n})\r\n\r\nconst ExamDetail = () => {\r\n\tconst { showNoti } = useWrap()\r\n\tconst [rr, setRerender] = useState('') // ĐỂ CÁI NÀY BUỘC NÓ RERENDER - BÙA CHÚ CẢ\r\n\tconst [arPosition, setArPositions] = useState([])\r\n\tconst router = useRouter()\r\n\tconst examID = parseInt(router.query.slug as string)\r\n\tconst [dataExamDetail, setDataExamDetail] = useState([])\r\n\tconst [examTopicDetail, setExamTopicDetail] = useState<IExamTopic>(null)\r\n\tconst [listQuestionID, setListQuestionID] = useState([]) // Lấy tất cả ID đã có\r\n\tconst [listGroupID, setListGroupID] = useState([]) // Lấy tất cả group ID đã có\r\n\tconst [listQuestionAddOutside, setListQuestionAddOutside] = useState([]) // Lấy tất cả ID vừa add\r\n\tconst [isGetQuestion, setIsGetQuestion] = useState(false)\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [totalPageIndex, setTotalPageIndex] = useState(0)\r\n\tconst boxEl = useRef(null)\r\n\tconst [loadingQuestion, setLoadingQuestion] = useState(false)\r\n\tconst listTodoApi = {\r\n\t\tpageIndex: 1,\r\n\t\tpageSize: 10,\r\n\t\tExamTopicID: examID\r\n\t}\r\n\tconst [todoApi, setTodoApi] = useState(listTodoApi)\r\n\tconst [listExam, setListExam] = useState([])\r\n\tconst [loadingExam, setLoadingExam] = useState(false)\r\n\tconst [loadingDetail, setLoadingDetail] = useState(false)\r\n\tconst [dataChange, setDataChange] = useState([])\r\n\tconst [loadingPosition, setLoadingPosition] = useState(false)\r\n\tconst [isChangePosition, setIsChangePosition] = useState(false)\r\n\tconst [isConfirmChange, setIsConfirmChange] = useState(false)\r\n\tconst [visiblePopover, setVisiblePopover] = useState(false)\r\n\r\n\tconst setArPosition = (param) => {\r\n\t\tsetArPositions(param)\r\n\t}\r\n\r\n\tconst getPosi = (ar, it) => {\r\n\t\tfor (let i = 0; i < ar.length; i++) {\r\n\t\t\tif (ar[i].value == it) {\r\n\t\t\t\treturn i\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1\r\n\t}\r\n\r\n\tconst removeItem = (ar, po, old) => {\r\n\t\tlet temp = []\r\n\t\tfor (let i = 0; i < ar.length; i++) {\r\n\t\t\tif (i !== po) {\r\n\t\t\t\ttemp.push(ar[i])\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (old > 0) {\r\n\t\t\taddItem(old, temp)\r\n\t\t} else {\r\n\t\t\tsetArPosition(temp)\r\n\t\t}\r\n\t}\r\n\r\n\tconst addItem = async (item, ar) => {\r\n\t\tlet temp = ar\r\n\t\tlet po = await getPosi(arPosition, item)\r\n\t\tif (po == -1) {\r\n\t\t\ttemp.push({ value: item, label: item })\r\n\t\t\tsetArPosition(temp)\r\n\t\t}\r\n\t\treRender(po)\r\n\t}\r\n\r\n\tconst addOldItem = async (item) => {\r\n\t\tlet temp = arPosition\r\n\t\tlet po = await getPosi(arPosition, item)\r\n\t\tif (po == -1) {\r\n\t\t\ttemp.push({ value: item, label: item })\r\n\t\t\tsetArPosition(temp)\r\n\t\t}\r\n\t\tlet now = new Date()\r\n\t\tsetRerender(item + now + '')\r\n\t}\r\n\r\n\tconst handleChange = async (value, old) => {\r\n\t\tlet po = await getPosi(arPosition, value)\r\n\t\treRender(value)\r\n\t\tif (po !== -1) {\r\n\t\t\tawait removeItem(arPosition, po, old)\r\n\t\t}\r\n\t}\r\n\r\n\tconst reRender = (value) => {\r\n\t\tlet now = new Date()\r\n\t\tvalue !== undefined ? setRerender(value + now + '') : setRerender('fuck - ' + now + '')\r\n\t}\r\n\r\n\t// ---- GET LIST EXAM ----\r\n\tconst getListExam = async () => {\r\n\t\ttry {\r\n\t\t\tlet res = await examTopicApi.getAll({\r\n\t\t\t\tsetlectAll: true,\r\n\t\t\t\tCurriculumID: examTopicDetail.CurriculumID,\r\n\t\t\t\tType: examTopicDetail.Type\r\n\t\t\t})\r\n\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tsetListExam(res.data.data)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetLoadingExam(false)\r\n\t\t\tsetIsLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\t// ---- GET ALL LIST QUESTION ID ----\r\n\tconst getAllListQuestionID = async () => {\r\n\t\tlet cloneListQuestionID = [...listQuestionID]\r\n\t\tlet cloneListGroupID = [...listGroupID]\r\n\r\n\t\ttry {\r\n\t\t\tlet res = await examDetailApi.getAll({ ...todoApi, pageSize: 9999, pageIndex: 1 })\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tres.data.data.forEach((item) => {\r\n\t\t\t\t\tif (item.Enable) {\r\n\t\t\t\t\t\titem.ExerciseGroupID !== 0 && cloneListGroupID.push(item.ExerciseGroupID)\r\n\t\t\t\t\t\tdataChange.push({\r\n\t\t\t\t\t\t\tID: item.ID,\r\n\t\t\t\t\t\t\tIndex: null\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\titem.ExerciseTopic.forEach((ques) => {\r\n\t\t\t\t\t\t\tcloneListQuestionID.push(ques.ExerciseID)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tsetListGroupID([...cloneListGroupID])\r\n\t\t\t\tsetListQuestionID([...cloneListQuestionID])\r\n\t\t\t\tsetDataChange([...dataChange])\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t} finally {\r\n\t\t\tsetIsLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\t// ---- GET LIST QUESTION IN EXAM ----\r\n\tconst getExamDetail = async () => {\r\n\t\tlet cloneListQuestionID = [...listQuestionID]\r\n\t\tlet cloneListGroupID = [...listGroupID]\r\n\r\n\t\ttry {\r\n\t\t\tlet res = await examDetailApi.getAll(todoApi)\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tsetDataExamDetail(res.data.data)\r\n\r\n\t\t\t\tlet cloneData = [...dataExamDetail]\r\n\t\t\t\tres.data.data.forEach((item, index) => {\r\n\t\t\t\t\tcloneData.push(item)\r\n\t\t\t\t})\r\n\r\n\t\t\t\tsetDataExamDetail([...cloneData])\r\n\r\n\t\t\t\tres.data.data.forEach((item) => {\r\n\t\t\t\t\tif (item.Enable) {\r\n\t\t\t\t\t\titem.ExerciseGroupID !== 0 && cloneListGroupID.push(item.ExerciseGroupID)\r\n\t\t\t\t\t\titem.ExerciseTopic.forEach((ques) => {\r\n\t\t\t\t\t\t\tcloneListQuestionID.push(ques.ExerciseID)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tsetListGroupID([...cloneListGroupID])\r\n\t\t\t\tsetListQuestionID([...cloneListQuestionID])\r\n\t\t\t\tsetListQuestionAddOutside([])\r\n\r\n\t\t\t\t// Caculator pageindex\r\n\t\t\t\tlet totalPage = Math.ceil(res.data.totalRow / 10)\r\n\t\t\t\tsetTotalPageIndex(totalPage)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetLoadingQuestion(false)\r\n\t\t\tsetIsLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst getExamTopicDetail = async () => {\r\n\t\tlistExam.length == 0 && setLoadingExam(true)\r\n\t\tsetLoadingDetail(true)\r\n\t\ttry {\r\n\t\t\tlet res = await examTopicApi.getByID(examID)\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tsetExamTopicDetail(res.data.data)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetLoadingDetail(false)\r\n\t\t}\r\n\t}\r\n\r\n\t// RETURN QUESTION TYPE\r\n\tconst returnQuestionType = (item, index) => {\r\n\t\tconst type = item.Type\r\n\t\tswitch (type) {\r\n\t\t\tcase 1:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={index}>\r\n\t\t\t\t\t\t<WrapList\r\n\t\t\t\t\t\t\tdataQuestion={item}\r\n\t\t\t\t\t\t\tlistQuestionID={listQuestionID}\r\n\t\t\t\t\t\t\tarPosition={arPosition}\r\n\t\t\t\t\t\t\thandleChange={handleChange}\r\n\t\t\t\t\t\t\taddOldItem={addOldItem}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ChoiceList\r\n\t\t\t\t\t\t\t\tisDoingTest={false}\r\n\t\t\t\t\t\t\t\tlistQuestionID={listQuestionID}\r\n\t\t\t\t\t\t\t\tdataQuestion={item}\r\n\t\t\t\t\t\t\t\tlistAlphabet={listAlphabet}\r\n\t\t\t\t\t\t\t\tshowScore={true}\r\n\t\t\t\t\t\t\t\tarPosition={arPosition}\r\n\t\t\t\t\t\t\t\thandleChange={handleChange}\r\n\t\t\t\t\t\t\t\taddOldItem={addOldItem}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</WrapList>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\tcase 2:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={index}>\r\n\t\t\t\t\t\t<WrapList\r\n\t\t\t\t\t\t\tdataQuestion={item}\r\n\t\t\t\t\t\t\tlistQuestionID={listQuestionID}\r\n\t\t\t\t\t\t\tarPosition={arPosition}\r\n\t\t\t\t\t\t\thandleChange={handleChange}\r\n\t\t\t\t\t\t\taddOldItem={addOldItem}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<DragList isDoingTest={false} listQuestionID={listQuestionID} dataQuestion={item} listAlphabet={listAlphabet} />\r\n\t\t\t\t\t\t</WrapList>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\tcase 3:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={index}>\r\n\t\t\t\t\t\t<WrapList\r\n\t\t\t\t\t\t\tdataQuestion={item}\r\n\t\t\t\t\t\t\tlistQuestionID={listQuestionID}\r\n\t\t\t\t\t\t\tarPosition={arPosition}\r\n\t\t\t\t\t\t\thandleChange={handleChange}\r\n\t\t\t\t\t\t\taddOldItem={addOldItem}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<TypingList isDoingTest={false} listQuestionID={listQuestionID} dataQuestion={item} listAlphabet={listAlphabet} />\r\n\t\t\t\t\t\t</WrapList>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\tcase 4:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={index}>\r\n\t\t\t\t\t\t<WrapList dataQuestion={item} listQuestionID={listQuestionID}>\r\n\t\t\t\t\t\t\t<MultipleList\r\n\t\t\t\t\t\t\t\tisDoingTest={false}\r\n\t\t\t\t\t\t\t\tlistQuestionID={listQuestionID}\r\n\t\t\t\t\t\t\t\tdataQuestion={item}\r\n\t\t\t\t\t\t\t\tlistAlphabet={listAlphabet}\r\n\t\t\t\t\t\t\t\tarPosition={arPosition}\r\n\t\t\t\t\t\t\t\thandleChange={handleChange}\r\n\t\t\t\t\t\t\t\taddOldItem={addOldItem}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</WrapList>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\tcase 5:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={index}>\r\n\t\t\t\t\t\t<WrapList\r\n\t\t\t\t\t\t\tdataQuestion={item}\r\n\t\t\t\t\t\t\tlistQuestionID={listQuestionID}\r\n\t\t\t\t\t\t\tarPosition={arPosition}\r\n\t\t\t\t\t\t\thandleChange={handleChange}\r\n\t\t\t\t\t\t\taddOldItem={addOldItem}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<MapList isDoingTest={false} listQuestionID={listQuestionID} dataQuestion={item} listAlphabet={listAlphabet} />\r\n\t\t\t\t\t\t</WrapList>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\tcase 6:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={index}>\r\n\t\t\t\t\t\t<WrapList dataQuestion={item} listQuestionID={listQuestionID} arPosition={arPosition} handleChange={handleChange}>\r\n\t\t\t\t\t\t\t<WrittingList\r\n\t\t\t\t\t\t\t\tisDoingTest={false}\r\n\t\t\t\t\t\t\t\tlistQuestionID={listQuestionID}\r\n\t\t\t\t\t\t\t\tdataQuestion={item}\r\n\t\t\t\t\t\t\t\tlistAlphabet={listAlphabet}\r\n\t\t\t\t\t\t\t\tarPosition={arPosition}\r\n\t\t\t\t\t\t\t\thandleChange={handleChange}\r\n\t\t\t\t\t\t\t\tremoveItem={removeItem}\r\n\t\t\t\t\t\t\t\taddOldItem={addOldItem}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</WrapList>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\tcase 7:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={index}>\r\n\t\t\t\t\t\t<WrapList dataQuestion={item} listQuestionID={listQuestionID} handleChange={handleChange} addOldItem={addOldItem}>\r\n\t\t\t\t\t\t\t<SpeakingList\r\n\t\t\t\t\t\t\t\tisDoingTest={false}\r\n\t\t\t\t\t\t\t\tlistQuestionID={listQuestionID}\r\n\t\t\t\t\t\t\t\tdataQuestion={item}\r\n\t\t\t\t\t\t\t\tlistAlphabet={listAlphabet}\r\n\t\t\t\t\t\t\t\tarPosition={arPosition}\r\n\t\t\t\t\t\t\t\thandleChange={handleChange}\r\n\t\t\t\t\t\t\t\taddOldItem={addOldItem}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</WrapList>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\tdefault:\r\n\t\t\t\treturn\r\n\t\t}\r\n\t}\r\n\r\n\t// ON ADD QUESTION TO EXAM\r\n\tconst onAddQuestion = () => {\r\n\t\tsetIsGetQuestion(true)\r\n\t}\r\n\r\n\t// ON FETCH DATA\r\n\tconst onFetchData = () => {\r\n\t\tsetIsLoading(true)\r\n\t\tsetListGroupID([])\r\n\t\tsetListQuestionID([])\r\n\t\tsetDataExamDetail([])\r\n\t\tsetTodoApi(listTodoApi)\r\n\t\tsetIsGetQuestion(false)\r\n\t}\r\n\r\n\t// ON DELETE QUESTION\r\n\tconst onDeleteQuestion = (dataDelete) => {\r\n\t\tlet cloneListQuestionID = []\r\n\t\tlet cloneListGroupID = []\r\n\t\tlet cloneDataExam = [...dataExamDetail]\r\n\r\n\t\tlet indexQues = cloneDataExam.findIndex((item) => item.ID == dataDelete.ID)\r\n\t\tcloneDataExam.splice(indexQues, 1)\r\n\r\n\t\tcloneDataExam.forEach((item) => {\r\n\t\t\titem.ExerciseGroupID !== 0 && cloneListGroupID.push(item.ExerciseGroupID)\r\n\t\t\titem.ExerciseTopic.forEach((ques) => {\r\n\t\t\t\tcloneListQuestionID.push(ques.ExerciseID)\r\n\t\t\t})\r\n\t\t})\r\n\t\tsetListGroupID([...cloneListGroupID])\r\n\t\tsetListQuestionID([...cloneListQuestionID])\r\n\r\n\t\tsetDataExamDetail([...cloneDataExam])\r\n\t}\r\n\r\n\t// ON EDIT POINT\r\n\tconst onEditPoint = (dataEdit, detailID) => {\r\n\t\tdataExamDetail.every((item, index) => {\r\n\t\t\tif (detailID == item.ID) {\r\n\t\t\t\titem.ExerciseTopic[0].Point = dataEdit[0].Point\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\treturn true\r\n\t\t})\r\n\r\n\t\tsetDataExamDetail([...dataExamDetail])\r\n\t}\r\n\r\n\t// ON REMOVE QUESTION ADD IN LIST\r\n\tconst onRemoveQuestionAdd = (objectQuestion: any) => {\r\n\t\tlet index = listQuestionAddOutside.findIndex((item) => item.ExerciseOrExerciseGroupID == objectQuestion.ExerciseOrExerciseGroupID)\r\n\t\tlistQuestionAddOutside.splice(index, 1)\r\n\t\tsetListQuestionAddOutside([...listQuestionAddOutside])\r\n\t}\r\n\r\n\t// ON GET LIST QUESTION ID\r\n\tconst onGetListQuestionID = (objectQuestion: any) => {\r\n\t\tlistQuestionAddOutside.push(objectQuestion)\r\n\r\n\t\tsetListQuestionAddOutside([...listQuestionAddOutside])\r\n\t}\r\n\r\n\t// SCROLL TO TOP\r\n\tconst scrollToTop = () => {\r\n\t\tboxEl.current.scrollTo(0, 0)\r\n\t}\r\n\t// ON SCROLL\r\n\tconst onScroll = () => {\r\n\t\tconst scrollHeight = boxEl.current.scrollHeight\r\n\t\tconst offsetHeight = boxEl.current.offsetHeight\r\n\t\tconst scrollTop = boxEl.current.scrollTop\r\n\r\n\t\tif (scrollTop > scrollHeight - offsetHeight - 50) {\r\n\t\t\tif (todoApi.pageIndex < totalPageIndex) {\r\n\t\t\t\tdataExamDetail?.length !== 0 && setLoadingQuestion(true)\r\n\r\n\t\t\t\tif (scrollTop > 0 && loadingQuestion == false) {\r\n\t\t\t\t\tsetTodoApi({\r\n\t\t\t\t\t\t...todoApi,\r\n\t\t\t\t\t\tpageIndex: todoApi.pageIndex + 1\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// ACTION CHANGE POSITION\r\n\tconst actionChangePosition = async () => {\r\n\t\tconsole.log('dataChange: ', dataChange)\r\n\r\n\t\tsetLoadingPosition(true)\r\n\t\t// let cloneListQuestionID = [];\r\n\t\t// let cloneListGroupID = [];\r\n\t\ttry {\r\n\t\t\tlet res = await examDetailApi.changePosition(dataChange)\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tshowNoti('success', 'Đổi vị trí thành công')\r\n\t\t\t\tonFetchData()\r\n\t\t\t\tsetIsConfirmChange(false)\r\n\t\t\t\tsetIsChangePosition(false)\r\n\t\t\t\t// changePositionInArray();\r\n\t\t\t\t// res.data.data.forEach((item) => {\r\n\t\t\t\t// \tif (item.Enable) {\r\n\t\t\t\t// \t\titem.ExerciseGroupID !== 0 && cloneListGroupID.push(item.ExerciseGroupID);\r\n\t\t\t\t// \t\titem.ExerciseTopic.forEach((ques) => {\r\n\t\t\t\t// \t\t\tcloneListQuestionID.push(ques.ExerciseID);\r\n\t\t\t\t// \t\t});\r\n\t\t\t\t// \t}\r\n\t\t\t\t// });\r\n\t\t\t\t// setListGroupID([...cloneListGroupID]);\r\n\t\t\t\t// setListQuestionID([...cloneListQuestionID]);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetLoadingPosition(false)\r\n\t\t}\r\n\t}\r\n\r\n\t// const changePositionInArray = () => {\r\n\t// \tlet dataFrom = null;\r\n\t// \tlet dataTo = null;\r\n\r\n\t// \tlet indexFrom = null;\r\n\t// \tlet indexTo = null;\r\n\r\n\t// \tdataExamDetail.every((item, index) => {\r\n\t// \t\tif (item.ID === dataChange.IDChangeOne) {\r\n\t// \t\t\tdataFrom = item;\r\n\t// \t\t\tindexFrom = index;\r\n\t// \t\t}\r\n\t// \t\tif (item.ID === dataChange.IDChangeTwo) {\r\n\t// \t\t\tdataTo = item;\r\n\t// \t\t\tindexTo = index;\r\n\t// \t\t}\r\n\t// \t\tif (dataFrom && dataTo) {\r\n\t// \t\t\treturn false;\r\n\t// \t\t} else {\r\n\t// \t\t\treturn true;\r\n\t// \t\t}\r\n\t// \t});\r\n\r\n\t// \tdataExamDetail[indexFrom] = dataTo;\r\n\t// \tdataExamDetail[indexTo] = dataFrom;\r\n\r\n\t// \tsetDataExamDetail([...dataExamDetail]);\r\n\t// };\r\n\r\n\t// START CHANGE POSITION\r\n\tconst startChangePosition = () => {\r\n\t\t!isChangePosition && setIsChangePosition(true)\r\n\t\tisChangePosition && setIsConfirmChange(true)\r\n\t}\r\n\r\n\t// GET DATA CHANGE\r\n\tconst getDataChange = (data: any) => {\r\n\t\tsetDataChange([...data])\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tsetIsLoading(true)\r\n\t\tgetExamTopicDetail()\r\n\t}, [examID])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (examTopicDetail) {\r\n\t\t\tif (listExam.length == 0) {\r\n\t\t\t\tgetListExam()\r\n\t\t\t}\r\n\t\t}\r\n\t}, [examTopicDetail])\r\n\r\n\tuseEffect(() => {\r\n\t\tonFetchData()\r\n\t\tscrollToTop()\r\n\t}, [examID])\r\n\r\n\tuseEffect(() => {\r\n\t\tgetExamDetail()\r\n\t}, [todoApi])\r\n\r\n\t// useEffect(() => {\r\n\t// \tif (dataChange.IDChangeOne && dataChange.IDChangeTwo) {\r\n\t// \t\tactionChangePosition();\r\n\t// \t}\r\n\t// }, [dataChange]);\r\n\r\n\tuseEffect(() => {\r\n\t\tgetAllListQuestionID()\r\n\t\tsetIsLoading(true)\r\n\r\n\t\twindow.onclick = function (ev) {\r\n\t\t\tconsole.log('TEST: ', ev.target)\r\n\t\t\tif (ev.target.nodeName !== 'BUTTON') {\r\n\t\t\t\tsetVisiblePopover(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst contentButton = (\r\n\t\t<div onClick={() => setVisiblePopover(false)}>\r\n\t\t\t<button className=\"btn btn-primary d-block w-100 text-center mb-2\" onClick={startChangePosition}>\r\n\t\t\t\t<div className=\"d-flex align-items-center\">\r\n\t\t\t\t\t<AlignRightOutlined className=\"mr-2\" style={{ width: '18px' }} />\r\n\t\t\t\t\t{isChangePosition ? 'Lưu' : 'Sắp xếp'}\r\n\t\t\t\t</div>\r\n\t\t\t</button>\r\n\t\t\t<AddQuestionAuto dataExam={examTopicDetail} onFetchData={onFetchData} examTopicID={examID} />\r\n\t\t\t<AddQuestionModal dataExam={examTopicDetail} onFetchData={onFetchData} />\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst content = (\r\n\t\t<div className=\"question-bank-info\">\r\n\t\t\t<ul className=\"list\">\r\n\t\t\t\t<div className=\"d-flex\">\r\n\t\t\t\t\t<li className=\"list-item\">\r\n\t\t\t\t\t\t<span className=\"list-title\">Giáo trình:</span>\r\n\t\t\t\t\t\t<span className=\"list-text\">{examTopicDetail?.CurriculumName}</span>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li className=\"list-item\">\r\n\t\t\t\t\t\t<span className=\"list-title\">Tổng số câu</span>\r\n\t\t\t\t\t\t<span className=\"list-text\">{listQuestionID?.length}</span>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"d-flex\">\r\n\t\t\t\t\t<li className=\"list-item\">\r\n\t\t\t\t\t\t<span className=\"list-title\">Dạng đề thi:</span>\r\n\t\t\t\t\t\t<span className=\"list-text\">{examTopicDetail?.TypeName}</span>\r\n\t\t\t\t\t</li>\r\n\r\n\t\t\t\t\t<li className=\"list-item mb-0\">\r\n\t\t\t\t\t\t<span className=\"list-title\">Thời gian:</span>\r\n\t\t\t\t\t\t<span className=\"list-text\">{examTopicDetail?.Time} phút</span>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</div>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<ExamDetailContext.Provider\r\n\t\t\tvalue={{\r\n\t\t\t\tonAddQuestion,\r\n\t\t\t\tonEditPoint,\r\n\t\t\t\tisGetQuestion: isGetQuestion,\r\n\t\t\t\tonGetListQuestionID,\r\n\t\t\t\tlistQuestionAddOutside,\r\n\t\t\t\tlistQuestionID: listQuestionID,\r\n\t\t\t\tlistGroupID: listGroupID,\r\n\t\t\t\tonRemoveQuestionAdd,\r\n\t\t\t\tonDeleteQuestion,\r\n\t\t\t\tdataChange: dataChange,\r\n\t\t\t\tgetDataChange,\r\n\t\t\t\tisChangePosition: isChangePosition\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t<div className=\"question-create exam\">\r\n\t\t\t\t<PopupConfirm\r\n\t\t\t\t\tokText=\"Đồng ý\"\r\n\t\t\t\t\tcancelText=\"Hủy\"\r\n\t\t\t\t\tisOpen={isConfirmChange}\r\n\t\t\t\t\tonOk={actionChangePosition}\r\n\t\t\t\t\tonCancel={() => setIsConfirmChange(false)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<p style={{ fontWeight: 500 }}>Thay đổi vị trí câu hỏi ngay bây giờ?</p>\r\n\t\t\t\t</PopupConfirm>\r\n\r\n\t\t\t\t<TitlePage title=\"Tạo đề thi\" />\r\n\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-md-9 col-12\">\r\n\t\t\t\t\t\t<Card\r\n\t\t\t\t\t\t\tclassName=\"card-detail-exam card-detail-question\"\r\n\t\t\t\t\t\t\ttitle={\r\n\t\t\t\t\t\t\t\t<div className=\"title-question-bank\">\r\n\t\t\t\t\t\t\t\t\t<h3 className=\"title-big\">\r\n\t\t\t\t\t\t\t\t\t\t<Bookmark /> {examTopicDetail?.Name}\r\n\t\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t\t<Popover content={content} trigger=\"hover\" placement=\"bottomLeft\">\r\n\t\t\t\t\t\t\t\t\t\t{loadingDetail ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col-md-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton paragraph={false} loading={true} title={true} active />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col-md-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton paragraph={false} loading={true} title={true} active />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col-md-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton paragraph={false} loading={true} title={true} active />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t<ul className=\"list-detail-question\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"icon-detail-question\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Info />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"title\">Giáo trình:</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text text-curriculum\">{examTopicDetail?.CurriculumName}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{/* <li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"title\">Thời gian:</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text\">{examTopicDetail?.Time} phút</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"title\">Tổng số câu:</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text\">{listQuestionID.length}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li> */}\r\n\t\t\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\textra={\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t{/* <button className=\"btn btn-primary\" onClick={startChangePosition}>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"d-flex align-items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<AlignRightOutlined className=\"mr-2\" style={{ width: '18px' }} />\r\n\t\t\t\t\t\t\t\t\t\t\t{isChangePosition ? 'Lưu' : 'Sắp xếp'}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<AddQuestionAuto dataExam={examTopicDetail} onFetchData={onFetchData} examTopicID={examID} />\r\n\t\t\t\t\t\t\t\t\t<AddQuestionModal dataExam={examTopicDetail} onFetchData={onFetchData} /> */}\r\n\t\t\t\t\t\t\t\t\t<Popover visible={visiblePopover} content={contentButton} placement=\"bottomRight\" title={null} trigger=\"click\">\r\n\t\t\t\t\t\t\t\t\t\t<button className=\"btn btn-light btn-function\" onClick={() => setVisiblePopover(!visiblePopover)}>\r\n\t\t\t\t\t\t\t\t\t\t\tChức năng\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{loadingPosition && (\r\n\t\t\t\t\t\t\t\t<div className=\"loading-all\">\r\n\t\t\t\t\t\t\t\t\t<Spin />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<div className=\"question-list\" ref={boxEl} onScroll={onScroll}>\r\n\t\t\t\t\t\t\t\t{isLoading ? (\r\n\t\t\t\t\t\t\t\t\t<div className=\"text-center mt-3\">\r\n\t\t\t\t\t\t\t\t\t\t<Spin />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t) : dataExamDetail.length == 0 ? (\r\n\t\t\t\t\t\t\t\t\t<p className=\"text-center\">\r\n\t\t\t\t\t\t\t\t\t\t<b>Đề thi hiện chưa có câu hỏi nào</b>\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\tdataExamDetail?.map((item, index) => item.Enable && returnQuestionType(item, index))\r\n\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t{loadingQuestion && (\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<Skeleton />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"col-md-3 col-12 fixed-card\">\r\n\t\t\t\t\t\t<Card className=\"card-exam-bank\" title=\"Danh sách đề cùng giáo trình\">\r\n\t\t\t\t\t\t\t<ul className=\"list-exam-bank\">\r\n\t\t\t\t\t\t\t\t{loadingExam ? (\r\n\t\t\t\t\t\t\t\t\t<div className=\"text-center mt-4\">\r\n\t\t\t\t\t\t\t\t\t\t<Spin />\r\n\t\t\t\t\t\t\t\t\t\t<p className=\"d-block\">Đang tải danh sách...</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t) : listExam?.length > 0 ? (\r\n\t\t\t\t\t\t\t\t\tlistExam.map((item, index) => (\r\n\t\t\t\t\t\t\t\t\t\t<li key={index} className={item.ID == examID ? 'active' : ''}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\t\thref={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpathname: '/question-bank/exam-list/exam-detail/[slug]',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tquery: { slug: item.ID }\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<a className=\"\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"number\">{index + 1}/</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text\">{item.Name}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<p className=\"font-italic\">Không có dữ liệu</p>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</ExamDetailContext.Provider>\r\n\t)\r\n}\r\nExamDetail.layout = LayoutBase\r\nexport default ExamDetail\r\n\r\nexport const useExamDetail = () => useContext(ExamDetailContext)\r\n"]},"metadata":{},"sourceType":"module"}