{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"D:/MonaMedia/Project/CodingMentor/CodingMentor-FE/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\CodingMentor\\\\CodingMentor-FE\\\\src\\\\components\\\\Global\\\\NewsFeed\\\\NewsFeedGroupComponents\\\\GroupForm.tsx\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { Form, Spin } from 'antd';\nimport Modal from 'antd/lib/modal/Modal';\nimport PropTypes from 'prop-types';\nimport { useEffect, useState } from 'react';\nimport { Edit2, PlusCircle, Users } from 'react-feather';\nimport { useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport InputTextField from '~/components/FormControl/InputTextField';\nimport SelectField from '~/components/FormControl/SelectField';\nimport UploadAvatarField from '~/components/FormControl/UploadAvatarField';\nimport { optionCommonPropTypes } from '~/utils/proptypes';\nGroupForm.propTypes = {\n  isLoading: PropTypes.shape({\n    type: PropTypes.string.isRequired,\n    status: PropTypes.bool.isRequired\n  }),\n  isUpdate: PropTypes.bool,\n  isCourseListDetail: PropTypes.bool,\n  dataUpdate: PropTypes.shape({\n    ID: PropTypes.number,\n    Name: PropTypes.string,\n    BackGround: PropTypes.string,\n    Administrators: PropTypes.number,\n    FullNameUnicode: PropTypes.string,\n    CourseID: PropTypes.number,\n    CourseName: PropTypes.string,\n    BranchID: PropTypes.number,\n    BranchName: PropTypes.string\n  }),\n  courseList: optionCommonPropTypes,\n  handleSubmit: PropTypes.func,\n  courseDetail: PropTypes.object\n};\nGroupForm.defaultProps = {\n  isLoading: {\n    type: '',\n    status: false\n  },\n  isUpdate: false,\n  isCourseListDetail: false,\n  dataUpdate: {\n    ID: 0,\n    Name: '',\n    BackGround: '',\n    Administrators: 0,\n    FullNameUnicode: '',\n    CourseID: 0,\n    CourseName: '',\n    BranchID: 0,\n    BranchName: ''\n  },\n  courseList: [],\n  handleSubmit: null\n};\n\nfunction GroupForm(props) {\n  _s();\n\n  var isLoading = props.isLoading,\n      isCourseListDetail = props.isCourseListDetail,\n      isUpdate = props.isUpdate,\n      dataUpdate = props.dataUpdate,\n      courseList = props.courseList,\n      courseDetail = props.courseDetail,\n      handleSubmit = props.handleSubmit;\n\n  var _useState = useState(false),\n      isVisibleModal = _useState[0],\n      setIsVisibleModal = _useState[1];\n\n  var showModal = function showModal() {\n    setIsVisibleModal(true);\n  };\n\n  var closeModal = function closeModal() {\n    setIsVisibleModal(false);\n  };\n\n  var defaultValuesInit = {\n    Name: '',\n    CourseID: null,\n    BackGround: ''\n  };\n  var schema = yup.object().shape({\n    // Name: yup.string().required('Bạn không được để trống'),\n    CourseID: yup.number().nullable().required('Bạn không được để trống'),\n    BackGround: yup.string()\n  });\n  var form = useForm({\n    defaultValues: defaultValuesInit,\n    resolver: yupResolver(schema)\n  });\n  useEffect(function () {\n    if (isUpdate && dataUpdate.ID) {\n      form.reset(_objectSpread({}, dataUpdate));\n    }\n  }, [dataUpdate]);\n\n  var getNamebyID = function getNamebyID(ID) {\n    var temp = courseList.find(function (e) {\n      return e.value == ID;\n    });\n    var index = courseList.indexOf(temp);\n    return courseList[index].title;\n  };\n\n  var handleFinalSubmit = function handleFinalSubmit(data) {\n    console.log('data', data);\n    if (!handleSubmit) return;\n    handleSubmit(data).then(function (res) {\n      if ((res === null || res === void 0 ? void 0 : res.status) === 200) {\n        closeModal();\n\n        if (!isUpdate) {\n          form.reset(_objectSpread({}, defaultValuesInit));\n        }\n      }\n    });\n  };\n\n  var checkHandleSubmit = function checkHandleSubmit(data) {\n    var temp = {\n      Name: getNamebyID(data.CourseID),\n      CourseID: data.CourseID,\n      BackGround: data.BackGround\n    };\n\n    if (data.Name == '') {\n      handleFinalSubmit(temp);\n    } else {\n      handleFinalSubmit(data);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [isUpdate ? /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"edit-group btn\",\n      onClick: showModal,\n      children: [/*#__PURE__*/_jsxDEV(Edit2, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 6\n      }, this), \"Ch\\u1EC9nh s\\u1EEDa nh\\xF3m\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 5\n    }, this) : isCourseListDetail ? /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: showModal,\n      children: [/*#__PURE__*/_jsxDEV(Users, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        title: \"Nh\\xF3m\",\n        children: \" Nh\\xF3m\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 5\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"add-group\",\n      onClick: showModal,\n      children: /*#__PURE__*/_jsxDEV(PlusCircle, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: isUpdate ? 'Chỉnh sửa nhóm' : 'Thêm nhóm',\n      visible: isVisibleModal,\n      onCancel: closeModal,\n      footer: null,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          layout: \"vertical\",\n          onFinish: form.handleSubmit(checkHandleSubmit),\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: /*#__PURE__*/_jsxDEV(InputTextField, {\n                isRequired: false,\n                form: form,\n                name: \"Name\",\n                label: \"T\\xEAn nh\\xF3m\",\n                placeholder: \"Nh\\u1EADp t\\xEAn nh\\xF3m\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: /*#__PURE__*/_jsxDEV(SelectField, {\n                form: form,\n                name: \"CourseID\",\n                label: \"Thu\\u1ED9c kh\\xF3a h\\u1ECDc\",\n                placeholder: \"Ch\\u1ECDn kh\\xF3a h\\u1ECDc\",\n                optionList: courseDetail ? courseDetail : courseList // optionList={courseList}\n\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: /*#__PURE__*/_jsxDEV(UploadAvatarField, {\n                form: form,\n                name: \"BackGround\",\n                label: \"Background\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12 mt-3\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-primary w-100\",\n                disabled: isLoading.type === 'ADD_DATA' && isLoading.status,\n                children: [isUpdate ? 'Cập nhật' : 'Lưu', isLoading.type === 'ADD_DATA' && isLoading.status && /*#__PURE__*/_jsxDEV(Spin, {\n                  className: \"loading-base\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 169,\n                  columnNumber: 64\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n}\n\n_s(GroupForm, \"ln+/o/GNQCdxM/B4XkMy/pL6OSw=\", false, function () {\n  return [useForm];\n});\n\n_c = GroupForm;\nexport default GroupForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"GroupForm\");","map":{"version":3,"sources":["D:/MonaMedia/Project/CodingMentor/CodingMentor-FE/src/components/Global/NewsFeed/NewsFeedGroupComponents/GroupForm.tsx"],"names":["yupResolver","Form","Spin","Modal","PropTypes","useEffect","useState","Edit2","PlusCircle","Users","useForm","yup","InputTextField","SelectField","UploadAvatarField","optionCommonPropTypes","GroupForm","propTypes","isLoading","shape","type","string","isRequired","status","bool","isUpdate","isCourseListDetail","dataUpdate","ID","number","Name","BackGround","Administrators","FullNameUnicode","CourseID","CourseName","BranchID","BranchName","courseList","handleSubmit","func","courseDetail","object","defaultProps","props","isVisibleModal","setIsVisibleModal","showModal","closeModal","defaultValuesInit","schema","nullable","required","form","defaultValues","resolver","reset","getNamebyID","temp","find","e","value","index","indexOf","title","handleFinalSubmit","data","console","log","then","res","checkHandleSubmit"],"mappings":"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","sourcesContent":["import { yupResolver } from '@hookform/resolvers/yup';\r\nimport { Form, Spin } from 'antd';\r\nimport Modal from 'antd/lib/modal/Modal';\r\nimport PropTypes from 'prop-types';\r\nimport { useEffect, useState } from 'react';\r\nimport { Edit2, PlusCircle, Users } from 'react-feather';\r\nimport { useForm } from 'react-hook-form';\r\nimport * as yup from 'yup';\r\nimport InputTextField from '~/components/FormControl/InputTextField';\r\nimport SelectField from '~/components/FormControl/SelectField';\r\nimport UploadAvatarField from '~/components/FormControl/UploadAvatarField';\r\nimport { optionCommonPropTypes } from '~/utils/proptypes';\r\n\r\nGroupForm.propTypes = {\r\n\tisLoading: PropTypes.shape({\r\n\t\ttype: PropTypes.string.isRequired,\r\n\t\tstatus: PropTypes.bool.isRequired\r\n\t}),\r\n\tisUpdate: PropTypes.bool,\r\n\tisCourseListDetail: PropTypes.bool,\r\n\tdataUpdate: PropTypes.shape({\r\n\t\tID: PropTypes.number,\r\n\t\tName: PropTypes.string,\r\n\t\tBackGround: PropTypes.string,\r\n\t\tAdministrators: PropTypes.number,\r\n\t\tFullNameUnicode: PropTypes.string,\r\n\t\tCourseID: PropTypes.number,\r\n\t\tCourseName: PropTypes.string,\r\n\t\tBranchID: PropTypes.number,\r\n\t\tBranchName: PropTypes.string\r\n\t}),\r\n\tcourseList: optionCommonPropTypes,\r\n\thandleSubmit: PropTypes.func,\r\n\tcourseDetail: PropTypes.object\r\n};\r\nGroupForm.defaultProps = {\r\n\tisLoading: { type: '', status: false },\r\n\tisUpdate: false,\r\n\tisCourseListDetail: false,\r\n\tdataUpdate: {\r\n\t\tID: 0,\r\n\t\tName: '',\r\n\t\tBackGround: '',\r\n\t\tAdministrators: 0,\r\n\t\tFullNameUnicode: '',\r\n\t\tCourseID: 0,\r\n\t\tCourseName: '',\r\n\t\tBranchID: 0,\r\n\t\tBranchName: ''\r\n\t},\r\n\tcourseList: [],\r\n\thandleSubmit: null\r\n};\r\n\r\nfunction GroupForm(props) {\r\n\tconst { isLoading, isCourseListDetail, isUpdate, dataUpdate, courseList, courseDetail, handleSubmit } = props;\r\n\tconst [isVisibleModal, setIsVisibleModal] = useState(false);\r\n\r\n\tconst showModal = () => {\r\n\t\tsetIsVisibleModal(true);\r\n\t};\r\n\r\n\tconst closeModal = () => {\r\n\t\tsetIsVisibleModal(false);\r\n\t};\r\n\r\n\tconst defaultValuesInit = {\r\n\t\tName: '',\r\n\t\tCourseID: null,\r\n\t\tBackGround: ''\r\n\t};\r\n\r\n\tconst schema = yup.object().shape({\r\n\t\t// Name: yup.string().required('Bạn không được để trống'),\r\n\t\tCourseID: yup.number().nullable().required('Bạn không được để trống'),\r\n\t\tBackGround: yup.string()\r\n\t});\r\n\r\n\tconst form = useForm({\r\n\t\tdefaultValues: defaultValuesInit,\r\n\t\tresolver: yupResolver(schema)\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isUpdate && dataUpdate.ID) {\r\n\t\t\tform.reset({ ...dataUpdate });\r\n\t\t}\r\n\t}, [dataUpdate]);\r\n\r\n\tconst getNamebyID = (ID) => {\r\n\t\tlet temp = courseList.find((e) => e.value == ID);\r\n\t\tlet index = courseList.indexOf(temp);\r\n\t\treturn courseList[index].title;\r\n\t};\r\n\r\n\tconst handleFinalSubmit = (data) => {\r\n        console.log('data', data)\r\n\t\tif (!handleSubmit) return;\r\n\t\thandleSubmit(data).then((res) => {\r\n\t\t\tif (res?.status === 200) {\r\n\t\t\t\tcloseModal();\r\n\t\t\t\tif (!isUpdate) {\r\n\t\t\t\t\tform.reset({ ...defaultValuesInit });\r\n\t\t\t\t}\r\n                \r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tconst checkHandleSubmit = (data) => {\r\n\t\tlet temp = {\r\n\t\t\tName: getNamebyID(data.CourseID),\r\n\t\t\tCourseID: data.CourseID,\r\n\t\t\tBackGround: data.BackGround\r\n\t\t};\r\n\r\n\t\tif (data.Name == '') {\r\n\t\t\thandleFinalSubmit(temp);\r\n\t\t} else {\r\n\t\t\thandleFinalSubmit(data);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{isUpdate ? (\r\n\t\t\t\t<button className=\"edit-group btn\" onClick={showModal}>\r\n\t\t\t\t\t<Edit2 />\r\n\t\t\t\t\tChỉnh sửa nhóm\r\n\t\t\t\t</button>\r\n\t\t\t) : isCourseListDetail ? (\r\n\t\t\t\t<div onClick={showModal}>\r\n\t\t\t\t\t<Users />\r\n\t\t\t\t\t<span title=\"Nhóm\"> Nhóm</span>\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<div className=\"add-group\" onClick={showModal}>\r\n\t\t\t\t\t<PlusCircle />\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t<Modal title={isUpdate ? 'Chỉnh sửa nhóm' : 'Thêm nhóm'} visible={isVisibleModal} onCancel={closeModal} footer={null}>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Form layout=\"vertical\" onFinish={form.handleSubmit(checkHandleSubmit)}>\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t\t\t<InputTextField isRequired={false} form={form} name=\"Name\" label=\"Tên nhóm\" placeholder=\"Nhập tên nhóm\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t\t\t<SelectField\r\n\t\t\t\t\t\t\t\t\tform={form}\r\n\t\t\t\t\t\t\t\t\tname=\"CourseID\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"Thuộc khóa học\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Chọn khóa học\"\r\n\t\t\t\t\t\t\t\t\toptionList={courseDetail ? courseDetail : courseList}\r\n\t\t\t\t\t\t\t\t\t// optionList={courseList}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t\t\t<UploadAvatarField form={form} name=\"BackGround\" label=\"Background\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-12 mt-3\">\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"btn btn-primary w-100\"\r\n\t\t\t\t\t\t\t\t\tdisabled={isLoading.type === 'ADD_DATA' && isLoading.status}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{isUpdate ? 'Cập nhật' : 'Lưu'}\r\n\t\t\t\t\t\t\t\t\t{isLoading.type === 'ADD_DATA' && isLoading.status && <Spin className=\"loading-base\" />}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default GroupForm;\r\n"]},"metadata":{},"sourceType":"module"}