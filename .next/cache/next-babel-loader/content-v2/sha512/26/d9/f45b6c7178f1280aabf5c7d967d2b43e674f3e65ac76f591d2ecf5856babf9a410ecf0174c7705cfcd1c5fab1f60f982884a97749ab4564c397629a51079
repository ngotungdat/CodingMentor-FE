{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\VideoLearning\\\\list-video\\\\render-sub-item\\\\index.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport 'antd/dist/antd.css';\nimport { Button, Tooltip, Dropdown, Menu, Radio } from 'antd';\nimport { VideoCourses } from '~/apiBase/video-learning';\nimport { useRouter } from 'next/router';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faEllipsisV, faFileAlt } from '@fortawesome/free-solid-svg-icons';\nimport { useWrap } from '~/context/wrap';\nimport { VideoCourseOfStudent } from '~/apiBase';\n\nvar GroupMenu = function GroupMenu(props) {\n  var _onClick = props.onClick,\n      item = props.item,\n      info = props.info,\n      section = props.section; // e.stopPropagation()\n\n  var _gotoTest = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              window.open(\"/exam/exam-review/?examID=\".concat(info === null || info === void 0 ? void 0 : info.ExamTopicID, \"&lessionID=\").concat(info === null || info === void 0 ? void 0 : info.ID, \"&type=video\"));\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function _gotoTest() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(Menu, {\n    children: [/*#__PURE__*/_jsxDEV(Menu.Item, {\n      onClick: function onClick() {\n        return _onClick(0);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"far mr-3 fa-file-video btn-video\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 5\n      }, _this), \"Xem \\u1EDF server 1\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n      onClick: function onClick() {\n        return _onClick(1);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"far mr-3 fa-file-code btn-html\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 5\n      }, _this), \"Xem \\u1EDF server 2\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 4\n    }, _this), !!(info !== null && info !== void 0 && info.ExamTopicID) && (info === null || info === void 0 ? void 0 : info.ExamTopicID) > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Menu.Item, {\n        onClick: _gotoTest,\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          className: \"ml-1 mr-3\",\n          color: \"#172b4d\",\n          icon: faFileAlt,\n          size: \"lg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 7\n        }, _this), \"L\\xE0m b\\xE0i t\\u1EADp\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 6\n      }, _this)\n    }, void 0, false), !!(item !== null && item !== void 0 && item.LinkDocument) && /*#__PURE__*/_jsxDEV(Menu.Item, {\n      onClick: function onClick() {\n        return _onClick('down');\n      },\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        size: \"small\",\n        onClick: function onClick(e) {\n          return e.stopPropagation();\n        },\n        className: \"m-0 p-0 btn-down btn-trans\",\n        href: item.LinkDocument !== '' ? item.LinkDocument : '',\n        download: item.LinkDocument !== '' ? true : false,\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"far mr-3 fa-download btn-down-main\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 7\n        }, _this), \"T\\u1EA3i t\\xE0i li\\u1EC7u\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 6\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 3\n  }, _this);\n}; // RENDER SUB ITEM LIST\n\n\n_c = GroupMenu;\n\nvar RenderItemSub = function RenderItemSub(_ref2) {\n  _s();\n\n  var item = _ref2.item,\n      onPress = _ref2.onPress,\n      fetchData = _ref2.fetchData,\n      videoWatching = _ref2.videoWatching,\n      section = _ref2.section,\n      subVideos = _ref2.subVideos;\n  var router = useRouter();\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti,\n      userInformation = _useWrap.userInformation;\n\n  var _useState = useState(0),\n      type = _useState[0],\n      setType = _useState[1];\n\n  var _useState2 = useState({}),\n      lessonDetail = _useState2[0],\n      setLessonDetail = _useState2[1];\n\n  useEffect(function () {\n    if ((item === null || item === void 0 ? void 0 : item.ID) == (section === null || section === void 0 ? void 0 : section.LastLessonID)) {\n      handleClick(0);\n    }\n  }, []); // HANDLER CLICK ITEM => PLAY VIDEO\n\n  var handleClick = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return getLessonDetail(e);\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleClick(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }(); // CALL API GET LESSION DETAIL\n\n\n  var getLessonDetail = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e) {\n      var temp, res;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              temp = {\n                VideoCourseOfStudentID: router.query.course,\n                LessonID: item.ID\n              };\n              _context3.prev = 1;\n              _context3.next = 4;\n              return VideoCourses.LessonDetail(temp);\n\n            case 4:\n              res = _context3.sent;\n              res.status == 200 && setLessonDetail(res.data.data), onPress(getJsonData(res.data.data, e));\n              _context3.next = 10;\n              break;\n\n            case 8:\n              _context3.prev = 8;\n              _context3.t0 = _context3[\"catch\"](1);\n\n            case 10:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[1, 8]]);\n    }));\n\n    return function getLessonDetail(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var getJsonData = function getJsonData(param, e) {\n    return {\n      ID: param.ID,\n      SectionID: section.ID,\n      Description: param.Description,\n      LinkDocument: param.LinkDocument,\n      LinkHtml: param.LinkHtml,\n      LinkVideo: param.LinkVideo,\n      TimeWatched: param.TimeWatched,\n      Second: item.Second,\n      Title: item.Title,\n      Type: e\n    };\n  };\n\n  var _clickZero = function _clickZero(e) {\n    setType(0);\n    handleClick(0);\n    e.stopPropagation();\n  };\n\n  var _checkSeen = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e) {\n      var submitData, response;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              e.stopPropagation();\n              submitData = {\n                VideoCourseOfStudentID: router.query.course,\n                SectionID: section === null || section === void 0 ? void 0 : section.ID,\n                LessonID: item === null || item === void 0 ? void 0 : item.ID,\n                IsSeen: !(item !== null && item !== void 0 && item.IsSeen)\n              };\n              _context4.prev = 2;\n              _context4.next = 5;\n              return VideoCourseOfStudent.UpdateSeenAndTimeWatchedVideo(submitData);\n\n            case 5:\n              response = _context4.sent;\n\n              if (response.status == 200) {\n                fetchData();\n              }\n\n              _context4.next = 12;\n              break;\n\n            case 9:\n              _context4.prev = 9;\n              _context4.t0 = _context4[\"catch\"](2);\n              showNoti('danger', _context4.t0.message);\n\n            case 12:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[2, 9]]);\n    }));\n\n    return function _checkSeen(_x3) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var isStudent = function isStudent() {\n    if (!!userInformation && userInformation.RoleID == 3) {\n      return true;\n    } else {\n      false;\n    }\n  };\n\n  var isFinal = function isFinal() {\n    var index = subVideos.findIndex(function (e) {\n      return e.ID == item.ID;\n    });\n    return index == subVideos.length - 1 ? true : false;\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: _clickZero,\n      className: \"pt-3 pb-3 wrap-sub-item \".concat(videoWatching == item.ID && 'sub-item-active'),\n      style: {\n        color: videoWatching == item.ID ? 'rgba(9,141,25,1)' : '',\n        borderBottomLeftRadius: isFinal() ? 6 : 0,\n        borderBottomRightRadius: isFinal() ? 6 : 0\n      },\n      children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n        title: \"\\u0110\\xE3 xem\",\n        children: /*#__PURE__*/_jsxDEV(Radio, {\n          disabled: !isStudent(),\n          checked: item.IsSeen,\n          onClick: _checkSeen\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 6\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 5\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content row-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"title none-selection\",\n          children: item.Title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(Dropdown, {\n          overlay: /*#__PURE__*/_jsxDEV(GroupMenu, {\n            section: section,\n            info: item,\n            item: lessonDetail,\n            onClick: function onClick(e) {\n              return e.stopPropagation();\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 16\n          }, _this),\n          arrow: {\n            pointAtCenter: true\n          },\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            className: \"icon-menu pl-3 pt-2 pb-1\",\n            icon: faEllipsisV\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 7\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 6\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 5\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 4\n    }, _this), !isFinal() && /*#__PURE__*/_jsxDEV(\"hr\", {\n      className: \"sub-item-hr\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 19\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(RenderItemSub, \"ESORmHHNhnIqDgQFrRCppIMVToc=\", false, function () {\n  return [useRouter, useWrap];\n});\n\n_c2 = RenderItemSub;\nexport default RenderItemSub;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"GroupMenu\");\n$RefreshReg$(_c2, \"RenderItemSub\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/VideoLearning/list-video/render-sub-item/index.tsx"],"names":["React","useEffect","useState","Button","Tooltip","Dropdown","Menu","Radio","VideoCourses","useRouter","FontAwesomeIcon","faEllipsisV","faFileAlt","useWrap","VideoCourseOfStudent","GroupMenu","props","onClick","item","info","section","_gotoTest","window","open","ExamTopicID","ID","LinkDocument","e","stopPropagation","RenderItemSub","onPress","fetchData","videoWatching","subVideos","router","showNoti","userInformation","type","setType","lessonDetail","setLessonDetail","LastLessonID","handleClick","getLessonDetail","temp","VideoCourseOfStudentID","query","course","LessonID","LessonDetail","res","status","data","getJsonData","param","SectionID","Description","LinkHtml","LinkVideo","TimeWatched","Second","Title","Type","_clickZero","_checkSeen","submitData","IsSeen","UpdateSeenAndTimeWatchedVideo","response","message","isStudent","RoleID","isFinal","index","findIndex","length","color","borderBottomLeftRadius","borderBottomRightRadius","pointAtCenter"],"mappings":"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","sourcesContent":["import React, { FC, useEffect, useState } from 'react'\r\nimport 'antd/dist/antd.css'\r\nimport { Button, Tooltip, Dropdown, Menu, Radio } from 'antd'\r\nimport { VideoCourses } from '~/apiBase/video-learning'\r\nimport { useRouter } from 'next/router'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faEllipsisV, faFileAlt } from '@fortawesome/free-solid-svg-icons'\r\nimport { IconProp } from '@fortawesome/fontawesome-svg-core'\r\nimport { useWrap } from '~/context/wrap'\r\nimport { VideoCourseOfStudent } from '~/apiBase'\r\n\r\ntype itemType = {\r\n\tID: string\r\n\tTitle: string\r\n\tTotalSecondLesson: string\r\n\tDescription: string\r\n\tCompleteVsTotalLesson: string\r\n\tSecond: string\r\n\tIsSeen: false\r\n\tLinkDocument: string\r\n}\r\n\r\ntype props = {\r\n\titem: itemType\r\n\tdata: any[]\r\n\tonPress: any\r\n\tsection: any\r\n\tvideoWatching: any\r\n\tfetchData: Function\r\n\tsubVideos: any\r\n}\r\n\r\nconst GroupMenu = (props: any) => {\r\n\tconst { onClick, item, info, section } = props\r\n\r\n\t// e.stopPropagation()\r\n\r\n\tconst _gotoTest = async () => {\r\n\t\twindow.open(`/exam/exam-review/?examID=${info?.ExamTopicID}&lessionID=${info?.ID}&type=video`)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Menu>\r\n\t\t\t<Menu.Item onClick={() => onClick(0)}>\r\n\t\t\t\t<i className=\"far mr-3 fa-file-video btn-video\" />\r\n\t\t\t\tXem ở server 1\r\n\t\t\t</Menu.Item>\r\n\r\n\t\t\t<Menu.Item onClick={() => onClick(1)}>\r\n\t\t\t\t<i className=\"far mr-3 fa-file-code btn-html\" />\r\n\t\t\t\tXem ở server 2\r\n\t\t\t</Menu.Item>\r\n\r\n\t\t\t{!!info?.ExamTopicID && info?.ExamTopicID > 0 && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Menu.Item onClick={_gotoTest}>\r\n\t\t\t\t\t\t<FontAwesomeIcon className=\"ml-1 mr-3\" color=\"#172b4d\" icon={faFileAlt as IconProp} size=\"lg\" />\r\n\t\t\t\t\t\tLàm bài tập\r\n\t\t\t\t\t</Menu.Item>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\r\n\t\t\t{!!item?.LinkDocument && (\r\n\t\t\t\t<Menu.Item onClick={() => onClick('down')}>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tonClick={(e) => e.stopPropagation()}\r\n\t\t\t\t\t\tclassName=\"m-0 p-0 btn-down btn-trans\"\r\n\t\t\t\t\t\thref={item.LinkDocument !== '' ? item.LinkDocument : ''}\r\n\t\t\t\t\t\tdownload={item.LinkDocument !== '' ? true : false}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<i className=\"far mr-3 fa-download btn-down-main\" />\r\n\t\t\t\t\t\tTải tài liệu\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Menu.Item>\r\n\t\t\t)}\r\n\t\t</Menu>\r\n\t)\r\n}\r\n\r\n// RENDER SUB ITEM LIST\r\nconst RenderItemSub: FC<props> = ({ item, onPress, fetchData, videoWatching, section, subVideos }) => {\r\n\tconst router = useRouter()\r\n\tconst { showNoti, userInformation } = useWrap()\r\n\tconst [type, setType] = useState(0)\r\n\tconst [lessonDetail, setLessonDetail] = useState({})\r\n\r\n\tuseEffect(() => {\r\n\t\tif (item?.ID == section?.LastLessonID) {\r\n\t\t\thandleClick(0)\r\n\t\t}\r\n\t}, [])\r\n\r\n\t// HANDLER CLICK ITEM => PLAY VIDEO\r\n\tconst handleClick = async (e) => {\r\n\t\tawait getLessonDetail(e)\r\n\t}\r\n\r\n\t// CALL API GET LESSION DETAIL\r\n\tconst getLessonDetail = async (e) => {\r\n\t\tconst temp = { VideoCourseOfStudentID: router.query.course, LessonID: item.ID }\r\n\t\ttry {\r\n\t\t\tconst res = await VideoCourses.LessonDetail(temp)\r\n\t\t\tres.status == 200 && setLessonDetail(res.data.data), onPress(getJsonData(res.data.data, e))\r\n\t\t} catch (err) {}\r\n\t}\r\n\r\n\tconst getJsonData = (param, e) => {\r\n\t\treturn {\r\n\t\t\tID: param.ID,\r\n\t\t\tSectionID: section.ID,\r\n\t\t\tDescription: param.Description,\r\n\t\t\tLinkDocument: param.LinkDocument,\r\n\t\t\tLinkHtml: param.LinkHtml,\r\n\t\t\tLinkVideo: param.LinkVideo,\r\n\t\t\tTimeWatched: param.TimeWatched,\r\n\t\t\tSecond: item.Second,\r\n\t\t\tTitle: item.Title,\r\n\t\t\tType: e\r\n\t\t}\r\n\t}\r\n\r\n\tconst _clickZero = (e) => {\r\n\t\tsetType(0)\r\n\t\thandleClick(0)\r\n\t\te.stopPropagation()\r\n\t}\r\n\r\n\tconst _checkSeen = async (e) => {\r\n\t\te.stopPropagation()\r\n\t\tconst submitData = {\r\n\t\t\tVideoCourseOfStudentID: router.query.course,\r\n\t\t\tSectionID: section?.ID,\r\n\t\t\tLessonID: item?.ID,\r\n\t\t\tIsSeen: !item?.IsSeen\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tconst response = await VideoCourseOfStudent.UpdateSeenAndTimeWatchedVideo(submitData)\r\n\t\t\tif (response.status == 200) {\r\n\t\t\t\tfetchData()\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t}\r\n\t}\r\n\r\n\tconst isStudent = () => {\r\n\t\tif (!!userInformation && userInformation.RoleID == 3) {\r\n\t\t\treturn true\r\n\t\t} else {\r\n\t\t\tfalse\r\n\t\t}\r\n\t}\r\n\r\n\tconst isFinal = () => {\r\n\t\tlet index = subVideos.findIndex((e: any) => e.ID == item.ID)\r\n\t\treturn index == subVideos.length - 1 ? true : false\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div\r\n\t\t\t\tonClick={_clickZero}\r\n\t\t\t\tclassName={`pt-3 pb-3 wrap-sub-item ${videoWatching == item.ID && 'sub-item-active'}`}\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tcolor: videoWatching == item.ID ? 'rgba(9,141,25,1)' : '',\r\n\t\t\t\t\tborderBottomLeftRadius: isFinal() ? 6 : 0,\r\n\t\t\t\t\tborderBottomRightRadius: isFinal() ? 6 : 0\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Tooltip title=\"Đã xem\">\r\n\t\t\t\t\t<Radio disabled={!isStudent()} checked={item.IsSeen} onClick={_checkSeen} />\r\n\t\t\t\t</Tooltip>\r\n\r\n\t\t\t\t<div className=\"content row-center\">\r\n\t\t\t\t\t<div className=\"title none-selection\">{item.Title}</div>\r\n\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\toverlay={<GroupMenu section={section} info={item} item={lessonDetail} onClick={(e: any) => e.stopPropagation()} />}\r\n\t\t\t\t\t\tarrow={{ pointAtCenter: true }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<FontAwesomeIcon className=\"icon-menu pl-3 pt-2 pb-1\" icon={faEllipsisV as IconProp} />\r\n\t\t\t\t\t</Dropdown>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{!isFinal() && <hr className=\"sub-item-hr\" />}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default RenderItemSub\r\n"]},"metadata":{},"sourceType":"module"}