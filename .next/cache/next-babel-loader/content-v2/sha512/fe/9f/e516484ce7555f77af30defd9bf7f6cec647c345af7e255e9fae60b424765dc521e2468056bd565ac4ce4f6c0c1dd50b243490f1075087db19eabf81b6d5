{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\CourseCalendar\\\\modal-create-event.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Modal, Select, Spin, TimePicker } from 'antd';\nimport moment from 'moment';\nimport React, { useState, useEffect } from 'react';\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\nimport { useWrap } from '~/context/wrap';\nimport { CalendarApi } from '~/apiBase/Calendar/calendar';\nvar Option = Select.Option;\nmoment.locale('vi');\n\nvar ModalCreateEvent = function ModalCreateEvent(props) {\n  _s();\n\n  var visible = props.visible,\n      setVisible = props.setVisible,\n      date = props.date,\n      courses = props.courses,\n      getData = props.getData,\n      event = props.event;\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti;\n\n  var _useState = useState({}),\n      selected = _useState[0],\n      setSelected = _useState[1];\n\n  var _useState2 = useState(''),\n      startTime = _useState2[0],\n      setStartTime = _useState2[1];\n\n  var _useState3 = useState(''),\n      endTime = _useState3[0],\n      setEndTime = _useState3[1];\n\n  var _useState4 = useState(true),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(''),\n      errorText = _useState5[0],\n      setErrorText = _useState5[1];\n\n  useEffect(function () {\n    !visible && setSelected({}), setStartTime(''), setEndTime('');\n  }, [visible]);\n\n  var onChange = function onChange(value) {\n    var indexSelected = courses.findIndex(function (e) {\n      return (e === null || e === void 0 ? void 0 : e.VideoCourseID) == value;\n    });\n    setSelected(courses[indexSelected]);\n    return null;\n  };\n\n  useEffect(function () {\n    if (visible && !!(event !== null && event !== void 0 && event.id)) {\n      getDataDetails();\n    } else {\n      setLoading(false);\n    }\n  }, [visible]);\n\n  var _useState6 = useState(''),\n      details = _useState6[0],\n      setDetails = _useState6[1];\n\n  var getDataDetails = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res, _res$data$data, index;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return CalendarApi.getByID(event === null || event === void 0 ? void 0 : event.id);\n\n            case 3:\n              res = _context.sent;\n\n              if (res.status == 200) {\n                setDetails(res.data.data);\n                setStartTime((_res$data$data = res.data.data) === null || _res$data$data === void 0 ? void 0 : _res$data$data.sTime);\n                index = courses.findIndex(function (e) {\n                  var _res$data$data2;\n\n                  return e.VideoCourseID == ((_res$data$data2 = res.data.data) === null || _res$data$data2 === void 0 ? void 0 : _res$data$data2.VideoCourseID);\n                });\n                index !== -1 && setSelected(courses[index]);\n              }\n\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              showNoti('danger', _context.t0 === null || _context.t0 === void 0 ? void 0 : _context.t0.message);\n\n            case 10:\n              _context.prev = 10;\n              setLoading(false);\n              return _context.finish(10);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7, 10, 13]]);\n    }));\n\n    return function getDataDetails() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    if (!!startTime) {\n      var tempMoment = moment(startTime, 'HH:mm');\n      var temp = new Date(startTime);\n      var timestamp = Math.floor(!!temp && temp != 'Invalid date' && temp != 'Invalid Date' ? temp / 1000 : tempMoment / 1000);\n      var tempDate = new Date((timestamp + parseInt(selected === null || selected === void 0 ? void 0 : selected.LimitMinutes) * 60) * 1000);\n      setEndTime(tempDate);\n    }\n  }, [startTime, selected]);\n  useEffect(function () {\n    setErrorText('');\n  }, [selected, startTime]);\n\n  var _createEvent = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var sTemp, oDate, temp, res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setLoading(true);\n\n              if (selected !== null && selected !== void 0 && selected.VideoCourseID) {\n                _context2.next = 5;\n                break;\n              }\n\n              setErrorText('Vui lòng chọn khóa học');\n              _context2.next = 26;\n              break;\n\n            case 5:\n              if (startTime) {\n                _context2.next = 9;\n                break;\n              }\n\n              setErrorText('Vui lòng chọn ngày bắt đầu');\n              _context2.next = 26;\n              break;\n\n            case 9:\n              sTemp = moment(startTime).format('HH:mm');\n              oDate = moment(date === null || date === void 0 ? void 0 : date.start).format('YYYY/MM/DD');\n              temp = {\n                VideoCourseID: selected === null || selected === void 0 ? void 0 : selected.VideoCourseID,\n                OpenDate: !!oDate && oDate != 'Invalid date' && oDate != 'Invalid Date' ? oDate : moment(details === null || details === void 0 ? void 0 : details.OpenDate).format('YYYY/MM/DD'),\n                sTime: !!sTemp && sTemp != 'Invalid date' && sTemp != 'Invalid Date' ? sTemp : startTime,\n                eTime: moment(endTime).format('HH:mm')\n              };\n              console.log('temp: ', temp);\n              _context2.prev = 13;\n              _context2.next = 16;\n              return !(event !== null && event !== void 0 && event.start) ? CalendarApi.add(temp) : CalendarApi.update(_objectSpread(_objectSpread({}, temp), {}, {\n                ID: event === null || event === void 0 ? void 0 : event.id,\n                Status: details === null || details === void 0 ? void 0 : details.Status\n              }));\n\n            case 16:\n              res = _context2.sent;\n\n              if (res.status == 200 || res.status == 204) {\n                showNoti('success', 'Thành công');\n                getData();\n                setVisible(false);\n              }\n\n              _context2.next = 23;\n              break;\n\n            case 20:\n              _context2.prev = 20;\n              _context2.t0 = _context2[\"catch\"](13);\n              showNoti('danger', _context2.t0 === null || _context2.t0 === void 0 ? void 0 : _context2.t0.message);\n\n            case 23:\n              _context2.prev = 23;\n              setLoading(false);\n              return _context2.finish(23);\n\n            case 26:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[13, 20, 23, 26]]);\n    }));\n\n    return function _createEvent() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Modal, {\n      className: \"wrap-calendar-x\",\n      title: !(event !== null && event !== void 0 && event.start) ? 'Thêm lịch ngày: ' + moment(date === null || date === void 0 ? void 0 : date.start).format('DD-MM-YYYY') : 'Sửa lịch ngày: ' + moment(event === null || event === void 0 ? void 0 : event.start).format('DD-MM-YYYY'),\n      visible: visible,\n      onCancel: function onCancel() {\n        return setVisible(false);\n      },\n      onOk: function onOk() {\n        return _createEvent();\n      },\n      cancelText: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\",\n        children: \"Hu\\u1EF7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }, _this),\n      okText: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btn-primary save\",\n        children: [\"L\\u01B0u l\\u1EA1i \", loading && /*#__PURE__*/_jsxDEV(Spin, {\n          className: \"ml-2\",\n          size: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 67\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }, _this),\n      centered: true,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-12 col-12\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-2\",\n          children: [\"Ch\\u1ECDn kh\\xF3a h\\u1ECDc \", /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: 'red'\n            },\n            children: \" *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 21\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(Select, {\n          disabled: loading,\n          className: \"w-100\",\n          showSearch: true,\n          value: (selected === null || selected === void 0 ? void 0 : selected.VideoCourseID) || null,\n          placeholder: \"Ch\\u1ECDn kh\\xF3a h\\u1ECDc\",\n          optionFilterProp: \"children\",\n          onChange: onChange,\n          filterOption: function filterOption(input, option) {\n            return option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n          },\n          children: !!courses && courses.map(function (item) {\n            return /*#__PURE__*/_jsxDEV(Option, {\n              value: item === null || item === void 0 ? void 0 : item.VideoCourseID,\n              children: item === null || item === void 0 ? void 0 : item.VideoCourseName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 48\n            }, _this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 6\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 5\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row col-12 m-0 p-0\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6 col-12\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-2 mt-4\",\n            children: [\"Ch\\u1ECDn gi\\u1EDD b\\u1EAFt \\u0111\\u1EA7u \", /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: 'red'\n              },\n              children: \" *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 25\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 7\n          }, _this), /*#__PURE__*/_jsxDEV(TimePicker, {\n            disabled: loading,\n            value: !!startTime ? moment(startTime, 'HH:mm') : null,\n            onChange: function onChange(e) {\n              return setStartTime(e === null || e === void 0 ? void 0 : e._d);\n            },\n            className: \"ant-input\",\n            placeholder: \"B\\u1EAFt \\u0111\\u1EA7u\",\n            format: 'HH:mm'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 7\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6 col-12\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-2 mt-4\",\n            children: \"Gi\\u1EDD k\\u1EBFt th\\xFAc\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 7\n          }, _this), /*#__PURE__*/_jsxDEV(TimePicker, {\n            value: !!endTime && endTime != 'Invalid Date' ? moment(endTime, 'HH:mm') : null,\n            disabled: true,\n            className: \"ant-input\",\n            placeholder: \"H\\xE3y ch\\u1ECDn gi\\u1EDD b\\u1EAFt \\u0111\\u1EA7u\",\n            format: 'HH:mm'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 7\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 6\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 5\n      }, _this), !!errorText && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-6 col-12 mt-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: 'red'\n          },\n          children: errorText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 7\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 6\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 4\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 3\n  }, _this);\n};\n\n_s(ModalCreateEvent, \"/z24AG/cMPU0R+EBtJAiP9A01iI=\", false, function () {\n  return [useWrap];\n});\n\n_c = ModalCreateEvent;\nexport default ModalCreateEvent;\n\nvar _c;\n\n$RefreshReg$(_c, \"ModalCreateEvent\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/CourseCalendar/modal-create-event.tsx"],"names":["Modal","Select","Spin","TimePicker","moment","React","useState","useEffect","useWrap","CalendarApi","Option","locale","ModalCreateEvent","props","visible","setVisible","date","courses","getData","event","showNoti","selected","setSelected","startTime","setStartTime","endTime","setEndTime","loading","setLoading","errorText","setErrorText","onChange","value","indexSelected","findIndex","e","VideoCourseID","id","getDataDetails","details","setDetails","getByID","res","status","data","sTime","index","message","tempMoment","temp","Date","timestamp","Math","floor","tempDate","parseInt","LimitMinutes","_createEvent","sTemp","format","oDate","start","OpenDate","eTime","console","log","add","update","ID","Status","color","input","option","children","toLowerCase","indexOf","map","item","VideoCourseName","_d"],"mappings":"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","sourcesContent":["import { Modal, Select, Spin, TimePicker } from 'antd'\r\nimport moment, { Moment } from 'moment'\r\nimport React, { useState, useEffect } from 'react'\r\nimport 'react-big-calendar/lib/css/react-big-calendar.css'\r\nimport { useWrap } from '~/context/wrap'\r\nimport _ from '~/appConfig'\r\nimport { CalendarApi } from '~/apiBase/Calendar/calendar'\r\n\r\nconst { Option } = Select\r\nmoment.locale('vi')\r\n\r\nconst ModalCreateEvent = (props: any) => {\r\n\tconst { visible, setVisible, date, courses, getData, event } = props\r\n\tconst { showNoti } = useWrap()\r\n\r\n\tconst [selected, setSelected] = useState<any>({})\r\n\tconst [startTime, setStartTime] = useState<any>('')\r\n\tconst [endTime, setEndTime] = useState<any>('')\r\n\tconst [loading, setLoading] = useState<boolean>(true)\r\n\r\n\tconst [errorText, setErrorText] = useState<any>('')\r\n\r\n\tuseEffect(() => {\r\n\t\t!visible && setSelected({}), setStartTime(''), setEndTime('')\r\n\t}, [visible])\r\n\r\n\tconst onChange = (value: string) => {\r\n\t\tlet indexSelected = courses.findIndex((e: any) => e?.VideoCourseID == value)\r\n\t\tsetSelected(courses[indexSelected])\r\n\t\treturn null\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (visible && !!event?.id) {\r\n\t\t\tgetDataDetails()\r\n\t\t} else {\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t}, [visible])\r\n\r\n\tconst [details, setDetails] = useState<any>('')\r\n\r\n\tconst getDataDetails = async () => {\r\n\t\ttry {\r\n\t\t\tconst res: any = await CalendarApi.getByID(event?.id)\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tsetDetails(res.data.data)\r\n\t\t\t\tsetStartTime(res.data.data?.sTime)\r\n\t\t\t\tlet index = courses.findIndex((e) => e.VideoCourseID == res.data.data?.VideoCourseID)\r\n\t\t\t\tindex !== -1 && setSelected(courses[index])\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error?.message)\r\n\t\t} finally {\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!!startTime) {\r\n\t\t\tconst tempMoment: any = moment(startTime, 'HH:mm')\r\n\t\t\tconst temp: any = new Date(startTime)\r\n\t\t\tconst timestamp = Math.floor(!!temp && temp != 'Invalid date' && temp != 'Invalid Date' ? temp / 1000 : tempMoment / 1000)\r\n\t\t\tvar tempDate = new Date((timestamp + parseInt(selected?.LimitMinutes) * 60) * 1000)\r\n\t\t\tsetEndTime(tempDate)\r\n\t\t}\r\n\t}, [startTime, selected])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetErrorText('')\r\n\t}, [selected, startTime])\r\n\r\n\tconst _createEvent = async () => {\r\n\t\tsetLoading(true)\r\n\t\tif (!selected?.VideoCourseID) {\r\n\t\t\tsetErrorText('Vui lòng chọn khóa học')\r\n\t\t} else {\r\n\t\t\tif (!startTime) {\r\n\t\t\t\tsetErrorText('Vui lòng chọn ngày bắt đầu')\r\n\t\t\t} else {\r\n\t\t\t\tlet sTemp = moment(startTime).format('HH:mm')\r\n\t\t\t\tlet oDate = moment(date?.start).format('YYYY/MM/DD')\r\n\r\n\t\t\t\tlet temp = {\r\n\t\t\t\t\tVideoCourseID: selected?.VideoCourseID,\r\n\t\t\t\t\tOpenDate: !!oDate && oDate != 'Invalid date' && oDate != 'Invalid Date' ? oDate : moment(details?.OpenDate).format('YYYY/MM/DD'),\r\n\t\t\t\t\tsTime: !!sTemp && sTemp != 'Invalid date' && sTemp != 'Invalid Date' ? sTemp : startTime,\r\n\t\t\t\t\teTime: moment(endTime).format('HH:mm')\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log('temp: ', temp)\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst res: any = await (!event?.start\r\n\t\t\t\t\t\t? CalendarApi.add(temp)\r\n\t\t\t\t\t\t: CalendarApi.update({ ...temp, ID: event?.id, Status: details?.Status }))\r\n\t\t\t\t\tif (res.status == 200 || res.status == 204) {\r\n\t\t\t\t\t\tshowNoti('success', 'Thành công')\r\n\t\t\t\t\t\tgetData()\r\n\t\t\t\t\t\tsetVisible(false)\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tshowNoti('danger', error?.message)\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Modal\r\n\t\t\t\tclassName=\"wrap-calendar-x\"\r\n\t\t\t\ttitle={\r\n\t\t\t\t\t!event?.start\r\n\t\t\t\t\t\t? 'Thêm lịch ngày: ' + moment(date?.start).format('DD-MM-YYYY')\r\n\t\t\t\t\t\t: 'Sửa lịch ngày: ' + moment(event?.start).format('DD-MM-YYYY')\r\n\t\t\t\t}\r\n\t\t\t\tvisible={visible}\r\n\t\t\t\tonCancel={() => setVisible(false)}\r\n\t\t\t\tonOk={() => _createEvent()}\r\n\t\t\t\tcancelText={<div className=\"\">Huỷ</div>}\r\n\t\t\t\tokText={<div className=\"btn-primary save\">Lưu lại {loading && <Spin className=\"ml-2\" size=\"small\" />}</div>}\r\n\t\t\t\tcentered\r\n\t\t\t>\r\n\t\t\t\t<div className=\"col-md-12 col-12\">\r\n\t\t\t\t\t<div className=\"mb-2\">\r\n\t\t\t\t\t\tChọn khóa học <span style={{ color: 'red' }}> *</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\t\tclassName=\"w-100\"\r\n\t\t\t\t\t\tshowSearch\r\n\t\t\t\t\t\tvalue={selected?.VideoCourseID || null}\r\n\t\t\t\t\t\tplaceholder=\"Chọn khóa học\"\r\n\t\t\t\t\t\toptionFilterProp=\"children\"\r\n\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t\tfilterOption={(input, option: any) => option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{!!courses && courses.map((item: any) => <Option value={item?.VideoCourseID}>{item?.VideoCourseName}</Option>)}\r\n\t\t\t\t\t</Select>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"row col-12 m-0 p-0\">\r\n\t\t\t\t\t<div className=\"col-md-6 col-12\">\r\n\t\t\t\t\t\t<div className=\"mb-2 mt-4\">\r\n\t\t\t\t\t\t\tChọn giờ bắt đầu <span style={{ color: 'red' }}> *</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<TimePicker\r\n\t\t\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\t\t\tvalue={!!startTime ? moment(startTime, 'HH:mm') : null}\r\n\t\t\t\t\t\t\tonChange={(e: any) => setStartTime(e?._d)}\r\n\t\t\t\t\t\t\tclassName=\"ant-input\"\r\n\t\t\t\t\t\t\tplaceholder=\"Bắt đầu\"\r\n\t\t\t\t\t\t\tformat={'HH:mm'}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"col-md-6 col-12\">\r\n\t\t\t\t\t\t<div className=\"mb-2 mt-4\">Giờ kết thúc</div>\r\n\t\t\t\t\t\t<TimePicker\r\n\t\t\t\t\t\t\tvalue={!!endTime && endTime != 'Invalid Date' ? moment(endTime, 'HH:mm') : null}\r\n\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\tclassName=\"ant-input\"\r\n\t\t\t\t\t\t\tplaceholder=\"Hãy chọn giờ bắt đầu\"\r\n\t\t\t\t\t\t\tformat={'HH:mm'}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{!!errorText && (\r\n\t\t\t\t\t<div className=\"col-md-6 col-12 mt-3\">\r\n\t\t\t\t\t\t<div style={{ color: 'red' }}>{errorText}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default ModalCreateEvent\r\n"]},"metadata":{},"sourceType":"module"}