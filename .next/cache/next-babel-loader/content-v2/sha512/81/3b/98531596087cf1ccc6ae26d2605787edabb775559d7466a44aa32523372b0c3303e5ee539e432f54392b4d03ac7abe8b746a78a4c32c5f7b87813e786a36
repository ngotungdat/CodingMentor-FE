{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Elements\\\\EditorBase\\\\Editor.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport 'bootstrap/js/src/dropdown';\nimport 'bootstrap/js/src/modal';\nimport 'bootstrap/js/src/tooltip';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport ReactHtmlParser from 'react-html-parser';\nimport ReactSummernote from 'react-summernote';\nimport 'react-summernote/dist/react-summernote.css'; // import styles\n\nimport 'react-summernote/lang/summernote-vi-VN'; // you can import any other locale\n\nimport { studentApi } from '~/apiBase';\nimport { useWrap } from '~/context/wrap';\nEditorBaseSummerNote.propTypes = {\n  isReset: PropTypes.bool,\n  content: PropTypes.string,\n  height: PropTypes.number,\n  handleChangeDataEditor: PropTypes.func,\n  // PROP TYPES FOR CUSTOM FIELD. CAN SKIP\n  customFieldProps: PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    onBlur: PropTypes.func.isRequired,\n    onChange: PropTypes.func.isRequired,\n    innerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\n      current: PropTypes.any\n    })]).isRequired,\n    value: PropTypes.string.isRequired,\n    disabled: PropTypes.bool.isRequired\n  })\n};\nEditorBaseSummerNote.defaultProps = {\n  isReset: false,\n  content: '',\n  height: 600,\n  handleChangeDataEditor: null\n};\n\nfunction EditorBaseSummerNote(props) {\n  const {\n    isReset,\n    content,\n    height,\n    handleChangeDataEditor,\n    customFieldProps\n  } = props;\n  const {\n    showNoti\n  } = useWrap();\n\n  const checkHandleChangeDataEditor = content => {\n    if (!handleChangeDataEditor) return;\n    handleChangeDataEditor(content);\n  };\n\n  const handleUploadImage = async fileList => {\n    try {\n      const validType = ['image/png', 'image/jpg', 'image/jpeg', 'image/bmp'];\n\n      if (!validType.includes(fileList[0].type)) {\n        showNoti('danger', `${fileList[0].name} không đúng định dạng (jpg | jpeg | png | bmp).`);\n        return;\n      }\n\n      let res = await studentApi.uploadImage(fileList[0]);\n\n      if (res.status === 200) {\n        ReactSummernote.insertImage(res.data.data);\n      }\n    } catch (error) {\n      (error === null || error === void 0 ? void 0 : error.status) === 400 && showNoti('danger', 'Ảnh không đúng định dạng (jpg | jpeg | png | bmp).');\n      console.log('handleUploadImage', error);\n    }\n  };\n\n  useEffect(() => {\n    isReset && ReactSummernote.reset();\n  }, [isReset]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"wrap-editor\",\n    children: /*#__PURE__*/_jsxDEV(ReactSummernote, _objectSpread({\n      children: ReactHtmlParser(content),\n      value: content,\n      options: {\n        lang: 'vn',\n        height: height,\n        dialogsInBody: true,\n        disableDragAndDrop: true,\n        toolbar: [['style', ['style']], ['font', ['bold', 'underline', 'clear']], ['fontname', ['fontname']], ['para', ['ul', 'ol', 'paragraph']], ['table', ['table']], ['insert', ['link', 'picture', 'video']], ['view', ['fullscreen', 'codeview']]]\n      },\n      onChange: checkHandleChangeDataEditor,\n      onImageUpload: handleUploadImage\n    }, customFieldProps), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 3\n  }, this);\n}\n\nexport default EditorBaseSummerNote;","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Elements/EditorBase/Editor.tsx"],"names":["PropTypes","React","useEffect","ReactHtmlParser","ReactSummernote","studentApi","useWrap","EditorBaseSummerNote","propTypes","isReset","bool","content","string","height","number","handleChangeDataEditor","func","customFieldProps","shape","name","isRequired","onBlur","onChange","innerRef","oneOfType","current","any","value","disabled","defaultProps","props","showNoti","checkHandleChangeDataEditor","handleUploadImage","fileList","validType","includes","type","res","uploadImage","status","insertImage","data","error","console","log","reset","lang","dialogsInBody","disableDragAndDrop","toolbar"],"mappings":"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","sourcesContent":["import 'bootstrap/js/src/dropdown'\r\nimport 'bootstrap/js/src/modal'\r\nimport 'bootstrap/js/src/tooltip'\r\nimport PropTypes from 'prop-types'\r\nimport React, { useEffect } from 'react'\r\nimport ReactHtmlParser from 'react-html-parser'\r\nimport ReactSummernote from 'react-summernote'\r\nimport 'react-summernote/dist/react-summernote.css' // import styles\r\nimport 'react-summernote/lang/summernote-vi-VN' // you can import any other locale\r\nimport { studentApi } from '~/apiBase'\r\nimport { useWrap } from '~/context/wrap'\r\n\r\nEditorBaseSummerNote.propTypes = {\r\n\tisReset: PropTypes.bool,\r\n\tcontent: PropTypes.string,\r\n\theight: PropTypes.number,\r\n\thandleChangeDataEditor: PropTypes.func,\r\n\t// PROP TYPES FOR CUSTOM FIELD. CAN SKIP\r\n\tcustomFieldProps: PropTypes.shape({\r\n\t\tname: PropTypes.string.isRequired,\r\n\t\tonBlur: PropTypes.func.isRequired,\r\n\t\tonChange: PropTypes.func.isRequired,\r\n\t\tinnerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({ current: PropTypes.any })]).isRequired,\r\n\t\tvalue: PropTypes.string.isRequired,\r\n\t\tdisabled: PropTypes.bool.isRequired\r\n\t})\r\n}\r\n\r\nEditorBaseSummerNote.defaultProps = {\r\n\tisReset: false,\r\n\tcontent: '',\r\n\theight: 600,\r\n\thandleChangeDataEditor: null\r\n}\r\n\r\nfunction EditorBaseSummerNote(props) {\r\n\tconst { isReset, content, height, handleChangeDataEditor, customFieldProps } = props\r\n\tconst { showNoti } = useWrap()\r\n\tconst checkHandleChangeDataEditor = (content) => {\r\n\t\tif (!handleChangeDataEditor) return\r\n\t\thandleChangeDataEditor(content)\r\n\t}\r\n\r\n\tconst handleUploadImage = async (fileList) => {\r\n\t\ttry {\r\n\t\t\tconst validType = ['image/png', 'image/jpg', 'image/jpeg', 'image/bmp']\r\n\t\t\tif (!validType.includes(fileList[0].type)) {\r\n\t\t\t\tshowNoti('danger', `${fileList[0].name} không đúng định dạng (jpg | jpeg | png | bmp).`)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tlet res = await studentApi.uploadImage(fileList[0])\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tReactSummernote.insertImage(res.data.data)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\terror?.status === 400 && showNoti('danger', 'Ảnh không đúng định dạng (jpg | jpeg | png | bmp).')\r\n\t\t\tconsole.log('handleUploadImage', error)\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tisReset && ReactSummernote.reset()\r\n\t}, [isReset])\r\n\r\n\treturn (\r\n\t\t<div className=\"wrap-editor\">\r\n\t\t\t<ReactSummernote\r\n\t\t\t\tchildren={ReactHtmlParser(content)}\r\n\t\t\t\tvalue={content}\r\n\t\t\t\toptions={{\r\n\t\t\t\t\tlang: 'vn',\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t\tdialogsInBody: true,\r\n\t\t\t\t\tdisableDragAndDrop: true,\r\n\t\t\t\t\ttoolbar: [\r\n\t\t\t\t\t\t['style', ['style']],\r\n\t\t\t\t\t\t['font', ['bold', 'underline', 'clear']],\r\n\t\t\t\t\t\t['fontname', ['fontname']],\r\n\t\t\t\t\t\t['para', ['ul', 'ol', 'paragraph']],\r\n\t\t\t\t\t\t['table', ['table']],\r\n\t\t\t\t\t\t['insert', ['link', 'picture', 'video']],\r\n\t\t\t\t\t\t['view', ['fullscreen', 'codeview']]\r\n\t\t\t\t\t]\r\n\t\t\t\t}}\r\n\t\t\t\tonChange={checkHandleChangeDataEditor}\r\n\t\t\t\tonImageUpload={handleUploadImage}\r\n\t\t\t\t{...customFieldProps}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default EditorBaseSummerNote\r\n"]},"metadata":{},"sourceType":"module"}