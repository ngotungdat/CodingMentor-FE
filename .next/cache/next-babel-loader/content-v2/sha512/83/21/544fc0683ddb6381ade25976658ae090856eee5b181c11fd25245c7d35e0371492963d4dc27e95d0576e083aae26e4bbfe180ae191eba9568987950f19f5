{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _toConsumableArray from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\QuestionBank\\\\QuestionFormType\\\\TypingForm.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { CloseOutlined } from '@ant-design/icons';\nimport { Form, Input, Spin, Tooltip } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { Plus } from 'react-feather';\nimport { exerciseGroupApi } from '~/apiBase/';\nimport Editor from '~/components/Elements/Editor';\nimport EditorSimple from '~/components/Elements/EditorSimple';\nimport { useWrap } from '~/context/wrap';\nvar AnsID = 0;\n\nvar TypingForm = function TypingForm(props) {\n  _s();\n\n  var _question$ExerciseLis2;\n\n  var questionData = props.questionData,\n      changeIsSubmit = props.changeIsSubmit,\n      visible = props.visible,\n      onChange = props.onChange,\n      isGroup = props.isGroup;\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti;\n\n  var _Form$useForm = Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var _useState = useState(null),\n      question = _useState[0],\n      setQuestion = _useState[1]; // Dữ liệu câu hỏi + câu trả lời\n\n\n  var _useState2 = useState(true),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState([]),\n      dataExercise = _useState3[0],\n      setDataExercise = _useState3[1]; // VỪA VÔ LẤY DỮ LIỆU\n\n\n  useEffect(function () {\n    visible ? dataGroupDetail() : setLoading(true);\n  }, [visible]);\n  useEffect(function () {\n    onChange(question);\n  }, [question]); // GET GROUP DETAIL DATA\n\n  var dataGroupDetail = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res, _res$data$data, _res$data$data2, cloneValueEditor;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              changeIsSubmit(true);\n              _context.prev = 1;\n              _context.next = 4;\n              return exerciseGroupApi.getWithID(questionData.ID ? questionData.ID : questionData.ExerciseGroupID);\n\n            case 4:\n              res = _context.sent;\n\n              if (res.status == 200) {\n                if ((questionData === null || questionData === void 0 ? void 0 : questionData.ExerciseList.length) > 0) {\n                  // Thay thẻ div = input\n                  cloneValueEditor = (_res$data$data = res.data.data) === null || _res$data$data === void 0 ? void 0 : _res$data$data.Paragraph;\n                  (_res$data$data2 = res.data.data) === null || _res$data$data2 === void 0 ? void 0 : _res$data$data2.ExerciseList.forEach(function (item) {\n                    var indexInput = parseInt(item.inputID) + 1;\n                    indexInput = indexInput.toString();\n                    cloneValueEditor = cloneValueEditor.replace(\"<div ques-id=\\\"\".concat(item.ID, \"\\\" id=\\\"\").concat(indexInput, \"\\\" class='space-editor' role='textbox' aria-labelledby='txtboxLabel' aria-multiline='true' contentEditable=\\\"true\\\">(\").concat(indexInput, \")</div>\"), \"<input id=\\\"\".concat(item.inputID, \"\\\" class=\\\"space-editor\\\" placeholder=\\\"(\").concat(indexInput, \")\\\">\"));\n                  });\n                  setQuestion(_objectSpread(_objectSpread({}, res.data.data), {}, {\n                    Paragraph: cloneValueEditor\n                  }));\n                } else {\n                  setQuestion(res.data.data);\n                }\n              }\n\n              res.status == 204 && showNoti('danger', 'Không có dữ liệu');\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](1);\n              showNoti('danger', _context.t0 === null || _context.t0 === void 0 ? void 0 : _context.t0.message);\n\n            case 12:\n              _context.prev = 12;\n              setLoading(false);\n              return _context.finish(12);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 9, 12, 15]]);\n    }));\n\n    return function dataGroupDetail() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var setDataEditor = function setDataEditor(e) {\n    setQuestion(_objectSpread(_objectSpread({}, question), {}, {\n      Paragraph: e\n    }));\n    onChange(_objectSpread(_objectSpread({}, question), {}, {\n      Paragraph: e\n    }));\n  };\n\n  var getDescribeAnswer = function getDescribeAnswer(dataEditor) {\n    setQuestion(_objectSpread(_objectSpread({}, question), {}, {\n      DescribeAnswer: dataEditor\n    }));\n    onChange(_objectSpread(_objectSpread({}, question), {}, {\n      DescribeAnswer: dataEditor\n    }));\n  }; // HANDLE ADD QUESTION\n\n\n  var _addQuestion = function addQuestion(p) {\n    AnsID++;\n    var exerciseList = question === null || question === void 0 ? void 0 : question.ExerciseList;\n    var tempData = dataExercise;\n    var temp = {\n      inputID: p,\n      Content: '',\n      ExerciseGroupID: question.ID,\n      SubjectID: question.SubjectID,\n      SubjectName: question.SubjectName,\n      DescribeAnswer: '',\n      Level: question.Level,\n      LevelName: question.LevelName,\n      LinkAudio: null,\n      Type: question.Type,\n      TypeName: question.TypeName,\n      isAdd: true,\n      Enable: true,\n      ExerciseAnswer: [{\n        ID: AnsID,\n        AnswerContent: '',\n        isTrue: true,\n        Enable: true,\n        isAdd: true\n      }]\n    };\n    tempData.push(temp);\n    exerciseList.push(temp);\n    setDataExercise(tempData);\n    setQuestion(_objectSpread(_objectSpread({}, question), {}, {\n      ExerciseList: exerciseList\n    }));\n    onChange(_objectSpread(_objectSpread({}, question), {}, {\n      ExerciseList: exerciseList\n    }));\n  }; // HANDLE DELETE QUESTION\n\n\n  var _deleteSingleQuestion = function deleteSingleQuestion(ID) {\n    var questionIndex = question.ExerciseList.findIndex(function (item) {\n      return item.inputID == ID;\n    }); // Lấy vị trí của cái ID truyền vào\n\n    var exerciseIndex = dataExercise.findIndex(function (item) {\n      return item.inputID == ID;\n    }); // Xóa bên Ex nếu nó khác -1\n\n    if (dataExercise[exerciseIndex]) {\n      dataExercise.splice(exerciseIndex, 1);\n    } // Xóa bên Quest nếu nó khác -1\n\n\n    if (question.ExerciseList[questionIndex]) {\n      if (question.ExerciseList[questionIndex].isAdd) {\n        question.ExerciseList.splice(questionIndex, 1);\n      } else {\n        question.ExerciseList[questionIndex].Enable = false;\n      }\n    } else {\n      console.log('Câu hỏi không tồn tại');\n    }\n\n    setDataExercise(_toConsumableArray(dataExercise));\n    setQuestion(_objectSpread({}, question));\n    onChange(_objectSpread({}, question));\n  }; // HANDLE DELETE ALL QUESTION\n\n\n  var deleteAllQuestion = function deleteAllQuestion() {\n    dataExercise === null || dataExercise === void 0 ? void 0 : dataExercise.splice(0, dataExercise.length); // Xóa tất cả tụi bên Ex\n\n    question.ExerciseList.forEach(function (item) {\n      item.Enable = false; // Xóa tất cả tụi bên này - gọi vậy để xóa trên data\n    });\n    setDataExercise(_toConsumableArray(dataExercise));\n    setQuestion(_objectSpread(_objectSpread({}, question), {}, {\n      Paragraph: ''\n    }));\n    onChange(_objectSpread(_objectSpread({}, question), {}, {\n      Paragraph: ''\n    }));\n  }; // Lấy cái số hiện ra bên câu trả lời\n\n\n  var getQuestIndex = function getQuestIndex(ar, i) {\n    var temp = [];\n\n    for (var _i = 0; _i < ar.length; _i++) {\n      ar[_i].Enable && temp.push(ar[_i]);\n    }\n\n    return parseInt(temp.indexOf(i)) + 1;\n  }; // HANDLE ADD ANSWER\n\n\n  var handleAddAnswer = function handleAddAnswer(ID) {\n    AnsID++;\n    question.ExerciseList.every(function (item) {\n      if (item.inputID == ID) {\n        item.ExerciseAnswer.push({\n          ID: AnsID,\n          AnswerContent: '',\n          isTrue: true,\n          Enable: true,\n          isAdd: true\n        });\n        return false;\n      }\n\n      return true;\n    });\n    setQuestion(_objectSpread({}, question));\n  }; // ON CHANGE TEXT\n\n\n  var onChange_text = function onChange_text(e, AnswerID, QuestionID) {\n    var _question$ExerciseLis;\n\n    var QuestionIndex = question === null || question === void 0 ? void 0 : (_question$ExerciseLis = question.ExerciseList) === null || _question$ExerciseLis === void 0 ? void 0 : _question$ExerciseLis.findIndex(function (item) {\n      return item.Enable && item.inputID == QuestionID;\n    }); // Get question index\n\n    var AnswerIndex = question.ExerciseList[QuestionIndex].ExerciseAnswer.findIndex(function (item) {\n      return item.Enable && item.ID == AnswerID;\n    }); // Get answer index\n\n    question.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex].AnswerContent = e.target.value; // Add text\n\n    setQuestion(_objectSpread({}, question));\n  }; // DELETE ANSWER\n\n\n  var deleteAnswerItem = function deleteAnswerItem(AnswerID, QuestionID) {\n    var QuestionIndex = question.ExerciseList.findIndex(function (item) {\n      return item.inputID == QuestionID;\n    }); // - Get question index\n\n    var AnswerIndex = question.ExerciseList[QuestionIndex].ExerciseAnswer.findIndex(function (item) {\n      return item.ID == AnswerID;\n    }); // - Get answer index\n    // Action delete\n\n    if (question.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex].isAdd) {\n      question.ExerciseList[QuestionIndex].ExerciseAnswer.splice(AnswerIndex, 1);\n    } else {\n      question.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex].Enable = false;\n    }\n\n    setQuestion(_objectSpread({}, question));\n  }; // RENDER\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-create-question\",\n    children: visible && loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-100 text-center mt-3\",\n      children: /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 6\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 5\n    }, _this) : visible && /*#__PURE__*/_jsxDEV(Form, {\n      form: form,\n      layout: \"vertical\",\n      onFinish: function onFinish() {},\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-fluid\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6 col-12\",\n            children: /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"Question\",\n              label: \"N\\u1ED9i dung\",\n              children: /*#__PURE__*/_jsxDEV(Editor, {\n                exerciseList: dataExercise,\n                deleteAllQuestion: deleteAllQuestion,\n                deleteSingleQuestion: function deleteSingleQuestion(quesID) {\n                  return _deleteSingleQuestion(quesID);\n                },\n                handleChange: function handleChange(e) {\n                  return setDataEditor(e);\n                } // Khi nó thay đổi\n                ,\n                isReset: false,\n                questionContent: question === null || question === void 0 ? void 0 : question.Paragraph // Câu hỏi được truyền vô\n                ,\n                questionData: question,\n                addQuestion: function addQuestion(e) {\n                  return _addQuestion(e);\n                },\n                visible: visible\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 11\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 10\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 9\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6 col-12\",\n            style: {\n              borderLeft: '2px dotted #dbdbdb'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"style-label\",\n              style: {\n                textDecoration: 'underline'\n              },\n              children: \"\\u0110\\xE1p \\xE1n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 10\n            }, _this), question === null || question === void 0 ? void 0 : (_question$ExerciseLis2 = question.ExerciseList) === null || _question$ExerciseLis2 === void 0 ? void 0 : _question$ExerciseLis2.map(function (itemQues, index) {\n              var _itemQues$ExerciseAns;\n\n              return itemQues.Enable && /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-4\",\n                  style: {\n                    fontWeight: 500,\n                    color: '#525252'\n                  },\n                  children: [\"C\\xE2u: \", getQuestIndex(question.ExerciseList, itemQues)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 14\n                }, _this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                  title: \"Th\\xEAm \\u0111\\xE1p \\xE1n\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn-add-answer\",\n                    onClick: function onClick() {\n                      return handleAddAnswer(itemQues.inputID);\n                    },\n                    children: /*#__PURE__*/_jsxDEV(Plus, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 230,\n                      columnNumber: 16\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 229,\n                    columnNumber: 15\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 14\n                }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: (_itemQues$ExerciseAns = itemQues.ExerciseAnswer) === null || _itemQues$ExerciseAns === void 0 ? void 0 : _itemQues$ExerciseAns.map(function (itemAns, index) {\n                    return itemAns.Enable && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-md-6 col-12\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"row-ans mt-3\",\n                        children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n                          className: \"mb-0\",\n                          children: /*#__PURE__*/_jsxDEV(Input, {\n                            value: itemAns.AnswerContent,\n                            className: \"style-input\",\n                            onChange: function onChange(e) {\n                              return onChange_text(e, itemAns.ID, itemQues.inputID);\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 240,\n                            columnNumber: 21\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 239,\n                          columnNumber: 20\n                        }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          className: \"delete-ans\",\n                          onClick: function onClick() {\n                            return deleteAnswerItem(itemAns.ID, itemQues.inputID);\n                          },\n                          children: /*#__PURE__*/_jsxDEV(CloseOutlined, {}, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 247,\n                            columnNumber: 21\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 246,\n                          columnNumber: 20\n                        }, _this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 238,\n                        columnNumber: 19\n                      }, _this)\n                    }, index, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 237,\n                      columnNumber: 18\n                    }, _this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 14\n                }, _this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 13\n              }, _this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 9\n          }, _this), !(isGroup !== null && isGroup !== void 0 && isGroup.status) && /*#__PURE__*/_jsxDEV(Form.Item, {\n            label: \"Gi\\u1EA3i th\\xEDch \\u0111\\xE1p \\xE1n\",\n            name: \"DescribeAnswer\",\n            children: /*#__PURE__*/_jsxDEV(EditorSimple, {\n              handleChange: function handleChange(value) {\n                return getDescribeAnswer(value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 11\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 10\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 8\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 7\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 6\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 191,\n    columnNumber: 3\n  }, _this);\n};\n\n_s(TypingForm, \"mMbbILw2bLEgdhwiFI/5a7QndDg=\", false, function () {\n  return [useWrap, Form.useForm];\n});\n\n_c = TypingForm;\nexport default TypingForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"TypingForm\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/QuestionBank/QuestionFormType/TypingForm.tsx"],"names":["CloseOutlined","Form","Input","Spin","Tooltip","React","useEffect","useState","Plus","exerciseGroupApi","Editor","EditorSimple","useWrap","AnsID","TypingForm","props","questionData","changeIsSubmit","visible","onChange","isGroup","showNoti","useForm","form","question","setQuestion","loading","setLoading","dataExercise","setDataExercise","dataGroupDetail","getWithID","ID","ExerciseGroupID","res","status","ExerciseList","length","cloneValueEditor","data","Paragraph","forEach","item","indexInput","parseInt","inputID","toString","replace","message","setDataEditor","e","getDescribeAnswer","dataEditor","DescribeAnswer","addQuestion","p","exerciseList","tempData","temp","Content","SubjectID","SubjectName","Level","LevelName","LinkAudio","Type","TypeName","isAdd","Enable","ExerciseAnswer","AnswerContent","isTrue","push","deleteSingleQuestion","questionIndex","findIndex","exerciseIndex","splice","console","log","deleteAllQuestion","getQuestIndex","ar","i","indexOf","handleAddAnswer","every","onChange_text","AnswerID","QuestionID","QuestionIndex","AnswerIndex","target","value","deleteAnswerItem","quesID","borderLeft","textDecoration","map","itemQues","index","fontWeight","color","itemAns"],"mappings":"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","sourcesContent":["import { CloseOutlined } from '@ant-design/icons'\r\nimport { Form, Input, Spin, Tooltip } from 'antd'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { Plus } from 'react-feather'\r\nimport { exerciseGroupApi } from '~/apiBase/'\r\nimport Editor from '~/components/Elements/Editor'\r\nimport EditorSimple from '~/components/Elements/EditorSimple'\r\nimport { useWrap } from '~/context/wrap'\r\n\r\nlet AnsID = 0\r\n\r\nconst TypingForm = (props) => {\r\n\tconst { questionData, changeIsSubmit, visible, onChange, isGroup } = props\r\n\tconst { showNoti } = useWrap()\r\n\tconst [form] = Form.useForm()\r\n\tconst [question, setQuestion] = useState<any>(null) // Dữ liệu câu hỏi + câu trả lời\r\n\tconst [loading, setLoading] = useState<any>(true)\r\n\tconst [dataExercise, setDataExercise] = useState<any>([])\r\n\r\n\t// VỪA VÔ LẤY DỮ LIỆU\r\n\tuseEffect(() => {\r\n\t\tvisible ? dataGroupDetail() : setLoading(true)\r\n\t}, [visible])\r\n\r\n\tuseEffect(() => {\r\n\t\tonChange(question)\r\n\t}, [question])\r\n\r\n\t// GET GROUP DETAIL DATA\r\n\tconst dataGroupDetail = async () => {\r\n\t\tchangeIsSubmit(true)\r\n\t\ttry {\r\n\t\t\tlet res: any = await exerciseGroupApi.getWithID(questionData.ID ? questionData.ID : questionData.ExerciseGroupID)\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tif (questionData?.ExerciseList.length > 0) {\r\n\t\t\t\t\t// Thay thẻ div = input\r\n\t\t\t\t\tlet cloneValueEditor = res.data.data?.Paragraph\r\n\t\t\t\t\tres.data.data?.ExerciseList.forEach((item: any) => {\r\n\t\t\t\t\t\tlet indexInput: any = parseInt(item.inputID) + 1\r\n\t\t\t\t\t\tindexInput = indexInput.toString()\r\n\t\t\t\t\t\tcloneValueEditor = cloneValueEditor.replace(\r\n\t\t\t\t\t\t\t`<div ques-id=\"${item.ID}\" id=\"${indexInput}\" class='space-editor' role='textbox' aria-labelledby='txtboxLabel' aria-multiline='true' contentEditable=\"true\">(${indexInput})</div>`,\r\n\t\t\t\t\t\t\t`<input id=\"${item.inputID}\" class=\"space-editor\" placeholder=\"(${indexInput})\">`\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsetQuestion({ ...res.data.data, Paragraph: cloneValueEditor })\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetQuestion(res.data.data)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tres.status == 204 && showNoti('danger', 'Không có dữ liệu')\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error?.message)\r\n\t\t} finally {\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst setDataEditor = (e: any) => {\r\n\t\tsetQuestion({ ...question, Paragraph: e })\r\n\t\tonChange({ ...question, Paragraph: e })\r\n\t}\r\n\r\n\tconst getDescribeAnswer = (dataEditor) => {\r\n\t\tsetQuestion({ ...question, DescribeAnswer: dataEditor })\r\n\t\tonChange({ ...question, DescribeAnswer: dataEditor })\r\n\t}\r\n\r\n\t// HANDLE ADD QUESTION\r\n\tconst addQuestion = (p: any) => {\r\n\t\tAnsID++\r\n\t\tlet exerciseList: any = question?.ExerciseList\r\n\t\tlet tempData: any = dataExercise\r\n\t\tlet temp: any = {\r\n\t\t\tinputID: p,\r\n\t\t\tContent: '',\r\n\t\t\tExerciseGroupID: question.ID,\r\n\t\t\tSubjectID: question.SubjectID,\r\n\t\t\tSubjectName: question.SubjectName,\r\n\t\t\tDescribeAnswer: '',\r\n\t\t\tLevel: question.Level,\r\n\t\t\tLevelName: question.LevelName,\r\n\t\t\tLinkAudio: null,\r\n\t\t\tType: question.Type,\r\n\t\t\tTypeName: question.TypeName,\r\n\t\t\tisAdd: true,\r\n\t\t\tEnable: true,\r\n\t\t\tExerciseAnswer: [\r\n\t\t\t\t{\r\n\t\t\t\t\tID: AnsID,\r\n\t\t\t\t\tAnswerContent: '',\r\n\t\t\t\t\tisTrue: true,\r\n\t\t\t\t\tEnable: true,\r\n\t\t\t\t\tisAdd: true\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t\ttempData.push(temp)\r\n\t\texerciseList.push(temp)\r\n\t\tsetDataExercise(tempData)\r\n\t\tsetQuestion({ ...question, ExerciseList: exerciseList })\r\n\t\tonChange({ ...question, ExerciseList: exerciseList })\r\n\t}\r\n\r\n\t// HANDLE DELETE QUESTION\r\n\tconst deleteSingleQuestion = (ID: any) => {\r\n\t\tlet questionIndex: any = question.ExerciseList.findIndex((item: any) => item.inputID == ID) // Lấy vị trí của cái ID truyền vào\r\n\t\tlet exerciseIndex: any = dataExercise.findIndex((item: any) => item.inputID == ID)\r\n\t\t// Xóa bên Ex nếu nó khác -1\r\n\t\tif (dataExercise[exerciseIndex]) {\r\n\t\t\tdataExercise.splice(exerciseIndex, 1)\r\n\t\t}\r\n\t\t// Xóa bên Quest nếu nó khác -1\r\n\t\tif (question.ExerciseList[questionIndex]) {\r\n\t\t\tif (question.ExerciseList[questionIndex].isAdd) {\r\n\t\t\t\tquestion.ExerciseList.splice(questionIndex, 1)\r\n\t\t\t} else {\r\n\t\t\t\tquestion.ExerciseList[questionIndex].Enable = false\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconsole.log('Câu hỏi không tồn tại')\r\n\t\t}\r\n\t\tsetDataExercise([...dataExercise])\r\n\t\tsetQuestion({ ...question })\r\n\t\tonChange({ ...question })\r\n\t}\r\n\r\n\t// HANDLE DELETE ALL QUESTION\r\n\tconst deleteAllQuestion = () => {\r\n\t\tdataExercise?.splice(0, dataExercise.length) // Xóa tất cả tụi bên Ex\r\n\t\tquestion.ExerciseList.forEach((item: any) => {\r\n\t\t\titem.Enable = false // Xóa tất cả tụi bên này - gọi vậy để xóa trên data\r\n\t\t})\r\n\t\tsetDataExercise([...dataExercise])\r\n\t\tsetQuestion({ ...question, Paragraph: '' })\r\n\t\tonChange({ ...question, Paragraph: '' })\r\n\t}\r\n\r\n\t// Lấy cái số hiện ra bên câu trả lời\r\n\tconst getQuestIndex = (ar: any, i: any) => {\r\n\t\tlet temp: any = []\r\n\t\tfor (let i = 0; i < ar.length; i++) {\r\n\t\t\tar[i].Enable && temp.push(ar[i])\r\n\t\t}\r\n\t\treturn parseInt(temp.indexOf(i)) + 1\r\n\t}\r\n\r\n\t// HANDLE ADD ANSWER\r\n\tconst handleAddAnswer = (ID: number) => {\r\n\t\tAnsID++\r\n\t\tquestion.ExerciseList.every((item: any) => {\r\n\t\t\tif (item.inputID == ID) {\r\n\t\t\t\titem.ExerciseAnswer.push({\r\n\t\t\t\t\tID: AnsID,\r\n\t\t\t\t\tAnswerContent: '',\r\n\t\t\t\t\tisTrue: true,\r\n\t\t\t\t\tEnable: true,\r\n\t\t\t\t\tisAdd: true\r\n\t\t\t\t})\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\treturn true\r\n\t\t})\r\n\t\tsetQuestion({ ...question })\r\n\t}\r\n\r\n\t// ON CHANGE TEXT\r\n\tconst onChange_text = (e: any, AnswerID: number, QuestionID: any) => {\r\n\t\tlet QuestionIndex: any = question?.ExerciseList?.findIndex((item: any) => item.Enable && item.inputID == QuestionID) // Get question index\r\n\t\tlet AnswerIndex: any = question.ExerciseList[QuestionIndex].ExerciseAnswer.findIndex((item: any) => item.Enable && item.ID == AnswerID) // Get answer index\r\n\t\tquestion.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex].AnswerContent = e.target.value // Add text\r\n\t\tsetQuestion({ ...question })\r\n\t}\r\n\r\n\t// DELETE ANSWER\r\n\tconst deleteAnswerItem = (AnswerID: number, QuestionID: number) => {\r\n\t\tlet QuestionIndex: any = question.ExerciseList.findIndex((item: any) => item.inputID == QuestionID) // - Get question index\r\n\t\tlet AnswerIndex: any = question.ExerciseList[QuestionIndex].ExerciseAnswer.findIndex((item: any) => item.ID == AnswerID) // - Get answer index\r\n\t\t// Action delete\r\n\t\tif (question.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex].isAdd) {\r\n\t\t\tquestion.ExerciseList[QuestionIndex].ExerciseAnswer.splice(AnswerIndex, 1)\r\n\t\t} else {\r\n\t\t\tquestion.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex].Enable = false\r\n\t\t}\r\n\t\tsetQuestion({ ...question })\r\n\t}\r\n\r\n\t// RENDER\r\n\treturn (\r\n\t\t<div className=\"form-create-question\">\r\n\t\t\t{visible && loading ? (\r\n\t\t\t\t<div className=\"w-100 text-center mt-3\">\r\n\t\t\t\t\t<Spin />\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\tvisible && (\r\n\t\t\t\t\t<Form form={form} layout=\"vertical\" onFinish={() => {}}>\r\n\t\t\t\t\t\t<div className=\"container-fluid\">\r\n\t\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t\t<div className=\"col-md-6 col-12\">\r\n\t\t\t\t\t\t\t\t\t<Form.Item name=\"Question\" label=\"Nội dung\">\r\n\t\t\t\t\t\t\t\t\t\t<Editor\r\n\t\t\t\t\t\t\t\t\t\t\texerciseList={dataExercise}\r\n\t\t\t\t\t\t\t\t\t\t\tdeleteAllQuestion={deleteAllQuestion}\r\n\t\t\t\t\t\t\t\t\t\t\tdeleteSingleQuestion={(quesID: number) => deleteSingleQuestion(quesID)}\r\n\t\t\t\t\t\t\t\t\t\t\thandleChange={(e: string) => setDataEditor(e)} // Khi nó thay đổi\r\n\t\t\t\t\t\t\t\t\t\t\tisReset={false}\r\n\t\t\t\t\t\t\t\t\t\t\tquestionContent={question?.Paragraph} // Câu hỏi được truyền vô\r\n\t\t\t\t\t\t\t\t\t\t\tquestionData={question}\r\n\t\t\t\t\t\t\t\t\t\t\taddQuestion={(e: any) => addQuestion(e)}\r\n\t\t\t\t\t\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div className=\"col-md-6 col-12\" style={{ borderLeft: '2px dotted #dbdbdb' }}>\r\n\t\t\t\t\t\t\t\t\t<p className=\"style-label\" style={{ textDecoration: 'underline' }}>\r\n\t\t\t\t\t\t\t\t\t\tĐáp án\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t{question?.ExerciseList?.map(\r\n\t\t\t\t\t\t\t\t\t\t(itemQues: any, index: any) =>\r\n\t\t\t\t\t\t\t\t\t\t\titemQues.Enable && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"mt-4\" style={{ fontWeight: 500, color: '#525252' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tCâu: {getQuestIndex(question.ExerciseList, itemQues)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip title=\"Thêm đáp án\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button className=\"btn-add-answer\" onClick={() => handleAddAnswer(itemQues.inputID)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Plus />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{itemQues.ExerciseAnswer?.map(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(itemAns: any, index: any) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titemAns.Enable && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col-md-6 col-12\" key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row-ans mt-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Form.Item className=\"mb-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={itemAns.AnswerContent}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"style-input\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e: any) => onChange_text(e, itemAns.ID, itemQues.inputID)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button className=\"delete-ans\" onClick={() => deleteAnswerItem(itemAns.ID, itemQues.inputID)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CloseOutlined />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{!isGroup?.status && (\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"Giải thích đáp án\" name=\"DescribeAnswer\">\r\n\t\t\t\t\t\t\t\t\t\t<EditorSimple handleChange={(value: any) => getDescribeAnswer(value)} />\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t)\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default TypingForm\r\n"]},"metadata":{},"sourceType":"module"}