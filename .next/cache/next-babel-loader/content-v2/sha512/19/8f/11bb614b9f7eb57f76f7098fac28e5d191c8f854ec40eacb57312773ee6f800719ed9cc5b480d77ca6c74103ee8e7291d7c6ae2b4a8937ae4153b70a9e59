{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\DoingTest\\\\MainTest.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { CheckCircleOutlined, CloseOutlined, LeftOutlined, ProfileFilled, RightOutlined } from '@ant-design/icons';\nimport { Card, Checkbox, Modal, Skeleton, Spin } from 'antd';\nimport dynamic from 'next/dynamic';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { doingTestApi, examAppointmentResultApi, examDetailApi } from '~/apiBase';\nimport { homeworkResultApi } from '~/apiBase/course-detail/home-work-result';\nimport { courseExamApi } from '~/apiBase/package/course-exam';\nimport CountDown from '~/components/Elements/CountDown/CountDown';\nimport DecideModal from '~/components/Elements/DecideModal';\nimport { useDoingTest } from '~/context/useDoingTest';\nimport { useWrap } from '~/context/wrap';\nimport TimeUpModal from './TimeUpModal';\nvar ListQuestion = dynamic(_c = function _c() {\n  return import('~/components/Global/DoingTest/ListQuestion');\n}, {\n  loading: function loading() {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 17\n    }, _this);\n  },\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('~/components/Global/DoingTest/ListQuestion')];\n    },\n    modules: [\"..\\\\components\\\\Global\\\\DoingTest\\\\MainTest.tsx -> \" + '~/components/Global/DoingTest/ListQuestion']\n  }\n});\n_c2 = ListQuestion;\n\nvar MainTest = function MainTest(props) {\n  _s();\n\n  var _useDoingTest = useDoingTest(),\n      getListQuestionID = _useDoingTest.getListQuestionID,\n      getActiveID = _useDoingTest.getActiveID,\n      activeID = _useDoingTest.activeID,\n      listPicked = _useDoingTest.listPicked;\n\n  var examID = props.examID,\n      infoExam = props.infoExam,\n      packageDetailID = props.packageDetailID,\n      dataDoneTest = props.dataDoneTest,\n      isDone = props.isDone,\n      listIDFromDoneTest = props.listIDFromDoneTest,\n      listGroupIDFromDoneTest = props.listGroupIDFromDoneTest,\n      closeMainTest = props.closeMainTest,\n      type = props.type,\n      CurriculumDetailID = props.CurriculumDetailID;\n  var listTodoApi = {\n    pageIndex: 1,\n    pageSize: 999,\n    ExamTopicID: examID\n  };\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti;\n\n  var _useState = useState(listTodoApi),\n      todoApi = _useState[0],\n      setTodoApi = _useState[1];\n\n  var _useState2 = useState(false),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var _useState3 = useState(null),\n      dataQuestion = _useState3[0],\n      setDataQuestion = _useState3[1];\n\n  var _useState4 = useState(false),\n      isGroup = _useState4[0],\n      setIsGroup = _useState4[1];\n\n  var _useState5 = useState(null),\n      addMinutes = _useState5[0],\n      setAddMinutes = _useState5[1];\n\n  var _useState6 = useState(false),\n      isModalVisible = _useState6[0],\n      setIsModalVisible = _useState6[1];\n\n  var _useState7 = useState([]),\n      listQuestionID = _useState7[0],\n      setListQuestionID = _useState7[1]; // Lấy tất cả ID đã có\n\n\n  var _useState8 = useState([]),\n      listGroupID = _useState8[0],\n      setListGroupID = _useState8[1]; // Lấy tất cả group ID đã có\n\n\n  var _useState9 = useState({\n    start: 0,\n    end: null\n  }),\n      spaceQuestion = _useState9[0],\n      setSpaceQuestion = _useState9[1];\n\n  var _useState10 = useState(1),\n      pageCurrent = _useState10[0],\n      setPageCurrent = _useState10[1];\n\n  var _useState11 = useState([]),\n      listPreview = _useState11[0],\n      setListPreview = _useState11[1];\n\n  var router = useRouter();\n\n  var _useDoingTest2 = useDoingTest(),\n      packageResult = _useDoingTest2.packageResult,\n      getPackageResult = _useDoingTest2.getPackageResult;\n\n  var _useWrap2 = useWrap(),\n      userInformation = _useWrap2.userInformation;\n\n  var _useState12 = useState(false),\n      loadingSubmit = _useState12[0],\n      setLoadingSubmit = _useState12[1];\n\n  var _useState13 = useState(false),\n      isLong = _useState13[0],\n      setIsLong = _useState13[1];\n\n  var _useState14 = useState(false),\n      isModalConfirm = _useState14[0],\n      setIsModalConfirm = _useState14[1];\n\n  var _useState15 = useState(false),\n      isModalSuccess = _useState15[0],\n      setIsModalSuccess = _useState15[1];\n\n  var _useState16 = useState(false),\n      openTimeUpModal = _useState16[0],\n      setOpenTimeUpModal = _useState16[1];\n\n  var _useState17 = useState(false),\n      checkTested = _useState17[0],\n      setCheckTested = _useState17[1];\n\n  var _useState18 = useState(false),\n      openPagi = _useState18[0],\n      setOpenPagi = _useState18[1]; // Use for list question in mobile\n\n\n  var _useState19 = useState(''),\n      child = _useState19[0],\n      setChild = _useState19[1];\n\n  var checkIsTested = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setIsLoading(true);\n              _context.prev = 1;\n              _context.next = 4;\n              return examAppointmentResultApi.checkIsTested(packageDetailID);\n\n            case 4:\n              res = _context.sent;\n\n              if (res.status == 200) {\n                if (res.data.data) {\n                  setCheckTested(true);\n                  setIsLoading(false);\n                } else {\n                  getListQuestion();\n                }\n              }\n\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](1);\n              setIsLoading(false);\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 8]]);\n    }));\n\n    return function checkIsTested() {\n      return _ref.apply(this, arguments);\n    };\n  }(); // --- GET LIST QUESTION ---\n\n\n  var getListQuestion = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var cloneListQuestionID, cloneListGroupID, res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              cloneListQuestionID = _toConsumableArray(listQuestionID);\n              console.log('listQuestionID: ', listQuestionID);\n              cloneListGroupID = _toConsumableArray(listGroupID);\n              setIsLoading(true);\n              _context2.prev = 4;\n              _context2.next = 7;\n              return examDetailApi.getAll(todoApi);\n\n            case 7:\n              res = _context2.sent;\n\n              if (res.status == 200) {\n                setDataQuestion(res.data.data);\n                console.log('res.data.data: ', res.data.data); // Add questionid to list\n\n                res.data.data.forEach(function (item, index) {\n                  if (item.Enable) {\n                    item.ExerciseGroupID !== 0 && cloneListGroupID.push(item.ExerciseGroupID);\n                    item.ExerciseTopic.forEach(function (ques) {\n                      console.log('ques - ', index + ' : ', ques);\n                      cloneListQuestionID.push(ques.ExerciseID);\n                    });\n                  }\n                }); // Calculate space question\n\n                checkSpaceQuestionAtFirst(res.data.data);\n                console.log('cloneListQuestionID: ', cloneListQuestionID);\n                setListGroupID(_toConsumableArray(cloneListGroupID));\n                setListQuestionID(_toConsumableArray(cloneListQuestionID));\n              }\n\n              if (res.status == 204) {\n                setDataQuestion([]);\n              }\n\n              _context2.next = 15;\n              break;\n\n            case 12:\n              _context2.prev = 12;\n              _context2.t0 = _context2[\"catch\"](4);\n              showNoti('danger', _context2.t0.message);\n\n            case 15:\n              _context2.prev = 15;\n              setIsLoading(false);\n              return _context2.finish(15);\n\n            case 18:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[4, 12, 15, 18]]);\n    }));\n\n    return function getListQuestion() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var checkSpaceQuestionAtFirst = function checkSpaceQuestionAtFirst(data) {\n    if (data[0].ExerciseGroupID !== 0) {\n      setIsGroup(true);\n      setSpaceQuestion({\n        start: 0,\n        end: 1\n      });\n    } else {\n      data.every(function (item, index) {\n        if (index == spaceQuestion.start + 1) {\n          if (item.ExerciseGroupID !== 0) {\n            setSpaceQuestion(_objectSpread(_objectSpread({}, spaceQuestion), {}, {\n              end: index\n            }));\n            return false;\n          } else {\n            setIsGroup(false);\n            setSpaceQuestion(_objectSpread(_objectSpread({}, spaceQuestion), {}, {\n              end: index + 1\n            }));\n            return false;\n          }\n        }\n\n        return true;\n      });\n    }\n  }; // -- CHECK IS SINGLE\n\n\n  var checkIsSingle = function checkIsSingle(indexCurrent) {\n    if (indexCurrent !== spaceQuestion.start && indexCurrent !== 0 && indexCurrent !== spaceQuestion.end) {\n      if (spaceQuestion.end - spaceQuestion.start == 2) {\n        if (indexCurrent > spaceQuestion.start && indexCurrent < spaceQuestion.end) {\n          indexCurrent = indexCurrent - 1;\n        }\n      }\n    }\n\n    dataQuestion.every(function (item, index) {\n      if (index == indexCurrent + 1) {\n        if (item.ExerciseGroupID !== 0) {\n          // nếu là group\n          setSpaceQuestion({\n            start: indexCurrent,\n            end: index\n          });\n          return false;\n        } else {\n          setSpaceQuestion({\n            start: indexCurrent,\n            end: index + 1\n          });\n          return false;\n        }\n      }\n\n      return true;\n    });\n\n    if (indexCurrent + 1 === dataQuestion.length) {\n      setSpaceQuestion({\n        start: indexCurrent,\n        end: indexCurrent + 1\n      });\n    }\n  }; // -- CHECK IS GROUP --\n\n\n  var checkIsGroup = function checkIsGroup(page) {\n    var exerciseID = listQuestionID[page - 1];\n    dataQuestion.every(function (item, index) {\n      // Kiểm tra nếu trong list Exercise Topic có exercise ID thì bắt đầu lấy được vị trí\n      if (item.ExerciseTopic.some(function (object) {\n        return object['ExerciseID'] == exerciseID;\n      })) {\n        // Kiểm tra ở vị trí này là câu hỏi nhóm hay đơn\n        if (item.ExerciseGroupID !== 0) {\n          // Nếu là nhóm\n          setSpaceQuestion({\n            start: index,\n            end: index + 1\n          });\n          setIsGroup(true);\n        } else {\n          setIsGroup(false);\n          checkIsSingle(index);\n        }\n\n        return false;\n      }\n\n      return true;\n    }); // return isGroup;\n  }; // --- ON CHAGNE PAGINATION\n\n\n  var onChange_pagination = function onChange_pagination(e, page) {\n    setPageCurrent(page);\n\n    if (e !== 'x') {\n      e.preventDefault();\n    } // setActiveID(listQuestionID[page - 1]);\n\n\n    getActiveID(listQuestionID[page - 1]);\n    checkIsGroup(page);\n  }; // - Previous page\n\n\n  var onChange_PreviousPage = function onChange_PreviousPage() {\n    listQuestionID.every(function (item, index) {\n      if (item === activeID) {\n        if (index == 0) {\n          setPageCurrent(listQuestionID.length);\n          checkIsGroup(listQuestionID.length);\n          getActiveID(listQuestionID[listQuestionID.length - 1]);\n        } else {\n          setPageCurrent(function (pageCurrent) {\n            return pageCurrent - 1;\n          });\n          checkIsGroup(pageCurrent - 1);\n          getActiveID(listQuestionID[index - 1]);\n        }\n\n        return false;\n      }\n\n      return true;\n    });\n  }; // - Next Page\n\n\n  var onChange_NextPage = function onChange_NextPage(e) {\n    listQuestionID.every(function (item, index) {\n      if (item === activeID) {\n        if (index === listQuestionID.length - 1) {\n          setPageCurrent(1);\n          checkIsGroup(1);\n          getActiveID(listQuestionID[0]);\n        } else {\n          setPageCurrent(function (pageCurrent) {\n            return pageCurrent + 1;\n          });\n          checkIsGroup(pageCurrent + 1);\n          getActiveID(listQuestionID[index + 1]);\n        }\n\n        return false;\n      }\n\n      return true;\n    });\n  }; // - Preview\n\n\n  function onChange_preview(e) {\n    var checked = e.target.checked;\n\n    if (!listPreview.includes(activeID)) {\n      listPreview.push(activeID);\n      setListPreview(_toConsumableArray(listPreview));\n    } else {\n      var newListPreview = listPreview.filter(function (item) {\n        return item -= activeID;\n      });\n      setListPreview(_toConsumableArray(newListPreview));\n    }\n  } // --- TIME UP ---\n\n\n  var timeUp = function timeUp() {\n    setOpenTimeUpModal(true);\n    setTimeout(function () {\n      setOpenTimeUpModal(false);\n      onSubmit_DoingTest();\n    }, 1500);\n  }; // --- ACTION SHOW MODAL ---\n\n\n  var handleOk = function handleOk() {\n    setIsModalVisible(false);\n  };\n\n  var handleCancel = function handleCancel() {\n    setIsModalVisible(false);\n  };\n\n  var remakeData = function remakeData() {\n    var _router$query;\n\n    var cloneData = _objectSpread({}, packageResult);\n\n    var dataSubmit = null;\n    cloneData.SetPackageResultDetailInfoList.forEach(function (item) {\n      if (item.Type == 3 || item.Type == 2 || item.Type == 5) {\n        item.SetPackageExerciseStudentInfoList.forEach(function (e) {\n          if (e.SetPackageExerciseAnswerStudentList.length == 0) {\n            e.SetPackageExerciseAnswerStudentList.push({\n              AnswerID: 0,\n              AnswerContent: '',\n              FileAudio: ''\n            });\n          }\n        });\n      }\n    }); // Kiểm tra bài test thuộc dạng nào (type)\n    // test - Kiểm tra đầu vào\n    // examination - Đề bán, đề thi\n    // check - Đề kiểm tra\n\n    switch (type) {\n      case 'video':\n        var dataTest = {\n          StudentID: null,\n          LessionID: null,\n          CourseExamresultDetailInfoList: []\n        };\n        dataTest.StudentID = cloneData.StudentID;\n        dataTest.LessionID = (_router$query = router.query) === null || _router$query === void 0 ? void 0 : _router$query.lessionID;\n        dataTest.CourseExamresultDetailInfoList = [];\n        cloneData.SetPackageResultDetailInfoList.forEach(function (ques) {\n          ques.CourseExamExerciseStudentInfoList = _toConsumableArray(ques.SetPackageExerciseStudentInfoList);\n          dataTest.CourseExamresultDetailInfoList.push(ques);\n          dataTest.CourseExamresultDetailInfoList.forEach(function (item) {\n            item.CourseExamExerciseStudentInfoList.forEach(function (ans) {\n              ans.CourseExamExerciseAnswerStudentList = _toConsumableArray(ans.SetPackageExerciseAnswerStudentList);\n            });\n          });\n        });\n        dataSubmit = _objectSpread({}, dataTest);\n        break;\n\n      case 'test':\n        var dataTestFirst = {\n          StudentID: null,\n          ExamAppointmentID: null,\n          ExamAppointmentResultDetailInfoList: []\n        };\n        dataTestFirst.StudentID = cloneData.StudentID;\n        dataTestFirst.ExamAppointmentID = cloneData.SetPackageDetailID;\n        dataTestFirst.ExamAppointmentResultDetailInfoList = [];\n        cloneData.SetPackageResultDetailInfoList.forEach(function (ques) {\n          ques.ExamAppointmentExerciseStudentInfoList = _toConsumableArray(ques.SetPackageExerciseStudentInfoList);\n          dataTestFirst.ExamAppointmentResultDetailInfoList.push(ques);\n          dataTestFirst.ExamAppointmentResultDetailInfoList.forEach(function (item) {\n            item.ExamAppointmentExerciseStudentInfoList.forEach(function (ans) {\n              ans.ExamAppointmentExerciseAnswerStudentList = _toConsumableArray(ans.SetPackageExerciseAnswerStudentList);\n            });\n          });\n        });\n        dataSubmit = _objectSpread({}, dataTestFirst);\n        break;\n\n      case 'check':\n        var dataCheck = {\n          StudentID: null,\n          CourseID: null,\n          CurriculumDetailID: parseInt(CurriculumDetailID),\n          CourseExamresultDetailInfoList: []\n        };\n        dataCheck.StudentID = cloneData.StudentID;\n        dataCheck.CourseID = cloneData.SetPackageDetailID;\n        dataCheck.CourseExamresultDetailInfoList = [];\n        cloneData.SetPackageResultDetailInfoList.forEach(function (ques) {\n          ques.CourseExamExerciseStudentInfoList = _toConsumableArray(ques.SetPackageExerciseStudentInfoList);\n          dataCheck.CourseExamresultDetailInfoList.push(ques);\n          dataCheck.CourseExamresultDetailInfoList.forEach(function (item) {\n            item.CourseExamExerciseStudentInfoList.forEach(function (ans) {\n              ans.CourseExamExerciseAnswerStudentList = _toConsumableArray(ans.SetPackageExerciseAnswerStudentList);\n            });\n          });\n        });\n        dataSubmit = _objectSpread({}, dataCheck);\n        break;\n\n      case 'examination':\n        dataSubmit = _objectSpread({}, cloneData);\n        break;\n\n      default:\n        break;\n    }\n\n    return dataSubmit;\n  }; // ===== ON SUBMIT DOING TEST =====\n\n\n  var returnRouter = function returnRouter(data) {\n    var _router$query2, _router$query3, _router$query4, _router$query5;\n\n    var obj = {};\n\n    switch (type) {\n      case 'test':\n        obj = {\n          pathname: '/customer/service/service-test-student/detail/[slug]',\n          query: {\n            slug: data.ExamAppointmentID,\n            examID: data.ExamTopicID,\n            ExamAppointmentResultID: data.ID\n          }\n        };\n        break;\n\n      case 'check':\n        obj = {\n          pathname: '/course-exam/detail/[slug]',\n          query: {\n            slug: data.ID,\n            examID: data.ExamTopicID,\n            packageDetailID: (_router$query2 = router.query) === null || _router$query2 === void 0 ? void 0 : _router$query2.packageDetailID\n          }\n        };\n        break;\n\n      default:\n        obj = {\n          pathname: (_router$query3 = router.query) !== null && _router$query3 !== void 0 && _router$query3.isExercise ? '/course/exercise/result/[slug]' : '/package/package-result-student/detail/[slug]',\n          query: {\n            slug: (_router$query4 = router.query) !== null && _router$query4 !== void 0 && _router$query4.isExercise ? data.HomeworkID : data.ID,\n            examID: data.ExamTopicID,\n            packageDetailID: (_router$query5 = router.query) === null || _router$query5 === void 0 ? void 0 : _router$query5.packageDetailID\n          }\n        };\n        break;\n    }\n\n    return obj;\n  };\n\n  var onSubmit_DoingTest = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var _router$query6;\n\n      var dataSubmit, res;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              console.log('onSubmit_DoingTest');\n              console.log('type: ', type);\n              setIsModalConfirm(false);\n              setLoadingSubmit(true);\n              dataSubmit = remakeData();\n              res = null;\n              _context3.prev = 6;\n              _context3.t0 = type;\n              _context3.next = _context3.t0 === 'test' ? 10 : _context3.t0 === 'check' ? 14 : _context3.t0 === 'examination' ? 18 : 29;\n              break;\n\n            case 10:\n              _context3.next = 12;\n              return examAppointmentResultApi.add(dataSubmit);\n\n            case 12:\n              res = _context3.sent;\n              return _context3.abrupt(\"break\", 30);\n\n            case 14:\n              _context3.next = 16;\n              return courseExamApi.add(dataSubmit);\n\n            case 16:\n              res = _context3.sent;\n              return _context3.abrupt(\"break\", 30);\n\n            case 18:\n              if (!((_router$query6 = router.query) !== null && _router$query6 !== void 0 && _router$query6.isExercise)) {\n                _context3.next = 24;\n                break;\n              }\n\n              _context3.next = 21;\n              return homeworkResultApi.add(_objectSpread({}, dataSubmit));\n\n            case 21:\n              _context3.t1 = _context3.sent;\n              _context3.next = 27;\n              break;\n\n            case 24:\n              _context3.next = 26;\n              return doingTestApi.add(dataSubmit);\n\n            case 26:\n              _context3.t1 = _context3.sent;\n\n            case 27:\n              res = _context3.t1;\n              return _context3.abrupt(\"break\", 30);\n\n            case 29:\n              return _context3.abrupt(\"break\", 30);\n\n            case 30:\n              if (res.status === 200) {\n                setIsModalSuccess(true);\n                setTimeout(function () {\n                  router.push(returnRouter(res.data.data));\n                }, 1000);\n              }\n\n              _context3.next = 36;\n              break;\n\n            case 33:\n              _context3.prev = 33;\n              _context3.t2 = _context3[\"catch\"](6);\n              showNoti('danger', _context3.t2.message);\n\n            case 36:\n              _context3.prev = 36;\n              setLoadingSubmit(false);\n              return _context3.finish(36);\n\n            case 39:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[6, 33, 36, 39]]);\n    }));\n\n    return function onSubmit_DoingTest() {\n      return _ref3.apply(this, arguments);\n    };\n  }(); // Return text confirm\n\n\n  var returnTextConfirm = function returnTextConfirm() {\n    var textConfirm = 'Bạn có chắc muốn nộp bài?';\n\n    if (listPicked.length < listQuestionID.length) {\n      var numberOfQuestion = listQuestionID.length - listPicked.length;\n      textConfirm = \"B\\u1EA1n c\\xF2n \".concat(numberOfQuestion, \" c\\xE2u ch\\u01B0a l\\xE0m. B\\u1EA1n c\\xF3 ch\\u1EAFc mu\\u1ED1n n\\u1ED9p b\\xE0i?\");\n    }\n\n    return textConfirm;\n  };\n\n  var handleClick_openPagi = function handleClick_openPagi() {\n    setOpenPagi(!openPagi);\n  }; // ===== ALL USE EFFECT ====\n\n\n  useEffect(function () {\n    if (!isDone) {\n      if (type === 'test') {\n        checkIsTested();\n      } else {\n        getListQuestion();\n      }\n\n      packageResult.SetPackageDetailID = parseInt(packageDetailID);\n      getPackageResult(_objectSpread({}, packageResult));\n    } else {\n      setDataQuestion(dataDoneTest);\n      checkSpaceQuestionAtFirst(dataDoneTest);\n      setListQuestionID(listIDFromDoneTest);\n      setListGroupID(listGroupIDFromDoneTest);\n    }\n  }, []);\n  useEffect(function () {\n    if ((listQuestionID === null || listQuestionID === void 0 ? void 0 : listQuestionID.length) > 0) {\n      getListQuestionID(listQuestionID);\n      getActiveID(listQuestionID[0]);\n    }\n  }, [listQuestionID]);\n  useEffect(function () {\n    if (userInformation) {\n      getPackageResult(_objectSpread(_objectSpread({}, packageResult), {}, {\n        SetPackageDetailID: parseInt(packageDetailID),\n        StudentID: userInformation.UserInformationID\n      }));\n    }\n  }, [userInformation]);\n  useEffect(function () {\n    if (!isDone) {\n      if ((dataQuestion === null || dataQuestion === void 0 ? void 0 : dataQuestion.length) > 0) {\n        dataQuestion.forEach(function (item, index) {\n          var listQuestion = [];\n          item.ExerciseTopic.forEach(function (ques, index) {\n            listQuestion.push({\n              ExerciseID: ques.ExerciseID,\n              SetPackageExerciseAnswerStudentList: []\n            });\n          });\n          packageResult.SetPackageResultDetailInfoList.push({\n            ExamTopicDetailID: item.ID,\n            ExerciseGroupID: item.ExerciseGroupID,\n            Level: item.Level,\n            Type: item.Type,\n            SkillID: item.SkillID,\n            SetPackageExerciseStudentInfoList: listQuestion\n          });\n          getPackageResult(_objectSpread({}, packageResult));\n        });\n      }\n    }\n\n    if (dataQuestion !== null && dataQuestion !== undefined) {\n      onChange_pagination('x', 1);\n    }\n  }, [dataQuestion]);\n  useEffect(function () {\n    if (infoExam && dataQuestion) {\n      // Run time\n      var add_minutes = function (dt, minutes) {\n        return new Date(dt.getTime() + minutes * 60000);\n      }(new Date(), infoExam.Time);\n\n      setAddMinutes(add_minutes);\n    }\n  }, [infoExam, dataQuestion]);\n\n  var alertUser = function alertUser(e) {\n    e.preventDefault();\n    e.returnValue = '';\n  };\n\n  useEffect(function () {\n    var testFooter = document.getElementById('test-footer');\n\n    if (testFooter) {\n      var heightFooter = testFooter.offsetHeight;\n\n      if (heightFooter > 70) {\n        setIsLong(true);\n      }\n    }\n\n    if (!dataDoneTest) {\n      if (!isModalSuccess) {\n        window.addEventListener('beforeunload', alertUser);\n        return function () {\n          window.removeEventListener('beforeunload', alertUser);\n        };\n      }\n    }\n  });\n  useEffect(function () {\n    if (activeID) {\n      var index = listQuestionID.findIndex(function (id) {\n        return id === activeID;\n      });\n      setPageCurrent(index + 1);\n    }\n  }, [activeID]);\n  var audio = useRef(null);\n\n  var convertData = function convertData(json) {\n    var stringified = JSON.stringify(json);\n    stringified = stringified.replace('SetPackageResultDetailInfoList', 'HomeworkResultDetailInfoList');\n\n    while (stringified.indexOf('SetPackageExerciseStudentInfoList') !== -1 || stringified.indexOf('SetPackageExerciseAnswerStudentList') !== -1) {\n      stringified = stringified.replace('SetPackageExerciseStudentInfoList', 'HomeworkExerciseStudentInfoList');\n      stringified = stringified.replace('SetPackageExerciseAnswerStudentList', 'HomeworkExerciseAnswerStudentList');\n    }\n\n    var jsonObject = JSON.parse(stringified);\n    return jsonObject;\n  };\n\n  var onSubmitExercise = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var dataSubmit, res;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              setIsModalConfirm(false);\n              setLoadingSubmit(true);\n              dataSubmit = remakeData();\n              console.log('dataSubmit: ', dataSubmit);\n              res = null;\n              _context4.prev = 5;\n              _context4.next = 8;\n              return homeworkResultApi.add(convertData(_objectSpread(_objectSpread({}, dataSubmit), {}, {\n                HomeworkID: dataSubmit.SetPackageDetailID\n              })));\n\n            case 8:\n              res = _context4.sent;\n\n              if (res.status === 200) {\n                setIsModalSuccess(true);\n                setTimeout(function () {\n                  router.push(returnRouter(res.data.data[0]));\n                }, 1000);\n              }\n\n              _context4.next = 15;\n              break;\n\n            case 12:\n              _context4.prev = 12;\n              _context4.t0 = _context4[\"catch\"](5);\n              showNoti('danger', _context4.t0.message);\n\n            case 15:\n              _context4.prev = 15;\n              setLoadingSubmit(false);\n              return _context4.finish(15);\n\n            case 18:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[5, 12, 15, 18]]);\n    }));\n\n    return function onSubmitExercise() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var onSubmitVideoEx = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      var dataSubmit, res, _router$query7;\n\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              setIsModalConfirm(false);\n              setLoadingSubmit(true);\n              dataSubmit = remakeData();\n              res = null;\n              console.log('SUBMIT: ', convertData(_objectSpread(_objectSpread({}, dataSubmit), {}, {\n                HomeworkID: dataSubmit.SetPackageDetailID\n              })));\n              _context5.prev = 5;\n              _context5.next = 8;\n              return homeworkResultApi.Video(_objectSpread(_objectSpread({}, convertData(_objectSpread(_objectSpread({}, dataSubmit), {}, {\n                HomeworkID: dataSubmit.SetPackageDetailID\n              }))), {}, {\n                ExamTopicID: (_router$query7 = router.query) === null || _router$query7 === void 0 ? void 0 : _router$query7.examID\n              }));\n\n            case 8:\n              res = _context5.sent;\n\n              if (res.status === 200) {\n                window.close();\n              }\n\n              _context5.next = 15;\n              break;\n\n            case 12:\n              _context5.prev = 12;\n              _context5.t0 = _context5[\"catch\"](5);\n              showNoti('danger', _context5.t0.message);\n\n            case 15:\n              _context5.prev = 15;\n              setLoadingSubmit(false);\n              return _context5.finish(15);\n\n            case 18:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, null, [[5, 12, 15, 18]]);\n    }));\n\n    return function onSubmitVideoEx() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var isDrag = function isDrag() {\n    var flag = 0;\n\n    for (var i = 0; i < dataQuestion.length; i++) {\n      for (var j = 0; j < ((_dataQuestion$i = dataQuestion[i]) === null || _dataQuestion$i === void 0 ? void 0 : _dataQuestion$i.ExerciseTopic.length); j++) {\n        var _dataQuestion$i, _dataQuestion$i2, _dataQuestion$i2$Exer, _dataQuestion$i3;\n\n        if (((_dataQuestion$i2 = dataQuestion[i]) === null || _dataQuestion$i2 === void 0 ? void 0 : (_dataQuestion$i2$Exer = _dataQuestion$i2.ExerciseTopic[j]) === null || _dataQuestion$i2$Exer === void 0 ? void 0 : _dataQuestion$i2$Exer.ExerciseID) == activeID && ((_dataQuestion$i3 = dataQuestion[i]) === null || _dataQuestion$i3 === void 0 ? void 0 : _dataQuestion$i3.Type) == 2) {\n          flag = 0;\n          return true;\n        }\n      }\n    }\n\n    return false;\n  };\n\n  console.log('listQuestionID: ', listQuestionID);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"test-wrapper doing-test \".concat(isDone && 'done-test'),\n    children: [/*#__PURE__*/_jsxDEV(TimeUpModal, {\n      isVisible: openTimeUpModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 678,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Th\\xF4ng b\\xE1o\",\n      footer: null,\n      className: \"\",\n      visible: isModalSuccess,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-submit-success-test\",\n        children: [/*#__PURE__*/_jsxDEV(CheckCircleOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 682,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text\",\n          children: \"N\\u1ED9p b\\xE0i th\\xE0nh c\\xF4ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 683,\n          columnNumber: 6\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 681,\n        columnNumber: 5\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 680,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(DecideModal, {\n      isOpen: isModalConfirm,\n      isCancel: function isCancel() {\n        return setIsModalConfirm(false);\n      },\n      isOk: function isOk() {\n        var _router$query8;\n\n        if (((_router$query8 = router.query) === null || _router$query8 === void 0 ? void 0 : _router$query8.type) == 'video') {\n          onSubmitVideoEx();\n        } else {\n          var _router$query9;\n\n          ((_router$query9 = router.query) === null || _router$query9 === void 0 ? void 0 : _router$query9.isExercise) == 'true' ? onSubmitExercise() : onSubmit_DoingTest();\n        }\n      },\n      content: returnTextConfirm()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 688,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Ch\\xFA \\xFD!\",\n      visible: isModalVisible,\n      okText: \"\\u0110\\u1ED3ng \\xFD\",\n      cancelText: \"\\u0110\\xF3ng\",\n      onOk: handleOk,\n      onCancel: handleCancel,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontWeight: 500\n        },\n        children: \"B\\u1EA1n ch\\u01B0a ch\\u1ECDn \\u0111\\u1EC1 thi. Chuy\\u1EC3n \\u0111\\u1EBFn trang b\\u1ED9 \\u0111\\u1EC1?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 703,\n        columnNumber: 5\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 702,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(Card, {\n      className: \"test-card\",\n      title: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"test-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"test-title-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"name-type-test\",\n            children: infoExam === null || infoExam === void 0 ? void 0 : infoExam.Name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 712,\n            columnNumber: 8\n          }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"info-user\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: infoExam === null || infoExam === void 0 ? void 0 : infoExam.ProgramName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 714,\n              columnNumber: 9\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 713,\n            columnNumber: 8\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 711,\n          columnNumber: 7\n        }, _this), infoExam !== null && (infoExam === null || infoExam === void 0 ? void 0 : infoExam.Audio) !== undefined && infoExam.Audio !== null && infoExam.Audio !== '' && /*#__PURE__*/_jsxDEV(\"audio\", {\n          className: \"none-poiter hide-on-mobile\",\n          autoPlay: true,\n          controls: true,\n          ref: audio,\n          onEnded: function onEnded() {},\n          children: /*#__PURE__*/_jsxDEV(\"source\", {\n            src: infoExam.Audio,\n            type: \"audio/mpeg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 720,\n            columnNumber: 9\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 719,\n          columnNumber: 8\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 710,\n        columnNumber: 6\n      }, _this),\n      extra: infoExam && (dataQuestion === null || dataQuestion === void 0 ? void 0 : dataQuestion.length) > 0 && addMinutes && /*#__PURE__*/_jsxDEV(CountDown, {\n        addMinutes: addMinutes,\n        onFinish: function onFinish() {\n          return !isModalVisible && timeUp();\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 728,\n        columnNumber: 20\n      }, _this),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '100%',\n          height: '105%',\n          display: 'flex',\n          flexDirection: 'column'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '100%',\n            height: '90%'\n          },\n          children: dataQuestion !== null && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: isDrag() ? 'test-body' : 'test-body',\n              children: [loadingSubmit && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"loading-submit text-center\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-100 text-center\",\n                  children: [/*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 739,\n                    columnNumber: 13\n                  }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mt-3\",\n                    style: {\n                      fontStyle: 'italic',\n                      fontWeight: 500\n                    },\n                    children: \"\\u0110ang ti\\u1EBFn h\\xE0nh n\\u1ED9p b\\xE0i...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 740,\n                    columnNumber: 13\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 738,\n                  columnNumber: 12\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 737,\n                columnNumber: 11\n              }, _this), isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-100 mt-4 \",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-50\",\n                  children: [/*#__PURE__*/_jsxDEV(Skeleton, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 750,\n                    columnNumber: 13\n                  }, _this), /*#__PURE__*/_jsxDEV(Skeleton, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 751,\n                    columnNumber: 13\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 749,\n                  columnNumber: 12\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 748,\n                columnNumber: 11\n              }, _this) : (dataQuestion === null || dataQuestion === void 0 ? void 0 : dataQuestion.length) > 0 ? dataQuestion.slice(spaceQuestion.start, spaceQuestion.end).map(function (item, index) {\n                if (isGroup) {\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"doingtest-group\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"\",\n                      style: {\n                        height: '100%'\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col-lg-6 col-md-12 col-sm-12 col-12 pl-0 pl-0-mobile\",\n                        style: {\n                          height: '100%'\n                        },\n                        children: /*#__PURE__*/_jsxDEV(ListQuestion, {\n                          setChild: setChild,\n                          dataQuestion: item,\n                          listQuestionID: listQuestionID,\n                          openPagi: openPagi\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 761,\n                          columnNumber: 17\n                        }, _this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 760,\n                        columnNumber: 16\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 759,\n                      columnNumber: 15\n                    }, _this)\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 758,\n                    columnNumber: 14\n                  }, _this);\n                } else {\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"doingtest-single\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"row\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col-12\",\n                        children: /*#__PURE__*/_jsxDEV(ListQuestion, {\n                          dataQuestion: item,\n                          listQuestionID: listQuestionID\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 771,\n                          columnNumber: 17\n                        }, _this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 770,\n                        columnNumber: 16\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 769,\n                      columnNumber: 15\n                    }, _this)\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 768,\n                    columnNumber: 14\n                  }, _this);\n                }\n              }) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-100 text-center\",\n                children: !checkTested ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    fontWeight: 500\n                  },\n                  children: \"\\u0110\\u1EC1 thi n\\xE0y ch\\u01B0a c\\xF3 c\\xE2u h\\u1ECFi\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 781,\n                  columnNumber: 13\n                }, _this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      fontWeight: 500\n                    },\n                    children: \"B\\u1EA1n \\u0111\\xE3 l\\xE0m \\u0111\\u1EC1 test n\\xE0y r\\u1ED3i\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 784,\n                    columnNumber: 14\n                  }, _this), /*#__PURE__*/_jsxDEV(Link, {\n                    href: {\n                      pathname: '/customer/service/service-test-student'\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"a\", {\n                      className: \"btn btn-warning\",\n                      children: \"Tho\\xE1t ra\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 790,\n                      columnNumber: 15\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 785,\n                    columnNumber: 14\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 783,\n                  columnNumber: 13\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 779,\n                columnNumber: 11\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 735,\n              columnNumber: 9\n            }, _this)\n          }, void 0, false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 732,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(Modal, {\n          title: \"Basic Modal\",\n          visible: false,\n          onOk: handleClick_openPagi,\n          onCancel: handleClick_openPagi,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: 0\n            },\n            children: (dataQuestion === null || dataQuestion === void 0 ? void 0 : dataQuestion.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"footer-pagination row-pagination \".concat(openPagi ? 'show-mobile' : ''),\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"close-icon\",\n                onClick: handleClick_openPagi,\n                children: /*#__PURE__*/_jsxDEV(CloseOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 806,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 805,\n                columnNumber: 10\n              }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"pagi-name\",\n                children: \"Danh s\\xE1ch c\\xE2u h\\u1ECFi\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 808,\n                columnNumber: 10\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"box-preview\",\n                children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                  checked: listPreview.includes(activeID) ? true : false,\n                  onChange: onChange_preview,\n                  children: \"Preview\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 810,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 809,\n                columnNumber: 10\n              }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"pagi-btn previous\",\n                onClick: onChange_PreviousPage,\n                children: /*#__PURE__*/_jsxDEV(LeftOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 815,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 814,\n                columnNumber: 10\n              }, _this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"list-answer\",\n                children: (listQuestionID === null || listQuestionID === void 0 ? void 0 : listQuestionID.length) > 0 && listQuestionID.map(function (questionID, index) {\n                  return /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: \"item \",\n                    value: questionID,\n                    style: {\n                      marginBottom: isLong ? '10px' : ''\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"a\", {\n                      href: \"\",\n                      onClick: function onClick(e) {\n                        return onChange_pagination(e, index + 1);\n                      },\n                      className: \"\\n                      \\t\\t\".concat(questionID == activeID ? 'activeDoing' : '', \" \").concat(listPicked.includes(questionID) ? 'checked' : '', \" \").concat(listPreview.includes(questionID) ? 'checked_preview' : ''),\n                      children: index + 1\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 821,\n                      columnNumber: 14\n                    }, _this)\n                  }, questionID, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 820,\n                    columnNumber: 13\n                  }, _this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 817,\n                columnNumber: 10\n              }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"pagi-btn next\",\n                onClick: onChange_NextPage,\n                children: /*#__PURE__*/_jsxDEV(RightOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 835,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 834,\n                columnNumber: 10\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 804,\n              columnNumber: 9\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 802,\n            columnNumber: 7\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 801,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: -100\n          },\n          children: (dataQuestion === null || dataQuestion === void 0 ? void 0 : dataQuestion.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: !openPagi ? 'test-footer' : 'test-footer-mobile',\n            id: \"test-footer\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pagination-mobile \",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"listQuestion\",\n                onClick: handleClick_openPagi,\n                children: /*#__PURE__*/_jsxDEV(ProfileFilled, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 847,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 846,\n                columnNumber: 10\n              }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"pagi-btn previous\",\n                onClick: onChange_PreviousPage,\n                children: /*#__PURE__*/_jsxDEV(LeftOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 850,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 849,\n                columnNumber: 10\n              }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"pagi-btn next\",\n                onClick: onChange_NextPage,\n                children: /*#__PURE__*/_jsxDEV(RightOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 853,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 852,\n                columnNumber: 10\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 845,\n              columnNumber: 9\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"footer-pagination row-pagination \".concat(openPagi ? 'show-mobile' : ''),\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"close-icon\",\n                onClick: handleClick_openPagi,\n                children: /*#__PURE__*/_jsxDEV(CloseOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 859,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 858,\n                columnNumber: 10\n              }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"pagi-name\",\n                children: \"Danh s\\xE1ch c\\xE2u h\\u1ECFi\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 862,\n                columnNumber: 10\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"box-previe\",\n                children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                  checked: listPreview.includes(activeID) ? true : false,\n                  onChange: onChange_preview,\n                  children: \"Preview\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 865,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 864,\n                columnNumber: 10\n              }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"pagi-btn previous\",\n                onClick: onChange_PreviousPage,\n                children: /*#__PURE__*/_jsxDEV(LeftOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 871,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 870,\n                columnNumber: 10\n              }, _this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"list-answer\",\n                style: {\n                  marginTop: -5\n                },\n                children: (listQuestionID === null || listQuestionID === void 0 ? void 0 : listQuestionID.length) > 0 && listQuestionID.map(function (questionID, index) {\n                  return /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: \"item\",\n                    value: questionID,\n                    style: {\n                      marginBottom: 5\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"a\", {\n                      href: \"\",\n                      onClick: function onClick(e) {\n                        return onChange_pagination(e, index + 1);\n                      },\n                      className: \"\".concat(questionID == activeID ? 'activeDoing' : '').concat(listPicked.includes(questionID) ? ' checked' : '').concat(listPreview.includes(questionID) ? ' checked_preview' : ''),\n                      children: index + 1\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 878,\n                      columnNumber: 14\n                    }, _this)\n                  }, questionID, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 877,\n                    columnNumber: 13\n                  }, _this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 874,\n                columnNumber: 10\n              }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"pagi-btn next\",\n                onClick: onChange_NextPage,\n                children: /*#__PURE__*/_jsxDEV(RightOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 892,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 891,\n                columnNumber: 10\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 857,\n              columnNumber: 9\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"footer-submit text-right\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-primary\",\n                onClick: function onClick() {\n                  return !dataDoneTest ? setIsModalConfirm(true) : closeMainTest && closeMainTest();\n                },\n                children: !dataDoneTest ? 'Nộp bài' : 'Đóng'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 896,\n                columnNumber: 10\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 895,\n              columnNumber: 9\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 844,\n            columnNumber: 8\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 842,\n          columnNumber: 6\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 731,\n        columnNumber: 5\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 707,\n      columnNumber: 4\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 676,\n    columnNumber: 3\n  }, _this);\n};\n\n_s(MainTest, \"j+09x2i5axQdPH/3lZw0PjiosA8=\", false, function () {\n  return [useDoingTest, useWrap, useRouter, useDoingTest, useWrap];\n});\n\n_c3 = MainTest;\nexport default MainTest;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"ListQuestion$dynamic\");\n$RefreshReg$(_c2, \"ListQuestion\");\n$RefreshReg$(_c3, \"MainTest\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/DoingTest/MainTest.tsx"],"names":["CheckCircleOutlined","CloseOutlined","LeftOutlined","ProfileFilled","RightOutlined","Card","Checkbox","Modal","Skeleton","Spin","dynamic","Link","useRouter","React","useEffect","useRef","useState","doingTestApi","examAppointmentResultApi","examDetailApi","homeworkResultApi","courseExamApi","CountDown","DecideModal","useDoingTest","useWrap","TimeUpModal","ListQuestion","loading","ssr","MainTest","props","getListQuestionID","getActiveID","activeID","listPicked","examID","infoExam","packageDetailID","dataDoneTest","isDone","listIDFromDoneTest","listGroupIDFromDoneTest","closeMainTest","type","CurriculumDetailID","listTodoApi","pageIndex","pageSize","ExamTopicID","showNoti","todoApi","setTodoApi","isLoading","setIsLoading","dataQuestion","setDataQuestion","isGroup","setIsGroup","addMinutes","setAddMinutes","isModalVisible","setIsModalVisible","listQuestionID","setListQuestionID","listGroupID","setListGroupID","start","end","spaceQuestion","setSpaceQuestion","pageCurrent","setPageCurrent","listPreview","setListPreview","router","packageResult","getPackageResult","userInformation","loadingSubmit","setLoadingSubmit","isLong","setIsLong","isModalConfirm","setIsModalConfirm","isModalSuccess","setIsModalSuccess","openTimeUpModal","setOpenTimeUpModal","checkTested","setCheckTested","openPagi","setOpenPagi","child","setChild","checkIsTested","res","status","data","getListQuestion","cloneListQuestionID","console","log","cloneListGroupID","getAll","forEach","item","index","Enable","ExerciseGroupID","push","ExerciseTopic","ques","ExerciseID","checkSpaceQuestionAtFirst","message","every","checkIsSingle","indexCurrent","length","checkIsGroup","page","exerciseID","some","object","onChange_pagination","e","preventDefault","onChange_PreviousPage","onChange_NextPage","onChange_preview","checked","target","includes","newListPreview","filter","timeUp","setTimeout","onSubmit_DoingTest","handleOk","handleCancel","remakeData","cloneData","dataSubmit","SetPackageResultDetailInfoList","Type","SetPackageExerciseStudentInfoList","SetPackageExerciseAnswerStudentList","AnswerID","AnswerContent","FileAudio","dataTest","StudentID","LessionID","CourseExamresultDetailInfoList","query","lessionID","CourseExamExerciseStudentInfoList","ans","CourseExamExerciseAnswerStudentList","dataTestFirst","ExamAppointmentID","ExamAppointmentResultDetailInfoList","SetPackageDetailID","ExamAppointmentExerciseStudentInfoList","ExamAppointmentExerciseAnswerStudentList","dataCheck","CourseID","parseInt","returnRouter","obj","pathname","slug","ExamAppointmentResultID","ID","isExercise","HomeworkID","add","returnTextConfirm","textConfirm","numberOfQuestion","handleClick_openPagi","UserInformationID","listQuestion","ExamTopicDetailID","Level","SkillID","undefined","add_minutes","dt","minutes","Date","getTime","Time","alertUser","returnValue","testFooter","document","getElementById","heightFooter","offsetHeight","window","addEventListener","removeEventListener","findIndex","id","audio","convertData","json","stringified","JSON","stringify","replace","indexOf","jsonObject","parse","onSubmitExercise","onSubmitVideoEx","Video","close","isDrag","flag","i","j","fontWeight","Name","ProgramName","Audio","width","height","display","flexDirection","fontStyle","slice","map","marginBottom","questionID","marginTop"],"mappings":"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","sourcesContent":["import { CheckCircleOutlined, CloseOutlined, LeftOutlined, ProfileFilled, RightOutlined } from '@ant-design/icons'\r\nimport { Card, Checkbox, Modal, Skeleton, Spin } from 'antd'\r\nimport dynamic from 'next/dynamic'\r\nimport Link from 'next/link'\r\nimport { useRouter } from 'next/router'\r\nimport React, { useEffect, useRef, useState } from 'react'\r\nimport { doingTestApi, examAppointmentResultApi, examDetailApi } from '~/apiBase'\r\nimport { homeworkResultApi } from '~/apiBase/course-detail/home-work-result'\r\nimport { courseExamApi } from '~/apiBase/package/course-exam'\r\nimport CountDown from '~/components/Elements/CountDown/CountDown'\r\nimport DecideModal from '~/components/Elements/DecideModal'\r\nimport { useDoingTest } from '~/context/useDoingTest'\r\nimport { useWrap } from '~/context/wrap'\r\nimport TimeUpModal from './TimeUpModal'\r\n\r\nconst ListQuestion = dynamic(() => import('~/components/Global/DoingTest/ListQuestion'), {\r\n\tloading: () => <p>...</p>,\r\n\tssr: false\r\n})\r\n\r\nconst MainTest = (props) => {\r\n\tconst { getListQuestionID, getActiveID, activeID, listPicked } = useDoingTest()\r\n\tconst {\r\n\t\texamID,\r\n\t\tinfoExam,\r\n\t\tpackageDetailID,\r\n\t\tdataDoneTest,\r\n\t\tisDone,\r\n\t\tlistIDFromDoneTest,\r\n\t\tlistGroupIDFromDoneTest,\r\n\t\tcloseMainTest,\r\n\t\ttype,\r\n\t\tCurriculumDetailID\r\n\t} = props\r\n\r\n\tconst listTodoApi = {\r\n\t\tpageIndex: 1,\r\n\t\tpageSize: 999,\r\n\t\tExamTopicID: examID\r\n\t}\r\n\r\n\tconst { showNoti } = useWrap()\r\n\tconst [todoApi, setTodoApi] = useState(listTodoApi)\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [dataQuestion, setDataQuestion] = useState<IExamDetail[]>(null)\r\n\tconst [isGroup, setIsGroup] = useState(false)\r\n\tconst [addMinutes, setAddMinutes] = useState(null)\r\n\tconst [isModalVisible, setIsModalVisible] = useState(false)\r\n\tconst [listQuestionID, setListQuestionID] = useState([]) // Lấy tất cả ID đã có\r\n\tconst [listGroupID, setListGroupID] = useState([]) // Lấy tất cả group ID đã có\r\n\tconst [spaceQuestion, setSpaceQuestion] = useState({ start: 0, end: null })\r\n\tconst [pageCurrent, setPageCurrent] = useState<number>(1)\r\n\tconst [listPreview, setListPreview] = useState<Array<number>>([])\r\n\tconst router = useRouter()\r\n\tconst { packageResult, getPackageResult } = useDoingTest()\r\n\tconst { userInformation } = useWrap()\r\n\tconst [loadingSubmit, setLoadingSubmit] = useState(false)\r\n\tconst [isLong, setIsLong] = useState(false)\r\n\tconst [isModalConfirm, setIsModalConfirm] = useState(false)\r\n\tconst [isModalSuccess, setIsModalSuccess] = useState(false)\r\n\tconst [openTimeUpModal, setOpenTimeUpModal] = useState(false)\r\n\tconst [checkTested, setCheckTested] = useState(false)\r\n\tconst [openPagi, setOpenPagi] = useState(false) // Use for list question in mobile\r\n\tconst [child, setChild] = useState<any>('')\r\n\r\n\tconst checkIsTested = async () => {\r\n\t\tsetIsLoading(true)\r\n\t\ttry {\r\n\t\t\tlet res = await examAppointmentResultApi.checkIsTested(packageDetailID)\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tif (res.data.data) {\r\n\t\t\t\t\tsetCheckTested(true)\r\n\t\t\t\t\tsetIsLoading(false)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgetListQuestion()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tsetIsLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\t// --- GET LIST QUESTION ---\r\n\tconst getListQuestion = async () => {\r\n\t\tlet cloneListQuestionID = [...listQuestionID]\r\n\r\n\t\tconsole.log('listQuestionID: ', listQuestionID)\r\n\r\n\t\tlet cloneListGroupID = [...listGroupID]\r\n\t\tsetIsLoading(true)\r\n\t\ttry {\r\n\t\t\tlet res = await examDetailApi.getAll(todoApi)\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tsetDataQuestion(res.data.data)\r\n\r\n\t\t\t\tconsole.log('res.data.data: ', res.data.data)\r\n\r\n\t\t\t\t// Add questionid to list\r\n\t\t\t\tres.data.data.forEach((item, index) => {\r\n\t\t\t\t\tif (item.Enable) {\r\n\t\t\t\t\t\titem.ExerciseGroupID !== 0 && cloneListGroupID.push(item.ExerciseGroupID)\r\n\t\t\t\t\t\titem.ExerciseTopic.forEach((ques) => {\r\n\t\t\t\t\t\t\tconsole.log('ques - ', index + ' : ', ques)\r\n\r\n\t\t\t\t\t\t\tcloneListQuestionID.push(ques.ExerciseID)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\t// Calculate space question\r\n\t\t\t\tcheckSpaceQuestionAtFirst(res.data.data)\r\n\r\n\t\t\t\tconsole.log('cloneListQuestionID: ', cloneListQuestionID)\r\n\r\n\t\t\t\tsetListGroupID([...cloneListGroupID])\r\n\t\t\t\tsetListQuestionID([...cloneListQuestionID])\r\n\t\t\t}\r\n\t\t\tif (res.status == 204) {\r\n\t\t\t\tsetDataQuestion([])\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst checkSpaceQuestionAtFirst = (data: any) => {\r\n\t\tif (data[0].ExerciseGroupID !== 0) {\r\n\t\t\tsetIsGroup(true)\r\n\t\t\tsetSpaceQuestion({\r\n\t\t\t\tstart: 0,\r\n\t\t\t\tend: 1\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tdata.every((item: any, index: any) => {\r\n\t\t\t\tif (index == spaceQuestion.start + 1) {\r\n\t\t\t\t\tif (item.ExerciseGroupID !== 0) {\r\n\t\t\t\t\t\tsetSpaceQuestion({\r\n\t\t\t\t\t\t\t...spaceQuestion,\r\n\t\t\t\t\t\t\tend: index\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetIsGroup(false)\r\n\t\t\t\t\t\tsetSpaceQuestion({\r\n\t\t\t\t\t\t\t...spaceQuestion,\r\n\t\t\t\t\t\t\tend: index + 1\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn true\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// -- CHECK IS SINGLE\r\n\tconst checkIsSingle = (indexCurrent) => {\r\n\t\tif (indexCurrent !== spaceQuestion.start && indexCurrent !== 0 && indexCurrent !== spaceQuestion.end) {\r\n\t\t\tif (spaceQuestion.end - spaceQuestion.start == 2) {\r\n\t\t\t\tif (indexCurrent > spaceQuestion.start && indexCurrent < spaceQuestion.end) {\r\n\t\t\t\t\tindexCurrent = indexCurrent - 1\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdataQuestion.every((item, index) => {\r\n\t\t\tif (index == indexCurrent + 1) {\r\n\t\t\t\tif (item.ExerciseGroupID !== 0) {\r\n\t\t\t\t\t// nếu là group\r\n\r\n\t\t\t\t\tsetSpaceQuestion({\r\n\t\t\t\t\t\tstart: indexCurrent,\r\n\t\t\t\t\t\tend: index\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn false\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetSpaceQuestion({\r\n\t\t\t\t\t\tstart: indexCurrent,\r\n\t\t\t\t\t\tend: index + 1\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn true\r\n\t\t})\r\n\r\n\t\tif (indexCurrent + 1 === dataQuestion.length) {\r\n\t\t\tsetSpaceQuestion({\r\n\t\t\t\tstart: indexCurrent,\r\n\t\t\t\tend: indexCurrent + 1\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// -- CHECK IS GROUP --\r\n\tconst checkIsGroup = (page: number) => {\r\n\t\tlet exerciseID = listQuestionID[page - 1]\r\n\r\n\t\tdataQuestion.every((item, index) => {\r\n\t\t\t// Kiểm tra nếu trong list Exercise Topic có exercise ID thì bắt đầu lấy được vị trí\r\n\t\t\tif (item.ExerciseTopic.some((object) => object['ExerciseID'] == exerciseID)) {\r\n\t\t\t\t// Kiểm tra ở vị trí này là câu hỏi nhóm hay đơn\r\n\t\t\t\tif (item.ExerciseGroupID !== 0) {\r\n\t\t\t\t\t// Nếu là nhóm\r\n\t\t\t\t\tsetSpaceQuestion({\r\n\t\t\t\t\t\tstart: index,\r\n\t\t\t\t\t\tend: index + 1\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsetIsGroup(true)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetIsGroup(false)\r\n\t\t\t\t\tcheckIsSingle(index)\r\n\t\t\t\t}\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\treturn true\r\n\t\t})\r\n\r\n\t\t// return isGroup;\r\n\t}\r\n\r\n\t// --- ON CHAGNE PAGINATION\r\n\r\n\tconst onChange_pagination = (e, page: number) => {\r\n\t\tsetPageCurrent(page)\r\n\t\tif (e !== 'x') {\r\n\t\t\te.preventDefault()\r\n\t\t}\r\n\t\t// setActiveID(listQuestionID[page - 1]);\r\n\t\tgetActiveID(listQuestionID[page - 1])\r\n\r\n\t\tcheckIsGroup(page)\r\n\t}\r\n\r\n\t// - Previous page\r\n\tconst onChange_PreviousPage = () => {\r\n\t\tlistQuestionID.every((item, index) => {\r\n\t\t\tif (item === activeID) {\r\n\t\t\t\tif (index == 0) {\r\n\t\t\t\t\tsetPageCurrent(listQuestionID.length)\r\n\t\t\t\t\tcheckIsGroup(listQuestionID.length)\r\n\t\t\t\t\tgetActiveID(listQuestionID[listQuestionID.length - 1])\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetPageCurrent((pageCurrent) => pageCurrent - 1)\r\n\t\t\t\t\tcheckIsGroup(pageCurrent - 1)\r\n\t\t\t\t\tgetActiveID(listQuestionID[index - 1])\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\treturn true\r\n\t\t})\r\n\t}\r\n\r\n\t// - Next Page\r\n\tconst onChange_NextPage = (e) => {\r\n\t\tlistQuestionID.every((item, index) => {\r\n\t\t\tif (item === activeID) {\r\n\t\t\t\tif (index === listQuestionID.length - 1) {\r\n\t\t\t\t\tsetPageCurrent(1)\r\n\t\t\t\t\tcheckIsGroup(1)\r\n\t\t\t\t\tgetActiveID(listQuestionID[0])\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetPageCurrent((pageCurrent) => pageCurrent + 1)\r\n\t\t\t\t\tcheckIsGroup(pageCurrent + 1)\r\n\t\t\t\t\tgetActiveID(listQuestionID[index + 1])\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\treturn true\r\n\t\t})\r\n\t}\r\n\r\n\t// - Preview\r\n\tfunction onChange_preview(e) {\r\n\t\tconst checked = e.target.checked\r\n\t\tif (!listPreview.includes(activeID)) {\r\n\t\t\tlistPreview.push(activeID)\r\n\t\t\tsetListPreview([...listPreview])\r\n\t\t} else {\r\n\t\t\tlet newListPreview = listPreview.filter((item) => (item! -= activeID))\r\n\t\t\tsetListPreview([...newListPreview])\r\n\t\t}\r\n\t}\r\n\r\n\t// --- TIME UP ---\r\n\tconst timeUp = () => {\r\n\t\tsetOpenTimeUpModal(true)\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetOpenTimeUpModal(false)\r\n\t\t\tonSubmit_DoingTest()\r\n\t\t}, 1500)\r\n\t}\r\n\r\n\t// --- ACTION SHOW MODAL ---\r\n\tconst handleOk = () => {\r\n\t\tsetIsModalVisible(false)\r\n\t}\r\n\r\n\tconst handleCancel = () => {\r\n\t\tsetIsModalVisible(false)\r\n\t}\r\n\r\n\tconst remakeData = () => {\r\n\t\tlet cloneData = { ...packageResult }\r\n\t\tlet dataSubmit = null\r\n\r\n\t\tcloneData.SetPackageResultDetailInfoList.forEach((item) => {\r\n\t\t\tif (item.Type == 3 || item.Type == 2 || item.Type == 5) {\r\n\t\t\t\titem.SetPackageExerciseStudentInfoList.forEach((e) => {\r\n\t\t\t\t\tif (e.SetPackageExerciseAnswerStudentList.length == 0) {\r\n\t\t\t\t\t\te.SetPackageExerciseAnswerStudentList.push({\r\n\t\t\t\t\t\t\tAnswerID: 0,\r\n\t\t\t\t\t\t\tAnswerContent: '',\r\n\t\t\t\t\t\t\tFileAudio: ''\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\t// Kiểm tra bài test thuộc dạng nào (type)\r\n\t\t// test - Kiểm tra đầu vào\r\n\t\t// examination - Đề bán, đề thi\r\n\t\t// check - Đề kiểm tra\r\n\r\n\t\tswitch (type) {\r\n\t\t\tcase 'video':\r\n\t\t\t\tlet dataTest: any = {\r\n\t\t\t\t\tStudentID: null,\r\n\t\t\t\t\tLessionID: null,\r\n\t\t\t\t\tCourseExamresultDetailInfoList: []\r\n\t\t\t\t}\r\n\t\t\t\tdataTest.StudentID = cloneData.StudentID\r\n\t\t\t\tdataTest.LessionID = router.query?.lessionID\r\n\t\t\t\tdataTest.CourseExamresultDetailInfoList = []\r\n\t\t\t\tcloneData.SetPackageResultDetailInfoList.forEach((ques: any) => {\r\n\t\t\t\t\tques.CourseExamExerciseStudentInfoList = [...ques.SetPackageExerciseStudentInfoList]\r\n\t\t\t\t\tdataTest.CourseExamresultDetailInfoList.push(ques)\r\n\t\t\t\t\tdataTest.CourseExamresultDetailInfoList.forEach((item: any) => {\r\n\t\t\t\t\t\titem.CourseExamExerciseStudentInfoList.forEach((ans: any) => {\r\n\t\t\t\t\t\t\tans.CourseExamExerciseAnswerStudentList = [...ans.SetPackageExerciseAnswerStudentList]\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\tdataSubmit = { ...dataTest }\r\n\t\t\t\tbreak\r\n\t\t\tcase 'test':\r\n\t\t\t\tlet dataTestFirst: ITestFirst = {\r\n\t\t\t\t\tStudentID: null,\r\n\t\t\t\t\tExamAppointmentID: null,\r\n\t\t\t\t\tExamAppointmentResultDetailInfoList: []\r\n\t\t\t\t}\r\n\t\t\t\tdataTestFirst.StudentID = cloneData.StudentID\r\n\t\t\t\tdataTestFirst.ExamAppointmentID = cloneData.SetPackageDetailID\r\n\t\t\t\tdataTestFirst.ExamAppointmentResultDetailInfoList = []\r\n\t\t\t\tcloneData.SetPackageResultDetailInfoList.forEach((ques: any) => {\r\n\t\t\t\t\tques.ExamAppointmentExerciseStudentInfoList = [...ques.SetPackageExerciseStudentInfoList]\r\n\t\t\t\t\tdataTestFirst.ExamAppointmentResultDetailInfoList.push(ques)\r\n\t\t\t\t\tdataTestFirst.ExamAppointmentResultDetailInfoList.forEach((item: any) => {\r\n\t\t\t\t\t\titem.ExamAppointmentExerciseStudentInfoList.forEach((ans: any) => {\r\n\t\t\t\t\t\t\tans.ExamAppointmentExerciseAnswerStudentList = [...ans.SetPackageExerciseAnswerStudentList]\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\tdataSubmit = { ...dataTestFirst }\r\n\t\t\t\tbreak\r\n\t\t\tcase 'check':\r\n\t\t\t\tlet dataCheck: ITestCheck = {\r\n\t\t\t\t\tStudentID: null,\r\n\t\t\t\t\tCourseID: null,\r\n\t\t\t\t\tCurriculumDetailID: parseInt(CurriculumDetailID),\r\n\t\t\t\t\tCourseExamresultDetailInfoList: []\r\n\t\t\t\t}\r\n\t\t\t\tdataCheck.StudentID = cloneData.StudentID\r\n\t\t\t\tdataCheck.CourseID = cloneData.SetPackageDetailID\r\n\t\t\t\tdataCheck.CourseExamresultDetailInfoList = []\r\n\t\t\t\tcloneData.SetPackageResultDetailInfoList.forEach((ques: any) => {\r\n\t\t\t\t\tques.CourseExamExerciseStudentInfoList = [...ques.SetPackageExerciseStudentInfoList]\r\n\t\t\t\t\tdataCheck.CourseExamresultDetailInfoList.push(ques)\r\n\t\t\t\t\tdataCheck.CourseExamresultDetailInfoList.forEach((item: any) => {\r\n\t\t\t\t\t\titem.CourseExamExerciseStudentInfoList.forEach((ans: any) => {\r\n\t\t\t\t\t\t\tans.CourseExamExerciseAnswerStudentList = [...ans.SetPackageExerciseAnswerStudentList]\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\tdataSubmit = { ...dataCheck }\r\n\t\t\t\tbreak\r\n\t\t\tcase 'examination':\r\n\t\t\t\tdataSubmit = { ...cloneData }\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t\treturn dataSubmit\r\n\t}\r\n\r\n\t// ===== ON SUBMIT DOING TEST =====\r\n\tconst returnRouter = (data) => {\r\n\t\tlet obj = {}\r\n\t\tswitch (type) {\r\n\t\t\tcase 'test':\r\n\t\t\t\tobj = {\r\n\t\t\t\t\tpathname: '/customer/service/service-test-student/detail/[slug]',\r\n\t\t\t\t\tquery: { slug: data.ExamAppointmentID, examID: data.ExamTopicID, ExamAppointmentResultID: data.ID }\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\t\t\tcase 'check':\r\n\t\t\t\tobj = {\r\n\t\t\t\t\tpathname: '/course-exam/detail/[slug]',\r\n\t\t\t\t\tquery: { slug: data.ID, examID: data.ExamTopicID, packageDetailID: router.query?.packageDetailID }\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tobj = {\r\n\t\t\t\t\tpathname: router.query?.isExercise ? '/course/exercise/result/[slug]' : '/package/package-result-student/detail/[slug]',\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\tslug: router.query?.isExercise ? data.HomeworkID : data.ID,\r\n\t\t\t\t\t\texamID: data.ExamTopicID,\r\n\t\t\t\t\t\tpackageDetailID: router.query?.packageDetailID\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t\treturn obj\r\n\t}\r\n\r\n\tconst onSubmit_DoingTest = async () => {\r\n\t\tconsole.log('onSubmit_DoingTest')\r\n\t\tconsole.log('type: ', type)\r\n\r\n\t\tsetIsModalConfirm(false)\r\n\t\tsetLoadingSubmit(true)\r\n\t\tlet dataSubmit = remakeData()\r\n\t\tlet res = null\r\n\t\ttry {\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase 'test': // Kiểm tra đầu vào\r\n\t\t\t\t\tres = await examAppointmentResultApi.add(dataSubmit)\r\n\t\t\t\t\tbreak\r\n\r\n\t\t\t\tcase 'check': // Kiểm tra trong khóa học\r\n\t\t\t\t\tres = await courseExamApi.add(dataSubmit)\r\n\t\t\t\t\tbreak\r\n\r\n\t\t\t\tcase 'examination': // Thi cử - đề bán\r\n\t\t\t\t\tres = router.query?.isExercise ? await homeworkResultApi.add({ ...dataSubmit }) : await doingTestApi.add(dataSubmit)\r\n\t\t\t\t\tbreak\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak\r\n\t\t\t}\r\n\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tsetIsModalSuccess(true)\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\trouter.push(returnRouter(res.data.data))\r\n\t\t\t\t}, 1000)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetLoadingSubmit(false)\r\n\t\t}\r\n\t}\r\n\r\n\t// Return text confirm\r\n\tconst returnTextConfirm = () => {\r\n\t\tlet textConfirm = 'Bạn có chắc muốn nộp bài?'\r\n\t\tif (listPicked.length < listQuestionID.length) {\r\n\t\t\tlet numberOfQuestion = listQuestionID.length - listPicked.length\r\n\t\t\ttextConfirm = `Bạn còn ${numberOfQuestion} câu chưa làm. Bạn có chắc muốn nộp bài?`\r\n\t\t}\r\n\r\n\t\treturn textConfirm\r\n\t}\r\n\r\n\tconst handleClick_openPagi = () => {\r\n\t\tsetOpenPagi(!openPagi)\r\n\t}\r\n\r\n\t// ===== ALL USE EFFECT ====\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!isDone) {\r\n\t\t\tif (type === 'test') {\r\n\t\t\t\tcheckIsTested()\r\n\t\t\t} else {\r\n\t\t\t\tgetListQuestion()\r\n\t\t\t}\r\n\r\n\t\t\tpackageResult.SetPackageDetailID = parseInt(packageDetailID)\r\n\t\t\tgetPackageResult({ ...packageResult })\r\n\t\t} else {\r\n\t\t\tsetDataQuestion(dataDoneTest)\r\n\t\t\tcheckSpaceQuestionAtFirst(dataDoneTest)\r\n\t\t\tsetListQuestionID(listIDFromDoneTest)\r\n\t\t\tsetListGroupID(listGroupIDFromDoneTest)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (listQuestionID?.length > 0) {\r\n\t\t\tgetListQuestionID(listQuestionID)\r\n\t\t\tgetActiveID(listQuestionID[0])\r\n\t\t}\r\n\t}, [listQuestionID])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (userInformation) {\r\n\t\t\tgetPackageResult({\r\n\t\t\t\t...packageResult,\r\n\t\t\t\tSetPackageDetailID: parseInt(packageDetailID),\r\n\t\t\t\tStudentID: userInformation.UserInformationID\r\n\t\t\t})\r\n\t\t}\r\n\t}, [userInformation])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!isDone) {\r\n\t\t\tif (dataQuestion?.length > 0) {\r\n\t\t\t\tdataQuestion.forEach((item: any, index: any) => {\r\n\t\t\t\t\tlet listQuestion = []\r\n\t\t\t\t\titem.ExerciseTopic.forEach((ques: any, index: any) => {\r\n\t\t\t\t\t\tlistQuestion.push({\r\n\t\t\t\t\t\t\tExerciseID: ques.ExerciseID,\r\n\t\t\t\t\t\t\tSetPackageExerciseAnswerStudentList: []\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\tpackageResult.SetPackageResultDetailInfoList.push({\r\n\t\t\t\t\t\tExamTopicDetailID: item.ID,\r\n\t\t\t\t\t\tExerciseGroupID: item.ExerciseGroupID,\r\n\t\t\t\t\t\tLevel: item.Level,\r\n\t\t\t\t\t\tType: item.Type,\r\n\t\t\t\t\t\tSkillID: item.SkillID,\r\n\t\t\t\t\t\tSetPackageExerciseStudentInfoList: listQuestion\r\n\t\t\t\t\t})\r\n\t\t\t\t\tgetPackageResult({\r\n\t\t\t\t\t\t...packageResult\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (dataQuestion !== null && dataQuestion !== undefined) {\r\n\t\t\tonChange_pagination('x', 1)\r\n\t\t}\r\n\t}, [dataQuestion])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (infoExam && dataQuestion) {\r\n\t\t\t// Run time\r\n\t\t\tconst add_minutes = (function (dt, minutes) {\r\n\t\t\t\treturn new Date(dt.getTime() + minutes * 60000)\r\n\t\t\t})(new Date(), infoExam.Time)\r\n\t\t\tsetAddMinutes(add_minutes)\r\n\t\t}\r\n\t}, [infoExam, dataQuestion])\r\n\r\n\tconst alertUser = (e) => {\r\n\t\te.preventDefault()\r\n\t\te.returnValue = ''\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tlet testFooter = document.getElementById('test-footer')\r\n\t\tif (testFooter) {\r\n\t\t\tlet heightFooter = testFooter.offsetHeight\r\n\t\t\tif (heightFooter > 70) {\r\n\t\t\t\tsetIsLong(true)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!dataDoneTest) {\r\n\t\t\tif (!isModalSuccess) {\r\n\t\t\t\twindow.addEventListener('beforeunload', alertUser)\r\n\t\t\t\treturn () => {\r\n\t\t\t\t\twindow.removeEventListener('beforeunload', alertUser)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\tuseEffect(() => {\r\n\t\tif (activeID) {\r\n\t\t\tlet index = listQuestionID.findIndex((id) => id === activeID)\r\n\t\t\tsetPageCurrent(index + 1)\r\n\t\t}\r\n\t}, [activeID])\r\n\r\n\tconst audio = useRef(null)\r\n\r\n\tconst convertData = (json) => {\r\n\t\tvar stringified = JSON.stringify(json)\r\n\t\tstringified = stringified.replace('SetPackageResultDetailInfoList', 'HomeworkResultDetailInfoList')\r\n\t\twhile (\r\n\t\t\tstringified.indexOf('SetPackageExerciseStudentInfoList') !== -1 ||\r\n\t\t\tstringified.indexOf('SetPackageExerciseAnswerStudentList') !== -1\r\n\t\t) {\r\n\t\t\tstringified = stringified.replace('SetPackageExerciseStudentInfoList', 'HomeworkExerciseStudentInfoList')\r\n\t\t\tstringified = stringified.replace('SetPackageExerciseAnswerStudentList', 'HomeworkExerciseAnswerStudentList')\r\n\t\t}\r\n\t\tvar jsonObject = JSON.parse(stringified)\r\n\t\treturn jsonObject\r\n\t}\r\n\r\n\tconst onSubmitExercise = async () => {\r\n\t\tsetIsModalConfirm(false)\r\n\t\tsetLoadingSubmit(true)\r\n\t\tlet dataSubmit = remakeData()\r\n\r\n\t\tconsole.log('dataSubmit: ', dataSubmit)\r\n\r\n\t\tlet res = null\r\n\t\ttry {\r\n\t\t\tres = await homeworkResultApi.add(convertData({ ...dataSubmit, HomeworkID: dataSubmit.SetPackageDetailID }))\r\n\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tsetIsModalSuccess(true)\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\trouter.push(returnRouter(res.data.data[0]))\r\n\t\t\t\t}, 1000)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetLoadingSubmit(false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst onSubmitVideoEx = async () => {\r\n\t\tsetIsModalConfirm(false)\r\n\t\tsetLoadingSubmit(true)\r\n\t\tlet dataSubmit = remakeData()\r\n\t\tlet res = null\r\n\r\n\t\tconsole.log('SUBMIT: ', convertData({ ...dataSubmit, HomeworkID: dataSubmit.SetPackageDetailID }))\r\n\r\n\t\ttry {\r\n\t\t\tres = await homeworkResultApi.Video({\r\n\t\t\t\t...convertData({ ...dataSubmit, HomeworkID: dataSubmit.SetPackageDetailID }),\r\n\t\t\t\tExamTopicID: router.query?.examID\r\n\t\t\t})\r\n\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\twindow.close()\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetLoadingSubmit(false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst isDrag = () => {\r\n\t\tlet flag = 0\r\n\t\tfor (let i = 0; i < dataQuestion.length; i++) {\r\n\t\t\tfor (let j = 0; j < dataQuestion[i]?.ExerciseTopic.length; j++) {\r\n\t\t\t\tif (dataQuestion[i]?.ExerciseTopic[j]?.ExerciseID == activeID && dataQuestion[i]?.Type == 2) {\r\n\t\t\t\t\tflag = 0\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false\r\n\t}\r\n\r\n\tconsole.log('listQuestionID: ', listQuestionID)\r\n\r\n\treturn (\r\n\t\t<div className={`test-wrapper doing-test ${isDone && 'done-test'}`}>\r\n\t\t\t{/** Modal báo hết giờ làm bài */}\r\n\t\t\t<TimeUpModal isVisible={openTimeUpModal} />\r\n\t\t\t{/* Modal báo thành công **/}\r\n\t\t\t<Modal title=\"Thông báo\" footer={null} className=\"\" visible={isModalSuccess}>\r\n\t\t\t\t<div className=\"modal-submit-success-test\">\r\n\t\t\t\t\t<CheckCircleOutlined />\r\n\t\t\t\t\t<p className=\"text\">Nộp bài thành công</p>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t\t{/* Modal xác nhận submit **/}\r\n\r\n\t\t\t<DecideModal\r\n\t\t\t\tisOpen={isModalConfirm}\r\n\t\t\t\tisCancel={() => setIsModalConfirm(false)}\r\n\t\t\t\tisOk={() => {\r\n\t\t\t\t\tif (router.query?.type == 'video') {\r\n\t\t\t\t\t\tonSubmitVideoEx()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\trouter.query?.isExercise == 'true' ? onSubmitExercise() : onSubmit_DoingTest()\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t\tcontent={returnTextConfirm()}\r\n\t\t\t/>\r\n\r\n\t\t\t{/* Modal hết giờ làm bài **/}\r\n\t\t\t<Modal title=\"Chú ý!\" visible={isModalVisible} okText=\"Đồng ý\" cancelText=\"Đóng\" onOk={handleOk} onCancel={handleCancel}>\r\n\t\t\t\t<p style={{ fontWeight: 500 }}>Bạn chưa chọn đề thi. Chuyển đến trang bộ đề?</p>\r\n\t\t\t</Modal>\r\n\r\n\t\t\t{/* Card Main Test **/}\r\n\t\t\t<Card\r\n\t\t\t\tclassName=\"test-card\"\r\n\t\t\t\ttitle={\r\n\t\t\t\t\t<div className=\"test-info\">\r\n\t\t\t\t\t\t<div className=\"test-title-info\">\r\n\t\t\t\t\t\t\t<h6 className=\"name-type-test\">{infoExam?.Name}</h6>\r\n\t\t\t\t\t\t\t<p className=\"info-user\">\r\n\t\t\t\t\t\t\t\t<span>{infoExam?.ProgramName}</span>\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{infoExam !== null && infoExam?.Audio !== undefined && infoExam.Audio !== null && infoExam.Audio !== '' && (\r\n\t\t\t\t\t\t\t<audio className=\"none-poiter hide-on-mobile\" autoPlay={true} controls ref={audio} onEnded={() => {}}>\r\n\t\t\t\t\t\t\t\t<source src={infoExam.Audio} type=\"audio/mpeg\" />\r\n\t\t\t\t\t\t\t</audio>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\textra={\r\n\t\t\t\t\tinfoExam &&\r\n\t\t\t\t\tdataQuestion?.length > 0 &&\r\n\t\t\t\t\taddMinutes && <CountDown addMinutes={addMinutes} onFinish={() => !isModalVisible && timeUp()} />\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t<div style={{ width: '100%', height: '105%', display: 'flex', flexDirection: 'column' }}>\r\n\t\t\t\t\t<div style={{ width: '100%', height: '90%' }}>\r\n\t\t\t\t\t\t{dataQuestion !== null && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<div className={isDrag() ? 'test-body' : 'test-body'}>\r\n\t\t\t\t\t\t\t\t\t{loadingSubmit && (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"loading-submit text-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-100 text-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Spin />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"mt-3\" style={{ fontStyle: 'italic', fontWeight: 500 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tĐang tiến hành nộp bài...\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t{isLoading ? (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"w-100 mt-4 \">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-50\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton />\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t) : dataQuestion?.length > 0 ? (\r\n\t\t\t\t\t\t\t\t\t\tdataQuestion.slice(spaceQuestion.start, spaceQuestion.end).map((item, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (isGroup) {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"doingtest-group\" key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"\" style={{ height: '100%' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col-lg-6 col-md-12 col-sm-12 col-12 pl-0 pl-0-mobile\" style={{ height: '100%' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ListQuestion setChild={setChild} dataQuestion={item} listQuestionID={listQuestionID} openPagi={openPagi} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"doingtest-single\" key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ListQuestion dataQuestion={item} listQuestionID={listQuestionID} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"w-100 text-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t{!checkTested ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p style={{ fontWeight: 500 }}>Đề thi này chưa có câu hỏi</p>\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p style={{ fontWeight: 500 }}>Bạn đã làm đề test này rồi</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpathname: '/customer/service/service-test-student'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a className=\"btn btn-warning\">Thoát ra</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<Modal title=\"Basic Modal\" visible={false} onOk={handleClick_openPagi} onCancel={handleClick_openPagi}>\r\n\t\t\t\t\t\t<div style={{ marginBottom: 0 }}>\r\n\t\t\t\t\t\t\t{dataQuestion?.length > 0 && (\r\n\t\t\t\t\t\t\t\t<div className={`footer-pagination row-pagination ${openPagi ? 'show-mobile' : ''}`}>\r\n\t\t\t\t\t\t\t\t\t<button className=\"close-icon\" onClick={handleClick_openPagi}>\r\n\t\t\t\t\t\t\t\t\t\t<CloseOutlined />\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<p className=\"pagi-name\">Danh sách câu hỏi</p>\r\n\t\t\t\t\t\t\t\t\t<div className=\"box-preview\">\r\n\t\t\t\t\t\t\t\t\t\t<Checkbox checked={listPreview.includes(activeID) ? true : false} onChange={onChange_preview}>\r\n\t\t\t\t\t\t\t\t\t\t\tPreview\r\n\t\t\t\t\t\t\t\t\t\t</Checkbox>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<button className=\"pagi-btn previous\" onClick={onChange_PreviousPage}>\r\n\t\t\t\t\t\t\t\t\t\t<LeftOutlined />\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<ul className=\"list-answer\">\r\n\t\t\t\t\t\t\t\t\t\t{listQuestionID?.length > 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\tlistQuestionID.map((questionID, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li className={`item `} value={questionID} key={questionID} style={{ marginBottom: isLong ? '10px' : '' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref=\"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => onChange_pagination(e, index + 1)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`\r\n                      \t\t${questionID == activeID ? 'activeDoing' : ''} ${listPicked.includes(questionID) ? 'checked' : ''} ${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlistPreview.includes(questionID) ? 'checked_preview' : ''\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{index + 1}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t<button className=\"pagi-btn next\" onClick={onChange_NextPage}>\r\n\t\t\t\t\t\t\t\t\t\t<RightOutlined />\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Modal>\r\n\r\n\t\t\t\t\t<div style={{ marginBottom: -100 }}>\r\n\t\t\t\t\t\t{dataQuestion?.length > 0 && (\r\n\t\t\t\t\t\t\t<div className={!openPagi ? 'test-footer' : 'test-footer-mobile'} id=\"test-footer\">\r\n\t\t\t\t\t\t\t\t<div className=\"pagination-mobile \">\r\n\t\t\t\t\t\t\t\t\t<button className=\"listQuestion\" onClick={handleClick_openPagi}>\r\n\t\t\t\t\t\t\t\t\t\t<ProfileFilled />\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<button className=\"pagi-btn previous\" onClick={onChange_PreviousPage}>\r\n\t\t\t\t\t\t\t\t\t\t<LeftOutlined />\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<button className=\"pagi-btn next\" onClick={onChange_NextPage}>\r\n\t\t\t\t\t\t\t\t\t\t<RightOutlined />\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div className={`footer-pagination row-pagination ${openPagi ? 'show-mobile' : ''}`}>\r\n\t\t\t\t\t\t\t\t\t<button className=\"close-icon\" onClick={handleClick_openPagi}>\r\n\t\t\t\t\t\t\t\t\t\t<CloseOutlined />\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t<p className=\"pagi-name\">Danh sách câu hỏi</p>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"box-previe\">\r\n\t\t\t\t\t\t\t\t\t\t<Checkbox checked={listPreview.includes(activeID) ? true : false} onChange={onChange_preview}>\r\n\t\t\t\t\t\t\t\t\t\t\tPreview\r\n\t\t\t\t\t\t\t\t\t\t</Checkbox>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<button className=\"pagi-btn previous\" onClick={onChange_PreviousPage}>\r\n\t\t\t\t\t\t\t\t\t\t<LeftOutlined />\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t<ul className=\"list-answer\" style={{ marginTop: -5 }}>\r\n\t\t\t\t\t\t\t\t\t\t{listQuestionID?.length > 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\tlistQuestionID.map((questionID: any, index: any) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li className={`item`} value={questionID} key={questionID} style={{ marginBottom: 5 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref=\"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e: any) => onChange_pagination(e, index + 1)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`${questionID == activeID ? 'activeDoing' : ''}${listPicked.includes(questionID) ? ' checked' : ''}${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlistPreview.includes(questionID) ? ' checked_preview' : ''\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{index + 1}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\r\n\t\t\t\t\t\t\t\t\t<button className=\"pagi-btn next\" onClick={onChange_NextPage}>\r\n\t\t\t\t\t\t\t\t\t\t<RightOutlined />\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"footer-submit text-right\">\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-primary\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => (!dataDoneTest ? setIsModalConfirm(true) : closeMainTest && closeMainTest())}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{!dataDoneTest ? 'Nộp bài' : 'Đóng'}\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{/* </div> */}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Card>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default MainTest\r\n"]},"metadata":{},"sourceType":"module"}