{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _toConsumableArray from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\QuestionBank\\\\QuestionFormType\\\\DragForm.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useWrap } from \"~/context/wrap\";\nimport { Form, Spin, Checkbox, Input, Tooltip } from \"antd\";\nimport Editor from \"~/components/Elements/Editor\";\nimport { exerciseGroupApi } from \"~/apiBase/\";\nimport { CloseOutlined } from \"@ant-design/icons\";\nimport { Plus } from \"react-feather\";\nvar AnsID = 0;\nvar QuesID = -1;\n\nvar DragForm = function DragForm(props) {\n  _s();\n\n  var _questionDataForm$Exe4;\n\n  console.log(\"Câu hỏi kéo thả\");\n  var isSubmit = props.isSubmit,\n      questionData = props.questionData,\n      changeIsSubmit = props.changeIsSubmit,\n      visible = props.visible;\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti;\n\n  var _useForm = useForm(),\n      handleSubmit = _useForm.handleSubmit,\n      _useForm$formState = _useForm.formState,\n      isSubmitting = _useForm$formState.isSubmitting,\n      errors = _useForm$formState.errors,\n      isSubmitted = _useForm$formState.isSubmitted;\n\n  var _Form$useForm = Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var _useState = useState(null),\n      questionDataForm = _useState[0],\n      setQuestionDataForm = _useState[1];\n\n  var _useState2 = useState(false),\n      isResetEditor = _useState2[0],\n      setIsResetEditor = _useState2[1];\n\n  var _useState3 = useState(null),\n      linkUpload = _useState3[0],\n      setLinkUpload = _useState3[1];\n\n  var _useState4 = useState(false),\n      loadingUpload = _useState4[0],\n      setLoadingUpload = _useState4[1];\n\n  var _useState5 = useState(false),\n      loadingForm = _useState5[0],\n      setLoadingForm = _useState5[1];\n\n  var _useState6 = useState(false),\n      reloadContent = _useState6[0],\n      setReloadContent = _useState6[1];\n\n  var _useState7 = useState([]),\n      dataExercise = _useState7[0],\n      setDataExercise = _useState7[1];\n\n  console.log(\"Question Data Form: \", questionDataForm);\n  console.log(\"Data Exercise in form: \", dataExercise); // Upload file audio\n\n  var onchange_UploadFile = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(info) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(info.file.status === \"uploading\")) {\n                _context.next = 3;\n                break;\n              }\n\n              setLoadingUpload(true);\n              return _context.abrupt(\"return\");\n\n            case 3:\n              setLoadingUpload(true);\n              _context.prev = 4;\n              _context.next = 7;\n              return exerciseGroupApi.UploadAudio(info.file.originFileObj);\n\n            case 7:\n              res = _context.sent;\n\n              if (res.status == 200) {\n                setLinkUpload(res.data.data);\n                showNoti(\"success\", \"Upload file thành công\");\n              }\n\n              _context.next = 14;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](4);\n              showNoti(\"danger\", _context.t0.message);\n\n            case 14:\n              _context.prev = 14;\n              setLoadingUpload(false);\n              return _context.finish(14);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[4, 11, 14, 17]]);\n    }));\n\n    return function onchange_UploadFile(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(); // SUBMI FORM\n\n\n  var onSubmit = handleSubmit(function (data, e) {// console.log(\"DATA SUBMIT: \", data);\n  }); // GET VALUE IN EDITOR\n\n  var getDataEditor = function getDataEditor(dataEditor) {\n    console.log(\"Value Editor Form: \", dataEditor);\n\n    if (questionDataForm) {\n      questionDataForm.Paragraph = dataEditor;\n    }\n\n    setQuestionDataForm(_objectSpread({}, questionDataForm));\n  }; // Reset value in form\n\n\n  var resetForm = function resetForm() {\n    questionDataForm.Content = \"\";\n    questionDataForm.ExerciseAnswer.forEach(function (item) {\n      item.AnswerContent = \"\";\n      item.isTrue = false;\n    });\n    setQuestionDataForm(_objectSpread({}, questionDataForm));\n  }; // HANDLE DELETE ALL QUESTION\n\n\n  var deleteAllQuestion = function deleteAllQuestion() {\n    var _questionDataForm$Exe;\n\n    dataExercise === null || dataExercise === void 0 ? void 0 : dataExercise.splice(0, dataExercise.length);\n    questionDataForm === null || questionDataForm === void 0 ? void 0 : (_questionDataForm$Exe = questionDataForm.ExerciseList) === null || _questionDataForm$Exe === void 0 ? void 0 : _questionDataForm$Exe.forEach(function (item) {\n      item.Enable = false;\n    });\n    setDataExercise(_toConsumableArray(dataExercise));\n    setQuestionDataForm(_objectSpread({}, questionDataForm));\n  }; // HANDLE DELETE QUESTION\n\n\n  var _deleteSingleQuestion = function deleteSingleQuestion(QuestionID) {\n    console.log(\"Question ID cần xóa: \", QuestionID);\n    var QuestionIndex = questionDataForm.ExerciseList.findIndex(function (item) {\n      return item.inputID == QuestionID;\n    });\n    var ExerciseIndex = dataExercise.findIndex(function (item) {\n      return item.inputID == QuestionID;\n    });\n    dataExercise.splice(ExerciseIndex, 1);\n\n    if (questionDataForm.ExerciseList[QuestionIndex]) {\n      if (questionDataForm.ExerciseList[QuestionIndex].isAdd) {\n        questionDataForm.ExerciseList.splice(QuestionIndex, 1);\n      } else {\n        questionDataForm.ExerciseList[QuestionIndex].Enable = false;\n      }\n    } else {\n      showNoti(\"danger\", \"Câu hỏi không tồn tại\");\n    }\n\n    setDataExercise(_toConsumableArray(dataExercise));\n    setQuestionDataForm(_objectSpread({}, questionDataForm));\n  }; // HANDLE ADD QUESTION\n\n\n  var _addQuestion = function addQuestion(inputID) {\n    AnsID++;\n    var objAns = {\n      // ID: inputID,\n      inputID: inputID,\n      Content: \"\",\n      ExerciseGroupID: questionDataForm.ID,\n      SubjectID: questionDataForm.SubjectID,\n      SubjectName: questionDataForm.SubjectName,\n      DescribeAnswer: \"\",\n      Level: questionDataForm.Level,\n      LevelName: questionDataForm.LevelName,\n      LinkAudio: null,\n      Type: questionDataForm.Type,\n      TypeName: questionDataForm.TypeName,\n      isAdd: true,\n      Enable: true,\n      ExerciseAnswer: [{\n        ID: AnsID,\n        AnswerContent: \"\",\n        isTrue: true,\n        Enable: true,\n        isAdd: true\n      }]\n    };\n    questionDataForm.ExerciseList.push(objAns);\n    dataExercise.push(objAns);\n    setDataExercise(_toConsumableArray(dataExercise));\n    setQuestionDataForm(_objectSpread({}, questionDataForm));\n  }; // ====== HANDLE ADD ANSWER ======\n\n\n  var handleAddAnswer = function handleAddAnswer(questionID) {\n    AnsID++;\n    questionDataForm.ExerciseList.every(function (item) {\n      if (item.inputID == questionID) {\n        item.ExerciseAnswer.push({\n          ID: AnsID,\n          AnswerContent: \"\",\n          isTrue: false,\n          Enable: true,\n          isAdd: true\n        });\n        return false;\n      }\n\n      return true;\n    });\n    setQuestionDataForm(_objectSpread({}, questionDataForm));\n  };\n\n  var onChange_isCorrect = function onChange_isCorrect(e, AnswerID, QuestionID) {\n    var _questionDataForm$Exe2;\n\n    var checked = e.target.checked; // - Get question index\n\n    var QuestionIndex = questionDataForm === null || questionDataForm === void 0 ? void 0 : (_questionDataForm$Exe2 = questionDataForm.ExerciseList) === null || _questionDataForm$Exe2 === void 0 ? void 0 : _questionDataForm$Exe2.findIndex(function (item) {\n      return item.inputID == QuestionID;\n    }); // - Get answer index\n\n    var AnswerIndex = questionDataForm.ExerciseList[QuestionIndex].ExerciseAnswer.findIndex(function (item) {\n      return item.ID == AnswerID;\n    }); // Delete all is true before and new isTrue\n\n    questionDataForm.ExerciseList[QuestionIndex].ExerciseAnswer.forEach(function (item) {\n      item.isTrue = false;\n    }); // - add isTrue\n\n    questionDataForm.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex].isTrue = checked;\n    setQuestionDataForm(_objectSpread({}, questionDataForm));\n  };\n\n  console.log(\"QUESTION DATA FORM IN DRAG: \", questionDataForm); // ====== ON CHANGE TEXT ======\n\n  var onChange_text = function onChange_text(e, AnswerID, QuestionID) {\n    var _questionDataForm$Exe3;\n\n    console.log(\"QuestionID: \", QuestionID); // - Get value\n\n    var text = e.target.value; // - Get question index\n\n    var QuestionIndex = questionDataForm === null || questionDataForm === void 0 ? void 0 : (_questionDataForm$Exe3 = questionDataForm.ExerciseList) === null || _questionDataForm$Exe3 === void 0 ? void 0 : _questionDataForm$Exe3.findIndex(function (item) {\n      return item.inputID == QuestionID;\n    }); // - Get answer index\n\n    var AnswerIndex = questionDataForm.ExerciseList[QuestionIndex].ExerciseAnswer.findIndex(function (item) {\n      return item.ID == AnswerID;\n    }); // - add text\n\n    questionDataForm.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex].AnswerContent = text;\n    setQuestionDataForm(_objectSpread({}, questionDataForm));\n  }; // ====== DELETE ANSWER ======\n\n\n  var deleteAnswerItem = function deleteAnswerItem(AnswerID, QuestionID) {\n    // - Get question index\n    var QuestionIndex = questionDataForm.ExerciseList.findIndex(function (item) {\n      return item.inputID == QuestionID;\n    }); // - Get answer index\n\n    var AnswerIndex = questionDataForm.ExerciseList[QuestionIndex].ExerciseAnswer.findIndex(function (item) {\n      return item.ID == AnswerID;\n    }); // Action delete\n\n    if (questionDataForm.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex].isAdd) {\n      questionDataForm.ExerciseList[QuestionIndex].ExerciseAnswer.splice(AnswerIndex, 1);\n    } else {\n      questionDataForm.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex].Enable = false;\n    } // setAnswerList([...answerList]);\n\n\n    setQuestionDataForm(_objectSpread({}, questionDataForm));\n  }; // SUBMIT FORM\n\n\n  var handleSubmitQuestion = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var res, newData;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              res = null;\n              newData = JSON.parse(JSON.stringify(questionDataForm)); // custom data\n\n              newData.ExerciseList.forEach(function (item, index) {\n                item.ExerciseAnswer.forEach(function (ans, ind) {\n                  if (ans.isAdd) {\n                    delete ans.ID;\n                  }\n                });\n              });\n\n              if (questionDataForm.ExerciseGroupID) {\n                newData.ID = questionDataForm.ExerciseGroupID;\n              }\n\n              newData.ExerciseGroupID = null;\n              console.log(\"DataSubmit: \", newData); // ----------\n\n              _context2.prev = 6;\n              _context2.next = 9;\n              return exerciseGroupApi.update(newData);\n\n            case 9:\n              res = _context2.sent;\n\n              if (res.status == 200) {\n                handleSubmitChange(res.data.data);\n              }\n\n              _context2.next = 16;\n              break;\n\n            case 13:\n              _context2.prev = 13;\n              _context2.t0 = _context2[\"catch\"](6);\n              showNoti(\"danger\", _context2.t0.message);\n\n            case 16:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[6, 13]]);\n    }));\n\n    return function handleSubmitQuestion() {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // SUBMIT AND CHANGE PARAGRAPH\n\n\n  var handleSubmitChange = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dataSubmit) {\n      var res, cloneParagraph;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              res = null;\n              cloneParagraph = dataSubmit.Paragraph;\n              console.log(\"DATA submit after: \", dataSubmit);\n              dataSubmit.ExerciseList.forEach(function (item, index) {\n                var indexInput = parseInt(item.inputID) + 1;\n                indexInput = indexInput.toString();\n                cloneParagraph = cloneParagraph.replace(\"<input id=\\\"\".concat(item.inputID, \"\\\" class=\\\"space-editor\\\" placeholder=\\\"(\").concat(indexInput, \")\\\">\"), \"<div ques-id=\\\"\".concat(item.ID, \"\\\" id=\\\"\").concat(item.inputID, \"\\\" class='space-editor drag-item' ondrop=\\\"drop(event)\\\" ondragover=\\\"allowDrop(event)\\\">(\").concat(indexInput, \")</div>\"));\n                var test = \"<input id=\\\"\".concat(item.inputID, \"\\\" class='space-editor' placeholder=\\\"(\").concat(indexInput, \")\\\">\");\n                console.log(\"COI THỬ NÀY LÀ GÌ: \", test);\n              });\n              console.log(\"Paragraph new: \", cloneParagraph);\n              dataSubmit.Paragraph = cloneParagraph;\n              console.log(\"Paragraph new in submit: \", dataSubmit.Paragraph); // ----------\n\n              _context3.prev = 7;\n              _context3.next = 10;\n              return exerciseGroupApi.update(dataSubmit);\n\n            case 10:\n              res = _context3.sent;\n\n              if (res.status == 200) {\n                changeIsSubmit(res.data.data);\n\n                if (!questionDataForm.ID) {\n                  resetForm();\n                }\n\n                showNoti(\"success\", \"T\\u1EA1o c\\xE2u h\\u1ECFi th\\xE0nh c\\xF4ng\");\n                setIsResetEditor(true);\n              }\n\n              _context3.next = 17;\n              break;\n\n            case 14:\n              _context3.prev = 14;\n              _context3.t0 = _context3[\"catch\"](7);\n              showNoti(\"danger\", _context3.t0.message);\n\n            case 17:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[7, 14]]);\n    }));\n\n    return function handleSubmitChange(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }(); //RETURN INDEX QUESTION - Trả về thứ tự của từng câu hỏi\n\n\n  var returnIndexQuestion = function returnIndexQuestion(itemQues) {\n    var title = \"\";\n    var index = dataExercise.findIndex(function (ex) {\n      return ex.inputID == itemQues.inputID;\n    });\n    title = \"C\\xE2u (\".concat(index + 1, \")\");\n    return title;\n  }; // GET GROUP DETAIL DATA\n\n\n  var dataGroupDetail = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var id, res;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              setLoadingForm(true);\n              id = null;\n\n              if (questionData.ID) {\n                id = questionData.ID;\n              } else {\n                id = questionData.ExerciseGroupID;\n              }\n\n              _context4.prev = 3;\n              _context4.next = 6;\n              return exerciseGroupApi.getWithID(id);\n\n            case 6:\n              res = _context4.sent;\n              res.status == 200 && reloadNewContent(res.data.data);\n              res.status == 204 && showNoti(\"danger\", \"Không có dữ liệu\");\n              _context4.next = 14;\n              break;\n\n            case 11:\n              _context4.prev = 11;\n              _context4.t0 = _context4[\"catch\"](3);\n              showNoti(\"danger\", _context4.t0.message);\n\n            case 14:\n              _context4.prev = 14;\n              setLoadingForm(false);\n              return _context4.finish(14);\n\n            case 17:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[3, 11, 14, 17]]);\n    }));\n\n    return function dataGroupDetail() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var reloadNewContent = function reloadNewContent(data) {\n    var filterExerciseList = data.ExerciseList.filter(function (item) {\n      return item.Enable !== false;\n    });\n    data.ExerciseList = _toConsumableArray(filterExerciseList);\n    setDataExercise(_toConsumableArray(filterExerciseList));\n    setQuestionDataForm(_objectSpread({}, data));\n  };\n\n  useEffect(function () {\n    if (isSubmit) {\n      handleSubmitQuestion();\n      return;\n    }\n  }, [isSubmit]);\n  useEffect(function () {\n    console.log(\"Visible: \", visible);\n    console.log(\"Question Data: \", questionData);\n\n    if (visible) {\n      dataGroupDetail();\n    }\n  }, [visible]); // useEffect(() => {\n  //   if (reloadContent) {\n  //     (async function loadData() {\n  //       try {\n  //         let res = await exerciseGroupApi.getWithID(questionDataForm.ID);\n  //         if (res.status == 200) {\n  //           changeIsSubmit(res.data.data);\n  //           showNoti(\"success\", `Thành công`);\n  //           if (!questionDataForm.ID) {\n  //             resetForm();\n  //           }\n  //           setIsResetEditor(true);\n  //           setTimeout(() => {\n  //             setIsResetEditor(false);\n  //           }, 500);\n  //         }\n  //         res.status == 204 && showNoti(\"danger\", \"Không có dữ liệu\");\n  //       } catch (error) {\n  //         showNoti(\"danger\", error.message);\n  //       } finally {\n  //         setReloadContent(false);\n  //       }\n  //     })();\n  //   }\n  // }, [reloadContent]);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-create-question\",\n    children: visible && loadingForm ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-100 text-center mt-3\",\n      children: /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 9\n    }, _this) : visible && /*#__PURE__*/_jsxDEV(Form, {\n      form: form,\n      layout: \"vertical\",\n      onFinish: onSubmit,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-fluid\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6 col-12\",\n            children: /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"Question\",\n              label: \"N\\u1ED9i dung\",\n              children: /*#__PURE__*/_jsxDEV(Editor, {\n                exerciseList: dataExercise,\n                deleteAllQuestion: deleteAllQuestion,\n                deleteSingleQuestion: function deleteSingleQuestion(quesID) {\n                  return _deleteSingleQuestion(quesID);\n                },\n                handleChange: function handleChange(value) {\n                  return getDataEditor(value);\n                },\n                isReset: isResetEditor,\n                questionContent: questionDataForm === null || questionDataForm === void 0 ? void 0 : questionDataForm.Paragraph,\n                questionData: questionDataForm,\n                addQuestion: function addQuestion(inputID) {\n                  return _addQuestion(inputID);\n                },\n                visible: visible\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 430,\n                columnNumber: 21\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 429,\n              columnNumber: 19\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6 col-12\",\n            style: {\n              borderLeft: \"2px dotted #dbdbdb\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"style-label\",\n              style: {\n                textDecoration: \"underline\"\n              },\n              children: \"\\u0110\\xE1p \\xE1n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 19\n            }, _this), questionDataForm === null || questionDataForm === void 0 ? void 0 : (_questionDataForm$Exe4 = questionDataForm.ExerciseList) === null || _questionDataForm$Exe4 === void 0 ? void 0 : _questionDataForm$Exe4.map(function (itemQues, index) {\n              var _itemQues$ExerciseAns;\n\n              return itemQues.Enable && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"question-item-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"\",\n                  style: {\n                    fontWeight: 500,\n                    color: \"#525252\"\n                  },\n                  children: returnIndexQuestion(itemQues)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 470,\n                  columnNumber: 27\n                }, _this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                  title: \"Th\\xEAm \\u0111\\xE1p \\xE1n\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn-add-answer mb-3\",\n                    onClick: function onClick() {\n                      return handleAddAnswer(itemQues.inputID);\n                    },\n                    children: /*#__PURE__*/_jsxDEV(Plus, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 481,\n                      columnNumber: 31\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 477,\n                    columnNumber: 29\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 476,\n                  columnNumber: 27\n                }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: (_itemQues$ExerciseAns = itemQues.ExerciseAnswer) === null || _itemQues$ExerciseAns === void 0 ? void 0 : _itemQues$ExerciseAns.map(function (itemAns, index) {\n                    return itemAns.Enable && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-md-6 col-12\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"row-ans\",\n                        children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n                          checked: itemAns.isTrue,\n                          onChange: function onChange(e) {\n                            return onChange_isCorrect(e, itemAns.ID, itemQues.inputID);\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 491,\n                          columnNumber: 39\n                        }, _this), /*#__PURE__*/_jsxDEV(Form.Item, {\n                          className: \"mb-0\",\n                          children: /*#__PURE__*/_jsxDEV(Input, {\n                            value: itemAns.AnswerContent,\n                            className: \"style-input\",\n                            onChange: function onChange(e) {\n                              return onChange_text(e, itemAns.ID, itemQues.inputID);\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 502,\n                            columnNumber: 41\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 501,\n                          columnNumber: 39\n                        }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          className: \"delete-ans\",\n                          onClick: function onClick() {\n                            return deleteAnswerItem(itemAns.ID, itemQues.inputID);\n                          },\n                          children: /*#__PURE__*/_jsxDEV(CloseOutlined, {}, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 523,\n                            columnNumber: 41\n                          }, _this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 514,\n                          columnNumber: 39\n                        }, _this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 490,\n                        columnNumber: 37\n                      }, _this)\n                    }, index, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 489,\n                      columnNumber: 35\n                    }, _this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 485,\n                  columnNumber: 27\n                }, _this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 469,\n                columnNumber: 25\n              }, _this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 15\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 13\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 11\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 418,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(DragForm, \"00HQvYlFUNjjte5/IUv7IA+nEYA=\", false, function () {\n  return [useWrap, useForm, Form.useForm];\n});\n\n_c = DragForm;\nexport default DragForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"DragForm\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/QuestionBank/QuestionFormType/DragForm.tsx"],"names":["React","useEffect","useState","useForm","useWrap","Form","Spin","Checkbox","Input","Tooltip","Editor","exerciseGroupApi","CloseOutlined","Plus","AnsID","QuesID","DragForm","props","console","log","isSubmit","questionData","changeIsSubmit","visible","showNoti","handleSubmit","formState","isSubmitting","errors","isSubmitted","form","questionDataForm","setQuestionDataForm","isResetEditor","setIsResetEditor","linkUpload","setLinkUpload","loadingUpload","setLoadingUpload","loadingForm","setLoadingForm","reloadContent","setReloadContent","dataExercise","setDataExercise","onchange_UploadFile","info","file","status","UploadAudio","originFileObj","res","data","message","onSubmit","e","getDataEditor","dataEditor","Paragraph","resetForm","Content","ExerciseAnswer","forEach","item","AnswerContent","isTrue","deleteAllQuestion","splice","length","ExerciseList","Enable","deleteSingleQuestion","QuestionID","QuestionIndex","findIndex","inputID","ExerciseIndex","isAdd","addQuestion","objAns","ExerciseGroupID","ID","SubjectID","SubjectName","DescribeAnswer","Level","LevelName","LinkAudio","Type","TypeName","push","handleAddAnswer","questionID","every","onChange_isCorrect","AnswerID","checked","target","AnswerIndex","onChange_text","text","value","deleteAnswerItem","handleSubmitQuestion","newData","JSON","parse","stringify","index","ans","ind","update","handleSubmitChange","dataSubmit","cloneParagraph","indexInput","parseInt","toString","replace","test","returnIndexQuestion","itemQues","title","ex","dataGroupDetail","id","getWithID","reloadNewContent","filterExerciseList","filter","quesID","borderLeft","textDecoration","map","fontWeight","color","itemAns"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useWrap } from \"~/context/wrap\";\r\nimport { Form, Spin, Checkbox, Input, Tooltip } from \"antd\";\r\nimport Editor from \"~/components/Elements/Editor\";\r\nimport { exerciseGroupApi } from \"~/apiBase/\";\r\nimport { dataQuestion } from \"~/lib/question-bank/dataBoxType\";\r\nimport { UploadOutlined, CloseOutlined } from \"@ant-design/icons\";\r\nimport { Plus } from \"react-feather\";\r\n\r\nlet AnsID = 0;\r\nlet QuesID = -1;\r\n\r\nconst DragForm = (props) => {\r\n  console.log(\"Câu hỏi kéo thả\");\r\n  const { isSubmit, questionData, changeIsSubmit, visible } = props;\r\n  const { showNoti } = useWrap();\r\n  const {\r\n    handleSubmit,\r\n    formState: { isSubmitting, errors, isSubmitted },\r\n  } = useForm();\r\n  const [form] = Form.useForm();\r\n  const [questionDataForm, setQuestionDataForm] = useState(null);\r\n  const [isResetEditor, setIsResetEditor] = useState(false);\r\n  const [linkUpload, setLinkUpload] = useState(null);\r\n  const [loadingUpload, setLoadingUpload] = useState(false);\r\n  const [loadingForm, setLoadingForm] = useState(false);\r\n  const [reloadContent, setReloadContent] = useState(false);\r\n  const [dataExercise, setDataExercise] = useState([]);\r\n\r\n  console.log(\"Question Data Form: \", questionDataForm);\r\n  console.log(\"Data Exercise in form: \", dataExercise);\r\n\r\n  // Upload file audio\r\n  const onchange_UploadFile = async (info) => {\r\n    // console.log(\"Info File upload: \", info);\r\n    if (info.file.status === \"uploading\") {\r\n      setLoadingUpload(true);\r\n      return;\r\n    }\r\n    setLoadingUpload(true);\r\n    try {\r\n      let res = await exerciseGroupApi.UploadAudio(info.file.originFileObj);\r\n      if (res.status == 200) {\r\n        setLinkUpload(res.data.data);\r\n        showNoti(\"success\", \"Upload file thành công\");\r\n      }\r\n    } catch (error) {\r\n      showNoti(\"danger\", error.message);\r\n    } finally {\r\n      setLoadingUpload(false);\r\n    }\r\n  };\r\n\r\n  // SUBMI FORM\r\n  const onSubmit = handleSubmit((data: any, e) => {\r\n    // console.log(\"DATA SUBMIT: \", data);\r\n  });\r\n\r\n  // GET VALUE IN EDITOR\r\n  const getDataEditor = (dataEditor) => {\r\n    console.log(\"Value Editor Form: \", dataEditor);\r\n    if (questionDataForm) {\r\n      questionDataForm.Paragraph = dataEditor;\r\n    }\r\n    setQuestionDataForm({ ...questionDataForm });\r\n  };\r\n\r\n  // Reset value in form\r\n  const resetForm = () => {\r\n    questionDataForm.Content = \"\";\r\n    questionDataForm.ExerciseAnswer.forEach((item) => {\r\n      item.AnswerContent = \"\";\r\n      item.isTrue = false;\r\n    });\r\n    setQuestionDataForm({ ...questionDataForm });\r\n  };\r\n\r\n  // HANDLE DELETE ALL QUESTION\r\n  const deleteAllQuestion = () => {\r\n    dataExercise?.splice(0, dataExercise.length);\r\n    questionDataForm?.ExerciseList?.forEach((item) => {\r\n      item.Enable = false;\r\n    });\r\n\r\n    setDataExercise([...dataExercise]);\r\n    setQuestionDataForm({ ...questionDataForm });\r\n  };\r\n\r\n  // HANDLE DELETE QUESTION\r\n  const deleteSingleQuestion = (QuestionID) => {\r\n    console.log(\"Question ID cần xóa: \", QuestionID);\r\n    let QuestionIndex = questionDataForm.ExerciseList.findIndex(\r\n      (item) => item.inputID == QuestionID\r\n    );\r\n    let ExerciseIndex = dataExercise.findIndex(\r\n      (item) => item.inputID == QuestionID\r\n    );\r\n\r\n    dataExercise.splice(ExerciseIndex, 1);\r\n\r\n    if (questionDataForm.ExerciseList[QuestionIndex]) {\r\n      if (questionDataForm.ExerciseList[QuestionIndex].isAdd) {\r\n        questionDataForm.ExerciseList.splice(QuestionIndex, 1);\r\n      } else {\r\n        questionDataForm.ExerciseList[QuestionIndex].Enable = false;\r\n      }\r\n    } else {\r\n      showNoti(\"danger\", \"Câu hỏi không tồn tại\");\r\n    }\r\n\r\n    setDataExercise([...dataExercise]);\r\n    setQuestionDataForm({ ...questionDataForm });\r\n  };\r\n\r\n  // HANDLE ADD QUESTION\r\n  const addQuestion = (inputID) => {\r\n    AnsID++;\r\n    let objAns = {\r\n      // ID: inputID,\r\n      inputID: inputID,\r\n      Content: \"\",\r\n      ExerciseGroupID: questionDataForm.ID,\r\n      SubjectID: questionDataForm.SubjectID,\r\n      SubjectName: questionDataForm.SubjectName,\r\n      DescribeAnswer: \"\",\r\n      Level: questionDataForm.Level,\r\n      LevelName: questionDataForm.LevelName,\r\n      LinkAudio: null,\r\n      Type: questionDataForm.Type,\r\n      TypeName: questionDataForm.TypeName,\r\n      isAdd: true,\r\n      Enable: true,\r\n      ExerciseAnswer: [\r\n        {\r\n          ID: AnsID,\r\n          AnswerContent: \"\",\r\n          isTrue: true,\r\n          Enable: true,\r\n          isAdd: true,\r\n        },\r\n      ],\r\n    };\r\n    questionDataForm.ExerciseList.push(objAns);\r\n    dataExercise.push(objAns);\r\n\r\n    setDataExercise([...dataExercise]);\r\n    setQuestionDataForm({ ...questionDataForm });\r\n  };\r\n\r\n  // ====== HANDLE ADD ANSWER ======\r\n  const handleAddAnswer = (questionID: number) => {\r\n    AnsID++;\r\n    questionDataForm.ExerciseList.every((item) => {\r\n      if (item.inputID == questionID) {\r\n        item.ExerciseAnswer.push({\r\n          ID: AnsID,\r\n          AnswerContent: \"\",\r\n          isTrue: false,\r\n          Enable: true,\r\n          isAdd: true,\r\n        });\r\n        return false;\r\n      }\r\n      return true;\r\n    });\r\n\r\n    setQuestionDataForm({ ...questionDataForm });\r\n  };\r\n\r\n  const onChange_isCorrect = (e, AnswerID, QuestionID) => {\r\n    let checked = e.target.checked;\r\n\r\n    // - Get question index\r\n    let QuestionIndex = questionDataForm?.ExerciseList?.findIndex(\r\n      (item) => item.inputID == QuestionID\r\n    );\r\n\r\n    // - Get answer index\r\n    let AnswerIndex = questionDataForm.ExerciseList[\r\n      QuestionIndex\r\n    ].ExerciseAnswer.findIndex((item) => item.ID == AnswerID);\r\n\r\n    // Delete all is true before and new isTrue\r\n    questionDataForm.ExerciseList[QuestionIndex].ExerciseAnswer.forEach(\r\n      (item) => {\r\n        item.isTrue = false;\r\n      }\r\n    );\r\n\r\n    // - add isTrue\r\n    questionDataForm.ExerciseList[QuestionIndex].ExerciseAnswer[\r\n      AnswerIndex\r\n    ].isTrue = checked;\r\n\r\n    setQuestionDataForm({ ...questionDataForm });\r\n  };\r\n\r\n  console.log(\"QUESTION DATA FORM IN DRAG: \", questionDataForm);\r\n\r\n  // ====== ON CHANGE TEXT ======\r\n  const onChange_text = (e: any, AnswerID: number, QuestionID) => {\r\n    console.log(\"QuestionID: \", QuestionID);\r\n    // - Get value\r\n    let text = e.target.value;\r\n\r\n    // - Get question index\r\n    let QuestionIndex = questionDataForm?.ExerciseList?.findIndex(\r\n      (item) => item.inputID == QuestionID\r\n    );\r\n\r\n    // - Get answer index\r\n    let AnswerIndex = questionDataForm.ExerciseList[\r\n      QuestionIndex\r\n    ].ExerciseAnswer.findIndex((item) => item.ID == AnswerID);\r\n\r\n    // - add text\r\n    questionDataForm.ExerciseList[QuestionIndex].ExerciseAnswer[\r\n      AnswerIndex\r\n    ].AnswerContent = text;\r\n\r\n    setQuestionDataForm({ ...questionDataForm });\r\n  };\r\n\r\n  // ====== DELETE ANSWER ======\r\n  const deleteAnswerItem = (AnswerID: number, QuestionID: number) => {\r\n    // - Get question index\r\n    let QuestionIndex = questionDataForm.ExerciseList.findIndex(\r\n      (item) => item.inputID == QuestionID\r\n    );\r\n\r\n    // - Get answer index\r\n    let AnswerIndex = questionDataForm.ExerciseList[\r\n      QuestionIndex\r\n    ].ExerciseAnswer.findIndex((item) => item.ID == AnswerID);\r\n\r\n    // Action delete\r\n    if (\r\n      questionDataForm.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex]\r\n        .isAdd\r\n    ) {\r\n      questionDataForm.ExerciseList[QuestionIndex].ExerciseAnswer.splice(\r\n        AnswerIndex,\r\n        1\r\n      );\r\n    } else {\r\n      questionDataForm.ExerciseList[QuestionIndex].ExerciseAnswer[\r\n        AnswerIndex\r\n      ].Enable = false;\r\n    }\r\n\r\n    // setAnswerList([...answerList]);\r\n    setQuestionDataForm({ ...questionDataForm });\r\n  };\r\n\r\n  // SUBMIT FORM\r\n  const handleSubmitQuestion = async () => {\r\n    let res = null;\r\n\r\n    let newData = JSON.parse(JSON.stringify(questionDataForm));\r\n\r\n    // custom data\r\n    newData.ExerciseList.forEach((item, index) => {\r\n      item.ExerciseAnswer.forEach((ans, ind) => {\r\n        if (ans.isAdd) {\r\n          delete ans.ID;\r\n        }\r\n      });\r\n    });\r\n    if (questionDataForm.ExerciseGroupID) {\r\n      newData.ID = questionDataForm.ExerciseGroupID;\r\n    }\r\n\r\n    newData.ExerciseGroupID = null;\r\n    console.log(\"DataSubmit: \", newData);\r\n    // ----------\r\n\r\n    try {\r\n      res = await exerciseGroupApi.update(newData);\r\n\r\n      if (res.status == 200) {\r\n        handleSubmitChange(res.data.data);\r\n      }\r\n    } catch (error) {\r\n      showNoti(\"danger\", error.message);\r\n    }\r\n  };\r\n\r\n  // SUBMIT AND CHANGE PARAGRAPH\r\n  const handleSubmitChange = async (dataSubmit) => {\r\n    let res = null;\r\n\r\n    let cloneParagraph = dataSubmit.Paragraph;\r\n\r\n    console.log(\"DATA submit after: \", dataSubmit);\r\n\r\n    dataSubmit.ExerciseList.forEach((item, index) => {\r\n      let indexInput: any = parseInt(item.inputID) + 1;\r\n      indexInput = indexInput.toString();\r\n      cloneParagraph = cloneParagraph.replace(\r\n        `<input id=\"${item.inputID}\" class=\"space-editor\" placeholder=\"(${indexInput})\">`,\r\n        `<div ques-id=\"${item.ID}\" id=\"${item.inputID}\" class='space-editor drag-item' ondrop=\"drop(event)\" ondragover=\"allowDrop(event)\">(${indexInput})</div>`\r\n      );\r\n\r\n      let test = `<input id=\"${item.inputID}\" class='space-editor' placeholder=\"(${indexInput})\">`;\r\n      console.log(\"COI THỬ NÀY LÀ GÌ: \", test);\r\n    });\r\n\r\n    console.log(\"Paragraph new: \", cloneParagraph);\r\n\r\n    dataSubmit.Paragraph = cloneParagraph;\r\n\r\n    console.log(\"Paragraph new in submit: \", dataSubmit.Paragraph);\r\n\r\n    // ----------\r\n\r\n    try {\r\n      res = await exerciseGroupApi.update(dataSubmit);\r\n\r\n      if (res.status == 200) {\r\n        changeIsSubmit(res.data.data);\r\n        if (!questionDataForm.ID) {\r\n          resetForm();\r\n        }\r\n        showNoti(\"success\", `Tạo câu hỏi thành công`);\r\n        setIsResetEditor(true);\r\n      }\r\n    } catch (error) {\r\n      showNoti(\"danger\", error.message);\r\n    }\r\n  };\r\n\r\n  //RETURN INDEX QUESTION - Trả về thứ tự của từng câu hỏi\r\n  const returnIndexQuestion = (itemQues) => {\r\n    let title = \"\";\r\n    let index = dataExercise.findIndex((ex) => ex.inputID == itemQues.inputID);\r\n    title = `Câu (${index + 1})`;\r\n    return title;\r\n  };\r\n\r\n  // GET GROUP DETAIL DATA\r\n  const dataGroupDetail = async () => {\r\n    setLoadingForm(true);\r\n\r\n    let id = null;\r\n    if (questionData.ID) {\r\n      id = questionData.ID;\r\n    } else {\r\n      id = questionData.ExerciseGroupID;\r\n    }\r\n\r\n    try {\r\n      let res = await exerciseGroupApi.getWithID(id);\r\n      res.status == 200 && reloadNewContent(res.data.data);\r\n      res.status == 204 && showNoti(\"danger\", \"Không có dữ liệu\");\r\n    } catch (error) {\r\n      showNoti(\"danger\", error.message);\r\n    } finally {\r\n      setLoadingForm(false);\r\n    }\r\n  };\r\n\r\n  const reloadNewContent = (data) => {\r\n    let filterExerciseList = data.ExerciseList.filter(\r\n      (item) => item.Enable !== false\r\n    );\r\n    data.ExerciseList = [...filterExerciseList];\r\n\r\n    setDataExercise([...filterExerciseList]);\r\n    setQuestionDataForm({ ...data });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isSubmit) {\r\n      handleSubmitQuestion();\r\n      return;\r\n    }\r\n  }, [isSubmit]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"Visible: \", visible);\r\n    console.log(\"Question Data: \", questionData);\r\n    if (visible) {\r\n      dataGroupDetail();\r\n    }\r\n  }, [visible]);\r\n\r\n  // useEffect(() => {\r\n  //   if (reloadContent) {\r\n  //     (async function loadData() {\r\n  //       try {\r\n  //         let res = await exerciseGroupApi.getWithID(questionDataForm.ID);\r\n\r\n  //         if (res.status == 200) {\r\n  //           changeIsSubmit(res.data.data);\r\n  //           showNoti(\"success\", `Thành công`);\r\n  //           if (!questionDataForm.ID) {\r\n  //             resetForm();\r\n  //           }\r\n  //           setIsResetEditor(true);\r\n\r\n  //           setTimeout(() => {\r\n  //             setIsResetEditor(false);\r\n  //           }, 500);\r\n  //         }\r\n\r\n  //         res.status == 204 && showNoti(\"danger\", \"Không có dữ liệu\");\r\n  //       } catch (error) {\r\n  //         showNoti(\"danger\", error.message);\r\n  //       } finally {\r\n  //         setReloadContent(false);\r\n  //       }\r\n  //     })();\r\n  //   }\r\n  // }, [reloadContent]);\r\n\r\n  return (\r\n    <div className=\"form-create-question\">\r\n      {visible && loadingForm ? (\r\n        <div className=\"w-100 text-center mt-3\">\r\n          <Spin />\r\n        </div>\r\n      ) : (\r\n        visible && (\r\n          <Form form={form} layout=\"vertical\" onFinish={onSubmit}>\r\n            <div className=\"container-fluid\">\r\n              <div className=\"row\">\r\n                <div className=\"col-md-6 col-12\">\r\n                  <Form.Item name=\"Question\" label=\"Nội dung\">\r\n                    <Editor\r\n                      exerciseList={dataExercise}\r\n                      deleteAllQuestion={deleteAllQuestion}\r\n                      deleteSingleQuestion={(quesID: number) =>\r\n                        deleteSingleQuestion(quesID)\r\n                      }\r\n                      handleChange={(value: string) => getDataEditor(value)}\r\n                      isReset={isResetEditor}\r\n                      questionContent={questionDataForm?.Paragraph}\r\n                      questionData={questionDataForm}\r\n                      addQuestion={(inputID: number) => addQuestion(inputID)}\r\n                      visible={visible}\r\n                    />\r\n                  </Form.Item>\r\n                  {/* <Form.Item label=\"Tải lên link Audio\">\r\n                    <Upload\r\n                      onChange={onchange_UploadFile}\r\n                      showUploadList={false}\r\n                    >\r\n                      <Button icon={<UploadOutlined />}>Click to Upload</Button>\r\n                      <div className=\"d-block\">\r\n                        {loadingUpload ? <Spin /> : linkUpload && linkUpload}\r\n                      </div>\r\n                    </Upload>\r\n                  </Form.Item> */}\r\n                </div>\r\n                <div\r\n                  className=\"col-md-6 col-12\"\r\n                  style={{ borderLeft: \"2px dotted #dbdbdb\" }}\r\n                >\r\n                  <p\r\n                    className=\"style-label\"\r\n                    style={{ textDecoration: \"underline\" }}\r\n                  >\r\n                    Đáp án\r\n                  </p>\r\n                  {questionDataForm?.ExerciseList?.map(\r\n                    (itemQues, index) =>\r\n                      itemQues.Enable && (\r\n                        <div key={index} className=\"question-item-group\">\r\n                          <p\r\n                            className=\"\"\r\n                            style={{ fontWeight: 500, color: \"#525252\" }}\r\n                          >\r\n                            {returnIndexQuestion(itemQues)}\r\n                          </p>\r\n                          <Tooltip title=\"Thêm đáp án\">\r\n                            <button\r\n                              className=\"btn-add-answer mb-3\"\r\n                              onClick={() => handleAddAnswer(itemQues.inputID)}\r\n                            >\r\n                              <Plus />\r\n                            </button>\r\n                          </Tooltip>\r\n\r\n                          <div className=\"row\">\r\n                            {itemQues.ExerciseAnswer?.map(\r\n                              (itemAns, index) =>\r\n                                itemAns.Enable && (\r\n                                  <div className=\"col-md-6 col-12\" key={index}>\r\n                                    <div className=\"row-ans\">\r\n                                      <Checkbox\r\n                                        checked={itemAns.isTrue}\r\n                                        onChange={(e) =>\r\n                                          onChange_isCorrect(\r\n                                            e,\r\n                                            itemAns.ID,\r\n                                            itemQues.inputID\r\n                                          )\r\n                                        }\r\n                                      ></Checkbox>\r\n                                      <Form.Item className=\"mb-0\">\r\n                                        <Input\r\n                                          value={itemAns.AnswerContent}\r\n                                          className=\"style-input\"\r\n                                          onChange={(e) =>\r\n                                            onChange_text(\r\n                                              e,\r\n                                              itemAns.ID,\r\n                                              itemQues.inputID\r\n                                            )\r\n                                          }\r\n                                        ></Input>\r\n                                      </Form.Item>\r\n                                      <button\r\n                                        className=\"delete-ans\"\r\n                                        onClick={() =>\r\n                                          deleteAnswerItem(\r\n                                            itemAns.ID,\r\n                                            itemQues.inputID\r\n                                          )\r\n                                        }\r\n                                      >\r\n                                        <CloseOutlined />\r\n                                      </button>\r\n                                    </div>\r\n                                  </div>\r\n                                )\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      )\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </Form>\r\n        )\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DragForm;\r\n"]},"metadata":{},"sourceType":"module"}