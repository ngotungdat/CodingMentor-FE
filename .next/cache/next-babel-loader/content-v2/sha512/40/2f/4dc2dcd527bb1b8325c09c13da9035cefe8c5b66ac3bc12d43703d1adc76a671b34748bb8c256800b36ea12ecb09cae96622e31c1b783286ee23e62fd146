{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _toConsumableArray from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\Option\\\\ProgramDetail\\\\CurriculumDetail.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Select, Switch } from 'antd';\nimport { useRouter } from 'next/router';\nimport React, { useEffect, useState } from 'react';\nimport { curriculumDetailApi, examTopicApi } from '~/apiBase';\nimport NestedTable from '~/components/Elements/NestedTable';\nimport PowerTable from '~/components/PowerTable';\nimport { useWrap } from '~/context/wrap';\nimport AddExamForm from './AddExamForm';\nimport DetailsModal from './DetailsModal';\nvar pageIndex = 1;\nvar listFieldSearch = {\n  pageIndex: 1\n};\n\nvar CurriculumDetail = function CurriculumDetail(props) {\n  _s();\n\n  var Option = Select.Option;\n  var router = useRouter();\n  var _router$query = router.query,\n      courseID = _router$query.courseID,\n      slug = _router$query.slug; // const curriculumID = parseInt(router.query.slug as string);\n\n  var curriculumID = props.curriculumID,\n      dataSubject = props.dataSubject,\n      loadingOut = props.loadingOut,\n      isNested = props.isNested,\n      isFixed = props.isFixed,\n      disable = props.disable;\n\n  var _useState = useState([]),\n      saveValue = _useState[0],\n      setSaveValue = _useState[1];\n\n  var _useState2 = useState({\n    id: null,\n    status: false\n  }),\n      loadingSelect = _useState2[0],\n      setLoadingSelect = _useState2[1]; // ------ BASE USESTATE TABLE -------\n\n\n  var _useState3 = useState([]),\n      dataSource = _useState3[0],\n      setDataSource = _useState3[1];\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti,\n      pageSize = _useWrap.pageSize,\n      isAdmin = _useWrap.isAdmin;\n\n  var _useState4 = useState({\n    type: '',\n    status: false\n  }),\n      isLoading = _useState4[0],\n      setIsLoading = _useState4[1];\n\n  var _useState5 = useState({\n    pageIndex: 1,\n    pageSize: 100,\n    Type: 4 // 4 LÀ BÀI TẬP\n\n  }),\n      examTopic = _useState5[0],\n      setExamTopic = _useState5[1];\n\n  var _useState6 = useState(null),\n      totalPage = _useState6[0],\n      setTotalPage = _useState6[1];\n\n  var _useState7 = useState(1),\n      currentPage = _useState7[0],\n      setCurrentPage = _useState7[1];\n\n  var listTodoApi = {\n    pageSize: pageSize,\n    pageIndex: pageIndex,\n    CurriculumID: curriculumID ? curriculumID : null\n  };\n\n  var _useState8 = useState(listTodoApi),\n      todoApi = _useState8[0],\n      setTodoApi = _useState8[1];\n\n  var _useState9 = useState(null),\n      dataExamTopic = _useState9[0],\n      setDataExamTopic = _useState9[1];\n\n  var _useState10 = useState(null),\n      currentCheckID = _useState10[0],\n      setCurrentCheckID = _useState10[1];\n\n  var _useState11 = useState({\n    id: null,\n    status: false\n  }),\n      loadingCheck = _useState11[0],\n      setLoadingCheck = _useState11[1]; // GET DATA COURSE\n\n\n  var getDataSource = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setIsLoading({\n                type: 'GET_ALL',\n                status: true\n              });\n              _context.prev = 1;\n              _context.next = 4;\n              return curriculumDetailApi.getAll(todoApi);\n\n            case 4:\n              res = _context.sent;\n\n              if (res.status == 200) {\n                if (res.data.data.length > 0) {\n                  setDataSource(res.data.data);\n                  setTotalPage(res.data.totalRow); // showNoti(\"success\", \"Thành công\");\n                } else {\n                  showNoti('danger', 'Không có dữ liệu');\n                }\n              }\n\n              res.status == 204 && showNoti('danger', 'Không có dữ liệu') && setDataSource([]);\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](1);\n              showNoti('danger', _context.t0.message);\n\n            case 12:\n              _context.prev = 12;\n              setIsLoading({\n                type: 'GET_ALL',\n                status: false\n              });\n              return _context.finish(12);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 9, 12, 15]]);\n    }));\n\n    return function getDataSource() {\n      return _ref.apply(this, arguments);\n    };\n  }(); // ---------------- AFTER SUBMIT -----------------\n\n\n  var afterPost = function afterPost(mes) {\n    showNoti('success', mes);\n    setTodoApi(_objectSpread({}, listTodoApi));\n    setCurrentPage(1);\n  };\n\n  var updateSubject = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(value, data, index) {\n      var cloneData, res, newDataSource;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              cloneData = _objectSpread({}, data);\n              cloneData.SubjectID = value; // let cloneArr = [...saveValue];\n              // cloneArr.push(data);\n              // setSaveValue(cloneArr);\n\n              setLoadingSelect({\n                id: data.ID,\n                status: true\n              });\n              _context2.prev = 3;\n              _context2.next = 6;\n              return curriculumDetailApi.update({\n                ID: data.ID,\n                SubjectID: value\n              });\n\n            case 6:\n              res = _context2.sent;\n\n              if (res.status == 200) {\n                newDataSource = _toConsumableArray(dataSource);\n                newDataSource.splice(index, 1, cloneData);\n                setDataSource(newDataSource);\n                showNoti('success', res.data.message);\n              }\n\n              _context2.next = 14;\n              break;\n\n            case 10:\n              _context2.prev = 10;\n              _context2.t0 = _context2[\"catch\"](3);\n              console.log('error: ', _context2.t0);\n              showNoti('danger', _context2.t0.message);\n\n            case 14:\n              _context2.prev = 14;\n              setLoadingSelect({\n                id: data.ID,\n                status: false\n              });\n              return _context2.finish(14);\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[3, 10, 14, 17]]);\n    }));\n\n    return function updateSubject(_x, _x2, _x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var returnValue = function returnValue(ID) {\n    var value = null;\n    dataSource.every(function (item, index) {\n      if (item.ID == ID) {\n        value = item.SubjectID;\n        return false;\n      } else {\n        return true;\n      }\n    }); // console.log(\"Value is: \", value);\n\n    return value;\n  }; // -------------- GET PAGE_NUMBER -----------------\n\n\n  var _getPagination = function getPagination(pageNumber) {\n    setCurrentPage(pageNumber);\n    setTodoApi(_objectSpread(_objectSpread({}, todoApi), {}, {\n      pageIndex: pageNumber\n    }));\n  };\n\n  var onChange_typeLesson = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(ID, checked) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              res = null;\n              setLoadingCheck({\n                id: ID,\n                status: true\n              });\n              _context3.prev = 2;\n\n              if (!checked) {\n                _context3.next = 9;\n                break;\n              }\n\n              _context3.next = 6;\n              return curriculumDetailApi.update({\n                ID: ID,\n                isExam: true\n              });\n\n            case 6:\n              res = _context3.sent;\n              _context3.next = 12;\n              break;\n\n            case 9:\n              _context3.next = 11;\n              return curriculumDetailApi.update({\n                ID: ID,\n                isExam: false\n              });\n\n            case 11:\n              res = _context3.sent;\n\n            case 12:\n              if (res.status == 200) {\n                showNoti('success', checked ? 'Đã chuyển sang kiểm tra' : 'Đã tắt kiểm tra');\n                setTodoApi(_objectSpread({}, todoApi));\n\n                if (checked) {\n                  setCurrentCheckID(ID);\n                } else {\n                  setCurrentCheckID(null);\n                }\n              }\n\n              _context3.next = 18;\n              break;\n\n            case 15:\n              _context3.prev = 15;\n              _context3.t0 = _context3[\"catch\"](2);\n              showNoti('danger', _context3.t0.message);\n\n            case 18:\n              _context3.prev = 18;\n              setLoadingCheck({\n                id: ID,\n                status: false\n              });\n              return _context3.finish(18);\n\n            case 21:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[2, 15, 18, 21]]);\n    }));\n\n    return function onChange_typeLesson(_x4, _x5) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var getLessonID = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              _context4.next = 3;\n              return examTopicApi.getAll(examTopic);\n\n            case 3:\n              res = _context4.sent;\n\n              if (res.status == 200) {\n                // showNoti(\"success\", \"Upload file thành công\");\n                setDataExamTopic(res.data.data);\n              } else if (res.status == 204) {// showNoti(\"danger\", \"Không có dữ liệu\");\n              }\n\n              _context4.next = 9;\n              break;\n\n            case 7:\n              _context4.prev = 7;\n              _context4.t0 = _context4[\"catch\"](0);\n\n            case 9:\n              _context4.prev = 9;\n              return _context4.finish(9);\n\n            case 11:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[0, 7, 9, 11]]);\n    }));\n\n    return function getLessonID() {\n      return _ref4.apply(this, arguments);\n    };\n  }(); // ============== USE EFFECT - FETCH DATA ===================\n\n\n  useEffect(function () {\n    getDataSource();\n    getLessonID();\n  }, [todoApi]);\n  useEffect(function () {\n    if (loadingOut && loadingOut.status && loadingOut.type === 'GET_ALL') {\n      getDataSource();\n    }\n  }, [loadingOut]);\n  var columns = [{\n    title: 'Môn học',\n    dataIndex: 'SubjectName',\n    key: 'subjectname',\n    className: 'text-center',\n    render: function render(text, data, index) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: isAdmin ? dataSubject && /*#__PURE__*/_jsxDEV(Select, {\n          loading: data.ID == loadingSelect.id && loadingSelect.status,\n          value: returnValue(data.ID),\n          style: {\n            width: '100%',\n            margin: 'auto'\n          },\n          className: \"style-input\",\n          showSearch: true,\n          optionFilterProp: \"children\",\n          defaultValue: data.SubjectID,\n          onChange: function onChange(value) {\n            return updateSubject(value, data, index);\n          },\n          children: [/*#__PURE__*/_jsxDEV(Option, {\n            value: 0,\n            children: \"Tr\\u1ED1ng\"\n          }, \"none\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 9\n          }, _this), dataSubject === null || dataSubject === void 0 ? void 0 : dataSubject.map(function (item, index) {\n            return /*#__PURE__*/_jsxDEV(Option, {\n              value: item.ID,\n              children: item.SubjectName\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 10\n            }, _this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 8\n        }, _this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-weight-black\",\n          children: text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 7\n        }, _this)\n      }, void 0, false);\n    }\n  }, {\n    title: 'Trạng thái',\n    dataIndex: 'StatusName',\n    key: 'statusname',\n    className: 'text-center',\n    render: function render(text, data) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: isAdmin ? isFixed ? /*#__PURE__*/_jsxDEV(Switch, {\n          checked: data.IsExam,\n          checkedChildren: \"Ki\\u1EC3m tra\",\n          unCheckedChildren: \"Ki\\u1EC3m tra\",\n          onChange: function onChange(checked) {\n            return onChange_typeLesson(data.ID, checked);\n          },\n          loading: loadingCheck.id == data.ID && loadingCheck.status\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 8\n        }, _this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: data !== null && data !== void 0 && data.IsExam ? 'Kiểm tra' : 'Buổi học'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 8\n        }, _this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: data !== null && data !== void 0 && data.IsExam ? 'Kiểm tra' : 'Buổi học'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 7\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 5\n      }, _this);\n    }\n  }, {\n    title: 'Buổi học',\n    dataIndex: 'LessonNumber',\n    key: 'lessonnumber',\n    className: 'col-short text-center'\n  }, // {\n  //   title: \"\",\n  //   dataIndex: \"StatusName\",\n  //   key: \"statusname\",\n  //   className: \"text-center\",\n  //   render: (text, data) => (\n  //     <AddCurriculumForm\n  //       curriculumDetailID={data.ID}\n  //       dataExamTopic={dataExamTopic}\n  //       dataCurriculumDetail={dataSource}\n  //       callFrom=\"main\"\n  //       onFetchData={() => setTodoApi({ ...todoApi })}\n  //     />\n  //   ),\n  // },\n  {\n    title: '',\n    dataIndex: 'StatusName',\n    key: 'statusname',\n    className: 'text-center',\n    render: function render(text, data) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: !data.IsExam ? /*#__PURE__*/_jsxDEV(DetailsModal, {\n          isAdmin: isAdmin,\n          curriculumDetailID: data.ID,\n          dataExamTopic: dataExamTopic,\n          dataCurriculumDetail: dataSource,\n          onFetchData: function onFetchData() {\n            return setTodoApi(_objectSpread({}, todoApi));\n          },\n          courseID: courseID,\n          dataRow: data,\n          isFixed: isFixed\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 7\n        }, _this) : /*#__PURE__*/_jsxDEV(AddExamForm, {\n          disable: props.disable,\n          dataExamTopic: dataExamTopic,\n          dataRow: data,\n          onFetchData: function onFetchData() {\n            return setTodoApi(_objectSpread({}, todoApi)), setCurrentCheckID(null);\n          },\n          currentCheckID: currentCheckID\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 7\n        }, _this)\n      }, void 0, false);\n    }\n  }];\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: isNested ? /*#__PURE__*/_jsxDEV(NestedTable, {\n      currentPage: currentPage,\n      totalPage: totalPage && totalPage,\n      getPagination: function getPagination(pageNumber) {\n        return _getPagination(pageNumber);\n      },\n      addClass: \"table-curriculum-detail\",\n      loading: isLoading,\n      dataSource: dataSource,\n      columns: columns\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 5\n    }, _this) : /*#__PURE__*/_jsxDEV(PowerTable, {\n      currentPage: currentPage,\n      totalPage: totalPage && totalPage,\n      getPagination: function getPagination(pageNumber) {\n        return _getPagination(pageNumber);\n      },\n      addClass: \"table-curriculum-detail\",\n      loading: isLoading,\n      dataSource: dataSource,\n      columns: columns\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 5\n    }, _this)\n  }, void 0, false);\n};\n\n_s(CurriculumDetail, \"dpwtzd64/671aauEKNuB1YgIKl4=\", false, function () {\n  return [useRouter, useWrap];\n});\n\n_c = CurriculumDetail;\nexport default CurriculumDetail;\n\nvar _c;\n\n$RefreshReg$(_c, \"CurriculumDetail\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/Option/ProgramDetail/CurriculumDetail.tsx"],"names":["Select","Switch","useRouter","React","useEffect","useState","curriculumDetailApi","examTopicApi","NestedTable","PowerTable","useWrap","AddExamForm","DetailsModal","pageIndex","listFieldSearch","CurriculumDetail","props","Option","router","query","courseID","slug","curriculumID","dataSubject","loadingOut","isNested","isFixed","disable","saveValue","setSaveValue","id","status","loadingSelect","setLoadingSelect","dataSource","setDataSource","showNoti","pageSize","isAdmin","type","isLoading","setIsLoading","Type","examTopic","setExamTopic","totalPage","setTotalPage","currentPage","setCurrentPage","listTodoApi","CurriculumID","todoApi","setTodoApi","dataExamTopic","setDataExamTopic","currentCheckID","setCurrentCheckID","loadingCheck","setLoadingCheck","getDataSource","getAll","res","data","length","totalRow","message","afterPost","mes","updateSubject","value","index","cloneData","SubjectID","ID","update","newDataSource","splice","console","log","returnValue","every","item","getPagination","pageNumber","onChange_typeLesson","checked","isExam","getLessonID","columns","title","dataIndex","key","className","render","text","width","margin","map","SubjectName","IsExam"],"mappings":";;;;;;;;;;;;;;;AAAA,SAASA,MAAT,EAAiBC,MAAjB,QAA+B,MAA/B;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,mBAAT,EAA8BC,YAA9B,QAAkD,WAAlD;AACA,OAAOC,WAAP,MAAwB,mCAAxB;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,SAASC,OAAT,QAAwB,gBAAxB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AAEA,IAAIC,SAAS,GAAG,CAAhB;AAEA,IAAIC,eAAe,GAAG;AACrBD,EAAAA,SAAS,EAAE;AADU,CAAtB;;AAIA,IAAME,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,KAAD,EAAW;AAAA;;AAAA,MAC3BC,MAD2B,GAChBjB,MADgB,CAC3BiB,MAD2B;AAEnC,MAAMC,MAAM,GAAGhB,SAAS,EAAxB;AAFmC,sBAGQgB,MAAM,CAACC,KAHf;AAAA,MAGjBC,QAHiB,iBAG3BA,QAH2B;AAAA,MAGDC,IAHC,iBAGPA,IAHO,EAInC;;AAJmC,MAK3BC,YAL2B,GAK2CN,KAL3C,CAK3BM,YAL2B;AAAA,MAKbC,WALa,GAK2CP,KAL3C,CAKbO,WALa;AAAA,MAKAC,UALA,GAK2CR,KAL3C,CAKAQ,UALA;AAAA,MAKYC,QALZ,GAK2CT,KAL3C,CAKYS,QALZ;AAAA,MAKsBC,OALtB,GAK2CV,KAL3C,CAKsBU,OALtB;AAAA,MAK+BC,OAL/B,GAK2CX,KAL3C,CAK+BW,OAL/B;;AAAA,kBAODtB,QAAQ,CAAC,EAAD,CAPP;AAAA,MAO5BuB,SAP4B;AAAA,MAOjBC,YAPiB;;AAAA,mBAQOxB,QAAQ,CAAC;AAClDyB,IAAAA,EAAE,EAAE,IAD8C;AAElDC,IAAAA,MAAM,EAAE;AAF0C,GAAD,CARf;AAAA,MAQ5BC,aAR4B;AAAA,MAQbC,gBARa,kBAanC;;;AAbmC,mBAcC5B,QAAQ,CAAsB,EAAtB,CAdT;AAAA,MAc5B6B,UAd4B;AAAA,MAchBC,aAdgB;;AAAA,iBAeKzB,OAAO,EAfZ;AAAA,MAe3B0B,QAf2B,YAe3BA,QAf2B;AAAA,MAejBC,QAfiB,YAejBA,QAfiB;AAAA,MAePC,OAfO,YAePA,OAfO;;AAAA,mBAgBDjC,QAAQ,CAAC;AAC1CkC,IAAAA,IAAI,EAAE,EADoC;AAE1CR,IAAAA,MAAM,EAAE;AAFkC,GAAD,CAhBP;AAAA,MAgB5BS,SAhB4B;AAAA,MAgBjBC,YAhBiB;;AAAA,mBAoBDpC,QAAQ,CAAC;AAC1CQ,IAAAA,SAAS,EAAE,CAD+B;AAE1CwB,IAAAA,QAAQ,EAAE,GAFgC;AAG1CK,IAAAA,IAAI,EAAE,CAHoC,CAGlC;;AAHkC,GAAD,CApBP;AAAA,MAoB5BC,SApB4B;AAAA,MAoBjBC,YApBiB;;AAAA,mBAyBDvC,QAAQ,CAAC,IAAD,CAzBP;AAAA,MAyB5BwC,SAzB4B;AAAA,MAyBjBC,YAzBiB;;AAAA,mBA0BGzC,QAAQ,CAAC,CAAD,CA1BX;AAAA,MA0B5B0C,WA1B4B;AAAA,MA0BfC,cA1Be;;AA2BnC,MAAMC,WAAW,GAAG;AACnBZ,IAAAA,QAAQ,EAAEA,QADS;AAEnBxB,IAAAA,SAAS,EAAEA,SAFQ;AAGnBqC,IAAAA,YAAY,EAAE5B,YAAY,GAAGA,YAAH,GAAkB;AAHzB,GAApB;;AA3BmC,mBAgCLjB,QAAQ,CAAC4C,WAAD,CAhCH;AAAA,MAgC5BE,OAhC4B;AAAA,MAgCnBC,UAhCmB;;AAAA,mBAiCO/C,QAAQ,CAAC,IAAD,CAjCf;AAAA,MAiC5BgD,aAjC4B;AAAA,MAiCbC,gBAjCa;;AAAA,oBAmCSjD,QAAQ,CAAS,IAAT,CAnCjB;AAAA,MAmC5BkD,cAnC4B;AAAA,MAmCZC,iBAnCY;;AAAA,oBAoCKnD,QAAQ,CAAC;AAChDyB,IAAAA,EAAE,EAAE,IAD4C;AAEhDC,IAAAA,MAAM,EAAE;AAFwC,GAAD,CApCb;AAAA,MAoC5B0B,YApC4B;AAAA,MAoCdC,eApCc,mBAyCnC;;;AACA,MAAMC,aAAa;AAAA,wEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AACrBlB,cAAAA,YAAY,CAAC;AACZF,gBAAAA,IAAI,EAAE,SADM;AAEZR,gBAAAA,MAAM,EAAE;AAFI,eAAD,CAAZ;AADqB;AAAA;AAAA,qBAOJzB,mBAAmB,CAACsD,MAApB,CAA2BT,OAA3B,CAPI;;AAAA;AAOhBU,cAAAA,GAPgB;;AASpB,kBAAIA,GAAG,CAAC9B,MAAJ,IAAc,GAAlB,EAAuB;AACtB,oBAAI8B,GAAG,CAACC,IAAJ,CAASA,IAAT,CAAcC,MAAd,GAAuB,CAA3B,EAA8B;AAC7B5B,kBAAAA,aAAa,CAAC0B,GAAG,CAACC,IAAJ,CAASA,IAAV,CAAb;AACAhB,kBAAAA,YAAY,CAACe,GAAG,CAACC,IAAJ,CAASE,QAAV,CAAZ,CAF6B,CAG7B;AACA,iBAJD,MAIO;AACN5B,kBAAAA,QAAQ,CAAC,QAAD,EAAW,kBAAX,CAAR;AACA;AACD;;AAEDyB,cAAAA,GAAG,CAAC9B,MAAJ,IAAc,GAAd,IAAqBK,QAAQ,CAAC,QAAD,EAAW,kBAAX,CAA7B,IAA+DD,aAAa,CAAC,EAAD,CAA5E;AAnBoB;AAAA;;AAAA;AAAA;AAAA;AAqBpBC,cAAAA,QAAQ,CAAC,QAAD,EAAW,YAAM6B,OAAjB,CAAR;;AArBoB;AAAA;AAuBpBxB,cAAAA,YAAY,CAAC;AACZF,gBAAAA,IAAI,EAAE,SADM;AAEZR,gBAAAA,MAAM,EAAE;AAFI,eAAD,CAAZ;AAvBoB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAb4B,aAAa;AAAA;AAAA;AAAA,KAAnB,CA1CmC,CAwEnC;;;AACA,MAAMO,SAAS,GAAG,SAAZA,SAAY,CAACC,GAAD,EAAS;AAC1B/B,IAAAA,QAAQ,CAAC,SAAD,EAAY+B,GAAZ,CAAR;AACAf,IAAAA,UAAU,mBACNH,WADM,EAAV;AAIAD,IAAAA,cAAc,CAAC,CAAD,CAAd;AACA,GAPD;;AASA,MAAMoB,aAAa;AAAA,yEAAG,kBAAOC,KAAP,EAAcP,IAAd,EAAoBQ,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AACjBC,cAAAA,SADiB,qBACAT,IADA;AAErBS,cAAAA,SAAS,CAACC,SAAV,GAAsBH,KAAtB,CAFqB,CAIrB;AACA;AACA;;AAEApC,cAAAA,gBAAgB,CAAC;AAChBH,gBAAAA,EAAE,EAAEgC,IAAI,CAACW,EADO;AAEhB1C,gBAAAA,MAAM,EAAE;AAFQ,eAAD,CAAhB;AARqB;AAAA;AAAA,qBAcJzB,mBAAmB,CAACoE,MAApB,CAA2B;AAC1CD,gBAAAA,EAAE,EAAEX,IAAI,CAACW,EADiC;AAE1CD,gBAAAA,SAAS,EAAEH;AAF+B,eAA3B,CAdI;;AAAA;AAchBR,cAAAA,GAdgB;;AAmBpB,kBAAIA,GAAG,CAAC9B,MAAJ,IAAc,GAAlB,EAAuB;AAClB4C,gBAAAA,aADkB,sBACEzC,UADF;AAEtByC,gBAAAA,aAAa,CAACC,MAAd,CAAqBN,KAArB,EAA4B,CAA5B,EAA+BC,SAA/B;AACApC,gBAAAA,aAAa,CAACwC,aAAD,CAAb;AACAvC,gBAAAA,QAAQ,CAAC,SAAD,EAAYyB,GAAG,CAACC,IAAJ,CAASG,OAArB,CAAR;AACA;;AAxBmB;AAAA;;AAAA;AAAA;AAAA;AA0BpBY,cAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACA1C,cAAAA,QAAQ,CAAC,QAAD,EAAW,aAAM6B,OAAjB,CAAR;;AA3BoB;AAAA;AA6BpBhC,cAAAA,gBAAgB,CAAC;AAChBH,gBAAAA,EAAE,EAAEgC,IAAI,CAACW,EADO;AAEhB1C,gBAAAA,MAAM,EAAE;AAFQ,eAAD,CAAhB;AA7BoB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAbqC,aAAa;AAAA;AAAA;AAAA,KAAnB;;AAoCA,MAAMW,WAAW,GAAG,SAAdA,WAAc,CAACN,EAAD,EAAa;AAChC,QAAIJ,KAAK,GAAG,IAAZ;AACAnC,IAAAA,UAAU,CAAC8C,KAAX,CAAiB,UAACC,IAAD,EAAOX,KAAP,EAAiB;AACjC,UAAIW,IAAI,CAACR,EAAL,IAAWA,EAAf,EAAmB;AAClBJ,QAAAA,KAAK,GAAGY,IAAI,CAACT,SAAb;AACA,eAAO,KAAP;AACA,OAHD,MAGO;AACN,eAAO,IAAP;AACA;AACD,KAPD,EAFgC,CAWhC;;AACA,WAAOH,KAAP;AACA,GAbD,CAtHmC,CAqInC;;;AACA,MAAMa,cAAa,GAAG,SAAhBA,aAAgB,CAACC,UAAD,EAAwB;AAC7CnC,IAAAA,cAAc,CAACmC,UAAD,CAAd;AACA/B,IAAAA,UAAU,iCACND,OADM;AAETtC,MAAAA,SAAS,EAAEsE;AAFF,OAAV;AAIA,GAND;;AAQA,MAAMC,mBAAmB;AAAA,yEAAG,kBAAOX,EAAP,EAAWY,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AACvBxB,cAAAA,GADuB,GACjB,IADiB;AAG3BH,cAAAA,eAAe,CAAC;AACf5B,gBAAAA,EAAE,EAAE2C,EADW;AAEf1C,gBAAAA,MAAM,EAAE;AAFO,eAAD,CAAf;AAH2B;;AAAA,mBAQtBsD,OARsB;AAAA;AAAA;AAAA;;AAAA;AAAA,qBASb/E,mBAAmB,CAACoE,MAApB,CAA2B;AAAED,gBAAAA,EAAE,EAAEA,EAAN;AAAUa,gBAAAA,MAAM,EAAE;AAAlB,eAA3B,CATa;;AAAA;AASzBzB,cAAAA,GATyB;AAAA;AAAA;;AAAA;AAAA;AAAA,qBAWbvD,mBAAmB,CAACoE,MAApB,CAA2B;AAAED,gBAAAA,EAAE,EAAEA,EAAN;AAAUa,gBAAAA,MAAM,EAAE;AAAlB,eAA3B,CAXa;;AAAA;AAWzBzB,cAAAA,GAXyB;;AAAA;AAc1B,kBAAIA,GAAG,CAAC9B,MAAJ,IAAc,GAAlB,EAAuB;AACtBK,gBAAAA,QAAQ,CAAC,SAAD,EAAYiD,OAAO,GAAG,yBAAH,GAA+B,iBAAlD,CAAR;AAEAjC,gBAAAA,UAAU,mBAAMD,OAAN,EAAV;;AAEA,oBAAIkC,OAAJ,EAAa;AACZ7B,kBAAAA,iBAAiB,CAACiB,EAAD,CAAjB;AACA,iBAFD,MAEO;AACNjB,kBAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACA;AACD;;AAxByB;AAAA;;AAAA;AAAA;AAAA;AA0B1BpB,cAAAA,QAAQ,CAAC,QAAD,EAAW,aAAM6B,OAAjB,CAAR;;AA1B0B;AAAA;AA4B1BP,cAAAA,eAAe,CAAC;AACf5B,gBAAAA,EAAE,EAAE2C,EADW;AAEf1C,gBAAAA,MAAM,EAAE;AAFO,eAAD,CAAf;AA5B0B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAnBqD,mBAAmB;AAAA;AAAA;AAAA,KAAzB;;AAmCA,MAAMG,WAAW;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEFhF,YAAY,CAACqD,MAAb,CAAoBjB,SAApB,CAFE;;AAAA;AAEdkB,cAAAA,GAFc;;AAGlB,kBAAIA,GAAG,CAAC9B,MAAJ,IAAc,GAAlB,EAAuB;AACtB;AACAuB,gBAAAA,gBAAgB,CAACO,GAAG,CAACC,IAAJ,CAASA,IAAV,CAAhB;AACA,eAHD,MAGO,IAAID,GAAG,CAAC9B,MAAJ,IAAc,GAAlB,EAAuB,CAC7B;AACA;;AARiB;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAXwD,WAAW;AAAA;AAAA;AAAA,KAAjB,CAjLmC,CA+LnC;;;AACAnF,EAAAA,SAAS,CAAC,YAAM;AACfuD,IAAAA,aAAa;AACb4B,IAAAA,WAAW;AACX,GAHQ,EAGN,CAACpC,OAAD,CAHM,CAAT;AAKA/C,EAAAA,SAAS,CAAC,YAAM;AACf,QAAIoB,UAAU,IAAIA,UAAU,CAACO,MAAzB,IAAmCP,UAAU,CAACe,IAAX,KAAoB,SAA3D,EAAsE;AACrEoB,MAAAA,aAAa;AACb;AACD,GAJQ,EAIN,CAACnC,UAAD,CAJM,CAAT;AAMA,MAAMgE,OAAO,GAAG,CACf;AACCC,IAAAA,KAAK,EAAE,SADR;AAECC,IAAAA,SAAS,EAAE,aAFZ;AAGCC,IAAAA,GAAG,EAAE,aAHN;AAICC,IAAAA,SAAS,EAAE,aAJZ;AAKCC,IAAAA,MAAM,EAAE,gBAACC,IAAD,EAAOhC,IAAP,EAAaQ,KAAb;AAAA,0BACP;AAAA,kBACEhC,OAAO,GACPf,WAAW,iBACV,QAAC,MAAD;AACC,UAAA,OAAO,EAAEuC,IAAI,CAACW,EAAL,IAAWzC,aAAa,CAACF,EAAzB,IAA+BE,aAAa,CAACD,MADvD;AAEC,UAAA,KAAK,EAAEgD,WAAW,CAACjB,IAAI,CAACW,EAAN,CAFnB;AAGC,UAAA,KAAK,EAAE;AAAEsB,YAAAA,KAAK,EAAE,MAAT;AAAiBC,YAAAA,MAAM,EAAE;AAAzB,WAHR;AAIC,UAAA,SAAS,EAAC,aAJX;AAKC,UAAA,UAAU,MALX;AAMC,UAAA,gBAAgB,EAAC,UANlB;AAOC,UAAA,YAAY,EAAElC,IAAI,CAACU,SAPpB;AAQC,UAAA,QAAQ,EAAE,kBAACH,KAAD;AAAA,mBAAWD,aAAa,CAACC,KAAD,EAAQP,IAAR,EAAcQ,KAAd,CAAxB;AAAA,WARX;AAAA,kCAUC,QAAC,MAAD;AAAmB,YAAA,KAAK,EAAE,CAA1B;AAAA;AAAA,aAAY,MAAZ;AAAA;AAAA;AAAA;AAAA,mBAVD,EAaE/C,WAbF,aAaEA,WAbF,uBAaEA,WAAW,CAAE0E,GAAb,CAAiB,UAAChB,IAAD,EAAOX,KAAP;AAAA,gCACjB,QAAC,MAAD;AAAoB,cAAA,KAAK,EAAEW,IAAI,CAACR,EAAhC;AAAA,wBACEQ,IAAI,CAACiB;AADP,eAAa5B,KAAb;AAAA;AAAA;AAAA;AAAA,qBADiB;AAAA,WAAjB,CAbF;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFM,gBAuBP;AAAG,UAAA,SAAS,EAAC,mBAAb;AAAA,oBAAkCwB;AAAlC;AAAA;AAAA;AAAA;AAAA;AAxBF,uBADO;AAAA;AALT,GADe,EAoCf;AACCL,IAAAA,KAAK,EAAE,YADR;AAECC,IAAAA,SAAS,EAAE,YAFZ;AAGCC,IAAAA,GAAG,EAAE,YAHN;AAICC,IAAAA,SAAS,EAAE,aAJZ;AAKCC,IAAAA,MAAM,EAAE,gBAACC,IAAD,EAAOhC,IAAP;AAAA,0BACP;AAAA,kBACExB,OAAO,GACPZ,OAAO,gBACN,QAAC,MAAD;AACC,UAAA,OAAO,EAAEoC,IAAI,CAACqC,MADf;AAEC,UAAA,eAAe,EAAC,eAFjB;AAGC,UAAA,iBAAiB,EAAC,eAHnB;AAIC,UAAA,QAAQ,EAAE,kBAACd,OAAD;AAAA,mBAAaD,mBAAmB,CAACtB,IAAI,CAACW,EAAN,EAAUY,OAAV,CAAhC;AAAA,WAJX;AAKC,UAAA,OAAO,EAAE5B,YAAY,CAAC3B,EAAb,IAAmBgC,IAAI,CAACW,EAAxB,IAA8BhB,YAAY,CAAC1B;AALrD;AAAA;AAAA;AAAA;AAAA,iBADM,gBASN;AAAA,oBAAI+B,IAAI,SAAJ,IAAAA,IAAI,WAAJ,IAAAA,IAAI,CAAEqC,MAAN,GAAe,UAAf,GAA4B;AAAhC;AAAA;AAAA;AAAA;AAAA,iBAVM,gBAaP;AAAA,oBAAIrC,IAAI,SAAJ,IAAAA,IAAI,WAAJ,IAAAA,IAAI,CAAEqC,MAAN,GAAe,UAAf,GAA4B;AAAhC;AAAA;AAAA;AAAA;AAAA;AAdF;AAAA;AAAA;AAAA;AAAA,eADO;AAAA;AALT,GApCe,EA6Df;AACCV,IAAAA,KAAK,EAAE,UADR;AAECC,IAAAA,SAAS,EAAE,cAFZ;AAGCC,IAAAA,GAAG,EAAE,cAHN;AAICC,IAAAA,SAAS,EAAE;AAJZ,GA7De,EAmEf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACCH,IAAAA,KAAK,EAAE,EADR;AAECC,IAAAA,SAAS,EAAE,YAFZ;AAGCC,IAAAA,GAAG,EAAE,YAHN;AAICC,IAAAA,SAAS,EAAE,aAJZ;AAKCC,IAAAA,MAAM,EAAE,gBAACC,IAAD,EAAOhC,IAAP;AAAA,0BACP;AAAA,kBAWE,CAACA,IAAI,CAACqC,MAAN,gBACA,QAAC,YAAD;AACC,UAAA,OAAO,EAAE7D,OADV;AAEC,UAAA,kBAAkB,EAAEwB,IAAI,CAACW,EAF1B;AAGC,UAAA,aAAa,EAAEpB,aAHhB;AAIC,UAAA,oBAAoB,EAAEnB,UAJvB;AAKC,UAAA,WAAW,EAAE;AAAA,mBAAMkB,UAAU,mBAAMD,OAAN,EAAhB;AAAA,WALd;AAMC,UAAA,QAAQ,EAAE/B,QANX;AAOC,UAAA,OAAO,EAAE0C,IAPV;AAQC,UAAA,OAAO,EAAEpC;AARV;AAAA;AAAA;AAAA;AAAA,iBADA,gBAYA,QAAC,WAAD;AACC,UAAA,OAAO,EAAEV,KAAK,CAACW,OADhB;AAEC,UAAA,aAAa,EAAE0B,aAFhB;AAGC,UAAA,OAAO,EAAES,IAHV;AAIC,UAAA,WAAW,EAAE;AAAA,mBAAOV,UAAU,mBAAMD,OAAN,EAAV,EAA4BK,iBAAiB,CAAC,IAAD,CAApD;AAAA,WAJd;AAKC,UAAA,cAAc,EAAED;AALjB;AAAA;AAAA;AAAA;AAAA;AAvBF,uBADO;AAAA;AALT,GAlFe,CAAhB;AA4HA,sBACC;AAAA,cACE9B,QAAQ,gBACR,QAAC,WAAD;AACC,MAAA,WAAW,EAAEsB,WADd;AAEC,MAAA,SAAS,EAAEF,SAAS,IAAIA,SAFzB;AAGC,MAAA,aAAa,EAAE,uBAACsC,UAAD;AAAA,eAAwBD,cAAa,CAACC,UAAD,CAArC;AAAA,OAHhB;AAIC,MAAA,QAAQ,EAAC,yBAJV;AAKC,MAAA,OAAO,EAAE3C,SALV;AAMC,MAAA,UAAU,EAAEN,UANb;AAOC,MAAA,OAAO,EAAEsD;AAPV;AAAA;AAAA;AAAA;AAAA,aADQ,gBAWR,QAAC,UAAD;AACC,MAAA,WAAW,EAAEzC,WADd;AAEC,MAAA,SAAS,EAAEF,SAAS,IAAIA,SAFzB;AAGC,MAAA,aAAa,EAAE,uBAACsC,UAAD;AAAA,eAAwBD,cAAa,CAACC,UAAD,CAArC;AAAA,OAHhB;AAIC,MAAA,QAAQ,EAAC,yBAJV;AAKC,MAAA,OAAO,EAAE3C,SALV;AAMC,MAAA,UAAU,EAAEN,UANb;AAOC,MAAA,OAAO,EAAEsD;AAPV;AAAA;AAAA;AAAA;AAAA;AAZF,mBADD;AAyBA,CAhWD;;GAAMzE,gB;UAEUb,S,EAayBQ,O;;;KAfnCK,gB;AAkWN,eAAeA,gBAAf","sourcesContent":["import { Select, Switch } from 'antd'\r\nimport { useRouter } from 'next/router'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { curriculumDetailApi, examTopicApi } from '~/apiBase'\r\nimport NestedTable from '~/components/Elements/NestedTable'\r\nimport PowerTable from '~/components/PowerTable'\r\nimport { useWrap } from '~/context/wrap'\r\nimport AddExamForm from './AddExamForm'\r\nimport DetailsModal from './DetailsModal'\r\n\r\nlet pageIndex = 1\r\n\r\nlet listFieldSearch = {\r\n\tpageIndex: 1\r\n}\r\n\r\nconst CurriculumDetail = (props) => {\r\n\tconst { Option } = Select\r\n\tconst router = useRouter()\r\n\tconst { courseID: courseID, slug: slug } = router.query\r\n\t// const curriculumID = parseInt(router.query.slug as string);\r\n\tconst { curriculumID, dataSubject, loadingOut, isNested, isFixed, disable } = props\r\n\r\n\tconst [saveValue, setSaveValue] = useState([])\r\n\tconst [loadingSelect, setLoadingSelect] = useState({\r\n\t\tid: null,\r\n\t\tstatus: false\r\n\t})\r\n\r\n\t// ------ BASE USESTATE TABLE -------\r\n\tconst [dataSource, setDataSource] = useState<ICurriculumDetail[]>([])\r\n\tconst { showNoti, pageSize, isAdmin } = useWrap()\r\n\tconst [isLoading, setIsLoading] = useState({\r\n\t\ttype: '',\r\n\t\tstatus: false\r\n\t})\r\n\tconst [examTopic, setExamTopic] = useState({\r\n\t\tpageIndex: 1,\r\n\t\tpageSize: 100,\r\n\t\tType: 4 // 4 LÀ BÀI TẬP\r\n\t})\r\n\tconst [totalPage, setTotalPage] = useState(null)\r\n\tconst [currentPage, setCurrentPage] = useState(1)\r\n\tconst listTodoApi = {\r\n\t\tpageSize: pageSize,\r\n\t\tpageIndex: pageIndex,\r\n\t\tCurriculumID: curriculumID ? curriculumID : null\r\n\t}\r\n\tconst [todoApi, setTodoApi] = useState(listTodoApi)\r\n\tconst [dataExamTopic, setDataExamTopic] = useState(null)\r\n\r\n\tconst [currentCheckID, setCurrentCheckID] = useState<number>(null)\r\n\tconst [loadingCheck, setLoadingCheck] = useState({\r\n\t\tid: null,\r\n\t\tstatus: false\r\n\t})\r\n\r\n\t// GET DATA COURSE\r\n\tconst getDataSource = async () => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'GET_ALL',\r\n\t\t\tstatus: true\r\n\t\t})\r\n\r\n\t\ttry {\r\n\t\t\tlet res = await curriculumDetailApi.getAll(todoApi)\r\n\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tif (res.data.data.length > 0) {\r\n\t\t\t\t\tsetDataSource(res.data.data)\r\n\t\t\t\t\tsetTotalPage(res.data.totalRow)\r\n\t\t\t\t\t// showNoti(\"success\", \"Thành công\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tshowNoti('danger', 'Không có dữ liệu')\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tres.status == 204 && showNoti('danger', 'Không có dữ liệu') && setDataSource([])\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'GET_ALL',\r\n\t\t\t\tstatus: false\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// ---------------- AFTER SUBMIT -----------------\r\n\tconst afterPost = (mes) => {\r\n\t\tshowNoti('success', mes)\r\n\t\tsetTodoApi({\r\n\t\t\t...listTodoApi\r\n\t\t\t// pageIndex: 1,\r\n\t\t})\r\n\t\tsetCurrentPage(1)\r\n\t}\r\n\r\n\tconst updateSubject = async (value, data, index) => {\r\n\t\tlet cloneData = { ...data }\r\n\t\tcloneData.SubjectID = value\r\n\r\n\t\t// let cloneArr = [...saveValue];\r\n\t\t// cloneArr.push(data);\r\n\t\t// setSaveValue(cloneArr);\r\n\r\n\t\tsetLoadingSelect({\r\n\t\t\tid: data.ID,\r\n\t\t\tstatus: true\r\n\t\t})\r\n\r\n\t\ttry {\r\n\t\t\tlet res = await curriculumDetailApi.update({\r\n\t\t\t\tID: data.ID,\r\n\t\t\t\tSubjectID: value\r\n\t\t\t})\r\n\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tlet newDataSource = [...dataSource]\r\n\t\t\t\tnewDataSource.splice(index, 1, cloneData)\r\n\t\t\t\tsetDataSource(newDataSource)\r\n\t\t\t\tshowNoti('success', res.data.message)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('error: ', error)\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetLoadingSelect({\r\n\t\t\t\tid: data.ID,\r\n\t\t\t\tstatus: false\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst returnValue = (ID: any) => {\r\n\t\tlet value = null\r\n\t\tdataSource.every((item, index) => {\r\n\t\t\tif (item.ID == ID) {\r\n\t\t\t\tvalue = item.SubjectID\r\n\t\t\t\treturn false\r\n\t\t\t} else {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\t// console.log(\"Value is: \", value);\r\n\t\treturn value\r\n\t}\r\n\r\n\t// -------------- GET PAGE_NUMBER -----------------\r\n\tconst getPagination = (pageNumber: number) => {\r\n\t\tsetCurrentPage(pageNumber)\r\n\t\tsetTodoApi({\r\n\t\t\t...todoApi,\r\n\t\t\tpageIndex: pageNumber\r\n\t\t})\r\n\t}\r\n\r\n\tconst onChange_typeLesson = async (ID, checked) => {\r\n\t\tlet res = null\r\n\r\n\t\tsetLoadingCheck({\r\n\t\t\tid: ID,\r\n\t\t\tstatus: true\r\n\t\t})\r\n\t\ttry {\r\n\t\t\tif (checked) {\r\n\t\t\t\tres = await curriculumDetailApi.update({ ID: ID, isExam: true })\r\n\t\t\t} else {\r\n\t\t\t\tres = await curriculumDetailApi.update({ ID: ID, isExam: false })\r\n\t\t\t}\r\n\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tshowNoti('success', checked ? 'Đã chuyển sang kiểm tra' : 'Đã tắt kiểm tra')\r\n\r\n\t\t\t\tsetTodoApi({ ...todoApi })\r\n\r\n\t\t\t\tif (checked) {\r\n\t\t\t\t\tsetCurrentCheckID(ID)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetCurrentCheckID(null)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetLoadingCheck({\r\n\t\t\t\tid: ID,\r\n\t\t\t\tstatus: false\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst getLessonID = async () => {\r\n\t\ttry {\r\n\t\t\tlet res = await examTopicApi.getAll(examTopic)\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\t// showNoti(\"success\", \"Upload file thành công\");\r\n\t\t\t\tsetDataExamTopic(res.data.data)\r\n\t\t\t} else if (res.status == 204) {\r\n\t\t\t\t// showNoti(\"danger\", \"Không có dữ liệu\");\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t} finally {\r\n\t\t}\r\n\t}\r\n\r\n\t// ============== USE EFFECT - FETCH DATA ===================\r\n\tuseEffect(() => {\r\n\t\tgetDataSource()\r\n\t\tgetLessonID()\r\n\t}, [todoApi])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (loadingOut && loadingOut.status && loadingOut.type === 'GET_ALL') {\r\n\t\t\tgetDataSource()\r\n\t\t}\r\n\t}, [loadingOut])\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Môn học',\r\n\t\t\tdataIndex: 'SubjectName',\r\n\t\t\tkey: 'subjectname',\r\n\t\t\tclassName: 'text-center',\r\n\t\t\trender: (text, data, index) => (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{isAdmin ? (\r\n\t\t\t\t\t\tdataSubject && (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tloading={data.ID == loadingSelect.id && loadingSelect.status}\r\n\t\t\t\t\t\t\t\tvalue={returnValue(data.ID)}\r\n\t\t\t\t\t\t\t\tstyle={{ width: '100%', margin: 'auto' }}\r\n\t\t\t\t\t\t\t\tclassName=\"style-input\"\r\n\t\t\t\t\t\t\t\tshowSearch\r\n\t\t\t\t\t\t\t\toptionFilterProp=\"children\"\r\n\t\t\t\t\t\t\t\tdefaultValue={data.SubjectID}\r\n\t\t\t\t\t\t\t\tonChange={(value) => updateSubject(value, data, index)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Option key=\"none\" value={0}>\r\n\t\t\t\t\t\t\t\t\tTrống\r\n\t\t\t\t\t\t\t\t</Option>\r\n\t\t\t\t\t\t\t\t{dataSubject?.map((item, index) => (\r\n\t\t\t\t\t\t\t\t\t<Option key={index} value={item.ID}>\r\n\t\t\t\t\t\t\t\t\t\t{item.SubjectName}\r\n\t\t\t\t\t\t\t\t\t</Option>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<p className=\"font-weight-black\">{text}</p>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</>\r\n\t\t\t)\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Trạng thái',\r\n\t\t\tdataIndex: 'StatusName',\r\n\t\t\tkey: 'statusname',\r\n\t\t\tclassName: 'text-center',\r\n\t\t\trender: (text, data) => (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{isAdmin ? (\r\n\t\t\t\t\t\tisFixed ? (\r\n\t\t\t\t\t\t\t<Switch\r\n\t\t\t\t\t\t\t\tchecked={data.IsExam}\r\n\t\t\t\t\t\t\t\tcheckedChildren=\"Kiểm tra\"\r\n\t\t\t\t\t\t\t\tunCheckedChildren=\"Kiểm tra\"\r\n\t\t\t\t\t\t\t\tonChange={(checked) => onChange_typeLesson(data.ID, checked)}\r\n\t\t\t\t\t\t\t\tloading={loadingCheck.id == data.ID && loadingCheck.status}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<p>{data?.IsExam ? 'Kiểm tra' : 'Buổi học'}</p>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<p>{data?.IsExam ? 'Kiểm tra' : 'Buổi học'}</p>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Buổi học',\r\n\t\t\tdataIndex: 'LessonNumber',\r\n\t\t\tkey: 'lessonnumber',\r\n\t\t\tclassName: 'col-short text-center'\r\n\t\t},\r\n\t\t// {\r\n\t\t//   title: \"\",\r\n\t\t//   dataIndex: \"StatusName\",\r\n\t\t//   key: \"statusname\",\r\n\t\t//   className: \"text-center\",\r\n\t\t//   render: (text, data) => (\r\n\t\t//     <AddCurriculumForm\r\n\t\t//       curriculumDetailID={data.ID}\r\n\t\t//       dataExamTopic={dataExamTopic}\r\n\t\t//       dataCurriculumDetail={dataSource}\r\n\t\t//       callFrom=\"main\"\r\n\t\t//       onFetchData={() => setTodoApi({ ...todoApi })}\r\n\t\t//     />\r\n\t\t//   ),\r\n\t\t// },\r\n\t\t{\r\n\t\t\ttitle: '',\r\n\t\t\tdataIndex: 'StatusName',\r\n\t\t\tkey: 'statusname',\r\n\t\t\tclassName: 'text-center',\r\n\t\t\trender: (text, data) => (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{/* {isAdmin && (\r\n\t\t\t\t\t\t<AddCurriculumForm\r\n\t\t\t\t\t\t\tcurriculumDetailID={data.ID}\r\n\t\t\t\t\t\t\tdataExamTopic={dataExamTopic}\r\n\t\t\t\t\t\t\tdataCurriculumDetail={dataSource}\r\n\t\t\t\t\t\t\tcallFrom=\"main\"\r\n\t\t\t\t\t\t\tonFetchData={() => setTodoApi({ ...todoApi })}\r\n\t\t\t\t\t\t\tdataRow={data}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)} */}\r\n\t\t\t\t\t{!data.IsExam ? (\r\n\t\t\t\t\t\t<DetailsModal\r\n\t\t\t\t\t\t\tisAdmin={isAdmin}\r\n\t\t\t\t\t\t\tcurriculumDetailID={data.ID}\r\n\t\t\t\t\t\t\tdataExamTopic={dataExamTopic}\r\n\t\t\t\t\t\t\tdataCurriculumDetail={dataSource}\r\n\t\t\t\t\t\t\tonFetchData={() => setTodoApi({ ...todoApi })}\r\n\t\t\t\t\t\t\tcourseID={courseID}\r\n\t\t\t\t\t\t\tdataRow={data}\r\n\t\t\t\t\t\t\tisFixed={isFixed}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<AddExamForm\r\n\t\t\t\t\t\t\tdisable={props.disable}\r\n\t\t\t\t\t\t\tdataExamTopic={dataExamTopic}\r\n\t\t\t\t\t\t\tdataRow={data}\r\n\t\t\t\t\t\t\tonFetchData={() => (setTodoApi({ ...todoApi }), setCurrentCheckID(null))}\r\n\t\t\t\t\t\t\tcurrentCheckID={currentCheckID}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</>\r\n\t\t\t)\r\n\t\t}\r\n\t]\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{isNested ? (\r\n\t\t\t\t<NestedTable\r\n\t\t\t\t\tcurrentPage={currentPage}\r\n\t\t\t\t\ttotalPage={totalPage && totalPage}\r\n\t\t\t\t\tgetPagination={(pageNumber: number) => getPagination(pageNumber)}\r\n\t\t\t\t\taddClass=\"table-curriculum-detail\"\r\n\t\t\t\t\tloading={isLoading}\r\n\t\t\t\t\tdataSource={dataSource}\r\n\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t/>\r\n\t\t\t) : (\r\n\t\t\t\t<PowerTable\r\n\t\t\t\t\tcurrentPage={currentPage}\r\n\t\t\t\t\ttotalPage={totalPage && totalPage}\r\n\t\t\t\t\tgetPagination={(pageNumber: number) => getPagination(pageNumber)}\r\n\t\t\t\t\taddClass=\"table-curriculum-detail\"\r\n\t\t\t\t\tloading={isLoading}\r\n\t\t\t\t\tdataSource={dataSource}\r\n\t\t\t\t\tcolumns={columns}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default CurriculumDetail\r\n"]},"metadata":{},"sourceType":"module"}