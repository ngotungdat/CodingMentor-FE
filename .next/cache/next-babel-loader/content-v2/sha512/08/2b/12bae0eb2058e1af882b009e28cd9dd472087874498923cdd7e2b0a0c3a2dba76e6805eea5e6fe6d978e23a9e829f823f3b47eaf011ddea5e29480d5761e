{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\QuestionBank\\\\QuestionFormType\\\\DragForm.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useState } from 'react';\nimport { useWrap } from '~/context/wrap';\nimport { Form, Spin, Checkbox, Input, Tooltip } from 'antd';\nimport Editor from '~/components/Elements/Editor';\nimport { exerciseGroupApi } from '~/apiBase/';\nimport { CloseOutlined } from '@ant-design/icons';\nimport { Plus } from 'react-feather';\nimport EditorSimple from '~/components/Elements/EditorSimple';\nlet AnsID = 0;\n\nconst DragForm = props => {\n  var _question$ExerciseLis3;\n\n  const {\n    questionData,\n    changeIsSubmit,\n    visible,\n    onChange,\n    isGroup\n  } = props;\n  const {\n    showNoti\n  } = useWrap();\n  const [form] = Form.useForm();\n  const {\n    0: question,\n    1: setQuestion\n  } = useState(null); // Dữ liệu câu hỏi + câu trả lời\n\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  const {\n    0: dataExercise,\n    1: setDataExercise\n  } = useState([]); // VỪA VÔ LẤY DỮ LIỆU\n\n  useEffect(() => {\n    visible ? dataGroupDetail() : setLoading(true);\n  }, [visible]);\n  useEffect(() => {\n    onChange(question);\n  }, [question]); // GET GROUP DETAIL DATA\n\n  const dataGroupDetail = async () => {\n    changeIsSubmit(true);\n\n    try {\n      let res = await exerciseGroupApi.getWithID(questionData.ID ? questionData.ID : questionData.ExerciseGroupID);\n      res.status == 200 && setQuestion(res.data.data);\n      res.status == 204 && showNoti('danger', 'Không có dữ liệu');\n    } catch (error) {\n      showNoti('danger', error === null || error === void 0 ? void 0 : error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const setDataEditor = e => {\n    setQuestion(_objectSpread(_objectSpread({}, question), {}, {\n      Paragraph: e\n    }));\n    onChange(_objectSpread(_objectSpread({}, question), {}, {\n      Paragraph: e\n    }));\n  };\n\n  const getDescribeAnswer = dataEditor => {\n    setQuestion(_objectSpread(_objectSpread({}, question), {}, {\n      DescribeAnswer: dataEditor\n    }));\n    onChange(_objectSpread(_objectSpread({}, question), {}, {\n      DescribeAnswer: dataEditor\n    }));\n  }; // HANDLE ADD QUESTION\n\n\n  const addQuestion = p => {\n    AnsID++;\n    let exerciseList = question === null || question === void 0 ? void 0 : question.ExerciseList;\n    let tempData = dataExercise;\n    let temp = {\n      inputID: p,\n      Content: '',\n      ExerciseGroupID: question.ID,\n      SubjectID: question.SubjectID,\n      SubjectName: question.SubjectName,\n      DescribeAnswer: '',\n      Level: question.Level,\n      LevelName: question.LevelName,\n      LinkAudio: null,\n      Type: question.Type,\n      TypeName: question.TypeName,\n      isAdd: true,\n      Enable: true,\n      ExerciseAnswer: [{\n        ID: AnsID,\n        AnswerContent: '',\n        isTrue: true,\n        Enable: true,\n        isAdd: true\n      }]\n    };\n    tempData.push(temp);\n    exerciseList.push(temp);\n    setDataExercise(tempData);\n    setQuestion(_objectSpread(_objectSpread({}, question), {}, {\n      ExerciseList: exerciseList\n    }));\n    onChange(_objectSpread(_objectSpread({}, question), {}, {\n      ExerciseList: exerciseList\n    }));\n  }; // HANDLE DELETE QUESTION\n\n\n  const deleteSingleQuestion = ID => {\n    let questionIndex = question.ExerciseList.findIndex(item => item.inputID == ID); // Lấy vị trí của cái ID truyền vào\n\n    let exerciseIndex = dataExercise.findIndex(item => item.inputID == ID); // Xóa bên Ex nếu nó khác -1\n\n    if (dataExercise[exerciseIndex]) {\n      dataExercise.splice(exerciseIndex, 1);\n    } // Xóa bên Quest nếu nó khác -1\n\n\n    if (question.ExerciseList[questionIndex]) {\n      if (question.ExerciseList[questionIndex].isAdd) {\n        question.ExerciseList.splice(questionIndex, 1);\n      } else {\n        question.ExerciseList[questionIndex].Enable = false;\n      }\n    } else {\n      console.log('Câu hỏi không tồn tại');\n    }\n\n    setDataExercise([...dataExercise]);\n    setQuestion(_objectSpread({}, question));\n    onChange(_objectSpread({}, question));\n  }; // HANDLE DELETE ALL QUESTION\n\n\n  const deleteAllQuestion = () => {\n    dataExercise === null || dataExercise === void 0 ? void 0 : dataExercise.splice(0, dataExercise.length); // Xóa tất cả tụi bên Ex\n\n    question.ExerciseList.forEach(item => {\n      item.Enable = false; // Xóa tất cả tụi bên này - gọi vậy để xóa trên data\n    });\n    setDataExercise([...dataExercise]);\n    setQuestion(_objectSpread(_objectSpread({}, question), {}, {\n      Paragraph: ''\n    }));\n    onChange(_objectSpread(_objectSpread({}, question), {}, {\n      Paragraph: ''\n    }));\n  }; // Lấy cái số hiện ra bên câu trả lời\n\n\n  const getQuestIndex = (ar, i) => {\n    let temp = [];\n\n    for (let i = 0; i < ar.length; i++) {\n      ar[i].Enable && temp.push(ar[i]);\n    }\n\n    return parseInt(temp.indexOf(i)) + 1;\n  }; // HANDLE ADD ANSWER\n\n\n  const handleAddAnswer = ID => {\n    AnsID++;\n    question.ExerciseList.every(item => {\n      if (item.inputID == ID) {\n        item.ExerciseAnswer.push({\n          ID: AnsID,\n          AnswerContent: '',\n          isTrue: true,\n          Enable: true,\n          isAdd: true\n        });\n        return false;\n      }\n\n      return true;\n    });\n    setQuestion(_objectSpread({}, question));\n  }; // ON CHANGE TEXT\n\n\n  const onChange_text = (e, AnswerID, QuestionID) => {\n    var _question$ExerciseLis;\n\n    let QuestionIndex = question === null || question === void 0 ? void 0 : (_question$ExerciseLis = question.ExerciseList) === null || _question$ExerciseLis === void 0 ? void 0 : _question$ExerciseLis.findIndex(item => item.Enable && item.inputID == QuestionID); // Get question index\n\n    let AnswerIndex = question.ExerciseList[QuestionIndex].ExerciseAnswer.findIndex(item => item.Enable && item.ID == AnswerID); // Get answer index\n\n    question.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex].AnswerContent = e.target.value; // Add text\n\n    setQuestion(_objectSpread({}, question));\n  }; // DELETE ANSWER\n\n\n  const deleteAnswerItem = (AnswerID, QuestionID) => {\n    let QuestionIndex = question.ExerciseList.findIndex(item => item.inputID == QuestionID); // - Get question index\n\n    let AnswerIndex = question.ExerciseList[QuestionIndex].ExerciseAnswer.findIndex(item => item.ID == AnswerID); // - Get answer index\n    // Action delete\n\n    if (question.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex].isAdd) {\n      question.ExerciseList[QuestionIndex].ExerciseAnswer.splice(AnswerIndex, 1);\n    } else {\n      question.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex].Enable = false;\n    }\n\n    setQuestion(_objectSpread({}, question));\n  };\n\n  const onChange_isCorrect = (e, AnswerID, QuestionID) => {\n    var _question$ExerciseLis2;\n\n    let checked = e.target.checked;\n    let QuestionIndex = question === null || question === void 0 ? void 0 : (_question$ExerciseLis2 = question.ExerciseList) === null || _question$ExerciseLis2 === void 0 ? void 0 : _question$ExerciseLis2.findIndex(item => item.inputID == QuestionID);\n    let AnswerIndex = question.ExerciseList[QuestionIndex].ExerciseAnswer.findIndex(item => item.ID == AnswerID);\n    question.ExerciseList[QuestionIndex].ExerciseAnswer.forEach(item => {\n      item.isTrue = false;\n    });\n    question.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex].isTrue = checked;\n    setQuestion(_objectSpread({}, question));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-create-question\",\n    children: visible && loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-100 text-center mt-3\",\n      children: /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 5\n    }, this) : visible && /*#__PURE__*/_jsxDEV(Form, {\n      form: form,\n      layout: \"vertical\",\n      onFinish: () => {},\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-fluid\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6 col-12\",\n            children: /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"Question\",\n              label: \"N\\u1ED9i dung\",\n              children: /*#__PURE__*/_jsxDEV(Editor, {\n                exerciseList: dataExercise,\n                deleteAllQuestion: deleteAllQuestion,\n                deleteSingleQuestion: quesID => deleteSingleQuestion(quesID),\n                handleChange: value => setDataEditor(value),\n                questionContent: question === null || question === void 0 ? void 0 : question.Paragraph // Câu hỏi được truyền vô\n                ,\n                questionData: question,\n                addQuestion: inputID => addQuestion(inputID),\n                visible: visible\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 11\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 10\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6 col-12\",\n            style: {\n              borderLeft: '2px dotted #dbdbdb'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"style-label\",\n              style: {\n                textDecoration: 'underline'\n              },\n              children: \"\\u0110\\xE1p \\xE1n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 10\n            }, this), question === null || question === void 0 ? void 0 : (_question$ExerciseLis3 = question.ExerciseList) === null || _question$ExerciseLis3 === void 0 ? void 0 : _question$ExerciseLis3.map((itemQues, index) => {\n              var _itemQues$ExerciseAns;\n\n              return itemQues.Enable && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"question-item-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"\",\n                  style: {\n                    fontWeight: 500,\n                    color: '#525252'\n                  },\n                  children: [\"C\\xE2u: \", getQuestIndex(question.ExerciseList, itemQues)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 14\n                }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                  title: \"Th\\xEAm \\u0111\\xE1p \\xE1n\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn-add-answer\",\n                    onClick: () => handleAddAnswer(itemQues.inputID),\n                    children: /*#__PURE__*/_jsxDEV(Plus, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 222,\n                      columnNumber: 16\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 221,\n                    columnNumber: 15\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 14\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: (_itemQues$ExerciseAns = itemQues.ExerciseAnswer) === null || _itemQues$ExerciseAns === void 0 ? void 0 : _itemQues$ExerciseAns.map((itemAns, index) => itemAns.Enable && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-md-6 col-12\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"row-ans mt-3\",\n                      children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n                        checked: itemAns.isTrue,\n                        onChange: e => onChange_isCorrect(e, itemAns.ID, itemQues.inputID)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 231,\n                        columnNumber: 20\n                      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n                        className: \"mb-0\",\n                        children: /*#__PURE__*/_jsxDEV(Input, {\n                          value: itemAns.AnswerContent,\n                          className: \"style-input\",\n                          onChange: e => onChange_text(e, itemAns.ID, itemQues.inputID)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 236,\n                          columnNumber: 21\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 235,\n                        columnNumber: 20\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"delete-ans\",\n                        onClick: () => deleteAnswerItem(itemAns.ID, itemQues.inputID),\n                        children: /*#__PURE__*/_jsxDEV(CloseOutlined, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 243,\n                          columnNumber: 21\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 242,\n                        columnNumber: 20\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 230,\n                      columnNumber: 19\n                    }, this)\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 229,\n                    columnNumber: 18\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 14\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 13\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 9\n          }, this), !(isGroup !== null && isGroup !== void 0 && isGroup.status) && /*#__PURE__*/_jsxDEV(Form.Item, {\n            label: \"Gi\\u1EA3i th\\xEDch \\u0111\\xE1p \\xE1n\",\n            name: \"DescribeAnswer\",\n            children: /*#__PURE__*/_jsxDEV(EditorSimple, {\n              handleChange: value => getDescribeAnswer(value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 10\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 8\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 6\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 185,\n    columnNumber: 3\n  }, this);\n};\n\nexport default DragForm;","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/QuestionBank/QuestionFormType/DragForm.tsx"],"names":["React","useEffect","useState","useWrap","Form","Spin","Checkbox","Input","Tooltip","Editor","exerciseGroupApi","CloseOutlined","Plus","EditorSimple","AnsID","DragForm","props","questionData","changeIsSubmit","visible","onChange","isGroup","showNoti","form","useForm","question","setQuestion","loading","setLoading","dataExercise","setDataExercise","dataGroupDetail","res","getWithID","ID","ExerciseGroupID","status","data","error","message","setDataEditor","e","Paragraph","getDescribeAnswer","dataEditor","DescribeAnswer","addQuestion","p","exerciseList","ExerciseList","tempData","temp","inputID","Content","SubjectID","SubjectName","Level","LevelName","LinkAudio","Type","TypeName","isAdd","Enable","ExerciseAnswer","AnswerContent","isTrue","push","deleteSingleQuestion","questionIndex","findIndex","item","exerciseIndex","splice","console","log","deleteAllQuestion","length","forEach","getQuestIndex","ar","i","parseInt","indexOf","handleAddAnswer","every","onChange_text","AnswerID","QuestionID","QuestionIndex","AnswerIndex","target","value","deleteAnswerItem","onChange_isCorrect","checked","quesID","borderLeft","textDecoration","map","itemQues","index","fontWeight","color","itemAns"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useWrap } from '~/context/wrap'\r\nimport { Form, Spin, Checkbox, Input, Tooltip } from 'antd'\r\nimport Editor from '~/components/Elements/Editor'\r\nimport { exerciseGroupApi } from '~/apiBase/'\r\nimport { CloseOutlined } from '@ant-design/icons'\r\nimport { Plus } from 'react-feather'\r\nimport EditorSimple from '~/components/Elements/EditorSimple'\r\n\r\nlet AnsID = 0\r\n\r\nconst DragForm = (props: any) => {\r\n\tconst { questionData, changeIsSubmit, visible, onChange, isGroup } = props\r\n\tconst { showNoti } = useWrap()\r\n\tconst [form] = Form.useForm()\r\n\tconst [question, setQuestion] = useState<any>(null) // Dữ liệu câu hỏi + câu trả lời\r\n\tconst [loading, setLoading] = useState<any>(true)\r\n\tconst [dataExercise, setDataExercise] = useState<any>([])\r\n\r\n\t// VỪA VÔ LẤY DỮ LIỆU\r\n\tuseEffect(() => {\r\n\t\tvisible ? dataGroupDetail() : setLoading(true)\r\n\t}, [visible])\r\n\r\n\tuseEffect(() => {\r\n\t\tonChange(question)\r\n\t}, [question])\r\n\r\n\t// GET GROUP DETAIL DATA\r\n\tconst dataGroupDetail = async () => {\r\n\t\tchangeIsSubmit(true)\r\n\t\ttry {\r\n\t\t\tlet res: any = await exerciseGroupApi.getWithID(questionData.ID ? questionData.ID : questionData.ExerciseGroupID)\r\n\t\t\tres.status == 200 && setQuestion(res.data.data)\r\n\t\t\tres.status == 204 && showNoti('danger', 'Không có dữ liệu')\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error?.message)\r\n\t\t} finally {\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst setDataEditor = (e: any) => {\r\n\t\tsetQuestion({ ...question, Paragraph: e })\r\n\t\tonChange({ ...question, Paragraph: e })\r\n\t}\r\n\r\n\tconst getDescribeAnswer = (dataEditor) => {\r\n\t\tsetQuestion({ ...question, DescribeAnswer: dataEditor })\r\n\t\tonChange({ ...question, DescribeAnswer: dataEditor })\r\n\t}\r\n\r\n\t// HANDLE ADD QUESTION\r\n\tconst addQuestion = (p: any) => {\r\n\t\tAnsID++\r\n\t\tlet exerciseList: any = question?.ExerciseList\r\n\t\tlet tempData: any = dataExercise\r\n\t\tlet temp: any = {\r\n\t\t\tinputID: p,\r\n\t\t\tContent: '',\r\n\t\t\tExerciseGroupID: question.ID,\r\n\t\t\tSubjectID: question.SubjectID,\r\n\t\t\tSubjectName: question.SubjectName,\r\n\t\t\tDescribeAnswer: '',\r\n\t\t\tLevel: question.Level,\r\n\t\t\tLevelName: question.LevelName,\r\n\t\t\tLinkAudio: null,\r\n\t\t\tType: question.Type,\r\n\t\t\tTypeName: question.TypeName,\r\n\t\t\tisAdd: true,\r\n\t\t\tEnable: true,\r\n\t\t\tExerciseAnswer: [\r\n\t\t\t\t{\r\n\t\t\t\t\tID: AnsID,\r\n\t\t\t\t\tAnswerContent: '',\r\n\t\t\t\t\tisTrue: true,\r\n\t\t\t\t\tEnable: true,\r\n\t\t\t\t\tisAdd: true\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t\ttempData.push(temp)\r\n\t\texerciseList.push(temp)\r\n\t\tsetDataExercise(tempData)\r\n\t\tsetQuestion({ ...question, ExerciseList: exerciseList })\r\n\t\tonChange({ ...question, ExerciseList: exerciseList })\r\n\t}\r\n\r\n\t// HANDLE DELETE QUESTION\r\n\tconst deleteSingleQuestion = (ID: any) => {\r\n\t\tlet questionIndex: any = question.ExerciseList.findIndex((item: any) => item.inputID == ID) // Lấy vị trí của cái ID truyền vào\r\n\t\tlet exerciseIndex: any = dataExercise.findIndex((item: any) => item.inputID == ID)\r\n\t\t// Xóa bên Ex nếu nó khác -1\r\n\t\tif (dataExercise[exerciseIndex]) {\r\n\t\t\tdataExercise.splice(exerciseIndex, 1)\r\n\t\t}\r\n\t\t// Xóa bên Quest nếu nó khác -1\r\n\t\tif (question.ExerciseList[questionIndex]) {\r\n\t\t\tif (question.ExerciseList[questionIndex].isAdd) {\r\n\t\t\t\tquestion.ExerciseList.splice(questionIndex, 1)\r\n\t\t\t} else {\r\n\t\t\t\tquestion.ExerciseList[questionIndex].Enable = false\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconsole.log('Câu hỏi không tồn tại')\r\n\t\t}\r\n\t\tsetDataExercise([...dataExercise])\r\n\t\tsetQuestion({ ...question })\r\n\t\tonChange({ ...question })\r\n\t}\r\n\r\n\t// HANDLE DELETE ALL QUESTION\r\n\tconst deleteAllQuestion = () => {\r\n\t\tdataExercise?.splice(0, dataExercise.length) // Xóa tất cả tụi bên Ex\r\n\t\tquestion.ExerciseList.forEach((item: any) => {\r\n\t\t\titem.Enable = false // Xóa tất cả tụi bên này - gọi vậy để xóa trên data\r\n\t\t})\r\n\t\tsetDataExercise([...dataExercise])\r\n\t\tsetQuestion({ ...question, Paragraph: '' })\r\n\t\tonChange({ ...question, Paragraph: '' })\r\n\t}\r\n\r\n\t// Lấy cái số hiện ra bên câu trả lời\r\n\tconst getQuestIndex = (ar: any, i: any) => {\r\n\t\tlet temp: any = []\r\n\t\tfor (let i = 0; i < ar.length; i++) {\r\n\t\t\tar[i].Enable && temp.push(ar[i])\r\n\t\t}\r\n\t\treturn parseInt(temp.indexOf(i)) + 1\r\n\t}\r\n\r\n\t// HANDLE ADD ANSWER\r\n\tconst handleAddAnswer = (ID: number) => {\r\n\t\tAnsID++\r\n\t\tquestion.ExerciseList.every((item: any) => {\r\n\t\t\tif (item.inputID == ID) {\r\n\t\t\t\titem.ExerciseAnswer.push({\r\n\t\t\t\t\tID: AnsID,\r\n\t\t\t\t\tAnswerContent: '',\r\n\t\t\t\t\tisTrue: true,\r\n\t\t\t\t\tEnable: true,\r\n\t\t\t\t\tisAdd: true\r\n\t\t\t\t})\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\treturn true\r\n\t\t})\r\n\t\tsetQuestion({ ...question })\r\n\t}\r\n\r\n\t// ON CHANGE TEXT\r\n\tconst onChange_text = (e: any, AnswerID: number, QuestionID: any) => {\r\n\t\tlet QuestionIndex: any = question?.ExerciseList?.findIndex((item: any) => item.Enable && item.inputID == QuestionID) // Get question index\r\n\t\tlet AnswerIndex: any = question.ExerciseList[QuestionIndex].ExerciseAnswer.findIndex((item: any) => item.Enable && item.ID == AnswerID) // Get answer index\r\n\t\tquestion.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex].AnswerContent = e.target.value // Add text\r\n\t\tsetQuestion({ ...question })\r\n\t}\r\n\r\n\t// DELETE ANSWER\r\n\tconst deleteAnswerItem = (AnswerID: number, QuestionID: number) => {\r\n\t\tlet QuestionIndex: any = question.ExerciseList.findIndex((item: any) => item.inputID == QuestionID) // - Get question index\r\n\t\tlet AnswerIndex: any = question.ExerciseList[QuestionIndex].ExerciseAnswer.findIndex((item: any) => item.ID == AnswerID) // - Get answer index\r\n\r\n\t\t// Action delete\r\n\t\tif (question.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex].isAdd) {\r\n\t\t\tquestion.ExerciseList[QuestionIndex].ExerciseAnswer.splice(AnswerIndex, 1)\r\n\t\t} else {\r\n\t\t\tquestion.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex].Enable = false\r\n\t\t}\r\n\t\tsetQuestion({ ...question })\r\n\t}\r\n\r\n\tconst onChange_isCorrect = (e: any, AnswerID: any, QuestionID: any) => {\r\n\t\tlet checked: any = e.target.checked\r\n\t\tlet QuestionIndex: any = question?.ExerciseList?.findIndex((item: any) => item.inputID == QuestionID)\r\n\t\tlet AnswerIndex: any = question.ExerciseList[QuestionIndex].ExerciseAnswer.findIndex((item: any) => item.ID == AnswerID)\r\n\t\tquestion.ExerciseList[QuestionIndex].ExerciseAnswer.forEach((item: any) => {\r\n\t\t\titem.isTrue = false\r\n\t\t})\r\n\t\tquestion.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex].isTrue = checked\r\n\t\tsetQuestion({ ...question })\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"form-create-question\">\r\n\t\t\t{visible && loading ? (\r\n\t\t\t\t<div className=\"w-100 text-center mt-3\">\r\n\t\t\t\t\t<Spin />\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\tvisible && (\r\n\t\t\t\t\t<Form form={form} layout=\"vertical\" onFinish={() => {}}>\r\n\t\t\t\t\t\t<div className=\"container-fluid\">\r\n\t\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t\t<div className=\"col-md-6 col-12\">\r\n\t\t\t\t\t\t\t\t\t<Form.Item name=\"Question\" label=\"Nội dung\">\r\n\t\t\t\t\t\t\t\t\t\t<Editor\r\n\t\t\t\t\t\t\t\t\t\t\texerciseList={dataExercise}\r\n\t\t\t\t\t\t\t\t\t\t\tdeleteAllQuestion={deleteAllQuestion}\r\n\t\t\t\t\t\t\t\t\t\t\tdeleteSingleQuestion={(quesID: number) => deleteSingleQuestion(quesID)}\r\n\t\t\t\t\t\t\t\t\t\t\thandleChange={(value: string) => setDataEditor(value)}\r\n\t\t\t\t\t\t\t\t\t\t\tquestionContent={question?.Paragraph} // Câu hỏi được truyền vô\r\n\t\t\t\t\t\t\t\t\t\t\tquestionData={question}\r\n\t\t\t\t\t\t\t\t\t\t\taddQuestion={(inputID: any) => addQuestion(inputID)}\r\n\t\t\t\t\t\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"col-md-6 col-12\" style={{ borderLeft: '2px dotted #dbdbdb' }}>\r\n\t\t\t\t\t\t\t\t\t<p className=\"style-label\" style={{ textDecoration: 'underline' }}>\r\n\t\t\t\t\t\t\t\t\t\tĐáp án\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t{question?.ExerciseList?.map(\r\n\t\t\t\t\t\t\t\t\t\t(itemQues: any, index: any) =>\r\n\t\t\t\t\t\t\t\t\t\t\titemQues.Enable && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div key={index} className=\"question-item-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"\" style={{ fontWeight: 500, color: '#525252' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tCâu: {getQuestIndex(question.ExerciseList, itemQues)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip title=\"Thêm đáp án\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button className=\"btn-add-answer\" onClick={() => handleAddAnswer(itemQues.inputID)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Plus />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{itemQues.ExerciseAnswer?.map(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(itemAns: any, index: any) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titemAns.Enable && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col-md-6 col-12\" key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row-ans mt-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={itemAns.isTrue}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e: any) => onChange_isCorrect(e, itemAns.ID, itemQues.inputID)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Form.Item className=\"mb-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={itemAns.AnswerContent}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"style-input\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e: any) => onChange_text(e, itemAns.ID, itemQues.inputID)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button className=\"delete-ans\" onClick={() => deleteAnswerItem(itemAns.ID, itemQues.inputID)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CloseOutlined />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{!isGroup?.status && (\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"Giải thích đáp án\" name=\"DescribeAnswer\">\r\n\t\t\t\t\t\t\t\t\t\t<EditorSimple handleChange={(value: any) => getDescribeAnswer(value)} />\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t)\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default DragForm\r\n"]},"metadata":{},"sourceType":"module"}