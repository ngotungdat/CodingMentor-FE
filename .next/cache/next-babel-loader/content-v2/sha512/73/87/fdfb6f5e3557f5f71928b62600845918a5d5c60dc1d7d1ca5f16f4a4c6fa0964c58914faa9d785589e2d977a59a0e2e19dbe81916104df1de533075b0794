{"ast":null,"code":"import _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\pages\\\\staff\\\\teacher-salary\\\\index.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { EllipsisOutlined } from '@ant-design/icons';\nimport { Card, DatePicker, Dropdown, Popconfirm, Spin, Tooltip } from 'antd';\nimport moment from 'moment';\nimport React, { useEffect, useRef, useState } from 'react';\nimport XLSX from 'xlsx';\nimport { teacherSalaryApi } from '~/apiBase/staff-manage/teacher-salary';\nimport SortBox from '~/components/Elements/SortBox';\nimport LayoutBase from '~/components/LayoutBase';\nimport PowerTable from '~/components/PowerTable';\nimport FilterColumn from '~/components/Tables/FilterColumn';\nimport { useWrap } from '~/context/wrap';\nimport { numberWithCommas } from '~/utils/functions';\nimport ConfirmForm from '../../../components/Global/Teacher/TeacherSalary/confirm-form';\nimport SalaryOfTeacherDetail from '../../../components/Global/Teacher/TeacherSalary/salary-of-teacher-detail';\nimport TeacherFixExam from '../../../components/Global/Teacher/TeacherSalary/teacher-fix-exam';\nvar now = new Date();\n\nvar SalaryReview = function SalaryReview() {\n  _s();\n\n  var _useState = useState(null),\n      totalPage = _useState[0],\n      setTotalPage = _useState[1];\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      visible = _React$useState2[0],\n      setVisible = _React$useState2[1];\n\n  var _useState2 = useState(false),\n      dropDownVisible = _useState2[0],\n      setDropDownVisible = _useState2[1];\n\n  var _useState3 = useState([]),\n      payRoll = _useState3[0],\n      setPayRoll = _useState3[1];\n\n  var _useState4 = useState(1),\n      currentPage = _useState4[0],\n      setCurrentPage = _useState4[1];\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti,\n      userInformation = _useWrap.userInformation,\n      pageSize = _useWrap.pageSize;\n\n  var _useState5 = useState({\n    type: 'GET_ALL',\n    status: false\n  }),\n      isLoading = _useState5[0],\n      setIsLoading = _useState5[1];\n\n  var months = ['Tháng 1', 'Tháng 2', 'Tháng 3', 'Tháng 4', 'Tháng 5', 'Tháng 6', 'Tháng 7', 'Tháng 8', 'Tháng 9', 'Tháng 10', 'Tháng 11', 'Tháng 12'];\n\n  var getLastYear = function getLastYear() {\n    return now.getMonth() == 0 ? now.getFullYear() - 1 : now.getFullYear();\n  };\n\n  var getDateNumber = function getDateNumber(number) {\n    return number > 10 ? number : number == 0 ? '12' : '0' + number;\n  };\n\n  var paramDefault = {\n    pageIndex: currentPage,\n    pageSize: pageSize,\n    // selectAll: true,\n    Year: getLastYear(),\n    Month: getDateNumber(now.getMonth()),\n    TeacherName: null,\n    TeacherID: null,\n    StatusID: null,\n    sort: null,\n    sortType: null\n  };\n\n  var _useState6 = useState(paramDefault),\n      params = _useState6[0],\n      setParams = _useState6[1];\n\n  var listFieldSearch = {\n    pageIndex: 1,\n    TeacherName: null\n  }; // SORT\n\n  var sortOptionList = [{\n    dataSort: {\n      sort: 0,\n      sortType: false\n    },\n    value: 1,\n    text: 'Tên giảm dần'\n  }, {\n    dataSort: {\n      sort: 0,\n      sortType: true\n    },\n    value: 2,\n    text: 'Tên tăng dần '\n  }, {\n    dataSort: {\n      sort: 1,\n      sortType: false\n    },\n    value: 3,\n    text: 'Lương tổng giảm dần'\n  }, {\n    dataSort: {\n      sort: 1,\n      sortType: true\n    },\n    value: 4,\n    text: 'Lương tổng tăng dần '\n  }];\n  var refValue = useRef({\n    pageIndex: 1,\n    pageSize: pageSize,\n    sort: -1,\n    sortType: false\n  }); // ------------ ON SEARCH -----------------------\n\n  var checkField = function checkField(valueSearch, dataIndex) {\n    var newList = _objectSpread({}, listFieldSearch);\n\n    Object.keys(newList).forEach(function (key) {\n      if (key != dataIndex) {\n        if (key != 'pageIndex') {\n          newList[key] = null;\n        }\n      } else {\n        newList[key] = valueSearch;\n      }\n    });\n    return newList;\n  };\n\n  var onSearch = function onSearch(valueSearch, dataIndex) {\n    var clearKey = checkField(valueSearch, dataIndex);\n    setParams(_objectSpread(_objectSpread({}, params), clearKey));\n  }; // HANDLE RESET\n\n\n  var resetListFieldSearch = function resetListFieldSearch() {\n    Object.keys(listFieldSearch).forEach(function (key) {\n      if (key != 'pageIndex') {\n        listFieldSearch[key] = null;\n      }\n    });\n  };\n\n  var handleReset = function handleReset() {\n    setParams(_objectSpread(_objectSpread({}, paramDefault), {}, {\n      pageIndex: 1\n    }));\n    setCurrentPage(1), resetListFieldSearch();\n  }; // SORT\n\n\n  var onSort = function onSort(option) {\n    refValue.current = _objectSpread(_objectSpread({}, refValue.current), {}, {\n      sort: option.title.sort,\n      sortType: option.title.sortType\n    });\n    setParams(_objectSpread(_objectSpread({}, params), {}, {\n      sort: option.title.sort,\n      sortType: option.title.sortType\n    })); // setFilters({\n    // \t...listFieldInit,\n    // \t...refValue.current\n    // });\n  };\n\n  var columns = [_objectSpread({\n    title: 'Giáo viên',\n    width: 150,\n    dataIndex: 'TeacherName',\n    render: function render(price, record) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-primary\",\n        children: price\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 47\n      }, _this);\n    }\n  }, FilterColumn('TeacherName', onSearch, handleReset, 'text')), {\n    title: 'Năm',\n    width: 80,\n    dataIndex: 'Year',\n    render: function render(price, record) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: price\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 47\n      }, _this);\n    }\n  }, {\n    title: 'Tháng',\n    width: 80,\n    dataIndex: 'Month',\n    render: function render(price, record) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: price\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 47\n      }, _this);\n    }\n  }, {\n    title: 'Thưởng',\n    width: 150,\n    dataIndex: 'Bonus',\n    render: function render(price, record) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-green\",\n        children: numberWithCommas(price)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 47\n      }, _this);\n    }\n  }, {\n    title: 'Ghi Chú',\n    width: 107,\n    dataIndex: 'NoteBonus',\n    render: function render(price, record) {\n      return /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: price,\n        className: \"limit-text\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: price\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 6\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 5\n      }, _this);\n    }\n  }, {\n    title: 'Trạng Thái',\n    dataIndex: 'StatusName',\n    filters: [{\n      text: 'Chưa chốt lương',\n      value: 1\n    }, {\n      text: 'Đã gửi yêu cầu xác nhận',\n      value: 3\n    }, {\n      text: 'Đã xác nhận',\n      value: 4\n    }, {\n      text: 'Đã nhận lương',\n      value: 5\n    }],\n    onFilter: function onFilter(value, record) {\n      return record.StatusID === value;\n    },\n    render: function render(price, record) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [record.StatusID == 1 && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"tag red\",\n          children: price\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 31\n        }, _this), record.StatusID == 3 && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"tag yellow\",\n          children: price\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 31\n        }, _this), record.StatusID == 4 && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"tag blue\",\n          children: price\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 31\n        }, _this), record.StatusID == 5 && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"tag green\",\n          children: price\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 31\n        }, _this)]\n      }, void 0, true);\n    }\n  }, {\n    title: 'Trừ tạm ứng',\n    width: 150,\n    dataIndex: 'AdvanceSalary',\n    render: function render(price, record) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-primary\",\n        children: numberWithCommas(price)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 47\n      }, _this);\n    }\n  }, {\n    title: 'Lương cơ bản',\n    width: 150,\n    dataIndex: 'BasicSalary',\n    render: function render(price, record) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-green\",\n        children: numberWithCommas(price)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 47\n      }, _this);\n    }\n  }, {\n    title: 'Lương Tháng',\n    width: 150,\n    dataIndex: 'Salary',\n    align: 'center',\n    render: function render(price, record) {\n      return /*#__PURE__*/_jsxDEV(SalaryOfTeacherDetail, {\n        price: price,\n        record: record\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 47\n      }, _this);\n    }\n  }, {\n    title: 'Lương Chấm Bài',\n    width: 150,\n    dataIndex: 'SalaryFixExam',\n    render: function render(price, record) {\n      return /*#__PURE__*/_jsxDEV(TeacherFixExam, {\n        price: price,\n        record: record\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 47\n      }, _this);\n    }\n  }, {\n    title: 'Lương Tổng',\n    width: 150,\n    dataIndex: 'TotalSalary',\n    render: function render(price, record) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-green\",\n        children: numberWithCommas(price)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 47\n      }, _this);\n    }\n  }, {\n    title: 'Cập Nhật',\n    width: 100,\n    render: function render(text, record) {\n      return /*#__PURE__*/_jsxDEV(ConfirmForm, {\n        isLoading: isLoading,\n        record: record,\n        userInformationID: userInformation.UserInformationID,\n        setParams: setParams,\n        params: params\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 5\n      }, _this);\n    }\n  }];\n\n  var getDataPayroll = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(page) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setIsLoading({\n                type: 'GET_ALL',\n                status: true\n              });\n              _context.prev = 1;\n              _context.next = 4;\n              return teacherSalaryApi.getAll(_objectSpread(_objectSpread({}, params), {}, {\n                pageIndex: page\n              }));\n\n            case 4:\n              res = _context.sent;\n\n              if (res.status == 200) {\n                setPayRoll(res.data.data);\n                setTotalPage(res.data.totalRow);\n                setDropDownVisible(false);\n              }\n\n              if (res.status == 204) {\n                setPayRoll([]);\n                setDropDownVisible(false);\n              }\n\n              _context.next = 11;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](1);\n\n            case 11:\n              _context.prev = 11;\n              setIsLoading({\n                type: 'GET_ALL',\n                status: false\n              });\n              return _context.finish(11);\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 9, 11, 14]]);\n    }));\n\n    return function getDataPayroll(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var postSalaryOfTeacherClosing = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setIsLoading({\n                type: 'GET_ALL',\n                status: true\n              });\n              _context2.prev = 1;\n              _context2.next = 4;\n              return teacherSalaryApi.postSalaryClosing();\n\n            case 4:\n              res = _context2.sent;\n\n              if (res.status == 200) {\n                setParams(_objectSpread({}, params));\n                showNoti('success', 'Thành công!');\n                setDropDownVisible(false);\n              }\n\n              if (res.status == 204) {\n                showNoti('success', 'Lương đã được tính rồi!');\n                setDropDownVisible(false);\n              }\n\n              _context2.next = 12;\n              break;\n\n            case 9:\n              _context2.prev = 9;\n              _context2.t0 = _context2[\"catch\"](1);\n              showNoti('danger', _context2.t0.message);\n\n            case 12:\n              _context2.prev = 12;\n              setVisible(false);\n              setIsLoading({\n                type: 'GET_ALL',\n                status: false\n              });\n              return _context2.finish(12);\n\n            case 16:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 9, 12, 16]]);\n    }));\n\n    return function postSalaryOfTeacherClosing() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var _getPagination = function getPagination(pageNumber) {\n    setCurrentPage(pageNumber);\n    setParams(_objectSpread(_objectSpread({}, params), {}, {\n      pageIndex: currentPage\n    }));\n  };\n\n  var onChangeMonth = function onChangeMonth(value) {\n    setParams(_objectSpread(_objectSpread({}, params), {}, {\n      Month: Number(value.getMonth() + 1),\n      Year: Number(value.getFullYear())\n    }));\n  };\n\n  function daysInMonth(month, year) {\n    return new Date(year, month, 0).getDate();\n  }\n\n  var showPopconfirm = function showPopconfirm() {\n    setVisible(true);\n  };\n\n  var handleCancel = function handleCancel() {\n    setVisible(false);\n  };\n\n  var renderTitle = function renderTitle() {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"font-weight-primary\",\n      children: [\"X\\xE1c nh\\u1EADn t\\xEDnh l\\u01B0\\u01A1ng t\\u1EEB 01-\", getDateNumber(now.getMonth()), \"-\", getLastYear(), \" \\u0111\\u1EBFn\", ' ', daysInMonth(getDateNumber(now.getMonth()), getLastYear()), \"-\", getDateNumber(now.getMonth()), \"-\", getLastYear(), \" ?\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 4\n    }, _this);\n  };\n\n  var menu = function menu() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-md-none\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          title: \"Thao t\\xE1c\",\n          style: {\n            width: 300\n          },\n          children: [userInformation && (userInformation.RoleID === 1 || userInformation.RoleID === 2) && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-success mb-4 w-100\",\n            disabled: isLoading.type === 'EXCEL' && isLoading.status,\n            onClick: function onClick() {\n              exportExcelFile();\n            },\n            children: isLoading.type === 'EXCEL' && isLoading.status ? /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 59\n            }, _this) : 'Xuất file Excel'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 8\n          }, _this), /*#__PURE__*/_jsxDEV(Popconfirm, {\n            title: renderTitle,\n            visible: visible,\n            className: \"style-input w-100 mb-4\",\n            onConfirm: postSalaryOfTeacherClosing,\n            onCancel: handleCancel,\n            okButtonProps: {\n              loading: isLoading.status\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: showPopconfirm,\n              className: \"btn btn-warning add-new\",\n              children: \"T\\xEDnh l\\u01B0\\u01A1ng th\\xE1ng tr\\u01B0\\u1EDBc\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 8\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 7\n          }, _this), /*#__PURE__*/_jsxDEV(DatePicker, {\n            className: \"style-input w-100 mb-4\",\n            defaultValue: moment(new Date(), 'MM/yyyy'),\n            onChange: function onChange(e, a) {\n              // @ts-ignore\n              onChangeMonth(e._d);\n            },\n            picker: \"month\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 7\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-md-none\",\n            children: /*#__PURE__*/_jsxDEV(SortBox, {\n              space: false,\n              width: 278,\n              handleSort: onSort,\n              dataOption: sortOptionList\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 8\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 7\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 6\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 5\n      }, _this)\n    }, void 0, false);\n  };\n\n  var exportExcelFile = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var res, temp;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              setIsLoading({\n                type: 'EXCEL',\n                status: true\n              });\n              _context3.prev = 1;\n              _context3.next = 4;\n              return teacherSalaryApi.exportExcel({\n                year: params.Year,\n                month: params.Month\n              });\n\n            case 4:\n              res = _context3.sent;\n\n              if (res.status === 200) {\n                temp = [];\n                res.data.data.forEach(function (item, index) {\n                  return temp.push({\n                    A: index + 1,\n                    B: item.BankAccountNumber,\n                    C: item.BankAccountHolderName,\n                    D: \"\".concat(item.Bank, \"/\").concat(item.BankBranch),\n                    E: item.Salary,\n                    F: item.Reason,\n                    G: item.RoleName\n                  });\n                });\n                createExcelFile1(temp);\n              }\n\n              if (res.status === 204) {\n                showNoti('danger', 'Không có dữ liệu lương!');\n              }\n\n              _context3.next = 11;\n              break;\n\n            case 9:\n              _context3.prev = 9;\n              _context3.t0 = _context3[\"catch\"](1);\n\n            case 11:\n              _context3.prev = 11;\n              setIsLoading({\n                type: 'EXCEL',\n                status: false\n              });\n              return _context3.finish(11);\n\n            case 14:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[1, 9, 11, 14]]);\n    }));\n\n    return function exportExcelFile() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var createExcelFile1 = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(data) {\n      var wb, ws, wscols, wsrows;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              wb = XLSX.utils.book_new();\n              /* Initial row */\n\n              ws = XLSX.utils.json_to_sheet([], {\n                header: ['DANH SÁCH GIAO DỊCH (LIST OF TRANSACTIONS)'],\n                skipHeader: false\n              });\n              /* Write data starting at E2 */\n\n              XLSX.utils.sheet_add_json(ws, [{\n                A: 'STT (1)',\n                B: 'Số  Số tài khoản (2)',\n                C: 'Tên đơn vị thụ hưởng (3)',\n                D: 'Ngân hàng thụ hưởng/Chi nhánh (4)',\n                E: 'Số tiền (5)',\n                F: 'Chi tiết thanh toán (6)',\n                G: 'Chức vụ (7)'\n              }], {\n                skipHeader: true,\n                origin: 'A2'\n              });\n              /* Write data starting at A2 */\n\n              XLSX.utils.sheet_add_json(ws, data, {\n                skipHeader: true,\n                origin: 'A3'\n              }); // set width\n\n              wscols = [{\n                wch: 8\n              }, {\n                wch: 20\n              }, {\n                wch: 22\n              }, {\n                wch: 32\n              }, {\n                wch: 18\n              }, {\n                wch: 24\n              }, {\n                wch: 22\n              }, {\n                wch: 22\n              }];\n              wsrows = [{\n                hpt: 22\n              }];\n              ws['!cols'] = wscols;\n              ws['!rows'] = wsrows; // });\n\n              XLSX.utils.book_append_sheet(wb, ws, 'Bảng lương giáo viên');\n              XLSX.writeFile(wb, 'bangluong.xlsx', {\n                type: 'binary',\n                bookType: 'xlsx'\n              });\n\n            case 10:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function createExcelFile1(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    getDataPayroll(currentPage);\n  }, [params]);\n  console.log('now.getMonth() == 0 ? now.getFullYear() : now.getFullYear(): ', now.getMonth() == 0 ? now.getFullYear() - 1 : now.getFullYear());\n  return /*#__PURE__*/_jsxDEV(PowerTable, {\n    currentPage: currentPage,\n    loading: isLoading,\n    totalPage: totalPage && totalPage,\n    getPagination: function getPagination(pageNumber) {\n      return _getPagination(pageNumber);\n    },\n    addClass: \"basic-header\",\n    TitlePage: \"Duy\\u1EC7t l\\u01B0\\u01A1ng gi\\xE1o vi\\xEAn\",\n    dataSource: payRoll,\n    columns: columns,\n    TitleCard: /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-none d-sm-inline-block\",\n        children: [userInformation && (userInformation.RoleID === 1 || userInformation.RoleID === 2) && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-success mr-1\",\n          style: {\n            width: 130\n          },\n          disabled: isLoading.type === 'EXCEL' && isLoading.status,\n          onClick: function onClick() {\n            exportExcelFile();\n          },\n          children: isLoading.type === 'EXCEL' && isLoading.status ? /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 59\n          }, _this) : 'Xuất file Excel'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 8\n        }, _this), /*#__PURE__*/_jsxDEV(Popconfirm, {\n          title: renderTitle,\n          visible: visible,\n          onConfirm: postSalaryOfTeacherClosing,\n          onCancel: handleCancel,\n          okButtonProps: {\n            loading: isLoading.status\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: showPopconfirm,\n            className: \"btn btn-warning add-new\",\n            children: \"T\\xEDnh l\\u01B0\\u01A1ng th\\xE1ng tr\\u01B0\\u1EDBc\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 523,\n            columnNumber: 8\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 7\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 503,\n        columnNumber: 6\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-inline-block d-sm-none col-md-3 w-25\",\n        children: /*#__PURE__*/_jsxDEV(Dropdown, {\n          overlay: menu,\n          trigger: ['click'],\n          visible: dropDownVisible,\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"ant-dropdown-link\",\n            onClick: function onClick(e) {\n              e.preventDefault();\n              setDropDownVisible(!dropDownVisible);\n            },\n            children: /*#__PURE__*/_jsxDEV(EllipsisOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 537,\n              columnNumber: 9\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 530,\n            columnNumber: 8\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 7\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 6\n      }, _this)]\n    }, void 0, true),\n    Extra: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"extra-table d-none d-sm-inline-block\",\n      children: [/*#__PURE__*/_jsxDEV(DatePicker, {\n        defaultValue: moment(new Date(getLastYear() + '-' + getDateNumber(now.getMonth())), 'MM/yyyy'),\n        onChange: function onChange(e, a) {\n          // @ts-ignore\n          onChangeMonth(e._d);\n        },\n        picker: \"month\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 545,\n        columnNumber: 6\n      }, _this), /*#__PURE__*/_jsxDEV(SortBox, {\n        space: true,\n        width: 200,\n        handleSort: onSort,\n        dataOption: sortOptionList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 553,\n        columnNumber: 6\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 544,\n      columnNumber: 5\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 492,\n    columnNumber: 3\n  }, _this);\n};\n\n_s(SalaryReview, \"1bWF1nU/YX2WlaYRMIaWP2xd0DI=\", false, function () {\n  return [useWrap];\n});\n\n_c = SalaryReview;\nSalaryReview.layout = LayoutBase;\nexport default SalaryReview;\n\nvar _c;\n\n$RefreshReg$(_c, \"SalaryReview\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/pages/staff/teacher-salary/index.tsx"],"names":["EllipsisOutlined","Card","DatePicker","Dropdown","Popconfirm","Spin","Tooltip","moment","React","useEffect","useRef","useState","XLSX","teacherSalaryApi","SortBox","LayoutBase","PowerTable","FilterColumn","useWrap","numberWithCommas","ConfirmForm","SalaryOfTeacherDetail","TeacherFixExam","now","Date","SalaryReview","totalPage","setTotalPage","visible","setVisible","dropDownVisible","setDropDownVisible","payRoll","setPayRoll","currentPage","setCurrentPage","showNoti","userInformation","pageSize","type","status","isLoading","setIsLoading","months","getLastYear","getMonth","getFullYear","getDateNumber","number","paramDefault","pageIndex","Year","Month","TeacherName","TeacherID","StatusID","sort","sortType","params","setParams","listFieldSearch","sortOptionList","dataSort","value","text","refValue","checkField","valueSearch","dataIndex","newList","Object","keys","forEach","key","onSearch","clearKey","resetListFieldSearch","handleReset","onSort","option","current","title","columns","width","render","price","record","filters","onFilter","align","UserInformationID","getDataPayroll","page","getAll","res","data","totalRow","postSalaryOfTeacherClosing","postSalaryClosing","message","getPagination","pageNumber","onChangeMonth","Number","daysInMonth","month","year","getDate","showPopconfirm","handleCancel","renderTitle","menu","RoleID","exportExcelFile","loading","e","a","_d","exportExcel","temp","item","index","push","A","B","BankAccountNumber","C","BankAccountHolderName","D","Bank","BankBranch","E","Salary","F","Reason","G","RoleName","createExcelFile1","wb","utils","book_new","ws","json_to_sheet","header","skipHeader","sheet_add_json","origin","wscols","wch","wsrows","hpt","book_append_sheet","writeFile","bookType","console","log","preventDefault","layout"],"mappings":"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","sourcesContent":["import { EllipsisOutlined } from '@ant-design/icons'\r\nimport { Card, DatePicker, Dropdown, Popconfirm, Spin, Tooltip } from 'antd'\r\nimport moment from 'moment'\r\nimport React, { useEffect, useRef, useState } from 'react'\r\nimport XLSX from 'xlsx'\r\nimport { teacherSalaryApi } from '~/apiBase/staff-manage/teacher-salary'\r\nimport SortBox from '~/components/Elements/SortBox'\r\nimport LayoutBase from '~/components/LayoutBase'\r\nimport PowerTable from '~/components/PowerTable'\r\nimport FilterColumn from '~/components/Tables/FilterColumn'\r\nimport { useWrap } from '~/context/wrap'\r\nimport { numberWithCommas } from '~/utils/functions'\r\nimport ConfirmForm from '../../../components/Global/Teacher/TeacherSalary/confirm-form'\r\nimport SalaryOfTeacherDetail from '../../../components/Global/Teacher/TeacherSalary/salary-of-teacher-detail'\r\nimport TeacherFixExam from '../../../components/Global/Teacher/TeacherSalary/teacher-fix-exam'\r\n\r\nconst now = new Date()\r\n\r\nconst SalaryReview = () => {\r\n\tconst [totalPage, setTotalPage] = useState(null)\r\n\tconst [visible, setVisible] = React.useState(false)\r\n\tconst [dropDownVisible, setDropDownVisible] = useState(false)\r\n\tconst [payRoll, setPayRoll] = useState<ITeacherSalary[]>([])\r\n\tconst [currentPage, setCurrentPage] = useState(1)\r\n\tconst { showNoti, userInformation, pageSize } = useWrap()\r\n\tconst [isLoading, setIsLoading] = useState({\r\n\t\ttype: 'GET_ALL',\r\n\t\tstatus: false\r\n\t})\r\n\tconst months = [\r\n\t\t'Tháng 1',\r\n\t\t'Tháng 2',\r\n\t\t'Tháng 3',\r\n\t\t'Tháng 4',\r\n\t\t'Tháng 5',\r\n\t\t'Tháng 6',\r\n\t\t'Tháng 7',\r\n\t\t'Tháng 8',\r\n\t\t'Tháng 9',\r\n\t\t'Tháng 10',\r\n\t\t'Tháng 11',\r\n\t\t'Tháng 12'\r\n\t]\r\n\r\n\tconst getLastYear = () => {\r\n\t\treturn now.getMonth() == 0 ? now.getFullYear() - 1 : now.getFullYear()\r\n\t}\r\n\r\n\tconst getDateNumber = (number) => {\r\n\t\treturn number > 10 ? number : number == 0 ? '12' : '0' + number\r\n\t}\r\n\r\n\tconst paramDefault = {\r\n\t\tpageIndex: currentPage,\r\n\t\tpageSize: pageSize,\r\n\t\t// selectAll: true,\r\n\t\tYear: getLastYear(),\r\n\t\tMonth: getDateNumber(now.getMonth()),\r\n\t\tTeacherName: null,\r\n\t\tTeacherID: null,\r\n\t\tStatusID: null,\r\n\t\tsort: null,\r\n\t\tsortType: null\r\n\t}\r\n\tconst [params, setParams] = useState(paramDefault)\r\n\r\n\tlet listFieldSearch = {\r\n\t\tpageIndex: 1,\r\n\t\tTeacherName: null\r\n\t}\r\n\t// SORT\r\n\tconst sortOptionList = [\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 0,\r\n\t\t\t\tsortType: false\r\n\t\t\t},\r\n\t\t\tvalue: 1,\r\n\t\t\ttext: 'Tên giảm dần'\r\n\t\t},\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 0,\r\n\t\t\t\tsortType: true\r\n\t\t\t},\r\n\t\t\tvalue: 2,\r\n\t\t\ttext: 'Tên tăng dần '\r\n\t\t},\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 1,\r\n\t\t\t\tsortType: false\r\n\t\t\t},\r\n\t\t\tvalue: 3,\r\n\t\t\ttext: 'Lương tổng giảm dần'\r\n\t\t},\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 1,\r\n\t\t\t\tsortType: true\r\n\t\t\t},\r\n\t\t\tvalue: 4,\r\n\t\t\ttext: 'Lương tổng tăng dần '\r\n\t\t}\r\n\t]\r\n\r\n\tlet refValue = useRef({\r\n\t\tpageIndex: 1,\r\n\t\tpageSize: pageSize,\r\n\t\tsort: -1,\r\n\t\tsortType: false\r\n\t})\r\n\r\n\t// ------------ ON SEARCH -----------------------\r\n\r\n\tconst checkField = (valueSearch, dataIndex) => {\r\n\t\tlet newList = { ...listFieldSearch }\r\n\t\tObject.keys(newList).forEach(function (key) {\r\n\t\t\tif (key != dataIndex) {\r\n\t\t\t\tif (key != 'pageIndex') {\r\n\t\t\t\t\tnewList[key] = null\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tnewList[key] = valueSearch\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn newList\r\n\t}\r\n\r\n\tconst onSearch = (valueSearch, dataIndex) => {\r\n\t\tlet clearKey = checkField(valueSearch, dataIndex)\r\n\r\n\t\tsetParams({\r\n\t\t\t...params,\r\n\t\t\t...clearKey\r\n\t\t})\r\n\t}\r\n\r\n\t// HANDLE RESET\r\n\tconst resetListFieldSearch = () => {\r\n\t\tObject.keys(listFieldSearch).forEach(function (key) {\r\n\t\t\tif (key != 'pageIndex') {\r\n\t\t\t\tlistFieldSearch[key] = null\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tconst handleReset = () => {\r\n\t\tsetParams({\r\n\t\t\t...paramDefault,\r\n\t\t\tpageIndex: 1\r\n\t\t})\r\n\t\tsetCurrentPage(1), resetListFieldSearch()\r\n\t}\r\n\r\n\t// SORT\r\n\tconst onSort = (option) => {\r\n\t\trefValue.current = {\r\n\t\t\t...refValue.current,\r\n\t\t\tsort: option.title.sort,\r\n\t\t\tsortType: option.title.sortType\r\n\t\t}\r\n\t\tsetParams({ ...params, sort: option.title.sort, sortType: option.title.sortType })\r\n\t\t// setFilters({\r\n\t\t// \t...listFieldInit,\r\n\t\t// \t...refValue.current\r\n\t\t// });\r\n\t}\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Giáo viên',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'TeacherName',\r\n\t\t\trender: (price, record: ITeacherSalary) => <p className=\"font-weight-primary\">{price}</p>,\r\n\t\t\t...FilterColumn('TeacherName', onSearch, handleReset, 'text')\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Năm',\r\n\t\t\twidth: 80,\r\n\t\t\tdataIndex: 'Year',\r\n\t\t\trender: (price, record: ITeacherSalary) => <p>{price}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Tháng',\r\n\t\t\twidth: 80,\r\n\t\t\tdataIndex: 'Month',\r\n\t\t\trender: (price, record: ITeacherSalary) => <p>{price}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Thưởng',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'Bonus',\r\n\t\t\trender: (price, record: ITeacherSalary) => <p className=\"font-weight-green\">{numberWithCommas(price)}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Ghi Chú',\r\n\t\t\twidth: 107,\r\n\t\t\tdataIndex: 'NoteBonus',\r\n\t\t\trender: (price, record: any) => (\r\n\t\t\t\t<Tooltip title={price} className=\"limit-text\">\r\n\t\t\t\t\t<p>{price}</p>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t)\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Trạng Thái',\r\n\t\t\tdataIndex: 'StatusName',\r\n\t\t\tfilters: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: 'Chưa chốt lương',\r\n\t\t\t\t\tvalue: 1\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: 'Đã gửi yêu cầu xác nhận',\r\n\t\t\t\t\tvalue: 3\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: 'Đã xác nhận',\r\n\t\t\t\t\tvalue: 4\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: 'Đã nhận lương',\r\n\t\t\t\t\tvalue: 5\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tonFilter: (value, record) => record.StatusID === value,\r\n\t\t\trender: (price, record: any) => (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{record.StatusID == 1 && <span className=\"tag red\">{price}</span>}\r\n\t\t\t\t\t{record.StatusID == 3 && <span className=\"tag yellow\">{price}</span>}\r\n\t\t\t\t\t{record.StatusID == 4 && <span className=\"tag blue\">{price}</span>}\r\n\t\t\t\t\t{record.StatusID == 5 && <span className=\"tag green\">{price}</span>}\r\n\t\t\t\t</>\r\n\t\t\t)\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Trừ tạm ứng',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'AdvanceSalary',\r\n\t\t\trender: (price, record: ITeacherSalary) => <p className=\"font-weight-primary\">{numberWithCommas(price)}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Lương cơ bản',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'BasicSalary',\r\n\t\t\trender: (price, record: ITeacherSalary) => <p className=\"font-weight-green\">{numberWithCommas(price)}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Lương Tháng',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'Salary',\r\n\t\t\talign: 'center',\r\n\t\t\trender: (price, record: ITeacherSalary) => <SalaryOfTeacherDetail price={price} record={record} />\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Lương Chấm Bài',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'SalaryFixExam',\r\n\t\t\trender: (price, record: ITeacherSalary) => <TeacherFixExam price={price} record={record} />\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Lương Tổng',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'TotalSalary',\r\n\t\t\trender: (price, record: ITeacherSalary) => <p className=\"font-weight-green\">{numberWithCommas(price)}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Cập Nhật',\r\n\t\t\twidth: 100,\r\n\t\t\trender: (text, record) => (\r\n\t\t\t\t<ConfirmForm\r\n\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\trecord={record}\r\n\t\t\t\t\tuserInformationID={userInformation.UserInformationID}\r\n\t\t\t\t\tsetParams={setParams}\r\n\t\t\t\t\tparams={params}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t}\r\n\t]\r\n\r\n\tconst getDataPayroll = async (page: any) => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'GET_ALL',\r\n\t\t\tstatus: true\r\n\t\t})\r\n\t\ttry {\r\n\t\t\tlet res = await teacherSalaryApi.getAll({ ...params, pageIndex: page })\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tsetPayRoll(res.data.data)\r\n\t\t\t\tsetTotalPage(res.data.totalRow)\r\n\t\t\t\tsetDropDownVisible(false)\r\n\t\t\t}\r\n\t\t\tif (res.status == 204) {\r\n\t\t\t\tsetPayRoll([])\r\n\t\t\t\tsetDropDownVisible(false)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'GET_ALL',\r\n\t\t\t\tstatus: false\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst postSalaryOfTeacherClosing = async () => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'GET_ALL',\r\n\t\t\tstatus: true\r\n\t\t})\r\n\t\ttry {\r\n\t\t\tlet res = await teacherSalaryApi.postSalaryClosing()\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tsetParams({ ...params })\r\n\t\t\t\tshowNoti('success', 'Thành công!')\r\n\t\t\t\tsetDropDownVisible(false)\r\n\t\t\t}\r\n\t\t\tif (res.status == 204) {\r\n\t\t\t\tshowNoti('success', 'Lương đã được tính rồi!')\r\n\t\t\t\tsetDropDownVisible(false)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetVisible(false)\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'GET_ALL',\r\n\t\t\t\tstatus: false\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst getPagination = (pageNumber: number) => {\r\n\t\tsetCurrentPage(pageNumber)\r\n\t\tsetParams({\r\n\t\t\t...params,\r\n\t\t\tpageIndex: currentPage\r\n\t\t})\r\n\t}\r\n\r\n\tconst onChangeMonth = (value) => {\r\n\t\tsetParams({ ...params, Month: Number(value.getMonth() + 1), Year: Number(value.getFullYear()) })\r\n\t}\r\n\r\n\tfunction daysInMonth(month, year) {\r\n\t\treturn new Date(year, month, 0).getDate()\r\n\t}\r\n\r\n\tconst showPopconfirm = () => {\r\n\t\tsetVisible(true)\r\n\t}\r\n\r\n\tconst handleCancel = () => {\r\n\t\tsetVisible(false)\r\n\t}\r\n\r\n\tconst renderTitle = () => {\r\n\t\treturn (\r\n\t\t\t<p className=\"font-weight-primary\">\r\n\t\t\t\tXác nhận tính lương từ 01-{getDateNumber(now.getMonth())}-{getLastYear()} đến{' '}\r\n\t\t\t\t{daysInMonth(getDateNumber(now.getMonth()), getLastYear())}-{getDateNumber(now.getMonth())}-{getLastYear()} ?\r\n\t\t\t</p>\r\n\t\t)\r\n\t}\r\n\r\n\tconst menu = () => {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<div className=\"d-md-none\">\r\n\t\t\t\t\t<Card title=\"Thao tác\" style={{ width: 300 }}>\r\n\t\t\t\t\t\t{userInformation && (userInformation.RoleID === 1 || userInformation.RoleID === 2) && (\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-success mb-4 w-100\"\r\n\t\t\t\t\t\t\t\tdisabled={isLoading.type === 'EXCEL' && isLoading.status}\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\texportExcelFile()\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{isLoading.type === 'EXCEL' && isLoading.status ? <Spin /> : 'Xuất file Excel'}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<Popconfirm\r\n\t\t\t\t\t\t\ttitle={renderTitle}\r\n\t\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\t\tclassName=\"style-input w-100 mb-4\"\r\n\t\t\t\t\t\t\tonConfirm={postSalaryOfTeacherClosing}\r\n\t\t\t\t\t\t\tonCancel={handleCancel}\r\n\t\t\t\t\t\t\tokButtonProps={{ loading: isLoading.status }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<button onClick={showPopconfirm} className=\"btn btn-warning add-new\">\r\n\t\t\t\t\t\t\t\tTính lương tháng trước\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Popconfirm>\r\n\r\n\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\tclassName=\"style-input w-100 mb-4\"\r\n\t\t\t\t\t\t\tdefaultValue={moment(new Date(), 'MM/yyyy')}\r\n\t\t\t\t\t\t\tonChange={(e, a) => {\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\tonChangeMonth(e._d)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tpicker=\"month\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<div className=\"d-md-none\">\r\n\t\t\t\t\t\t\t<SortBox space={false} width={278} handleSort={onSort} dataOption={sortOptionList} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Card>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\tconst exportExcelFile = async () => {\r\n\t\tsetIsLoading({ type: 'EXCEL', status: true })\r\n\t\ttry {\r\n\t\t\tlet res = await teacherSalaryApi.exportExcel({ year: params.Year, month: params.Month })\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tlet temp = []\r\n\t\t\t\tres.data.data.forEach((item, index) =>\r\n\t\t\t\t\ttemp.push({\r\n\t\t\t\t\t\tA: index + 1,\r\n\t\t\t\t\t\tB: item.BankAccountNumber,\r\n\t\t\t\t\t\tC: item.BankAccountHolderName,\r\n\t\t\t\t\t\tD: `${item.Bank}/${item.BankBranch}`,\r\n\t\t\t\t\t\tE: item.Salary,\r\n\t\t\t\t\t\tF: item.Reason,\r\n\t\t\t\t\t\tG: item.RoleName\r\n\t\t\t\t\t})\r\n\t\t\t\t)\r\n\t\t\t\tcreateExcelFile1(temp)\r\n\t\t\t}\r\n\t\t\tif (res.status === 204) {\r\n\t\t\t\tshowNoti('danger', 'Không có dữ liệu lương!')\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({ type: 'EXCEL', status: false })\r\n\t\t}\r\n\t}\r\n\r\n\tconst createExcelFile1 = async (data) => {\r\n\t\tlet wb = XLSX.utils.book_new()\r\n\r\n\t\t/* Initial row */\r\n\t\tvar ws = XLSX.utils.json_to_sheet([], {\r\n\t\t\theader: ['DANH SÁCH GIAO DỊCH (LIST OF TRANSACTIONS)'],\r\n\t\t\tskipHeader: false\r\n\t\t})\r\n\t\t/* Write data starting at E2 */\r\n\t\tXLSX.utils.sheet_add_json(\r\n\t\t\tws,\r\n\t\t\t[\r\n\t\t\t\t{\r\n\t\t\t\t\tA: 'STT (1)',\r\n\t\t\t\t\tB: 'Số  Số tài khoản (2)',\r\n\t\t\t\t\tC: 'Tên đơn vị thụ hưởng (3)',\r\n\t\t\t\t\tD: 'Ngân hàng thụ hưởng/Chi nhánh (4)',\r\n\t\t\t\t\tE: 'Số tiền (5)',\r\n\t\t\t\t\tF: 'Chi tiết thanh toán (6)',\r\n\t\t\t\t\tG: 'Chức vụ (7)'\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\t{ skipHeader: true, origin: 'A2' }\r\n\t\t)\r\n\r\n\t\t/* Write data starting at A2 */\r\n\t\tXLSX.utils.sheet_add_json(ws, data, { skipHeader: true, origin: 'A3' })\r\n\r\n\t\t// set width\r\n\t\tlet wscols = [{ wch: 8 }, { wch: 20 }, { wch: 22 }, { wch: 32 }, { wch: 18 }, { wch: 24 }, { wch: 22 }, { wch: 22 }]\r\n\t\tlet wsrows = [{ hpt: 22 }]\r\n\t\tws['!cols'] = wscols\r\n\t\tws['!rows'] = wsrows\r\n\t\t// });\r\n\t\tXLSX.utils.book_append_sheet(wb, ws, 'Bảng lương giáo viên')\r\n\t\tXLSX.writeFile(wb, 'bangluong.xlsx', { type: 'binary', bookType: 'xlsx' })\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tgetDataPayroll(currentPage)\r\n\t}, [params])\r\n\r\n\tconsole.log(\r\n\t\t'now.getMonth() == 0 ? now.getFullYear() : now.getFullYear(): ',\r\n\t\tnow.getMonth() == 0 ? now.getFullYear() - 1 : now.getFullYear()\r\n\t)\r\n\r\n\treturn (\r\n\t\t<PowerTable\r\n\t\t\tcurrentPage={currentPage}\r\n\t\t\tloading={isLoading}\r\n\t\t\ttotalPage={totalPage && totalPage}\r\n\t\t\tgetPagination={(pageNumber: number) => getPagination(pageNumber)}\r\n\t\t\taddClass=\"basic-header\"\r\n\t\t\tTitlePage=\"Duyệt lương giáo viên\"\r\n\t\t\tdataSource={payRoll}\r\n\t\t\tcolumns={columns}\r\n\t\t\tTitleCard={\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className=\"d-none d-sm-inline-block\">\r\n\t\t\t\t\t\t{userInformation && (userInformation.RoleID === 1 || userInformation.RoleID === 2) && (\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-success mr-1\"\r\n\t\t\t\t\t\t\t\tstyle={{ width: 130 }}\r\n\t\t\t\t\t\t\t\tdisabled={isLoading.type === 'EXCEL' && isLoading.status}\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\texportExcelFile()\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{isLoading.type === 'EXCEL' && isLoading.status ? <Spin /> : 'Xuất file Excel'}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<Popconfirm\r\n\t\t\t\t\t\t\ttitle={renderTitle}\r\n\t\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\t\tonConfirm={postSalaryOfTeacherClosing}\r\n\t\t\t\t\t\t\tonCancel={handleCancel}\r\n\t\t\t\t\t\t\tokButtonProps={{ loading: isLoading.status }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<button onClick={showPopconfirm} className=\"btn btn-warning add-new\">\r\n\t\t\t\t\t\t\t\tTính lương tháng trước\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"d-inline-block d-sm-none col-md-3 w-25\">\r\n\t\t\t\t\t\t<Dropdown overlay={menu} trigger={['click']} visible={dropDownVisible}>\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\tclassName=\"ant-dropdown-link\"\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\t\tsetDropDownVisible(!dropDownVisible)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<EllipsisOutlined />\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</Dropdown>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</>\r\n\t\t\t}\r\n\t\t\tExtra={\r\n\t\t\t\t<div className=\"extra-table d-none d-sm-inline-block\">\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tdefaultValue={moment(new Date(getLastYear() + '-' + getDateNumber(now.getMonth())), 'MM/yyyy')}\r\n\t\t\t\t\t\tonChange={(e, a) => {\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tonChangeMonth(e._d)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tpicker=\"month\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<SortBox space={true} width={200} handleSort={onSort} dataOption={sortOptionList} />\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t/>\r\n\t)\r\n}\r\nSalaryReview.layout = LayoutBase\r\nexport default SalaryReview\r\n"]},"metadata":{},"sourceType":"module"}