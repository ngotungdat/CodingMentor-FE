{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\CourseCalendar\\\\modal-create-event.tsx\";\nimport { Modal, Select, Spin, TimePicker } from 'antd';\nimport moment from 'moment';\nimport React, { useState, useEffect } from 'react';\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\nimport { useWrap } from '~/context/wrap';\nimport { CalendarApi } from '~/apiBase/Calendar/calendar';\nconst {\n  Option\n} = Select;\nmoment.locale('vi');\n\nconst ModalCreateEvent = props => {\n  const {\n    visible,\n    setVisible,\n    date,\n    courses,\n    getData\n  } = props;\n  const {\n    showNoti\n  } = useWrap();\n  const {\n    0: selected,\n    1: setSelected\n  } = useState({});\n  const {\n    0: startTime,\n    1: setStartTime\n  } = useState('');\n  const {\n    0: endTime,\n    1: setEndTime\n  } = useState('');\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: errorText,\n    1: setErrorText\n  } = useState('');\n  useEffect(() => {\n    !visible && setSelected({}), setStartTime(''), setEndTime('');\n  }, [visible]);\n\n  const onChange = value => {\n    let indexSelected = courses.findIndex(e => (e === null || e === void 0 ? void 0 : e.VideoCourseID) == value);\n    setSelected(courses[indexSelected]);\n    return null;\n  };\n\n  useEffect(() => {\n    if (!!startTime) {\n      const temp = new Date(startTime);\n      const timestamp = Math.floor(temp / 1000);\n      var tempDate = new Date((timestamp + parseInt(selected === null || selected === void 0 ? void 0 : selected.LimitMinutes) * 60) * 1000);\n      setEndTime(tempDate);\n    }\n  }, [startTime, selected]);\n  useEffect(() => {\n    setErrorText('');\n  }, [selected, startTime]);\n\n  const _createEvent = async () => {\n    setLoading(true);\n\n    if (!(selected !== null && selected !== void 0 && selected.VideoCourseID)) {\n      setErrorText('Vui lòng chọn khóa học');\n    } else {\n      if (!startTime) {\n        setErrorText('Vui lòng chọn ngày bắt đầu');\n      } else {\n        let temp = {\n          VideoCourseID: selected === null || selected === void 0 ? void 0 : selected.VideoCourseID,\n          OpenDate: moment(date === null || date === void 0 ? void 0 : date.start).format('YYYY/MM/DD'),\n          sTime: moment(startTime).format('HH:mm'),\n          eTime: moment(endTime).format('HH:mm')\n        };\n\n        try {\n          const res = await CalendarApi.add(temp);\n\n          if (res.status == 200 || res.status == 204) {\n            showNoti('success', 'Thành công');\n            getData();\n            setVisible(false);\n          }\n        } catch (error) {\n          showNoti('danger', error === null || error === void 0 ? void 0 : error.message);\n        } finally {\n          setLoading(false);\n        }\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Modal, {\n      className: \"wrap-calendar-x\",\n      title: !!(date !== null && date !== void 0 && date.start) ? 'Thêm lịch ngày: ' + moment(date === null || date === void 0 ? void 0 : date.start).format('DD-MM-YYYY') : 'Thêm lịch',\n      visible: visible,\n      onCancel: () => setVisible(false),\n      onOk: () => _createEvent(),\n      cancelText: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\",\n        children: \"Hu\\u1EF7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this),\n      okText: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btn-primary save\",\n        children: [\"L\\u01B0u l\\u1EA1i \", loading && /*#__PURE__*/_jsxDEV(Spin, {\n          className: \"ml-2\",\n          size: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 67\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, this),\n      centered: true,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-12 col-12\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-2\",\n          children: [\"Ch\\u1ECDn kh\\xF3a h\\u1ECDc \", /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: 'red'\n            },\n            children: \" *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          disabled: loading,\n          className: \"w-100\",\n          showSearch: true,\n          value: (selected === null || selected === void 0 ? void 0 : selected.VideoCourseID) || undefined,\n          placeholder: \"Ch\\u1ECDn kh\\xF3a h\\u1ECDc\",\n          optionFilterProp: \"children\",\n          onChange: onChange,\n          filterOption: (input, option) => option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n          children: !!courses && courses.map(item => /*#__PURE__*/_jsxDEV(Option, {\n            value: item === null || item === void 0 ? void 0 : item.VideoCourseID,\n            children: item === null || item === void 0 ? void 0 : item.VideoCourseName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 48\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row col-12 m-0 p-0\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6 col-12\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-2 mt-4\",\n            children: [\"Ch\\u1ECDn gi\\u1EDD b\\u1EAFt \\u0111\\u1EA7u \", /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: 'red'\n              },\n              children: \" *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(TimePicker, {\n            disabled: loading,\n            value: !!startTime ? moment(startTime, 'HH:mm') : null,\n            onChange: e => setStartTime(e === null || e === void 0 ? void 0 : e._d),\n            className: \"ant-input\",\n            placeholder: \"B\\u1EAFt \\u0111\\u1EA7u\",\n            format: 'HH:mm'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6 col-12\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-2 mt-4\",\n            children: \"Gi\\u1EDD k\\u1EBFt th\\xFAc\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(TimePicker, {\n            value: !!endTime && endTime != 'Invalid Date' ? moment(endTime, 'HH:mm') : null,\n            disabled: true,\n            className: \"ant-input\",\n            placeholder: \"H\\xE3y ch\\u1ECDn gi\\u1EDD b\\u1EAFt \\u0111\\u1EA7u\",\n            format: 'HH:mm'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 5\n      }, this), !!errorText && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-6 col-12 mt-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: 'red'\n          },\n          children: errorText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 3\n  }, this);\n};\n\nexport default ModalCreateEvent;","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/CourseCalendar/modal-create-event.tsx"],"names":["Modal","Select","Spin","TimePicker","moment","React","useState","useEffect","useWrap","CalendarApi","Option","locale","ModalCreateEvent","props","visible","setVisible","date","courses","getData","showNoti","selected","setSelected","startTime","setStartTime","endTime","setEndTime","loading","setLoading","errorText","setErrorText","onChange","value","indexSelected","findIndex","e","VideoCourseID","temp","Date","timestamp","Math","floor","tempDate","parseInt","LimitMinutes","_createEvent","OpenDate","start","format","sTime","eTime","res","add","status","error","message","color","undefined","input","option","children","toLowerCase","indexOf","map","item","VideoCourseName","_d"],"mappings":"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","sourcesContent":["import { Modal, Select, Spin, TimePicker } from 'antd'\r\nimport moment from 'moment'\r\nimport React, { useState, useEffect } from 'react'\r\nimport 'react-big-calendar/lib/css/react-big-calendar.css'\r\nimport { useWrap } from '~/context/wrap'\r\nimport _ from '~/appConfig'\r\nimport { CalendarApi } from '~/apiBase/Calendar/calendar'\r\n\r\nconst { Option } = Select\r\nmoment.locale('vi')\r\n\r\nconst ModalCreateEvent = (props: any) => {\r\n\tconst { visible, setVisible, date, courses, getData } = props\r\n\tconst { showNoti } = useWrap()\r\n\r\n\tconst [selected, setSelected] = useState<any>({})\r\n\tconst [startTime, setStartTime] = useState<any>('')\r\n\tconst [endTime, setEndTime] = useState<any>('')\r\n\tconst [loading, setLoading] = useState<boolean>(false)\r\n\r\n\tconst [errorText, setErrorText] = useState<any>('')\r\n\r\n\tuseEffect(() => {\r\n\t\t!visible && setSelected({}), setStartTime(''), setEndTime('')\r\n\t}, [visible])\r\n\r\n\tconst onChange = (value: string) => {\r\n\t\tlet indexSelected = courses.findIndex((e: any) => e?.VideoCourseID == value)\r\n\t\tsetSelected(courses[indexSelected])\r\n\t\treturn null\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!!startTime) {\r\n\t\t\tconst temp: any = new Date(startTime)\r\n\t\t\tconst timestamp = Math.floor(temp / 1000)\r\n\t\t\tvar tempDate = new Date((timestamp + parseInt(selected?.LimitMinutes) * 60) * 1000)\r\n\t\t\tsetEndTime(tempDate)\r\n\t\t}\r\n\t}, [startTime, selected])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetErrorText('')\r\n\t}, [selected, startTime])\r\n\r\n\tconst _createEvent = async () => {\r\n\t\tsetLoading(true)\r\n\t\tif (!selected?.VideoCourseID) {\r\n\t\t\tsetErrorText('Vui lòng chọn khóa học')\r\n\t\t} else {\r\n\t\t\tif (!startTime) {\r\n\t\t\t\tsetErrorText('Vui lòng chọn ngày bắt đầu')\r\n\t\t\t} else {\r\n\t\t\t\tlet temp = {\r\n\t\t\t\t\tVideoCourseID: selected?.VideoCourseID,\r\n\t\t\t\t\tOpenDate: moment(date?.start).format('YYYY/MM/DD'),\r\n\t\t\t\t\tsTime: moment(startTime).format('HH:mm'),\r\n\t\t\t\t\teTime: moment(endTime).format('HH:mm')\r\n\t\t\t\t}\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst res: any = await CalendarApi.add(temp)\r\n\t\t\t\t\tif (res.status == 200 || res.status == 204) {\r\n\t\t\t\t\t\tshowNoti('success', 'Thành công')\r\n\t\t\t\t\t\tgetData()\r\n\t\t\t\t\t\tsetVisible(false)\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tshowNoti('danger', error?.message)\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Modal\r\n\t\t\t\tclassName=\"wrap-calendar-x\"\r\n\t\t\t\ttitle={!!date?.start ? 'Thêm lịch ngày: ' + moment(date?.start).format('DD-MM-YYYY') : 'Thêm lịch'}\r\n\t\t\t\tvisible={visible}\r\n\t\t\t\tonCancel={() => setVisible(false)}\r\n\t\t\t\tonOk={() => _createEvent()}\r\n\t\t\t\tcancelText={<div className=\"\">Huỷ</div>}\r\n\t\t\t\tokText={<div className=\"btn-primary save\">Lưu lại {loading && <Spin className=\"ml-2\" size=\"small\" />}</div>}\r\n\t\t\t\tcentered\r\n\t\t\t>\r\n\t\t\t\t<div className=\"col-md-12 col-12\">\r\n\t\t\t\t\t<div className=\"mb-2\">\r\n\t\t\t\t\t\tChọn khóa học <span style={{ color: 'red' }}> *</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\t\tclassName=\"w-100\"\r\n\t\t\t\t\t\tshowSearch\r\n\t\t\t\t\t\tvalue={selected?.VideoCourseID || undefined}\r\n\t\t\t\t\t\tplaceholder=\"Chọn khóa học\"\r\n\t\t\t\t\t\toptionFilterProp=\"children\"\r\n\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t\tfilterOption={(input, option: any) => option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{!!courses && courses.map((item: any) => <Option value={item?.VideoCourseID}>{item?.VideoCourseName}</Option>)}\r\n\t\t\t\t\t</Select>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"row col-12 m-0 p-0\">\r\n\t\t\t\t\t<div className=\"col-md-6 col-12\">\r\n\t\t\t\t\t\t<div className=\"mb-2 mt-4\">\r\n\t\t\t\t\t\t\tChọn giờ bắt đầu <span style={{ color: 'red' }}> *</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<TimePicker\r\n\t\t\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\t\t\tvalue={!!startTime ? moment(startTime, 'HH:mm') : null}\r\n\t\t\t\t\t\t\tonChange={(e: any) => setStartTime(e?._d)}\r\n\t\t\t\t\t\t\tclassName=\"ant-input\"\r\n\t\t\t\t\t\t\tplaceholder=\"Bắt đầu\"\r\n\t\t\t\t\t\t\tformat={'HH:mm'}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"col-md-6 col-12\">\r\n\t\t\t\t\t\t<div className=\"mb-2 mt-4\">Giờ kết thúc</div>\r\n\t\t\t\t\t\t<TimePicker\r\n\t\t\t\t\t\t\tvalue={!!endTime && endTime != 'Invalid Date' ? moment(endTime, 'HH:mm') : null}\r\n\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\tclassName=\"ant-input\"\r\n\t\t\t\t\t\t\tplaceholder=\"Hãy chọn giờ bắt đầu\"\r\n\t\t\t\t\t\t\tformat={'HH:mm'}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{!!errorText && (\r\n\t\t\t\t\t<div className=\"col-md-6 col-12 mt-3\">\r\n\t\t\t\t\t\t<div style={{ color: 'red' }}>{errorText}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default ModalCreateEvent\r\n"]},"metadata":{},"sourceType":"module"}