{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Profile\\\\ProfileCustomer\\\\InfoStudyCard\\\\AddStudyRole.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useState } from 'react';\nimport { Modal, Form, Spin } from 'antd';\nimport { useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport SelectField from '~/components/FormControl/SelectField';\nimport TextAreaField from '~/components/FormControl/TextAreaField';\nimport { studyRoleApi } from '~/apiBase';\nimport { useWrap } from '~/context/wrap';\nlet returnSchema = {};\nlet schema = null;\n\nconst AddStudyRole = props => {\n  const {\n    studentID,\n    dataProgram,\n    onFetchData\n  } = props;\n  const {\n    0: isModalVisible,\n    1: setIsModalVisible\n  } = useState(false);\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const {\n    showNoti\n  } = useWrap();\n\n  const showModal = () => {\n    setIsModalVisible(true);\n  };\n\n  const handleOk = () => {\n    setIsModalVisible(false);\n  };\n\n  const handleCancel = () => {\n    setIsModalVisible(false);\n  }; // -----  HANDLE ALL IN FORM -------------\n\n\n  const defaultValuesInit = {\n    StudentID: null,\n    ProgramID: null,\n    Note: null\n  };\n\n  (function returnSchemaFunc() {\n    returnSchema = _objectSpread({}, defaultValuesInit);\n    Object.keys(returnSchema).forEach(function (key) {\n      switch (key) {\n        case 'ProgramID':\n          returnSchema[key] = yup.mixed().required('Bạn không được để trống');\n          break;\n\n        default:\n          // returnSchema[key] = yup.mixed().required(\"Bạn không được để trống\");\n          break;\n      }\n    });\n    schema = yup.object().shape(returnSchema);\n  })();\n\n  const form = useForm({\n    defaultValues: defaultValuesInit,\n    resolver: yupResolver(schema)\n  });\n\n  const onSubmit = async dataSubmit => {\n    setIsLoading(true);\n\n    try {\n      let res = await studyRoleApi.add(dataSubmit);\n\n      if (res.status == 200) {\n        setIsModalVisible(false);\n        showNoti('success', 'Thêm lộ trình thành công');\n        onFetchData && onFetchData();\n      }\n    } catch (error) {\n      showNoti('danger', error.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    form.setValue('StudentID', studentID);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-warning\",\n      onClick: showModal,\n      children: \"Th\\xEAm m\\u1EDBi\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      footer: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 d-flex justify-content-center\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: form.handleSubmit(onSubmit),\n            type: \"submit\",\n            className: \"btn btn-primary w-100\",\n            children: [\"L\\u01B0u\", isLoading && /*#__PURE__*/_jsxDEV(Spin, {\n              className: \"loading-base\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 6\n      }, this),\n      title: \"Th\\xEAm l\\u1ED9 tr\\xECnh\",\n      visible: isModalVisible,\n      onOk: handleOk,\n      onCancel: handleCancel,\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        layout: \"vertical\",\n        onFinish: form.handleSubmit(onSubmit),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12\",\n            children: /*#__PURE__*/_jsxDEV(SelectField, {\n              form: form,\n              name: \"ProgramID\",\n              label: \"Ch\\u01B0\\u01A1ng tr\\xECnh h\\u1ECDc\",\n              optionList: dataProgram,\n              placeholder: \"ch\\u1ECDn ch\\u01B0\\u01A1ng tr\\xECnh\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12\",\n            children: /*#__PURE__*/_jsxDEV(TextAreaField, {\n              form: form,\n              name: \"Note\",\n              label: \"Ghi ch\\xFA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n\nexport default AddStudyRole;","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Profile/ProfileCustomer/InfoStudyCard/AddStudyRole.tsx"],"names":["React","useEffect","useState","Modal","Form","Spin","useForm","yup","yupResolver","SelectField","TextAreaField","studyRoleApi","useWrap","returnSchema","schema","AddStudyRole","props","studentID","dataProgram","onFetchData","isModalVisible","setIsModalVisible","isLoading","setIsLoading","showNoti","showModal","handleOk","handleCancel","defaultValuesInit","StudentID","ProgramID","Note","returnSchemaFunc","Object","keys","forEach","key","mixed","required","object","shape","form","defaultValues","resolver","onSubmit","dataSubmit","res","add","status","error","message","setValue","handleSubmit"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Modal, Form, Spin } from 'antd';\r\nimport { useForm } from 'react-hook-form';\r\nimport * as yup from 'yup';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport InputTextField from '~/components/FormControl/InputTextField';\r\nimport SelectField from '~/components/FormControl/SelectField';\r\nimport TextAreaField from '~/components/FormControl/TextAreaField';\r\nimport { studyRoleApi } from '~/apiBase';\r\nimport { useWrap } from '~/context/wrap';\r\n\r\nlet returnSchema = {};\r\nlet schema = null;\r\n\r\nconst AddStudyRole = (props) => {\r\n\tconst { studentID, dataProgram, onFetchData } = props;\r\n\tconst [isModalVisible, setIsModalVisible] = useState(false);\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\tconst { showNoti } = useWrap();\r\n\r\n\tconst showModal = () => {\r\n\t\tsetIsModalVisible(true);\r\n\t};\r\n\r\n\tconst handleOk = () => {\r\n\t\tsetIsModalVisible(false);\r\n\t};\r\n\r\n\tconst handleCancel = () => {\r\n\t\tsetIsModalVisible(false);\r\n\t};\r\n\r\n\t// -----  HANDLE ALL IN FORM -------------\r\n\tconst defaultValuesInit = {\r\n\t\tStudentID: null,\r\n\t\tProgramID: null,\r\n\t\tNote: null\r\n\t};\r\n\r\n\t(function returnSchemaFunc() {\r\n\t\treturnSchema = { ...defaultValuesInit };\r\n\t\tObject.keys(returnSchema).forEach(function (key) {\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'ProgramID':\r\n\t\t\t\t\treturnSchema[key] = yup.mixed().required('Bạn không được để trống');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t// returnSchema[key] = yup.mixed().required(\"Bạn không được để trống\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tschema = yup.object().shape(returnSchema);\r\n\t})();\r\n\r\n\tconst form = useForm({\r\n\t\tdefaultValues: defaultValuesInit,\r\n\t\tresolver: yupResolver(schema)\r\n\t});\r\n\r\n\tconst onSubmit = async (dataSubmit: any) => {\r\n\t\tsetIsLoading(true);\r\n\t\ttry {\r\n\t\t\tlet res = await studyRoleApi.add(dataSubmit);\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tsetIsModalVisible(false);\r\n\t\t\t\tshowNoti('success', 'Thêm lộ trình thành công');\r\n\t\t\t\tonFetchData && onFetchData();\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tform.setValue('StudentID', studentID);\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<button className=\"btn btn-warning\" onClick={showModal}>\r\n\t\t\t\tThêm mới\r\n\t\t\t</button>\r\n\t\t\t<Modal\r\n\t\t\t\tfooter={\r\n\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t<div className=\"col-12 d-flex justify-content-center\">\r\n\t\t\t\t\t\t\t<button onClick={form.handleSubmit(onSubmit)} type=\"submit\" className=\"btn btn-primary w-100\">\r\n\t\t\t\t\t\t\t\tLưu\r\n\t\t\t\t\t\t\t\t{isLoading && <Spin className=\"loading-base\" />}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\ttitle=\"Thêm lộ trình\"\r\n\t\t\t\tvisible={isModalVisible}\r\n\t\t\t\tonOk={handleOk}\r\n\t\t\t\tonCancel={handleCancel}\r\n\t\t\t>\r\n\t\t\t\t<Form layout=\"vertical\" onFinish={form.handleSubmit(onSubmit)}>\r\n\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t\t<SelectField\r\n\t\t\t\t\t\t\t\tform={form}\r\n\t\t\t\t\t\t\t\tname=\"ProgramID\"\r\n\t\t\t\t\t\t\t\tlabel=\"Chương trình học\"\r\n\t\t\t\t\t\t\t\toptionList={dataProgram}\r\n\t\t\t\t\t\t\t\tplaceholder=\"chọn chương trình\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t\t<TextAreaField form={form} name=\"Note\" label=\"Ghi chú\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form>\r\n\t\t\t</Modal>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default AddStudyRole;\r\n"]},"metadata":{},"sourceType":"module"}