{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _toConsumableArray from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\Sales\\\\SalesCampaign\\\\SalesCampaign.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Tooltip } from 'antd';\nimport moment from 'moment';\nimport Link from 'next/link';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { Eye } from 'react-feather';\nimport { saleCampaignApi } from '~/apiBase';\nimport SortBox from '~/components/Elements/SortBox';\nimport ExpandTable from '~/components/ExpandTable';\nimport FilterColumn from '~/components/Tables/FilterColumn';\nimport { useWrap } from '~/context/wrap';\nimport { numberWithCommas, parsePriceStrToNumber } from '~/utils/functions';\nimport SalesCampaignFilter from './SalesCampaignFilter';\nimport SalesCampaignForm from './SalesCampaignForm';\n\nvar SalesCampaign = function SalesCampaign() {\n  _s();\n\n  var _useState = useState([]),\n      saleCampaignList = _useState[0],\n      setSaleCampaignList = _useState[1];\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti,\n      isAdmin = _useWrap.isAdmin;\n\n  var _useState2 = useState({\n    type: '',\n    status: false\n  }),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var _useState3 = useState(null),\n      totalPage = _useState3[0],\n      setTotalPage = _useState3[1];\n\n  var optionStatusList = [//2-Đang hoạt động 3-Tạm ngưng 4-Kết thúc\n  {\n    title: 'Đang hoạt động',\n    value: 2\n  }, {\n    title: 'Tạm ngưng',\n    value: 3\n  }];\n  var sortOptionList = [{\n    dataSort: {\n      sort: 0,\n      sortType: true\n    },\n    value: 1,\n    text: 'Ngày bắt đầu tăng dần'\n  }, {\n    dataSort: {\n      sort: 0,\n      sortType: false\n    },\n    value: 2,\n    text: 'Ngày bắt đầu giảm dần'\n  }, {\n    dataSort: {\n      sort: 1,\n      sortType: true\n    },\n    value: 3,\n    text: 'Ngày kết thúc tăng dần'\n  }, {\n    dataSort: {\n      sort: 1,\n      sortType: false\n    },\n    value: 4,\n    text: 'Ngày kết thúc giảm dần'\n  }]; // FILTER\n\n  var listFieldInit = {\n    pageIndex: 1,\n    pageSize: 10,\n    sort: -1,\n    sortType: false,\n    StatusID: null,\n    Time: ''\n  };\n  var refValue = useRef({\n    pageIndex: 1,\n    pageSize: 10,\n    sort: -1,\n    sortType: false\n  });\n\n  var _useState4 = useState(listFieldInit),\n      filters = _useState4[0],\n      setFilters = _useState4[1]; // FILTER\n\n\n  var onFilter = function onFilter(obj) {\n    setFilters(_objectSpread(_objectSpread(_objectSpread({}, listFieldInit), refValue.current), {}, {\n      pageIndex: 1,\n      Time: moment(obj.Time).format('YYYY/MM/DD')\n    }));\n  }; // PAGINATION\n\n\n  var getPagination = function getPagination(pageIndex, pageSize) {\n    if (!pageSize) pageSize = 10;\n    refValue.current = _objectSpread(_objectSpread({}, refValue.current), {}, {\n      pageSize: pageSize,\n      pageIndex: pageIndex\n    });\n    setFilters(_objectSpread(_objectSpread({}, filters), refValue.current));\n  }; // SORT\n\n\n  var onSort = function onSort(option) {\n    refValue.current = _objectSpread(_objectSpread({}, refValue.current), {}, {\n      sort: option.title.sort,\n      sortType: option.title.sortType\n    });\n    setFilters(_objectSpread(_objectSpread({}, listFieldInit), refValue.current));\n  }; // RESET SEARCH\n\n\n  var onResetSearch = function onResetSearch() {\n    setFilters(_objectSpread(_objectSpread({}, listFieldInit), {}, {\n      pageSize: refValue.current.pageSize\n    }));\n  }; // ACTION SEARCH\n\n\n  var onSearch = function onSearch(valueSearch, dataIndex) {\n    setFilters(_objectSpread(_objectSpread(_objectSpread({}, listFieldInit), refValue.current), {}, _defineProperty({\n      pageIndex: 1\n    }, dataIndex, valueSearch)));\n  }; // GET DATA TABLE\n\n\n  var fetchSaleCampaignList = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              setIsLoading({\n                type: 'GET_ALL',\n                status: true\n              });\n              _context.next = 4;\n              return saleCampaignApi.getAll(filters);\n\n            case 4:\n              res = _context.sent;\n\n              if (res.status === 200) {\n                setSaleCampaignList(res.data.data);\n                setTotalPage(res.data.totalRow);\n              }\n\n              if (res.status === 204) {\n                setSaleCampaignList([]);\n                setTotalPage(0);\n              }\n\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](0);\n              showNoti('danger', _context.t0.message);\n\n            case 12:\n              _context.prev = 12;\n              setIsLoading({\n                type: 'GET_ALL',\n                status: false\n              });\n              return _context.finish(12);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 9, 12, 15]]);\n    }));\n\n    return function fetchSaleCampaignList() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    fetchSaleCampaignList();\n  }, [filters]); // CREATE\n\n  var onCreateSaleCampaign = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data) {\n      var newData, res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              setIsLoading({\n                type: 'ADD_DATA',\n                status: true\n              });\n              newData = _objectSpread(_objectSpread({}, data), {}, {\n                StartTime: moment(data.StartTime).format('YYYY/MM/DD'),\n                EndTime: moment(data.EndTime).format('YYYY/MM/DD'),\n                SaleBonusList: data.SaleBonusList.map(function (s) {\n                  return _objectSpread(_objectSpread({}, s), {}, {\n                    MoneyCollected: parsePriceStrToNumber(s.MoneyCollected)\n                  });\n                })\n              });\n              _context2.next = 5;\n              return saleCampaignApi.add(newData);\n\n            case 5:\n              res = _context2.sent;\n\n              if (!(res.status === 200)) {\n                _context2.next = 10;\n                break;\n              }\n\n              showNoti('success', res.data.message);\n              onResetSearch(); // <== khi tạo xong r reset search để trở về trang đầu tiên\n\n              return _context2.abrupt(\"return\", true);\n\n            case 10:\n              _context2.next = 15;\n              break;\n\n            case 12:\n              _context2.prev = 12;\n              _context2.t0 = _context2[\"catch\"](0);\n              showNoti('danger', _context2.t0.message);\n\n            case 15:\n              _context2.prev = 15;\n              setIsLoading({\n                type: 'ADD_DATA',\n                status: false\n              });\n              return _context2.finish(15);\n\n            case 18:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 12, 15, 18]]);\n    }));\n\n    return function onCreateSaleCampaign(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // UPDATE\n\n\n  var onUpdateSaleCampaign = function onUpdateSaleCampaign(idx) {\n    return /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data) {\n        var StartTime, EndTime, newSaleBonusList, StatusID, newSaleCampaignList, saleCampaign, oldSaleBonusList, formatSaleBonusList, newSaleCampaign, res;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                setIsLoading({\n                  type: 'ADD_DATA',\n                  status: true\n                });\n                StartTime = data.StartTime, EndTime = data.EndTime, newSaleBonusList = data.SaleBonusList, StatusID = data.StatusID; // GET OLD SALE CAMPAIGN\n\n                newSaleCampaignList = _toConsumableArray(saleCampaignList);\n                saleCampaign = newSaleCampaignList[idx];\n                oldSaleBonusList = saleCampaign.SaleBonusList; // FORMAT BONUS LIST FOLLOW API\n\n                formatSaleBonusList = [].concat(_toConsumableArray(newSaleBonusList), _toConsumableArray(oldSaleBonusList)).reduce(function (arr, saleBonus) {\n                  // CLEAR DUPLICATE OLD BONUS\n                  if (arr.some(function (newBonusArr) {\n                    return newBonusArr.ID && newBonusArr.ID === saleBonus.ID;\n                  })) {\n                    return arr;\n                  }\n\n                  if (newSaleBonusList.some(function (newSaleBonus) {\n                    return newSaleBonus.ID && newSaleBonus.ID === saleBonus.ID;\n                  })) {\n                    arr.push(_objectSpread(_objectSpread({}, saleBonus), {}, {\n                      MoneyCollected: parsePriceStrToNumber(saleBonus.MoneyCollected)\n                    }));\n                  } else if (!saleBonus.hasOwnProperty('ID')) {\n                    // DO NOT HAVE PROPERTY ID => NEW BONUS\n                    arr.push(_objectSpread(_objectSpread({}, saleBonus), {}, {\n                      MoneyCollected: parsePriceStrToNumber(saleBonus.MoneyCollected)\n                    }));\n                  } else {\n                    // CAN NOT FIND ID BONUS IN SALE BONUS LIST => BONUS REMOVED\n                    arr.push(_objectSpread(_objectSpread({}, saleBonus), {}, {\n                      Enable: false\n                    }));\n                  }\n\n                  return arr;\n                }, []); //\n\n                newSaleCampaign = _objectSpread(_objectSpread(_objectSpread({}, saleCampaign), data), {}, {\n                  StatusName: [2, 3].includes(StatusID) ? optionStatusList.find(function (o) {\n                    return o.value === data.StatusID;\n                  }).title : saleCampaign.StatusName,\n                  StartTime: moment(StartTime).format('YYYY/MM/DD'),\n                  EndTime: moment(EndTime).format('YYYY/MM/DD'),\n                  SaleBonusList: formatSaleBonusList\n                });\n                _context3.next = 10;\n                return saleCampaignApi.update(newSaleCampaign);\n\n              case 10:\n                res = _context3.sent;\n\n                if (!(res.status === 200)) {\n                  _context3.next = 16;\n                  break;\n                }\n\n                newSaleCampaignList.splice(idx, 1, _objectSpread(_objectSpread({}, newSaleCampaign), {}, {\n                  SaleBonusList: newSaleBonusList.map(function (s) {\n                    return _objectSpread(_objectSpread({}, s), {}, {\n                      MoneyCollected: parsePriceStrToNumber(s.MoneyCollected)\n                    });\n                  })\n                }));\n                setSaleCampaignList(newSaleCampaignList);\n                showNoti('success', res.data.message);\n                return _context3.abrupt(\"return\", true);\n\n              case 16:\n                _context3.next = 21;\n                break;\n\n              case 18:\n                _context3.prev = 18;\n                _context3.t0 = _context3[\"catch\"](0);\n                showNoti('danger', _context3.t0.message);\n\n              case 21:\n                _context3.prev = 21;\n                setIsLoading({\n                  type: 'ADD_DATA',\n                  status: false\n                });\n                return _context3.finish(21);\n\n              case 24:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 18, 21, 24]]);\n      }));\n\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n  };\n\n  var columns = [{\n    title: 'Tên chiến dịch',\n    width: 150,\n    dataIndex: 'Name',\n    render: function render(text) {\n      return /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: text,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"limit-text\",\n          children: text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 6\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 5\n      }, _this);\n    }\n  }, {\n    title: 'Bắt đầu',\n    width: 150,\n    dataIndex: 'StartTime',\n    render: function render(date) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-black\",\n        children: moment(date).format('DD/MM/YYYY')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 22\n      }, _this);\n    }\n  }, {\n    title: 'Kết thúc',\n    width: 150,\n    dataIndex: 'EndTime',\n    render: function render(date) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-black\",\n        children: moment(date).format('DD/MM/YYYY')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 22\n      }, _this);\n    }\n  }, {\n    title: 'Số ngày',\n    width: 100,\n    dataIndex: 'TotalDay'\n  }, {\n    title: 'Doanh thu',\n    width: 100,\n    dataIndex: 'TotalRevenue',\n    render: function render(text) {\n      return numberWithCommas(text);\n    }\n  }, _objectSpread({\n    title: 'Trạng thái',\n    width: 100,\n    dataIndex: 'StatusID',\n    align: 'left',\n    render: function render(statusID, record) {\n      var cls = 'tag';\n\n      switch (statusID) {\n        //1-Chưa hoạt động 2-Đang hoạt động 3-Tạm ngưng 4-Kết thúc\n        case 1:\n          cls += ' black';\n          break;\n\n        case 2:\n          cls += ' green';\n          break;\n\n        case 3:\n          cls += ' yellow';\n\n        case 4:\n          cls += ' gray';\n          break;\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        className: cls,\n        children: record.StatusName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 12\n      }, _this);\n    }\n  }, FilterColumn('StatusID', onSearch, onResetSearch, 'select', [{\n    title: 'Chưa hoạt động',\n    value: 1\n  }, {\n    title: 'Đang hoạt động',\n    value: 2\n  }, {\n    title: 'Tạm ngưng',\n    value: 3\n  }, {\n    title: 'Kết thúc',\n    value: 4\n  }])), {\n    align: 'right',\n    width: 100,\n    render: function render(record, _, idx) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: function onClick(e) {\n          return e.stopPropagation();\n        },\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          href: {\n            pathname: '/staff/sales-campaign/sales-campaign-detail/[slug]',\n            query: {\n              slug: record.ID\n            }\n          },\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"btn btn-icon\",\n            children: /*#__PURE__*/_jsxDEV(Tooltip, {\n              title: \"Chi ti\\u1EBFt chi\\u1EBFn d\\u1ECBch\",\n              children: /*#__PURE__*/_jsxDEV(Eye, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 9\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 8\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 7\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 6\n        }, _this), isAdmin && /*#__PURE__*/_jsxDEV(SalesCampaignForm, {\n          isUpdate: true,\n          updateObj: record,\n          isLoading: isLoading,\n          handleSubmit: onUpdateSaleCampaign(idx),\n          optionStatusList: optionStatusList\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 7\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 5\n      }, _this);\n    }\n  }];\n\n  var expandedRowRender = function expandedRowRender(item) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n        className: \"mt-2\",\n        children: \"Ghi ch\\xFA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 5\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"note\",\n        children: item.Note\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 5\n      }, _this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"tb-expand mt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"M\\u1ED1c doanh thu\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 8\n            }, _this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Th\\u01B0\\u1EDFng (%)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 8\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 7\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: item.SaleBonusList.map(function (s) {\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-weight-black\",\n                  children: numberWithCommas(s.MoneyCollected)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 397,\n                  columnNumber: 10\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 9\n              }, _this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-weight-black\",\n                  children: [s.PercentBonus, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 400,\n                  columnNumber: 10\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 9\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 8\n            }, _this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 6\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 5\n      }, _this)]\n    }, void 0, true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(ExpandTable, {\n    loading: isLoading,\n    currentPage: filters.pageIndex,\n    totalPage: totalPage,\n    getPagination: getPagination,\n    addClass: \"basic-header\",\n    TitlePage: \"Danh s\\xE1ch chi\\u1EBFn d\\u1ECBch\",\n    dataSource: saleCampaignList,\n    columns: columns,\n    TitleCard: /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"font-weight-primary\",\n      children: \"L\\u01B0u \\xFD: Chi\\u1EBFn d\\u1ECBch s\\u1EBD t\\u1EF1 \\u0111\\u1ED9ng t\\u1EA1o v\\xE0o \\u0111\\u1EA7u th\\xE1ng\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 15\n    }, _this),\n    Extra: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"extra-table\",\n      children: [/*#__PURE__*/_jsxDEV(SalesCampaignFilter, {\n        handleFilter: onFilter,\n        handleResetFilter: onResetSearch\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 6\n      }, _this), /*#__PURE__*/_jsxDEV(SortBox, {\n        handleSort: onSort,\n        dataOption: sortOptionList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 6\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 5\n    }, _this),\n    expandable: {\n      expandedRowRender: expandedRowRender\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 410,\n    columnNumber: 3\n  }, _this);\n};\n\n_s(SalesCampaign, \"3uL2ZdfO8sn+9kZqXf4MilndrxI=\", false, function () {\n  return [useWrap];\n});\n\n_c = SalesCampaign;\nexport default SalesCampaign;\n\nvar _c;\n\n$RefreshReg$(_c, \"SalesCampaign\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/Sales/SalesCampaign/SalesCampaign.tsx"],"names":["Tooltip","moment","Link","React","useEffect","useRef","useState","Eye","saleCampaignApi","SortBox","ExpandTable","FilterColumn","useWrap","numberWithCommas","parsePriceStrToNumber","SalesCampaignFilter","SalesCampaignForm","SalesCampaign","saleCampaignList","setSaleCampaignList","showNoti","isAdmin","type","status","isLoading","setIsLoading","totalPage","setTotalPage","optionStatusList","title","value","sortOptionList","dataSort","sort","sortType","text","listFieldInit","pageIndex","pageSize","StatusID","Time","refValue","filters","setFilters","onFilter","obj","current","format","getPagination","onSort","option","onResetSearch","onSearch","valueSearch","dataIndex","fetchSaleCampaignList","getAll","res","data","totalRow","message","onCreateSaleCampaign","newData","StartTime","EndTime","SaleBonusList","map","s","MoneyCollected","add","onUpdateSaleCampaign","idx","newSaleBonusList","newSaleCampaignList","saleCampaign","oldSaleBonusList","formatSaleBonusList","reduce","arr","saleBonus","some","newBonusArr","ID","newSaleBonus","push","hasOwnProperty","Enable","newSaleCampaign","StatusName","includes","find","o","update","splice","columns","width","render","date","align","statusID","record","cls","_","e","stopPropagation","pathname","query","slug","expandedRowRender","item","Note","PercentBonus"],"mappings":"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","sourcesContent":["import { Tooltip } from 'antd'\r\nimport moment from 'moment'\r\nimport Link from 'next/link'\r\nimport React, { useEffect, useRef, useState } from 'react'\r\nimport { Eye } from 'react-feather'\r\nimport { saleCampaignApi } from '~/apiBase'\r\nimport SortBox from '~/components/Elements/SortBox'\r\nimport ExpandTable from '~/components/ExpandTable'\r\nimport FilterColumn from '~/components/Tables/FilterColumn'\r\nimport { useWrap } from '~/context/wrap'\r\nimport { numberWithCommas, parsePriceStrToNumber } from '~/utils/functions'\r\nimport SalesCampaignFilter from './SalesCampaignFilter'\r\nimport SalesCampaignForm from './SalesCampaignForm'\r\nconst SalesCampaign = () => {\r\n\tconst [saleCampaignList, setSaleCampaignList] = useState<ISaleCampaign[]>([])\r\n\tconst { showNoti, isAdmin } = useWrap()\r\n\tconst [isLoading, setIsLoading] = useState({\r\n\t\ttype: '',\r\n\t\tstatus: false\r\n\t})\r\n\tconst [totalPage, setTotalPage] = useState(null)\r\n\tconst optionStatusList = [\r\n\t\t//2-Đang hoạt động 3-Tạm ngưng 4-Kết thúc\r\n\t\t{\r\n\t\t\ttitle: 'Đang hoạt động',\r\n\t\t\tvalue: 2\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Tạm ngưng',\r\n\t\t\tvalue: 3\r\n\t\t}\r\n\t]\r\n\tconst sortOptionList = [\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 0,\r\n\t\t\t\tsortType: true\r\n\t\t\t},\r\n\t\t\tvalue: 1,\r\n\t\t\ttext: 'Ngày bắt đầu tăng dần'\r\n\t\t},\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 0,\r\n\t\t\t\tsortType: false\r\n\t\t\t},\r\n\t\t\tvalue: 2,\r\n\t\t\ttext: 'Ngày bắt đầu giảm dần'\r\n\t\t},\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 1,\r\n\t\t\t\tsortType: true\r\n\t\t\t},\r\n\t\t\tvalue: 3,\r\n\t\t\ttext: 'Ngày kết thúc tăng dần'\r\n\t\t},\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 1,\r\n\t\t\t\tsortType: false\r\n\t\t\t},\r\n\t\t\tvalue: 4,\r\n\t\t\ttext: 'Ngày kết thúc giảm dần'\r\n\t\t}\r\n\t]\r\n\t// FILTER\r\n\tconst listFieldInit = {\r\n\t\tpageIndex: 1,\r\n\t\tpageSize: 10,\r\n\t\tsort: -1,\r\n\t\tsortType: false,\r\n\r\n\t\tStatusID: null,\r\n\t\tTime: ''\r\n\t}\r\n\tlet refValue = useRef({\r\n\t\tpageIndex: 1,\r\n\t\tpageSize: 10,\r\n\t\tsort: -1,\r\n\t\tsortType: false\r\n\t})\r\n\tconst [filters, setFilters] = useState(listFieldInit)\r\n\r\n\t// FILTER\r\n\tconst onFilter = (obj) => {\r\n\t\tsetFilters({\r\n\t\t\t...listFieldInit,\r\n\t\t\t...refValue.current,\r\n\t\t\tpageIndex: 1,\r\n\t\t\tTime: moment(obj.Time).format('YYYY/MM/DD')\r\n\t\t})\r\n\t}\r\n\t// PAGINATION\r\n\tconst getPagination = (pageIndex: number, pageSize: number) => {\r\n\t\tif (!pageSize) pageSize = 10\r\n\t\trefValue.current = {\r\n\t\t\t...refValue.current,\r\n\t\t\tpageSize,\r\n\t\t\tpageIndex\r\n\t\t}\r\n\t\tsetFilters({\r\n\t\t\t...filters,\r\n\t\t\t...refValue.current\r\n\t\t})\r\n\t}\r\n\t// SORT\r\n\tconst onSort = (option) => {\r\n\t\trefValue.current = {\r\n\t\t\t...refValue.current,\r\n\t\t\tsort: option.title.sort,\r\n\t\t\tsortType: option.title.sortType\r\n\t\t}\r\n\t\tsetFilters({\r\n\t\t\t...listFieldInit,\r\n\t\t\t...refValue.current\r\n\t\t})\r\n\t}\r\n\t// RESET SEARCH\r\n\tconst onResetSearch = () => {\r\n\t\tsetFilters({\r\n\t\t\t...listFieldInit,\r\n\t\t\tpageSize: refValue.current.pageSize\r\n\t\t})\r\n\t}\r\n\t// ACTION SEARCH\r\n\tconst onSearch = (valueSearch, dataIndex) => {\r\n\t\tsetFilters({\r\n\t\t\t...listFieldInit,\r\n\t\t\t...refValue.current,\r\n\t\t\tpageIndex: 1,\r\n\t\t\t[dataIndex]: valueSearch\r\n\t\t})\r\n\t}\r\n\r\n\t// GET DATA TABLE\r\n\tconst fetchSaleCampaignList = async () => {\r\n\t\ttry {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'GET_ALL',\r\n\t\t\t\tstatus: true\r\n\t\t\t})\r\n\t\t\tconst res = await saleCampaignApi.getAll(filters)\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tsetSaleCampaignList(res.data.data)\r\n\t\t\t\tsetTotalPage(res.data.totalRow)\r\n\t\t\t}\r\n\t\t\tif (res.status === 204) {\r\n\t\t\t\tsetSaleCampaignList([])\r\n\t\t\t\tsetTotalPage(0)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'GET_ALL',\r\n\t\t\t\tstatus: false\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tfetchSaleCampaignList()\r\n\t}, [filters])\r\n\t// CREATE\r\n\tconst onCreateSaleCampaign = async (data: {\r\n\t\tName: string\r\n\t\tStartTime: string\r\n\t\tEndTime: string\r\n\t\tNote?: string\r\n\t\tSaleBonusList?: { MoneyCollected: string; PercentBonus: number }[]\r\n\t}) => {\r\n\t\ttry {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'ADD_DATA',\r\n\t\t\t\tstatus: true\r\n\t\t\t})\r\n\t\t\tconst newData = {\r\n\t\t\t\t...data,\r\n\t\t\t\tStartTime: moment(data.StartTime).format('YYYY/MM/DD'),\r\n\t\t\t\tEndTime: moment(data.EndTime).format('YYYY/MM/DD'),\r\n\t\t\t\tSaleBonusList: data.SaleBonusList.map((s) => ({\r\n\t\t\t\t\t...s,\r\n\t\t\t\t\tMoneyCollected: parsePriceStrToNumber(s.MoneyCollected)\r\n\t\t\t\t}))\r\n\t\t\t}\r\n\t\t\tconst res = await saleCampaignApi.add(newData)\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tshowNoti('success', res.data.message)\r\n\t\t\t\tonResetSearch() // <== khi tạo xong r reset search để trở về trang đầu tiên\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'ADD_DATA',\r\n\t\t\t\tstatus: false\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\t// UPDATE\r\n\tconst onUpdateSaleCampaign = (idx: number) => {\r\n\t\treturn async (data: ISaleCampaign) => {\r\n\t\t\ttry {\r\n\t\t\t\tsetIsLoading({\r\n\t\t\t\t\ttype: 'ADD_DATA',\r\n\t\t\t\t\tstatus: true\r\n\t\t\t\t})\r\n\t\t\t\tconst { StartTime, EndTime, SaleBonusList: newSaleBonusList, StatusID } = data\r\n\t\t\t\t// GET OLD SALE CAMPAIGN\r\n\t\t\t\tconst newSaleCampaignList = [...saleCampaignList]\r\n\t\t\t\tconst saleCampaign = newSaleCampaignList[idx]\r\n\t\t\t\tconst { SaleBonusList: oldSaleBonusList } = saleCampaign\r\n\t\t\t\t// FORMAT BONUS LIST FOLLOW API\r\n\t\t\t\tconst formatSaleBonusList = [...newSaleBonusList, ...oldSaleBonusList].reduce((arr, saleBonus) => {\r\n\t\t\t\t\t// CLEAR DUPLICATE OLD BONUS\r\n\t\t\t\t\tif (arr.some((newBonusArr) => newBonusArr.ID && newBonusArr.ID === saleBonus.ID)) {\r\n\t\t\t\t\t\treturn arr\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (newSaleBonusList.some((newSaleBonus) => newSaleBonus.ID && newSaleBonus.ID === saleBonus.ID)) {\r\n\t\t\t\t\t\tarr.push({\r\n\t\t\t\t\t\t\t...saleBonus,\r\n\t\t\t\t\t\t\tMoneyCollected: parsePriceStrToNumber(saleBonus.MoneyCollected)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (!saleBonus.hasOwnProperty('ID')) {\r\n\t\t\t\t\t\t// DO NOT HAVE PROPERTY ID => NEW BONUS\r\n\t\t\t\t\t\tarr.push({\r\n\t\t\t\t\t\t\t...saleBonus,\r\n\t\t\t\t\t\t\tMoneyCollected: parsePriceStrToNumber(saleBonus.MoneyCollected)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// CAN NOT FIND ID BONUS IN SALE BONUS LIST => BONUS REMOVED\r\n\t\t\t\t\t\tarr.push({\r\n\t\t\t\t\t\t\t...saleBonus,\r\n\t\t\t\t\t\t\tEnable: false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn arr\r\n\t\t\t\t}, [])\r\n\t\t\t\t//\r\n\t\t\t\tconst newSaleCampaign: ISaleCampaign = {\r\n\t\t\t\t\t...saleCampaign,\r\n\t\t\t\t\t...data,\r\n\t\t\t\t\tStatusName: [2, 3].includes(StatusID) ? optionStatusList.find((o) => o.value === data.StatusID).title : saleCampaign.StatusName,\r\n\t\t\t\t\tStartTime: moment(StartTime).format('YYYY/MM/DD'),\r\n\t\t\t\t\tEndTime: moment(EndTime).format('YYYY/MM/DD'),\r\n\t\t\t\t\tSaleBonusList: formatSaleBonusList\r\n\t\t\t\t}\r\n\t\t\t\tconst res = await saleCampaignApi.update(newSaleCampaign)\r\n\t\t\t\tif (res.status === 200) {\r\n\t\t\t\t\tnewSaleCampaignList.splice(idx, 1, {\r\n\t\t\t\t\t\t...newSaleCampaign,\r\n\t\t\t\t\t\tSaleBonusList: newSaleBonusList.map((s) => ({\r\n\t\t\t\t\t\t\t...s,\r\n\t\t\t\t\t\t\tMoneyCollected: parsePriceStrToNumber(s.MoneyCollected)\r\n\t\t\t\t\t\t}))\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsetSaleCampaignList(newSaleCampaignList)\r\n\t\t\t\t\tshowNoti('success', res.data.message)\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tshowNoti('danger', error.message)\r\n\t\t\t} finally {\r\n\t\t\t\tsetIsLoading({\r\n\t\t\t\t\ttype: 'ADD_DATA',\r\n\t\t\t\t\tstatus: false\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Tên chiến dịch',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'Name',\r\n\t\t\trender: (text) => (\r\n\t\t\t\t<Tooltip title={text}>\r\n\t\t\t\t\t<p className=\"limit-text\">{text}</p>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t)\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Bắt đầu',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'StartTime',\r\n\t\t\trender: (date) => <p className=\"font-weight-black\">{moment(date).format('DD/MM/YYYY')}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Kết thúc',\r\n\t\t\twidth: 150,\r\n\t\t\tdataIndex: 'EndTime',\r\n\t\t\trender: (date) => <p className=\"font-weight-black\">{moment(date).format('DD/MM/YYYY')}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Số ngày',\r\n\t\t\twidth: 100,\r\n\t\t\tdataIndex: 'TotalDay'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Doanh thu',\r\n\t\t\twidth: 100,\r\n\t\t\tdataIndex: 'TotalRevenue',\r\n\t\t\trender: (text) => numberWithCommas(text)\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Trạng thái',\r\n\t\t\twidth: 100,\r\n\t\t\tdataIndex: 'StatusID',\r\n\t\t\talign: 'left',\r\n\t\t\trender: (statusID, record: ISaleCampaign) => {\r\n\t\t\t\tlet cls = 'tag'\r\n\t\t\t\tswitch (statusID) {\r\n\t\t\t\t\t//1-Chưa hoạt động 2-Đang hoạt động 3-Tạm ngưng 4-Kết thúc\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tcls += ' black'\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tcls += ' green'\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\tcls += ' yellow'\r\n\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\tcls += ' gray'\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t\treturn <span className={cls}>{record.StatusName}</span>\r\n\t\t\t},\r\n\t\t\t...FilterColumn('StatusID', onSearch, onResetSearch, 'select', [\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: 'Chưa hoạt động',\r\n\t\t\t\t\tvalue: 1\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: 'Đang hoạt động',\r\n\t\t\t\t\tvalue: 2\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: 'Tạm ngưng',\r\n\t\t\t\t\tvalue: 3\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: 'Kết thúc',\r\n\t\t\t\t\tvalue: 4\r\n\t\t\t\t}\r\n\t\t\t])\r\n\t\t},\r\n\r\n\t\t{\r\n\t\t\talign: 'right',\r\n\t\t\twidth: 100,\r\n\t\t\trender: (record: ISaleCampaign, _, idx) => (\r\n\t\t\t\t<div onClick={(e) => e.stopPropagation()}>\r\n\t\t\t\t\t<Link\r\n\t\t\t\t\t\thref={{\r\n\t\t\t\t\t\t\tpathname: '/staff/sales-campaign/sales-campaign-detail/[slug]',\r\n\t\t\t\t\t\t\tquery: { slug: record.ID }\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<a className=\"btn btn-icon\">\r\n\t\t\t\t\t\t\t<Tooltip title=\"Chi tiết chiến dịch\">\r\n\t\t\t\t\t\t\t\t<Eye />\r\n\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t{isAdmin && (\r\n\t\t\t\t\t\t<SalesCampaignForm\r\n\t\t\t\t\t\t\tisUpdate={true}\r\n\t\t\t\t\t\t\tupdateObj={record}\r\n\t\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t\t\thandleSubmit={onUpdateSaleCampaign(idx)}\r\n\t\t\t\t\t\t\toptionStatusList={optionStatusList}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t}\r\n\t]\r\n\tconst expandedRowRender = (item: ISaleCampaign) => {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<h6 className=\"mt-2\">Ghi chú</h6>\r\n\t\t\t\t<div className=\"note\">{item.Note}</div>\r\n\r\n\t\t\t\t<table className=\"tb-expand mt-3\">\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>Mốc doanh thu</th>\r\n\t\t\t\t\t\t\t<th>Thưởng (%)</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{item.SaleBonusList.map((s) => (\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t<p className=\"font-weight-black\">{numberWithCommas(s.MoneyCollected)}</p>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t<p className=\"font-weight-black\">{s.PercentBonus}%</p>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\treturn (\r\n\t\t<ExpandTable\r\n\t\t\tloading={isLoading}\r\n\t\t\tcurrentPage={filters.pageIndex}\r\n\t\t\ttotalPage={totalPage}\r\n\t\t\tgetPagination={getPagination}\r\n\t\t\taddClass=\"basic-header\"\r\n\t\t\tTitlePage=\"Danh sách chiến dịch\"\r\n\t\t\tdataSource={saleCampaignList}\r\n\t\t\tcolumns={columns}\r\n\t\t\tTitleCard={<p className=\"font-weight-primary\">Lưu ý: Chiến dịch sẽ tự động tạo vào đầu tháng</p>}\r\n\t\t\tExtra={\r\n\t\t\t\t<div className=\"extra-table\">\r\n\t\t\t\t\t<SalesCampaignFilter handleFilter={onFilter} handleResetFilter={onResetSearch} />\r\n\t\t\t\t\t<SortBox handleSort={onSort} dataOption={sortOptionList} />\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t\texpandable={{ expandedRowRender }}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nexport default SalesCampaign\r\n"]},"metadata":{},"sourceType":"module"}