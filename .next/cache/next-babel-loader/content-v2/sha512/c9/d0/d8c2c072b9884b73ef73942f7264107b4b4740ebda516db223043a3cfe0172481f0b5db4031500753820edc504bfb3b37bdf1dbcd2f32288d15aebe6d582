{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\pages\\\\option\\\\supplier\\\\index.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Fragment, useEffect, useState } from 'react';\nimport PowerTable from '~/components/PowerTable';\nimport FilterColumn from '~/components/Tables/FilterColumn';\nimport SortBox from '~/components/Elements/SortBox';\nimport SupplierForm from '~/components/Global/Option/SupplierForm';\nimport LayoutBase from '~/components/LayoutBase';\nimport FilterSupplierTable from '~/components/Global/Option/FilterTable/FilterSupplierTable';\nimport { useWrap } from '~/context/wrap';\nimport { supplierApi, userInformationApi } from '~/apiBase';\nimport { Tooltip } from 'antd';\nimport { AlertTriangle, X } from 'react-feather';\nimport Modal from 'antd/lib/modal/Modal';\nimport moment from 'moment';\n\nvar SupplierList = function SupplierList() {\n  _s();\n\n  var _useState = useState([]),\n      dataTable = _useState[0],\n      setDataTable = _useState[1];\n\n  var _useState2 = useState([]),\n      dataStaffManage = _useState2[0],\n      setDataStaffManage = _useState2[1];\n\n  var _useState3 = useState(''),\n      activeColumnSearch = _useState3[0],\n      setActiveColumnSearch = _useState3[1];\n\n  var _useState4 = useState({\n    ID: null,\n    Enable: null\n  }),\n      dataDelete = _useState4[0],\n      setDataDelete = _useState4[1];\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti,\n      pageSize = _useWrap.pageSize;\n\n  var _useState5 = useState(false),\n      isModalVisible = _useState5[0],\n      setIsModalVisible = _useState5[1];\n\n  var _useState6 = useState({\n    type: '',\n    status: false\n  }),\n      isLoading = _useState6[0],\n      setIsLoading = _useState6[1];\n\n  var _useState7 = useState(null),\n      totalPage = _useState7[0],\n      setTotalPage = _useState7[1];\n\n  var _useState8 = useState(1),\n      currentPage = _useState8[0],\n      setCurrentPage = _useState8[1];\n\n  var pageIndex = 1; // SORT\n\n  var dataOption = [{\n    dataSort: {\n      sort: 2,\n      sortType: false\n    },\n    value: 3,\n    text: 'Tên giảm dần'\n  }, {\n    dataSort: {\n      sort: 2,\n      sortType: true\n    },\n    value: 4,\n    text: 'Tên tăng dần '\n  }]; // PARAMS SEARCH\n\n  var listField = {\n    SupplierName: '',\n    PersonInChargeName: ''\n  }; // PARAMS API GETALL\n\n  var listTodoApi = {\n    pageSize: pageSize,\n    pageIndex: pageIndex,\n    sort: null,\n    sortType: null,\n    fromDate: null,\n    toDate: null,\n    SupplierName: null,\n    PersonInChargeName: null\n  };\n\n  var _useState9 = useState(listTodoApi),\n      todoApi = _useState9[0],\n      setTodoApi = _useState9[1]; // GET NHÂN VIÊN QUẢN LÍ\n\n\n  var getDataStaffManage = function getDataStaffManage() {\n    setIsLoading({\n      type: 'GET_ALL',\n      status: true\n    });\n\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return userInformationApi.getAllRole(5);\n\n            case 3:\n              res = _context.sent;\n              res.status == 200 && setDataStaffManage(res.data.data);\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              showNoti('danger', _context.t0.message);\n\n            case 10:\n              _context.prev = 10;\n              setIsLoading({\n                type: 'GET_ALL',\n                status: false\n              });\n              return _context.finish(10);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7, 10, 13]]);\n    }))();\n  }; // GET DATA\n\n\n  var getDataTable = function getDataTable() {\n    setIsLoading({\n      type: 'GET_ALL',\n      status: true\n    });\n\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return supplierApi.getAll(todoApi);\n\n            case 3:\n              res = _context2.sent;\n\n              if (res.status == 204) {\n                // showNoti(\"danger\", \"Không có dữ liệu\");\n                // handleReset();\n                setDataTable([]);\n              }\n\n              if (res.status == 200) {\n                setDataTable(res.data.data);\n                setTotalPage(res.data.totalRow);\n              }\n\n              _context2.next = 11;\n              break;\n\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](0);\n              showNoti('danger', _context2.t0.message);\n\n            case 11:\n              _context2.prev = 11;\n              setIsLoading({\n                type: 'GET_ALL',\n                status: false\n              });\n              return _context2.finish(11);\n\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 8, 11, 14]]);\n    }))();\n  }; // ADD DATA\n\n\n  var _onSubmit2 = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data) {\n      var res, _res, _res2;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              setIsLoading({\n                type: 'ADD_DATA',\n                status: true\n              });\n              res = null;\n\n              if (!data.ID) {\n                _context3.next = 19;\n                break;\n              }\n\n              console.log(data);\n              _context3.prev = 4;\n              _context3.next = 7;\n              return supplierApi.update(data);\n\n            case 7:\n              res = _context3.sent;\n              ((_res = res) === null || _res === void 0 ? void 0 : _res.status) == 200 && showNoti('success', 'Cập nhật thành công'), getDataTable();\n              _context3.next = 14;\n              break;\n\n            case 11:\n              _context3.prev = 11;\n              _context3.t0 = _context3[\"catch\"](4);\n              showNoti('danger', _context3.t0.message);\n\n            case 14:\n              _context3.prev = 14;\n              setIsLoading({\n                type: 'ADD_DATA',\n                status: false\n              });\n              return _context3.finish(14);\n\n            case 17:\n              _context3.next = 34;\n              break;\n\n            case 19:\n              _context3.prev = 19;\n              console.log('data: ', data);\n              _context3.next = 23;\n              return supplierApi.add(data);\n\n            case 23:\n              res = _context3.sent;\n              ((_res2 = res) === null || _res2 === void 0 ? void 0 : _res2.status) == 200 && afterPost('Thêm');\n              handleReset();\n              _context3.next = 31;\n              break;\n\n            case 28:\n              _context3.prev = 28;\n              _context3.t1 = _context3[\"catch\"](19);\n              showNoti('danger', _context3.t1.message);\n\n            case 31:\n              _context3.prev = 31;\n              setIsLoading({\n                type: 'ADD_DATA',\n                status: false\n              });\n              return _context3.finish(31);\n\n            case 34:\n              return _context3.abrupt(\"return\", res);\n\n            case 35:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[4, 11, 14, 17], [19, 28, 31, 34]]);\n    }));\n\n    return function _onSubmit(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var afterPost = function afterPost(value) {\n    showNoti('success', \"\".concat(value, \" th\\xE0nh c\\xF4ng\"));\n    setTodoApi(_objectSpread(_objectSpread({}, listTodoApi), {}, {\n      pageIndex: 1\n    }));\n    setCurrentPage(1);\n  }; // PAGINATION\n\n\n  var getPagination = function getPagination(pageNumber, pageSize) {\n    if (!pageSize) pageSize = 10;\n    pageIndex = pageNumber;\n    setCurrentPage(pageNumber);\n    setTodoApi(_objectSpread(_objectSpread({}, todoApi), {}, {\n      //   ...listFieldSearch,\n      pageIndex: pageIndex,\n      pageSize: pageSize\n    }));\n  }; // ON SEARCH\n\n\n  var compareField = function compareField(valueSearch, dataIndex) {\n    var newList = null;\n    Object.keys(listField).forEach(function (key) {\n      console.log('key: ', key);\n\n      if (key != dataIndex) {\n        listField[key] = '';\n      } else {\n        listField[key] = valueSearch;\n      }\n    });\n    newList = listField;\n    return newList;\n  };\n\n  var onSearch = function onSearch(valueSearch, dataIndex) {\n    var clearKey = compareField(valueSearch, dataIndex);\n    setTodoApi(_objectSpread(_objectSpread({}, todoApi), {}, {\n      pageIndex: 1\n    }, clearKey));\n    setCurrentPage(pageIndex);\n  }; // DELETE\n\n\n  var handleDelele = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              if (!dataDelete) {\n                _context4.next = 20;\n                break;\n              }\n\n              setIsModalVisible(false);\n              res = null;\n              _context4.prev = 3;\n              _context4.next = 6;\n              return supplierApi.update(dataDelete);\n\n            case 6:\n              res = _context4.sent;\n              res.status === 200 && showNoti('success', 'Xóa thành công');\n\n              if (!(dataTable.length === 1)) {\n                _context4.next = 11;\n                break;\n              }\n\n              listTodoApi.pageIndex === 1 ? setTodoApi(_objectSpread(_objectSpread({}, listTodoApi), {}, {\n                pageIndex: 1\n              })) : setTodoApi(_objectSpread(_objectSpread({}, listTodoApi), {}, {\n                pageIndex: listTodoApi.pageIndex - 1\n              }));\n              return _context4.abrupt(\"return\");\n\n            case 11:\n              getDataTable();\n              _context4.next = 17;\n              break;\n\n            case 14:\n              _context4.prev = 14;\n              _context4.t0 = _context4[\"catch\"](3);\n              showNoti('danger', _context4.t0.message);\n\n            case 17:\n              _context4.prev = 17;\n              setIsLoading({\n                type: 'DELETE_DATA',\n                status: false\n              });\n              return _context4.finish(17);\n\n            case 20:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[3, 14, 17, 20]]);\n    }));\n\n    return function handleDelele() {\n      return _ref4.apply(this, arguments);\n    };\n  }(); // HANDLE RESET\n\n\n  var handleReset = function handleReset() {\n    setActiveColumnSearch('');\n    setTodoApi(_objectSpread(_objectSpread({}, listTodoApi), {}, {\n      pageIndex: 1\n    }));\n    setCurrentPage(1);\n  }; // HANDLE SORT\n\n\n  var _handleSort = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(option) {\n      var newTodoApi;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              console.log('Show option: ', option);\n              newTodoApi = _objectSpread(_objectSpread({}, listTodoApi), {}, {\n                sort: option.title.sort,\n                sortType: option.title.sortType\n              });\n              setCurrentPage(1);\n              setTodoApi(newTodoApi);\n\n            case 4:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function handleSort(_x2) {\n      return _ref5.apply(this, arguments);\n    };\n  }(); // HANDLE FILTER\n\n\n  var _onFilterTable = function _onFilterTable(data) {\n    console.log('Show value: ', data);\n\n    var newTodoApi = _objectSpread(_objectSpread({}, listTodoApi), {}, {\n      fromDate: data.fromDate,\n      toDate: data.toDate\n    });\n\n    setCurrentPage(1);\n    setTodoApi(newTodoApi);\n  };\n\n  var columns = [_objectSpread(_objectSpread({\n    title: 'Nhà cung cấp (NCC)',\n    dataIndex: 'SupplierName'\n  }, FilterColumn('SupplierName', onSearch, handleReset, 'text')), {}, {\n    className: activeColumnSearch === 'ID' ? 'active-column-search' : '',\n    render: function render(text) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-black\",\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 12\n      }, _this);\n    }\n  }), {\n    title: 'Địa chỉ',\n    dataIndex: 'Address' // ...FilterColumn('SupplierName', onSearch, handleReset, \"text\")\n\n  }, {\n    title: 'Mã số thuế',\n    dataIndex: 'Taxcode' // ...FilterColumn('SupplierName', onSearch, handleReset, \"text\")\n\n  }, _objectSpread(_objectSpread({\n    title: 'Nhân viên quản lí',\n    dataIndex: 'PersonInChargeName'\n  }, FilterColumn('PersonInChargeName', onSearch, handleReset, 'text')), {}, {\n    render: function render(text) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-primary\",\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 12\n      }, _this);\n    }\n  }), {\n    title: 'Thay đổi bởi',\n    dataIndex: 'ModifiedBy' // ...FilterColumn('ModifiedBy', onSearch, handleReset, \"text\")},\n\n  }, {\n    title: 'Thay đổi lúc',\n    dataIndex: 'ModifiedOn',\n    render: function render(date) {\n      return moment(date).format('DD/MM/YYYY');\n    } // ...FilterDateColumn(\"modDate\"),\n\n  }, {\n    render: function render(record) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(SupplierForm, {\n          showIcon: true,\n          rowData: record,\n          isLoading: isLoading,\n          _onSubmit: function _onSubmit(data) {\n            return _onSubmit2(data);\n          },\n          dataStaffManage: dataStaffManage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"X\\xF3a\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-icon delete\",\n            onClick: function onClick() {\n              setIsModalVisible(true);\n              setDataDelete({\n                ID: record.ID,\n                Enable: false\n              });\n            },\n            children: /*#__PURE__*/_jsxDEV(X, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 8\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 7\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 6\n        }, _this)]\n      }, void 0, true);\n    }\n  }];\n  useEffect(function () {\n    getDataTable();\n    getDataStaffManage();\n  }, [todoApi]);\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      title: /*#__PURE__*/_jsxDEV(AlertTriangle, {\n        color: \"red\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 12\n      }, _this),\n      visible: isModalVisible,\n      onOk: function onOk() {\n        return handleDelele();\n      },\n      onCancel: function onCancel() {\n        return setIsModalVisible(false);\n      },\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-confirm\",\n        children: \"B\\u1EA1n c\\xF3 ch\\u1EAFc ch\\u1EAFn mu\\u1ED1n x\\xF3a kh\\xF4ng ?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 5\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(PowerTable, {\n      loading: isLoading,\n      currentPage: currentPage,\n      totalPage: totalPage && totalPage,\n      getPagination: getPagination,\n      addClass: \"basic-header\",\n      TitlePage: \"Nh\\xE0 cung c\\u1EA5p\",\n      TitleCard: /*#__PURE__*/_jsxDEV(SupplierForm, {\n        showAdd: true,\n        isLoading: isLoading,\n        _onSubmit: function _onSubmit(data) {\n          return _onSubmit2(data);\n        },\n        dataStaffManage: dataStaffManage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 6\n      }, _this),\n      dataSource: dataTable,\n      columns: columns,\n      Extra: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"extra-table\",\n        children: [/*#__PURE__*/_jsxDEV(FilterSupplierTable, {\n          _onFilter: function _onFilter(value) {\n            return _onFilterTable(value);\n          },\n          _onHandleReset: handleReset\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 7\n        }, _this), /*#__PURE__*/_jsxDEV(SortBox, {\n          handleSort: function handleSort(value) {\n            return _handleSort(value);\n          },\n          dataOption: dataOption\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 7\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 6\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 4\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 356,\n    columnNumber: 3\n  }, _this);\n};\n\n_s(SupplierList, \"wrm6D5fDOQT7F6Gf7UNqp7u/EoQ=\", false, function () {\n  return [useWrap];\n});\n\n_c = SupplierList;\nSupplierList.layout = LayoutBase;\nexport default SupplierList;\n\nvar _c;\n\n$RefreshReg$(_c, \"SupplierList\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/pages/option/supplier/index.tsx"],"names":["React","Fragment","useEffect","useState","PowerTable","FilterColumn","SortBox","SupplierForm","LayoutBase","FilterSupplierTable","useWrap","supplierApi","userInformationApi","Tooltip","AlertTriangle","X","Modal","moment","SupplierList","dataTable","setDataTable","dataStaffManage","setDataStaffManage","activeColumnSearch","setActiveColumnSearch","ID","Enable","dataDelete","setDataDelete","showNoti","pageSize","isModalVisible","setIsModalVisible","type","status","isLoading","setIsLoading","totalPage","setTotalPage","currentPage","setCurrentPage","pageIndex","dataOption","dataSort","sort","sortType","value","text","listField","SupplierName","PersonInChargeName","listTodoApi","fromDate","toDate","todoApi","setTodoApi","getDataStaffManage","getAllRole","res","data","message","getDataTable","getAll","totalRow","_onSubmit","console","log","update","add","afterPost","handleReset","getPagination","pageNumber","compareField","valueSearch","dataIndex","newList","Object","keys","forEach","key","onSearch","clearKey","handleDelele","length","handleSort","option","newTodoApi","title","_onFilterTable","columns","className","render","date","format","record","layout"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from 'react'\r\nimport PowerTable from '~/components/PowerTable'\r\nimport FilterColumn from '~/components/Tables/FilterColumn'\r\nimport SortBox from '~/components/Elements/SortBox'\r\nimport SupplierForm from '~/components/Global/Option/SupplierForm'\r\nimport LayoutBase from '~/components/LayoutBase'\r\nimport FilterSupplierTable from '~/components/Global/Option/FilterTable/FilterSupplierTable'\r\nimport { useWrap } from '~/context/wrap'\r\nimport { supplierApi, userInformationApi } from '~/apiBase'\r\nimport { Tooltip } from 'antd'\r\nimport { AlertTriangle, X } from 'react-feather'\r\nimport Modal from 'antd/lib/modal/Modal'\r\nimport moment from 'moment'\r\n\r\nconst SupplierList = () => {\r\n\tconst [dataTable, setDataTable] = useState<ISupplier[]>([])\r\n\tconst [dataStaffManage, setDataStaffManage] = useState([])\r\n\tconst [activeColumnSearch, setActiveColumnSearch] = useState('')\r\n\tconst [dataDelete, setDataDelete] = useState({\r\n\t\tID: null,\r\n\t\tEnable: null\r\n\t})\r\n\tconst { showNoti, pageSize } = useWrap()\r\n\tconst [isModalVisible, setIsModalVisible] = useState(false)\r\n\tconst [isLoading, setIsLoading] = useState({\r\n\t\ttype: '',\r\n\t\tstatus: false\r\n\t})\r\n\tconst [totalPage, setTotalPage] = useState(null)\r\n\tconst [currentPage, setCurrentPage] = useState(1)\r\n\r\n\tlet pageIndex = 1\r\n\r\n\t// SORT\r\n\tconst dataOption = [\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 2,\r\n\t\t\t\tsortType: false\r\n\t\t\t},\r\n\t\t\tvalue: 3,\r\n\t\t\ttext: 'Tên giảm dần'\r\n\t\t},\r\n\t\t{\r\n\t\t\tdataSort: {\r\n\t\t\t\tsort: 2,\r\n\t\t\t\tsortType: true\r\n\t\t\t},\r\n\t\t\tvalue: 4,\r\n\t\t\ttext: 'Tên tăng dần '\r\n\t\t}\r\n\t]\r\n\r\n\t// PARAMS SEARCH\r\n\tlet listField = {\r\n\t\tSupplierName: '',\r\n\t\tPersonInChargeName: ''\r\n\t}\r\n\r\n\t// PARAMS API GETALL\r\n\tconst listTodoApi = {\r\n\t\tpageSize: pageSize,\r\n\t\tpageIndex: pageIndex,\r\n\t\tsort: null,\r\n\t\tsortType: null,\r\n\t\tfromDate: null,\r\n\t\ttoDate: null,\r\n\t\tSupplierName: null,\r\n\t\tPersonInChargeName: null\r\n\t}\r\n\tconst [todoApi, setTodoApi] = useState(listTodoApi)\r\n\r\n\t// GET NHÂN VIÊN QUẢN LÍ\r\n\tconst getDataStaffManage = () => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'GET_ALL',\r\n\t\t\tstatus: true\r\n\t\t})\r\n\t\t;(async () => {\r\n\t\t\ttry {\r\n\t\t\t\tlet res = await userInformationApi.getAllRole(5)\r\n\t\t\t\tres.status == 200 && setDataStaffManage(res.data.data)\r\n\t\t\t} catch (error) {\r\n\t\t\t\tshowNoti('danger', error.message)\r\n\t\t\t} finally {\r\n\t\t\t\tsetIsLoading({\r\n\t\t\t\t\ttype: 'GET_ALL',\r\n\t\t\t\t\tstatus: false\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})()\r\n\t}\r\n\r\n\t// GET DATA\r\n\tconst getDataTable = () => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'GET_ALL',\r\n\t\t\tstatus: true\r\n\t\t})\r\n\t\t;(async () => {\r\n\t\t\ttry {\r\n\t\t\t\tlet res = await supplierApi.getAll(todoApi)\r\n\t\t\t\tif (res.status == 204) {\r\n\t\t\t\t\t// showNoti(\"danger\", \"Không có dữ liệu\");\r\n\t\t\t\t\t// handleReset();\r\n\t\t\t\t\tsetDataTable([])\r\n\t\t\t\t}\r\n\t\t\t\tif (res.status == 200) {\r\n\t\t\t\t\tsetDataTable(res.data.data)\r\n\r\n\t\t\t\t\tsetTotalPage(res.data.totalRow)\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tshowNoti('danger', error.message)\r\n\t\t\t} finally {\r\n\t\t\t\tsetIsLoading({\r\n\t\t\t\t\ttype: 'GET_ALL',\r\n\t\t\t\t\tstatus: false\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})()\r\n\t}\r\n\r\n\t// ADD DATA\r\n\tconst _onSubmit = async (data: any) => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'ADD_DATA',\r\n\t\t\tstatus: true\r\n\t\t})\r\n\r\n\t\tlet res = null\r\n\r\n\t\tif (data.ID) {\r\n\t\t\tconsole.log(data)\r\n\t\t\ttry {\r\n\t\t\t\tres = await supplierApi.update(data)\r\n\t\t\t\tres?.status == 200 && showNoti('success', 'Cập nhật thành công'), getDataTable()\r\n\t\t\t} catch (error) {\r\n\t\t\t\tshowNoti('danger', error.message)\r\n\t\t\t} finally {\r\n\t\t\t\tsetIsLoading({\r\n\t\t\t\t\ttype: 'ADD_DATA',\r\n\t\t\t\t\tstatus: false\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ttry {\r\n\t\t\t\tconsole.log('data: ', data)\r\n\t\t\t\tres = await supplierApi.add(data)\r\n\t\t\t\tres?.status == 200 && afterPost('Thêm')\r\n\t\t\t\thandleReset()\r\n\t\t\t} catch (error) {\r\n\t\t\t\tshowNoti('danger', error.message)\r\n\t\t\t} finally {\r\n\t\t\t\tsetIsLoading({\r\n\t\t\t\t\ttype: 'ADD_DATA',\r\n\t\t\t\t\tstatus: false\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\tconst afterPost = (value) => {\r\n\t\tshowNoti('success', `${value} thành công`)\r\n\t\tsetTodoApi({\r\n\t\t\t...listTodoApi,\r\n\t\t\tpageIndex: 1\r\n\t\t})\r\n\t\tsetCurrentPage(1)\r\n\t}\r\n\r\n\t// PAGINATION\r\n\tconst getPagination = (pageNumber: number, pageSize: number) => {\r\n\t\tif (!pageSize) pageSize = 10\r\n\t\tpageIndex = pageNumber\r\n\t\tsetCurrentPage(pageNumber)\r\n\t\tsetTodoApi({\r\n\t\t\t...todoApi,\r\n\t\t\t//   ...listFieldSearch,\r\n\t\t\tpageIndex: pageIndex,\r\n\t\t\tpageSize: pageSize\r\n\t\t})\r\n\t}\r\n\r\n\t// ON SEARCH\r\n\tconst compareField = (valueSearch, dataIndex) => {\r\n\t\tlet newList = null\r\n\t\tObject.keys(listField).forEach(function (key) {\r\n\t\t\tconsole.log('key: ', key)\r\n\t\t\tif (key != dataIndex) {\r\n\t\t\t\tlistField[key] = ''\r\n\t\t\t} else {\r\n\t\t\t\tlistField[key] = valueSearch\r\n\t\t\t}\r\n\t\t})\r\n\t\tnewList = listField\r\n\t\treturn newList\r\n\t}\r\n\r\n\tconst onSearch = (valueSearch, dataIndex) => {\r\n\t\tlet clearKey = compareField(valueSearch, dataIndex)\r\n\r\n\t\tsetTodoApi({\r\n\t\t\t...todoApi,\r\n\t\t\tpageIndex: 1,\r\n\t\t\t...clearKey\r\n\t\t})\r\n\r\n\t\tsetCurrentPage(pageIndex)\r\n\t}\r\n\r\n\t// DELETE\r\n\tconst handleDelele = async () => {\r\n\t\tif (dataDelete) {\r\n\t\t\tsetIsModalVisible(false)\r\n\t\t\tlet res = null\r\n\t\t\ttry {\r\n\t\t\t\tres = await supplierApi.update(dataDelete)\r\n\t\t\t\tres.status === 200 && showNoti('success', 'Xóa thành công')\r\n\t\t\t\tif (dataTable.length === 1) {\r\n\t\t\t\t\tlistTodoApi.pageIndex === 1\r\n\t\t\t\t\t\t? setTodoApi({\r\n\t\t\t\t\t\t\t\t...listTodoApi,\r\n\t\t\t\t\t\t\t\tpageIndex: 1\r\n\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t: setTodoApi({\r\n\t\t\t\t\t\t\t\t...listTodoApi,\r\n\t\t\t\t\t\t\t\tpageIndex: listTodoApi.pageIndex - 1\r\n\t\t\t\t\t\t  })\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tgetDataTable()\r\n\t\t\t} catch (error) {\r\n\t\t\t\tshowNoti('danger', error.message)\r\n\t\t\t} finally {\r\n\t\t\t\tsetIsLoading({\r\n\t\t\t\t\ttype: 'DELETE_DATA',\r\n\t\t\t\t\tstatus: false\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// HANDLE RESET\r\n\tconst handleReset = () => {\r\n\t\tsetActiveColumnSearch('')\r\n\t\tsetTodoApi({\r\n\t\t\t...listTodoApi,\r\n\t\t\tpageIndex: 1\r\n\t\t})\r\n\t\tsetCurrentPage(1)\r\n\t}\r\n\r\n\t// HANDLE SORT\r\n\tconst handleSort = async (option) => {\r\n\t\tconsole.log('Show option: ', option)\r\n\r\n\t\tlet newTodoApi = {\r\n\t\t\t...listTodoApi,\r\n\t\t\tsort: option.title.sort,\r\n\t\t\tsortType: option.title.sortType\r\n\t\t}\r\n\t\tsetCurrentPage(1)\r\n\t\tsetTodoApi(newTodoApi)\r\n\t}\r\n\r\n\t// HANDLE FILTER\r\n\tconst _onFilterTable = (data) => {\r\n\t\tconsole.log('Show value: ', data)\r\n\r\n\t\tlet newTodoApi = {\r\n\t\t\t...listTodoApi,\r\n\t\t\tfromDate: data.fromDate,\r\n\t\t\ttoDate: data.toDate\r\n\t\t}\r\n\t\tsetCurrentPage(1)\r\n\t\tsetTodoApi(newTodoApi)\r\n\t}\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Nhà cung cấp (NCC)',\r\n\t\t\tdataIndex: 'SupplierName',\r\n\t\t\t...FilterColumn('SupplierName', onSearch, handleReset, 'text'),\r\n\t\t\tclassName: activeColumnSearch === 'ID' ? 'active-column-search' : '',\r\n\t\t\trender: (text) => {\r\n\t\t\t\treturn <p className=\"font-weight-black\">{text}</p>\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Địa chỉ',\r\n\t\t\tdataIndex: 'Address'\r\n\t\t\t// ...FilterColumn('SupplierName', onSearch, handleReset, \"text\")\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Mã số thuế',\r\n\t\t\tdataIndex: 'Taxcode'\r\n\t\t\t// ...FilterColumn('SupplierName', onSearch, handleReset, \"text\")\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Nhân viên quản lí',\r\n\t\t\tdataIndex: 'PersonInChargeName',\r\n\t\t\t...FilterColumn('PersonInChargeName', onSearch, handleReset, 'text'),\r\n\t\t\trender: (text) => {\r\n\t\t\t\treturn <p className=\"font-weight-primary\">{text}</p>\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Thay đổi bởi',\r\n\t\t\tdataIndex: 'ModifiedBy'\r\n\t\t\t// ...FilterColumn('ModifiedBy', onSearch, handleReset, \"text\")},\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Thay đổi lúc',\r\n\t\t\tdataIndex: 'ModifiedOn',\r\n\t\t\trender: (date) => moment(date).format('DD/MM/YYYY')\r\n\t\t\t// ...FilterDateColumn(\"modDate\"),\r\n\t\t},\r\n\t\t{\r\n\t\t\trender: (record) => (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<SupplierForm\r\n\t\t\t\t\t\tshowIcon={true}\r\n\t\t\t\t\t\trowData={record}\r\n\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t\t_onSubmit={(data: any) => _onSubmit(data)}\r\n\t\t\t\t\t\tdataStaffManage={dataStaffManage}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Tooltip title=\"Xóa\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"btn btn-icon delete\"\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tsetIsModalVisible(true)\r\n\t\t\t\t\t\t\t\tsetDataDelete({\r\n\t\t\t\t\t\t\t\t\tID: record.ID,\r\n\t\t\t\t\t\t\t\t\tEnable: false\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<X />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t</>\r\n\t\t\t)\r\n\t\t}\r\n\t]\r\n\r\n\tuseEffect(() => {\r\n\t\tgetDataTable()\r\n\t\tgetDataStaffManage()\r\n\t}, [todoApi])\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Modal\r\n\t\t\t\ttitle={<AlertTriangle color=\"red\" />}\r\n\t\t\t\tvisible={isModalVisible}\r\n\t\t\t\tonOk={() => handleDelele()}\r\n\t\t\t\tonCancel={() => setIsModalVisible(false)}\r\n\t\t\t>\r\n\t\t\t\t<span className=\"text-confirm\">Bạn có chắc chắn muốn xóa không ?</span>\r\n\t\t\t</Modal>\r\n\t\t\t<PowerTable\r\n\t\t\t\tloading={isLoading}\r\n\t\t\t\tcurrentPage={currentPage}\r\n\t\t\t\ttotalPage={totalPage && totalPage}\r\n\t\t\t\tgetPagination={getPagination}\r\n\t\t\t\taddClass=\"basic-header\"\r\n\t\t\t\tTitlePage=\"Nhà cung cấp\"\r\n\t\t\t\tTitleCard={\r\n\t\t\t\t\t<SupplierForm showAdd={true} isLoading={isLoading} _onSubmit={(data: any) => _onSubmit(data)} dataStaffManage={dataStaffManage} />\r\n\t\t\t\t}\r\n\t\t\t\tdataSource={dataTable}\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\tExtra={\r\n\t\t\t\t\t<div className=\"extra-table\">\r\n\t\t\t\t\t\t<FilterSupplierTable _onFilter={(value: any) => _onFilterTable(value)} _onHandleReset={handleReset} />\r\n\t\t\t\t\t\t<SortBox handleSort={(value) => handleSort(value)} dataOption={dataOption} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t</Fragment>\r\n\t)\r\n}\r\nSupplierList.layout = LayoutBase\r\nexport default SupplierList\r\n"]},"metadata":{},"sourceType":"module"}