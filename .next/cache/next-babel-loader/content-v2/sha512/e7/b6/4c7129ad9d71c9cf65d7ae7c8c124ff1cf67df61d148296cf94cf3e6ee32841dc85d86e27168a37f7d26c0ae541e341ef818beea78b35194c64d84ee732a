{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/CodingMentor/CodingMentor-FE/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/CodingMentor/CodingMentor-FE/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\CodingMentor\\\\CodingMentor-FE\\\\src\\\\components\\\\CourseCalendar\\\\book-event.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { Button, Input, Popover, Spin } from 'antd';\nimport moment from 'moment';\nimport React, { useState, useEffect } from 'react';\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\nimport { useWrap } from '~/context/wrap';\nimport { CalendarApi } from '~/apiBase/Calendar/calendar';\nvar TextArea = Input.TextArea;\nmoment.locale('vi');\n\nvar BookEvent = function BookEvent(props) {\n  _s();\n\n  var title = props.title,\n      ID = props.ID,\n      getData = props.getData,\n      Status = props.Status,\n      studentChangeData = props.studentChangeData;\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti,\n      userInformation = _useWrap.userInformation;\n\n  var _useState = useState(false),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = useState(''),\n      errorText = _useState2[0],\n      setErrorText = _useState2[1];\n\n  var _useState3 = useState(''),\n      reason = _useState3[0],\n      setReason = _useState3[1];\n\n  var _useState4 = useState(''),\n      request = _useState4[0],\n      setRequest = _useState4[1];\n\n  useEffect(function () {\n    setErrorText('');\n  }, []);\n  useEffect(function () {\n    setErrorText('');\n  }, [reason]);\n\n  var _bookEvent = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(Sta) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!((Sta == 3 || Sta == 2) && !reason)) {\n                _context.next = 4;\n                break;\n              }\n\n              setErrorText(\"Vui l\\xF2ng nh\\u1EADp \".concat(Sta == 3 ? 'tiêu đề' : 'lý do'));\n              _context.next = 18;\n              break;\n\n            case 4:\n              setLoading(true);\n              _context.prev = 5;\n              _context.next = 8;\n              return Sta == 3 ? CalendarApi.update({\n                ID: ID,\n                Status: Sta,\n                Title: reason,\n                StudentRequest: request\n              }) : CalendarApi.update({\n                ID: ID,\n                Status: Sta,\n                Reason: reason\n              });\n\n            case 8:\n              res = _context.sent;\n\n              if (res.status == 200 || res.status == 204) {\n                showNoti('success', 'Thành công');\n                getData();\n                studentChangeData({\n                  ID: ID\n                });\n              }\n\n              _context.next = 15;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](5);\n              showNoti('danger', _context.t0 === null || _context.t0 === void 0 ? void 0 : _context.t0.message);\n\n            case 15:\n              _context.prev = 15;\n              setLoading(false);\n              return _context.finish(15);\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[5, 12, 15, 18]]);\n    }));\n\n    return function _bookEvent(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var content = function content() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-100 wrap-calendar-x\",\n      style: {\n        minWidth: 350\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-2\",\n        children: [\"Nh\\u1EADp ti\\xEAu \\u0111\\u1EC1 \", /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: 'red'\n          },\n          children: \" *\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 19\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 5\n      }, _this), /*#__PURE__*/_jsxDEV(TextArea, {\n        onChange: function onChange(e) {\n          return setReason(e.target.value);\n        },\n        className: \"ant-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 5\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-2 mt-3\",\n        children: \"Nh\\u1EADp y\\xEAu c\\u1EA7u\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 5\n      }, _this), /*#__PURE__*/_jsxDEV(TextArea, {\n        onChange: function onChange(e) {\n          return setRequest(e.target.value);\n        },\n        className: \"ant-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 5\n      }, _this), !!errorText && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2\",\n        style: {\n          color: 'red'\n        },\n        children: errorText || ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 6\n      }, _this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: function onClick() {\n          return _bookEvent(3);\n        },\n        size: \"middle\",\n        className: \"btn-primary w-100 mt-2\",\n        children: [\"L\\u01B0u l\\u1EA1i \", loading && /*#__PURE__*/_jsxDEV(Spin, {\n          className: \"ml-2\",\n          size: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 26\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 5\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 4\n    }, _this);\n  };\n\n  var contentCancel = function contentCancel() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-100 wrap-calendar-x\",\n      style: {\n        minWidth: 350\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-2\",\n        children: [\"Nh\\u1EADp l\\xFD do h\\u1EE7y \", /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: 'red'\n          },\n          children: \" *\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 5\n      }, _this), /*#__PURE__*/_jsxDEV(TextArea, {\n        onChange: function onChange(e) {\n          return setReason(e.target.value);\n        },\n        className: \"ant-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 5\n      }, _this), !!errorText && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2\",\n        style: {\n          color: 'red'\n        },\n        children: errorText || ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 6\n      }, _this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: function onClick() {\n          return _bookEvent(2);\n        },\n        size: \"middle\",\n        className: \"btn-primary w-100 mt-2\",\n        children: [\"L\\u01B0u l\\u1EA1i \", loading && /*#__PURE__*/_jsxDEV(Spin, {\n          className: \"ml-2\",\n          size: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 26\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 5\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 4\n    }, _this);\n  };\n\n  var isTeach = function isTeach() {\n    return !!userInformation && (userInformation.RoleID == 1 || userInformation.RoleID == 2) ? true : false;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"wrap-calendar-x\",\n    style: {\n      zIndex: 999\n    },\n    children: !isTeach() && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [(Status == 1 || Status == 2) && /*#__PURE__*/_jsxDEV(Popover, {\n        content: content,\n        title: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontWeight: 'bold'\n          },\n          children: \"\\u0110\\u1EB7t l\\u1ECBch: \".concat(title)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 15\n        }, _this),\n        trigger: \"hover\",\n        placement: \"rightTop\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          size: \"middle\",\n          className: \"btn-blue w-100 mt-2 shadow\",\n          children: \"\\u0110\\u1EB7t l\\u1ECBch\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 8\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 7\n      }, _this), Status == 3 && /*#__PURE__*/_jsxDEV(Popover, {\n        content: contentCancel,\n        title: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontWeight: 'bold'\n          },\n          children: \"H\\u1EE7y l\\u1ECBch: \".concat(title)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 15\n        }, _this),\n        trigger: \"hover\",\n        placement: \"rightTop\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          size: \"middle\",\n          className: \"btn-cancel w-100 mt-2 shadow\",\n          children: [\"Hu\\u1EF7 b\\u1ECF \", loading && /*#__PURE__*/_jsxDEV(Spin, {\n            className: \"ml-2\",\n            size: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 28\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 8\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 7\n      }, _this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 3\n  }, _this);\n};\n\n_s(BookEvent, \"58F7jccEhr5fQRwrVwo3bSXZ/ZI=\", false, function () {\n  return [useWrap];\n});\n\n_c = BookEvent;\nexport default BookEvent;\n\nvar _c;\n\n$RefreshReg$(_c, \"BookEvent\");","map":{"version":3,"sources":["D:/MonaMedia/Project/CodingMentor/CodingMentor-FE/src/components/CourseCalendar/book-event.tsx"],"names":["Button","Input","Popover","Spin","moment","React","useState","useEffect","useWrap","CalendarApi","TextArea","locale","BookEvent","props","title","ID","getData","Status","studentChangeData","showNoti","userInformation","loading","setLoading","errorText","setErrorText","reason","setReason","request","setRequest","_bookEvent","Sta","update","Title","StudentRequest","Reason","res","status","message","content","minWidth","color","e","target","value","contentCancel","isTeach","RoleID","zIndex","fontWeight"],"mappings":"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","sourcesContent":["import { Button, Input, Popover, Spin } from 'antd'\r\nimport moment from 'moment'\r\nimport React, { useState, useEffect } from 'react'\r\nimport 'react-big-calendar/lib/css/react-big-calendar.css'\r\nimport { useWrap } from '~/context/wrap'\r\nimport _ from '~/appConfig'\r\nimport { CalendarApi } from '~/apiBase/Calendar/calendar'\r\n\r\nconst { TextArea } = Input\r\nmoment.locale('vi')\r\n\r\nconst BookEvent = (props: any) => {\r\n\tconst { title, ID, getData, Status, studentChangeData } = props\r\n\tconst { showNoti, userInformation } = useWrap()\r\n\r\n\tconst [loading, setLoading] = useState<boolean>(false)\r\n\tconst [errorText, setErrorText] = useState<any>('')\r\n\tconst [reason, setReason] = useState<any>('')\r\n\tconst [request, setRequest] = useState<any>('')\r\n\r\n\tuseEffect(() => {\r\n\t\tsetErrorText('')\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetErrorText('')\r\n\t}, [reason])\r\n\r\n\tconst _bookEvent = async (Sta: number) => {\r\n\t\tif ((Sta == 3 || Sta == 2) && !reason) {\r\n\t\t\tsetErrorText(`Vui lòng nhập ${Sta == 3 ? 'tiêu đề' : 'lý do'}`)\r\n\t\t} else {\r\n\t\t\tsetLoading(true)\r\n\t\t\ttry {\r\n\t\t\t\tconst res: any = await (Sta == 3\r\n\t\t\t\t\t? CalendarApi.update({ ID: ID, Status: Sta, Title: reason, StudentRequest: request })\r\n\t\t\t\t\t: CalendarApi.update({ ID: ID, Status: Sta, Reason: reason }))\r\n\t\t\t\tif (res.status == 200 || res.status == 204) {\r\n\t\t\t\t\tshowNoti('success', 'Thành công')\r\n\t\t\t\t\tgetData()\r\n\t\t\t\t\tstudentChangeData({ ID: ID })\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tshowNoti('danger', error?.message)\r\n\t\t\t} finally {\r\n\t\t\t\tsetLoading(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst content = () => {\r\n\t\treturn (\r\n\t\t\t<div className=\"w-100 wrap-calendar-x\" style={{ minWidth: 350 }}>\r\n\t\t\t\t<div className=\"mb-2\">\r\n\t\t\t\t\tNhập tiêu đề <span style={{ color: 'red' }}> *</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<TextArea onChange={(e: any) => setReason(e.target.value)} className=\"ant-input\" />\r\n\r\n\t\t\t\t<div className=\"mb-2 mt-3\">Nhập yêu cầu</div>\r\n\t\t\t\t<TextArea onChange={(e: any) => setRequest(e.target.value)} className=\"ant-input\" />\r\n\r\n\t\t\t\t{!!errorText && (\r\n\t\t\t\t\t<div className=\"mt-2\" style={{ color: 'red' }}>\r\n\t\t\t\t\t\t{errorText || ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t<Button onClick={() => _bookEvent(3)} size=\"middle\" className=\"btn-primary w-100 mt-2\">\r\n\t\t\t\t\tLưu lại {loading && <Spin className=\"ml-2\" size=\"small\" />}\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst contentCancel = () => {\r\n\t\treturn (\r\n\t\t\t<div className=\"w-100 wrap-calendar-x\" style={{ minWidth: 350 }}>\r\n\t\t\t\t<div className=\"mb-2\">\r\n\t\t\t\t\tNhập lý do hủy <span style={{ color: 'red' }}> *</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<TextArea onChange={(e: any) => setReason(e.target.value)} className=\"ant-input\" />\r\n\t\t\t\t{!!errorText && (\r\n\t\t\t\t\t<div className=\"mt-2\" style={{ color: 'red' }}>\r\n\t\t\t\t\t\t{errorText || ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t<Button onClick={() => _bookEvent(2)} size=\"middle\" className=\"btn-primary w-100 mt-2\">\r\n\t\t\t\t\tLưu lại {loading && <Spin className=\"ml-2\" size=\"small\" />}\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\tconst isTeach = () => {\r\n\t\treturn !!userInformation && (userInformation.RoleID == 1 || userInformation.RoleID == 2) ? true : false\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"wrap-calendar-x\" style={{ zIndex: 999 }}>\r\n\t\t\t{!isTeach() && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{(Status == 1 || Status == 2) && (\r\n\t\t\t\t\t\t<Popover\r\n\t\t\t\t\t\t\tcontent={content}\r\n\t\t\t\t\t\t\ttitle={<div style={{ fontWeight: 'bold' }}>{`Đặt lịch: ${title}`}</div>}\r\n\t\t\t\t\t\t\ttrigger=\"hover\"\r\n\t\t\t\t\t\t\tplacement=\"rightTop\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Button size=\"middle\" className=\"btn-blue w-100 mt-2 shadow\">\r\n\t\t\t\t\t\t\t\tĐặt lịch\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{Status == 3 && (\r\n\t\t\t\t\t\t<Popover\r\n\t\t\t\t\t\t\tcontent={contentCancel}\r\n\t\t\t\t\t\t\ttitle={<div style={{ fontWeight: 'bold' }}>{`Hủy lịch: ${title}`}</div>}\r\n\t\t\t\t\t\t\ttrigger=\"hover\"\r\n\t\t\t\t\t\t\tplacement=\"rightTop\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Button size=\"middle\" className=\"btn-cancel w-100 mt-2 shadow\">\r\n\t\t\t\t\t\t\t\tHuỷ bỏ {loading && <Spin className=\"ml-2\" size=\"small\" />}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default BookEvent\r\n"]},"metadata":{},"sourceType":"module"}