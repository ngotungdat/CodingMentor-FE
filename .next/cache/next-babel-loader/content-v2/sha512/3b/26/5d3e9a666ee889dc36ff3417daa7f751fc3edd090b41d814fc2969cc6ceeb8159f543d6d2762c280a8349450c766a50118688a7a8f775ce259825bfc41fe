{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\pages\\\\video-course-list\\\\index.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { faPenToSquare } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Card, Input, List, Modal, Progress, Rate, Tooltip, Popover, Button, Spin } from 'antd';\nimport 'antd/dist/antd.css';\nimport Link from 'next/link';\nimport React, { useEffect, useState } from 'react';\nimport { VideoCourseListApi } from '~/apiBase';\nimport CourseVideoTable from '~/components/CourseVideoTable';\nimport LayoutBase from '~/components/LayoutBase';\nimport { useWrap } from '~/context/wrap';\nimport NumberFormat from 'react-number-format';\nconst {\n  TextArea,\n  Search\n} = Input;\n\nconst ItemVideo = ({\n  item,\n  onRate\n}) => {\n  const {\n    0: rerender,\n    1: setRender\n  } = useState('');\n  const {\n    userInformation\n  } = useWrap();\n  useEffect(() => {\n    setRender(item);\n  }, [item]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"video-course-list__item\",\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      href: {\n        pathname: '/video-learning',\n        query: {\n          ID: userInformation.RoleID == 3 ? item.ID : item.VideoCourseID,\n          course: item.VideoCourseID,\n          complete: item.Complete + '/' + item.TotalLesson,\n          name: item.VideoCourseName\n        }\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"video-course-list__item_warp-image\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          href: {\n            pathname: '/video-learning',\n            query: {\n              ID: userInformation.RoleID == 3 ? item.ID : item.VideoCourseID,\n              course: item.VideoCourseID,\n              complete: item.Complete + '/' + item.TotalLesson,\n              name: item.VideoCourseName\n            }\n          },\n          children: item.ImageThumbnails === '' || item.ImageThumbnails === null || item.ImageThumbnails === undefined ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/images/logo-thumnail.jpg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 8\n          }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n            src: item.ImageThumbnails\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      href: {\n        pathname: '/video-learning',\n        query: {\n          ID: userInformation.RoleID == 3 ? item.ID : item.VideoCourseID,\n          course: item.VideoCourseID,\n          complete: item.Complete + '/' + item.TotalLesson,\n          name: item.VideoCourseName\n        }\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-3 video-course-list__item__content\",\n        children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n          title: item.VideoCourseName,\n          style: {\n            width: '100%'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"title in-1-line\",\n            style: {\n              width: '100%'\n            },\n            children: item.VideoCourseName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Progress, {\n            className: \"text-process\",\n            percent: item.Complete / item.TotalLesson * 100 // 10 - CHANGE TO TOTALESSION\n            ,\n            status: \"active\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {},\n            children: [\"Th\\u1EDDi gian c\\xF2n l\\u1EA1i: \", item === null || item === void 0 ? void 0 : item.DaysLeft, \" ng\\xE0y\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: '#8E8E93'\n            },\n            children: [\"\\u0110\\xE3 \\u0111\\u1EB7t l\\u1ECBch: \", (item === null || item === void 0 ? void 0 : item.LimitBooking) - (item === null || item === void 0 ? void 0 : item.LeftLimitBooking), \" \\u2022 C\\xF2n l\\u1EA1i: \", item === null || item === void 0 ? void 0 : item.LeftLimitBooking]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pr-3 pl-3 pt-3 row rate-container\",\n            children: [/*#__PURE__*/_jsxDEV(Rate, {\n              className: \"rate-start\",\n              disabled: true,\n              value: item.RatingNumber\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              onClick: e => {\n                e.stopPropagation();\n                onRate(item);\n              },\n              className: \"none-selection btn-rate \",\n              children: \"\\u0110\\xE1nh gi\\xE1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 24,\n    columnNumber: 3\n  }, this);\n};\n\nlet pageIndex = 1;\n\nconst VideoCourseList = () => {\n  const {\n    userInformation,\n    pageSize,\n    showNoti,\n    getTitlePage\n  } = useWrap();\n  const {\n    0: data,\n    1: setData\n  } = useState([]);\n  const {\n    0: showModal,\n    1: setShowModal\n  } = useState(false);\n  const {\n    0: rerender,\n    1: setRender\n  } = useState('');\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  const {\n    0: totalPage,\n    1: setTotalPage\n  } = useState(null);\n  const listTodoApi = {\n    pageSize: pageSize,\n    pageIndex: pageIndex,\n    search: ''\n  };\n  const {\n    0: todoApi,\n    1: setTodoApi\n  } = useState(listTodoApi);\n  const [state, dispatch] = React.useReducer((prevState, action) => {\n    switch (action.type) {\n      case 'ID':\n        return _objectSpread(_objectSpread({}, prevState), {}, {\n          ID: action.ID\n        });\n\n      case 'RatingNumber':\n        return _objectSpread(_objectSpread({}, prevState), {}, {\n          RatingNumber: action.RatingNumber\n        });\n\n      case 'RatingComment':\n        return _objectSpread(_objectSpread({}, prevState), {}, {\n          RatingComment: action.RatingComment\n        });\n    }\n  }, {\n    ID: '',\n    RatingNumber: 0,\n    RatingComment: ''\n  });\n  useEffect(() => {\n    if (userInformation) {\n      getAllArea();\n      getTitlePage();\n      (userInformation === null || userInformation === void 0 ? void 0 : userInformation.RoleID) == 1 ? getTitlePage('Khóa học video đã bán') : getTitlePage('Khóa học video đã sở hữu');\n    }\n  }, [userInformation]); //GET DATA\n\n  const getAllArea = async () => {\n    setLoading(true);\n\n    try {\n      const res = (userInformation === null || userInformation === void 0 ? void 0 : userInformation.RoleID) == 1 ? await VideoCourseListApi.getAll(todoApi) : await VideoCourseListApi.getByUser(todoApi);\n      res.status == 200 && (setData(res.data.data), setTotalPage(res.data.totalRow));\n      res.status == 204 && setData([]);\n      setRender(res + '');\n    } catch (err) {\n      showNoti('danger', err);\n    } finally {\n      setLoading(false);\n    }\n  }; //GET DATA\n\n\n  const updateRate = async () => {\n    let temp = {\n      ID: state.ID,\n      RatingNumber: state.RatingNumber,\n      RatingComment: state.RatingComment\n    };\n\n    try {\n      await VideoCourseListApi.update(temp);\n    } catch (err) {\n      showNoti('danger', err.message);\n    }\n\n    getAllArea();\n  };\n\n  const {\n    0: num,\n    1: setNum\n  } = useState('');\n\n  const _updateData = async ID => {\n    setLoading(true);\n\n    try {\n      const res = await VideoCourseListApi.updateLimitBooking({\n        ID: ID,\n        LimitBooking: num\n      });\n\n      if (res.status == 200) {\n        var _res$data;\n\n        setNum('');\n        getAllArea();\n        showNoti('success', (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.message);\n      }\n    } catch (error) {\n      showNoti('danger', error === null || error === void 0 ? void 0 : error.message);\n    }\n  };\n\n  const columnsVideoCourse = [{\n    title: 'Tên khóa học',\n    dataIndex: 'VideoCourseName',\n    key: 'VideoCourseName'\n  }, {\n    title: 'Người mua',\n    dataIndex: 'StudentName',\n    key: 'StudentName'\n  }, {\n    title: 'Ngày kích hoạt',\n    dataIndex: 'CreatedOn',\n    key: 'CreatedOn',\n    render: (Action, data, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: data.CreatedOn\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 37\n    }, this)\n  }, {\n    title: 'Điện thoại',\n    dataIndex: 'Phone',\n    key: 'Phone'\n  }, {\n    title: 'Giới hạn đặt lịch',\n    dataIndex: 'LeftLimitBooking',\n    key: 'LeftLimitBooking',\n    align: 'center'\n  }, {\n    title: '',\n    dataIndex: '',\n    key: 'hoho',\n    align: 'center',\n    render: (Action, data, index) => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Popover, {\n          content: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"wrap-calendar-x\",\n            children: [/*#__PURE__*/_jsxDEV(NumberFormat, {\n              value: num,\n              placeholder: \"S\\u1ED1 l\\u1EA7n c\\xF3 th\\u1EC3 \\u0111\\u1EB7t\",\n              className: \"ant-input style-input w-100\",\n              onChange: e => setNum(e.target.value),\n              thousandSeparator: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 10\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => _updateData(data === null || data === void 0 ? void 0 : data.ID),\n              className: \"btn btn-primary w-100 mt-3\",\n              children: [\"C\\u1EADp nh\\u1EADt \", loading && /*#__PURE__*/_jsxDEV(Spin, {\n                className: \"ml-2\",\n                size: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 32\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 10\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 9\n          }, this),\n          title: \"C\\u1EADp nh\\u1EADt s\\u1ED1 l\\u1EA7n \\u0111\\u1EB7t l\\u1ECBch\",\n          trigger: \"hover\",\n          placement: \"left\",\n          children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            className: \"pen-edit\",\n            icon: faPenToSquare,\n            size: \"lg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 6\n      }, this);\n    }\n  }];\n  useEffect(() => {\n    todoApi !== listTodoApi && getAllArea();\n  }, [todoApi]); // HANDLE SEARCH\n\n  const handleSearch = e => {\n    let newTodoApi = _objectSpread(_objectSpread({}, listTodoApi), {}, {\n      pageIndex: 1,\n      search: e\n    });\n\n    pageIndex = 1, setTodoApi(newTodoApi);\n  }; // HANDLE CHANGE PAGE\n\n\n  const getPagination = pageNumber => {\n    pageIndex = pageNumber;\n    setTodoApi(_objectSpread(_objectSpread({}, todoApi), {}, {\n      pageIndex: pageIndex\n    }));\n  }; // CARD EXTRA\n\n\n  const Extra = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row m-0 vc-store_extra-table\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row m-0\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row m-0 st-fb-100w \",\n          children: /*#__PURE__*/_jsxDEV(Search, {\n            className: \"fb-btn-search style-input vc-teach-modal_search\",\n            size: \"large\",\n            placeholder: \"T\\xECm ki\\u1EBFm\",\n            onSearch: e => handleSearch(e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 4\n    }, this);\n  }; // RENDER\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"\",\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      title: Extra(),\n      className: \"video-course-list\",\n      style: {\n        width: '100%'\n      },\n      children: [userInformation !== null && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: (userInformation === null || userInformation === void 0 ? void 0 : userInformation.RoleID) == 1 ? /*#__PURE__*/_jsxDEV(CourseVideoTable, {\n          totalPage: totalPage && totalPage,\n          getPagination: pageNumber => getPagination(pageNumber),\n          currentPage: pageIndex,\n          columns: columnsVideoCourse,\n          dataSource: data,\n          loading: {\n            type: 'GET_ALL',\n            status: loading\n          },\n          TitleCard: null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 8\n        }, this) : /*#__PURE__*/_jsxDEV(List, {\n          pagination: {\n            onChange: getPagination,\n            total: totalPage,\n            size: 'small',\n            current: pageIndex\n          },\n          loading: loading,\n          itemLayout: \"horizontal\",\n          dataSource: data,\n          grid: {\n            gutter: 16,\n            xs: 1,\n            sm: 2,\n            md: 3,\n            lg: 4,\n            xl: 4,\n            xxl: 5\n          },\n          renderItem: item => /*#__PURE__*/_jsxDEV(ItemVideo, {\n            onRate: p => {\n              dispatch({\n                type: 'ID',\n                ID: p.ID\n              });\n              dispatch({\n                type: 'RatingNumber',\n                RatingNumber: p.RatingNumber\n              });\n              dispatch({\n                type: 'RatingComment',\n                RatingComment: p.RatingComment\n              });\n              setShowModal(true);\n            },\n            item: item\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 10\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 8\n        }, this)\n      }, void 0, false), /*#__PURE__*/_jsxDEV(Modal, {\n        title: \"\\u0110\\xE1nh gi\\xE1\",\n        visible: showModal,\n        onOk: () => {\n          setShowModal(false);\n          updateRate();\n        },\n        okText: \"\\u0110\\xE1nh gi\\xE1\",\n        cancelText: \"H\\u1EE7y\",\n        confirmLoading: false,\n        onCancel: () => setShowModal(false),\n        children: [/*#__PURE__*/_jsxDEV(Rate, {\n          value: parseInt(state.RatingNumber),\n          onChange: e => dispatch({\n            type: 'RatingNumber',\n            RatingNumber: e\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(TextArea, {\n          value: state.RatingComment,\n          onChange: p => dispatch({\n            type: 'RatingComment',\n            RatingComment: p.target.value\n          }),\n          rows: 4,\n          className: \"mt-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 308,\n    columnNumber: 3\n  }, this);\n};\n\nVideoCourseList.layout = LayoutBase;\nexport default VideoCourseList;","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/pages/video-course-list/index.tsx"],"names":["faPenToSquare","FontAwesomeIcon","Card","Input","List","Modal","Progress","Rate","Tooltip","Popover","Button","Spin","Link","React","useEffect","useState","VideoCourseListApi","CourseVideoTable","LayoutBase","useWrap","NumberFormat","TextArea","Search","ItemVideo","item","onRate","rerender","setRender","userInformation","pathname","query","ID","RoleID","VideoCourseID","course","complete","Complete","TotalLesson","name","VideoCourseName","ImageThumbnails","undefined","width","DaysLeft","color","LimitBooking","LeftLimitBooking","RatingNumber","e","stopPropagation","pageIndex","VideoCourseList","pageSize","showNoti","getTitlePage","data","setData","showModal","setShowModal","loading","setLoading","totalPage","setTotalPage","listTodoApi","search","todoApi","setTodoApi","state","dispatch","useReducer","prevState","action","type","RatingComment","getAllArea","res","getAll","getByUser","status","totalRow","err","updateRate","temp","update","message","num","setNum","_updateData","updateLimitBooking","error","columnsVideoCourse","title","dataIndex","key","render","Action","index","CreatedOn","align","target","value","handleSearch","newTodoApi","getPagination","pageNumber","Extra","onChange","total","size","current","gutter","xs","sm","md","lg","xl","xxl","p","parseInt","layout"],"mappings":"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","sourcesContent":["import { faPenToSquare } from '@fortawesome/free-solid-svg-icons'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { Card, Input, List, Modal, Progress, Rate, Tooltip, Popover, Button, Spin } from 'antd'\r\nimport 'antd/dist/antd.css'\r\nimport Link from 'next/link'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { VideoCourseListApi } from '~/apiBase'\r\nimport CourseVideoTable from '~/components/CourseVideoTable'\r\nimport LayoutBase from '~/components/LayoutBase'\r\nimport { useWrap } from '~/context/wrap'\r\nimport NumberFormat from 'react-number-format'\r\n\r\nconst { TextArea, Search } = Input\r\n\r\nconst ItemVideo = ({ item, onRate }) => {\r\n\tconst [rerender, setRender] = useState('')\r\n\tconst { userInformation } = useWrap()\r\n\r\n\tuseEffect(() => {\r\n\t\tsetRender(item)\r\n\t}, [item])\r\n\r\n\treturn (\r\n\t\t<div className=\"video-course-list__item\">\r\n\t\t\t<Link\r\n\t\t\t\thref={{\r\n\t\t\t\t\tpathname: '/video-learning',\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\tID: userInformation.RoleID == 3 ? item.ID : item.VideoCourseID,\r\n\t\t\t\t\t\tcourse: item.VideoCourseID,\r\n\t\t\t\t\t\tcomplete: item.Complete + '/' + item.TotalLesson,\r\n\t\t\t\t\t\tname: item.VideoCourseName\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<div className=\"video-course-list__item_warp-image\">\r\n\t\t\t\t\t<Link\r\n\t\t\t\t\t\thref={{\r\n\t\t\t\t\t\t\tpathname: '/video-learning',\r\n\t\t\t\t\t\t\tquery: {\r\n\t\t\t\t\t\t\t\tID: userInformation.RoleID == 3 ? item.ID : item.VideoCourseID,\r\n\t\t\t\t\t\t\t\tcourse: item.VideoCourseID,\r\n\t\t\t\t\t\t\t\tcomplete: item.Complete + '/' + item.TotalLesson,\r\n\t\t\t\t\t\t\t\tname: item.VideoCourseName\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{item.ImageThumbnails === '' || item.ImageThumbnails === null || item.ImageThumbnails === undefined ? (\r\n\t\t\t\t\t\t\t<img src=\"/images/logo-thumnail.jpg\" />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<img src={item.ImageThumbnails} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</div>\r\n\t\t\t</Link>\r\n\r\n\t\t\t<Link\r\n\t\t\t\thref={{\r\n\t\t\t\t\tpathname: '/video-learning',\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\tID: userInformation.RoleID == 3 ? item.ID : item.VideoCourseID,\r\n\t\t\t\t\t\tcourse: item.VideoCourseID,\r\n\t\t\t\t\t\tcomplete: item.Complete + '/' + item.TotalLesson,\r\n\t\t\t\t\t\tname: item.VideoCourseName\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<div className=\"p-3 video-course-list__item__content\">\r\n\t\t\t\t\t<Tooltip title={item.VideoCourseName} style={{ width: '100%' }}>\r\n\t\t\t\t\t\t<span className=\"title in-1-line\" style={{ width: '100%' }}>\r\n\t\t\t\t\t\t\t{item.VideoCourseName}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Progress\r\n\t\t\t\t\t\t\tclassName=\"text-process\"\r\n\t\t\t\t\t\t\tpercent={(item.Complete / item.TotalLesson) * 100} // 10 - CHANGE TO TOTALESSION\r\n\t\t\t\t\t\t\tstatus=\"active\"\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<div style={{}}>Thời gian còn lại: {item?.DaysLeft} ngày</div>\r\n\r\n\t\t\t\t\t\t<div style={{ color: '#8E8E93' }}>\r\n\t\t\t\t\t\t\tĐã đặt lịch: {item?.LimitBooking - item?.LeftLimitBooking} • Còn lại: {item?.LeftLimitBooking}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* <div style={{ color: '#8E8E93' }}>\r\n\t\t\t\t\t\t\tĐã đặt lịch: {item?.LimitBooking - item?.LeftLimitBooking}/{item?.LimitBooking}\r\n\t\t\t\t\t\t</div> */}\r\n\r\n\t\t\t\t\t\t<div className=\"pr-3 pl-3 pt-3 row rate-container\">\r\n\t\t\t\t\t\t\t<Rate className=\"rate-start\" disabled value={item.RatingNumber} />\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\te.stopPropagation()\r\n\t\t\t\t\t\t\t\t\tonRate(item)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclassName=\"none-selection btn-rate \"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tĐánh giá\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</>\r\n\t\t\t\t</div>\r\n\t\t\t</Link>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nlet pageIndex = 1\r\n\r\nconst VideoCourseList = () => {\r\n\tconst { userInformation, pageSize, showNoti, getTitlePage } = useWrap()\r\n\r\n\tconst [data, setData] = useState([])\r\n\tconst [showModal, setShowModal] = useState(false)\r\n\tconst [rerender, setRender] = useState('')\r\n\tconst [loading, setLoading] = useState(true)\r\n\tconst [totalPage, setTotalPage] = useState(null)\r\n\r\n\tconst listTodoApi = {\r\n\t\tpageSize: pageSize,\r\n\t\tpageIndex: pageIndex,\r\n\t\tsearch: ''\r\n\t}\r\n\tconst [todoApi, setTodoApi] = useState(listTodoApi)\r\n\r\n\tconst [state, dispatch] = React.useReducer(\r\n\t\t(prevState, action) => {\r\n\t\t\tswitch (action.type) {\r\n\t\t\t\tcase 'ID':\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...prevState,\r\n\t\t\t\t\t\tID: action.ID\r\n\t\t\t\t\t}\r\n\t\t\t\tcase 'RatingNumber':\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...prevState,\r\n\t\t\t\t\t\tRatingNumber: action.RatingNumber\r\n\t\t\t\t\t}\r\n\t\t\t\tcase 'RatingComment':\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...prevState,\r\n\t\t\t\t\t\tRatingComment: action.RatingComment\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\tID: '',\r\n\t\t\tRatingNumber: 0,\r\n\t\t\tRatingComment: ''\r\n\t\t}\r\n\t)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (userInformation) {\r\n\t\t\tgetAllArea()\r\n\t\t\tgetTitlePage()\r\n\t\t\tuserInformation?.RoleID == 1 ? getTitlePage('Khóa học video đã bán') : getTitlePage('Khóa học video đã sở hữu')\r\n\t\t}\r\n\t}, [userInformation])\r\n\r\n\t//GET DATA\r\n\tconst getAllArea = async () => {\r\n\t\tsetLoading(true)\r\n\t\ttry {\r\n\t\t\tconst res = userInformation?.RoleID == 1 ? await VideoCourseListApi.getAll(todoApi) : await VideoCourseListApi.getByUser(todoApi)\r\n\t\t\tres.status == 200 && (setData(res.data.data), setTotalPage(res.data.totalRow))\r\n\t\t\tres.status == 204 && setData([])\r\n\t\t\tsetRender(res + '')\r\n\t\t} catch (err) {\r\n\t\t\tshowNoti('danger', err)\r\n\t\t} finally {\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\t//GET DATA\r\n\tconst updateRate = async () => {\r\n\t\tlet temp = {\r\n\t\t\tID: state.ID,\r\n\t\t\tRatingNumber: state.RatingNumber,\r\n\t\t\tRatingComment: state.RatingComment\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tawait VideoCourseListApi.update(temp)\r\n\t\t} catch (err) {\r\n\t\t\tshowNoti('danger', err.message)\r\n\t\t}\r\n\t\tgetAllArea()\r\n\t}\r\n\r\n\tconst [num, setNum] = useState('')\r\n\r\n\tconst _updateData = async (ID: number) => {\r\n\t\tsetLoading(true)\r\n\t\ttry {\r\n\t\t\tconst res = await VideoCourseListApi.updateLimitBooking({ ID: ID, LimitBooking: num })\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tsetNum('')\r\n\t\t\t\tgetAllArea()\r\n\t\t\t\tshowNoti('success', res.data?.message)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error?.message)\r\n\t\t}\r\n\t}\r\n\r\n\tconst columnsVideoCourse = [\r\n\t\t{\r\n\t\t\ttitle: 'Tên khóa học',\r\n\t\t\tdataIndex: 'VideoCourseName',\r\n\t\t\tkey: 'VideoCourseName'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Người mua',\r\n\t\t\tdataIndex: 'StudentName',\r\n\t\t\tkey: 'StudentName'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Ngày kích hoạt',\r\n\t\t\tdataIndex: 'CreatedOn',\r\n\t\t\tkey: 'CreatedOn',\r\n\t\t\trender: (Action, data, index) => <div>{data.CreatedOn}</div>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Điện thoại',\r\n\t\t\tdataIndex: 'Phone',\r\n\t\t\tkey: 'Phone'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Giới hạn đặt lịch',\r\n\t\t\tdataIndex: 'LeftLimitBooking',\r\n\t\t\tkey: 'LeftLimitBooking',\r\n\t\t\talign: 'center'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '',\r\n\t\t\tdataIndex: '',\r\n\t\t\tkey: 'hoho',\r\n\t\t\talign: 'center',\r\n\t\t\trender: (Action, data, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Popover\r\n\t\t\t\t\t\t\tcontent={\r\n\t\t\t\t\t\t\t\t<div className=\"wrap-calendar-x\">\r\n\t\t\t\t\t\t\t\t\t<NumberFormat\r\n\t\t\t\t\t\t\t\t\t\tvalue={num}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Số lần có thể đặt\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"ant-input style-input w-100\"\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e: any) => setNum(e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\tthousandSeparator={true}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Button onClick={() => _updateData(data?.ID)} className=\"btn btn-primary w-100 mt-3\">\r\n\t\t\t\t\t\t\t\t\t\tCập nhật {loading && <Spin className=\"ml-2\" size=\"small\" />}\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttitle=\"Cập nhật số lần đặt lịch\"\r\n\t\t\t\t\t\t\ttrigger=\"hover\"\r\n\t\t\t\t\t\t\tplacement=\"left\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<FontAwesomeIcon className=\"pen-edit\" icon={faPenToSquare} size=\"lg\" />\r\n\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t}\r\n\t]\r\n\r\n\tuseEffect(() => {\r\n\t\ttodoApi !== listTodoApi && getAllArea()\r\n\t}, [todoApi])\r\n\r\n\t// HANDLE SEARCH\r\n\tconst handleSearch = (e) => {\r\n\t\tlet newTodoApi = { ...listTodoApi, pageIndex: 1, search: e }\r\n\t\t;(pageIndex = 1), setTodoApi(newTodoApi)\r\n\t}\r\n\r\n\t// HANDLE CHANGE PAGE\r\n\tconst getPagination = (pageNumber: number) => {\r\n\t\tpageIndex = pageNumber\r\n\t\tsetTodoApi({ ...todoApi, pageIndex: pageIndex })\r\n\t}\r\n\r\n\t// CARD EXTRA\r\n\tconst Extra = () => {\r\n\t\treturn (\r\n\t\t\t<div className=\"row m-0 vc-store_extra-table\">\r\n\t\t\t\t<div className=\"row m-0\">\r\n\t\t\t\t\t<div className=\"row m-0 st-fb-100w \">\r\n\t\t\t\t\t\t<Search\r\n\t\t\t\t\t\t\tclassName=\"fb-btn-search style-input vc-teach-modal_search\"\r\n\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\tplaceholder=\"Tìm kiếm\"\r\n\t\t\t\t\t\t\tonSearch={(e) => handleSearch(e)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\t// RENDER\r\n\treturn (\r\n\t\t<div className=\"\">\r\n\t\t\t<Card title={Extra()} className=\"video-course-list\" style={{ width: '100%' }}>\r\n\t\t\t\t{userInformation !== null && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{userInformation?.RoleID == 1 ? (\r\n\t\t\t\t\t\t\t<CourseVideoTable\r\n\t\t\t\t\t\t\t\ttotalPage={totalPage && totalPage}\r\n\t\t\t\t\t\t\t\tgetPagination={(pageNumber: number) => getPagination(pageNumber)}\r\n\t\t\t\t\t\t\t\tcurrentPage={pageIndex}\r\n\t\t\t\t\t\t\t\tcolumns={columnsVideoCourse}\r\n\t\t\t\t\t\t\t\tdataSource={data}\r\n\t\t\t\t\t\t\t\tloading={{ type: 'GET_ALL', status: loading }}\r\n\t\t\t\t\t\t\t\tTitleCard={null}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<List\r\n\t\t\t\t\t\t\t\tpagination={{\r\n\t\t\t\t\t\t\t\t\tonChange: getPagination,\r\n\t\t\t\t\t\t\t\t\ttotal: totalPage,\r\n\t\t\t\t\t\t\t\t\tsize: 'small',\r\n\t\t\t\t\t\t\t\t\tcurrent: pageIndex\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\t\t\titemLayout=\"horizontal\"\r\n\t\t\t\t\t\t\t\tdataSource={data}\r\n\t\t\t\t\t\t\t\tgrid={{ gutter: 16, xs: 1, sm: 2, md: 3, lg: 4, xl: 4, xxl: 5 }}\r\n\t\t\t\t\t\t\t\trenderItem={(item) => (\r\n\t\t\t\t\t\t\t\t\t<ItemVideo\r\n\t\t\t\t\t\t\t\t\t\tonRate={(p) => {\r\n\t\t\t\t\t\t\t\t\t\t\tdispatch({ type: 'ID', ID: p.ID })\r\n\t\t\t\t\t\t\t\t\t\t\tdispatch({ type: 'RatingNumber', RatingNumber: p.RatingNumber })\r\n\t\t\t\t\t\t\t\t\t\t\tdispatch({ type: 'RatingComment', RatingComment: p.RatingComment })\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowModal(true)\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\titem={item}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<Modal\r\n\t\t\t\t\ttitle=\"Đánh giá\"\r\n\t\t\t\t\tvisible={showModal}\r\n\t\t\t\t\tonOk={() => {\r\n\t\t\t\t\t\tsetShowModal(false)\r\n\t\t\t\t\t\tupdateRate()\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tokText=\"Đánh giá\"\r\n\t\t\t\t\tcancelText=\"Hủy\"\r\n\t\t\t\t\tconfirmLoading={false}\r\n\t\t\t\t\tonCancel={() => setShowModal(false)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Rate value={parseInt(state.RatingNumber)} onChange={(e) => dispatch({ type: 'RatingNumber', RatingNumber: e })} />\r\n\t\t\t\t\t<TextArea\r\n\t\t\t\t\t\tvalue={state.RatingComment}\r\n\t\t\t\t\t\tonChange={(p) => dispatch({ type: 'RatingComment', RatingComment: p.target.value })}\r\n\t\t\t\t\t\trows={4}\r\n\t\t\t\t\t\tclassName=\"mt-4\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Modal>\r\n\t\t\t</Card>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nVideoCourseList.layout = LayoutBase\r\n\r\nexport default VideoCourseList\r\n"]},"metadata":{},"sourceType":"module"}