{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\Package\\\\PackageResult\\\\PackagePickTeacher.tsx\";\nimport { Form, Modal, Spin, Tooltip } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport SelectField from '~/components/FormControl/SelectField';\nimport { useWrap } from '~/context/wrap';\nimport { FormOutlined } from '@ant-design/icons';\nimport { packageResultApi } from '~/apiBase/package/package-result';\n\nconst PackagePickTeacher = props => {\n  const {\n    dataTeacher,\n    dataRow,\n    onFetchData\n  } = props;\n  const {\n    0: isModalVisible,\n    1: setIsModalVisible\n  } = useState(false);\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const {\n    showNoti\n  } = useWrap();\n\n  const showModal = () => {\n    setIsModalVisible(true);\n  };\n\n  const handleOk = () => {\n    setIsModalVisible(false);\n  };\n\n  const handleCancel = () => {\n    setIsModalVisible(false);\n  };\n\n  const defaultValuesInit = {\n    ID: null,\n    TeacherID: null\n  };\n  const schema = yup.object().shape({\n    TeacherID: yup.mixed().required('Vui lòng chọn giáo viên')\n  });\n  const form = useForm({\n    defaultValues: defaultValuesInit,\n    resolver: yupResolver(schema)\n  });\n\n  const onSubmit = async dataSubmit => {\n    console.log('Data Submit: ', dataSubmit);\n    setIsLoading(true);\n\n    try {\n      let res = await packageResultApi.update(dataSubmit);\n\n      if (res.status === 200) {\n        onFetchData();\n        setIsModalVisible(false);\n        showNoti('succes', 'Chọn giáo viên thành công');\n        '';\n      }\n    } catch (error) {\n      showNoti('danger', error.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (isModalVisible) {\n      if (dataRow) {\n        form.setValue('ID', dataRow.ID);\n        dataRow.TeacherID !== 0 && form.setValue('TeacherID', dataRow.TeacherID);\n      }\n    }\n  }, [isModalVisible]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n      title: \"Ch\\u1ECDn gi\\xE1o vi\\xEAn ch\\u1EA5m b\\xE0i\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-icon edit mr-1\",\n        onClick: showModal,\n        children: /*#__PURE__*/_jsxDEV(FormOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Ch\\u1ECDn gi\\xE1o vi\\xEAn ch\\u1EA5m b\\xE0i\",\n      visible: isModalVisible,\n      onOk: handleOk,\n      onCancel: handleCancel,\n      footer: null,\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        layout: \"vertical\",\n        onFinish: form.handleSubmit(onSubmit),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container-fluid\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: /*#__PURE__*/_jsxDEV(SelectField, {\n                form: form,\n                name: \"TeacherID\",\n                label: \"Ch\\u1ECDn gi\\xE1o vi\\xEAn\",\n                optionList: dataTeacher,\n                placeholder: \"Gi\\xE1o vi\\xEAn\" // isLoading={loadingTeacher}\n\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-primary w-100\",\n                children: [\"L\\u01B0u\", isLoading && /*#__PURE__*/_jsxDEV(Spin, {\n                  className: \"loading-base\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 24\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n\nexport default PackagePickTeacher;","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/Package/PackageResult/PackagePickTeacher.tsx"],"names":["Form","Modal","Spin","Tooltip","React","useEffect","useState","useForm","yupResolver","yup","SelectField","useWrap","FormOutlined","packageResultApi","PackagePickTeacher","props","dataTeacher","dataRow","onFetchData","isModalVisible","setIsModalVisible","isLoading","setIsLoading","showNoti","showModal","handleOk","handleCancel","defaultValuesInit","ID","TeacherID","schema","object","shape","mixed","required","form","defaultValues","resolver","onSubmit","dataSubmit","console","log","res","update","status","error","message","setValue","handleSubmit"],"mappings":"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","sourcesContent":["import { Form, Modal, Spin, Tooltip } from 'antd';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport * as yup from 'yup';\r\nimport SelectField from '~/components/FormControl/SelectField';\r\nimport { useWrap } from '~/context/wrap';\r\nimport { FormOutlined } from '@ant-design/icons';\r\nimport { packageResultApi } from '~/apiBase/package/package-result';\r\n\r\nconst PackagePickTeacher = (props) => {\r\n\tconst { dataTeacher, dataRow, onFetchData } = props;\r\n\tconst [isModalVisible, setIsModalVisible] = useState(false);\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\tconst { showNoti } = useWrap();\r\n\r\n\tconst showModal = () => {\r\n\t\tsetIsModalVisible(true);\r\n\t};\r\n\r\n\tconst handleOk = () => {\r\n\t\tsetIsModalVisible(false);\r\n\t};\r\n\r\n\tconst handleCancel = () => {\r\n\t\tsetIsModalVisible(false);\r\n\t};\r\n\r\n\tconst defaultValuesInit = {\r\n\t\tID: null,\r\n\t\tTeacherID: null\r\n\t};\r\n\tconst schema = yup.object().shape({\r\n\t\tTeacherID: yup.mixed().required('Vui lòng chọn giáo viên')\r\n\t});\r\n\r\n\tconst form = useForm({\r\n\t\tdefaultValues: defaultValuesInit,\r\n\t\tresolver: yupResolver(schema)\r\n\t});\r\n\r\n\tconst onSubmit = async (dataSubmit) => {\r\n\t\tconsole.log('Data Submit: ', dataSubmit);\r\n\t\tsetIsLoading(true);\r\n\r\n\t\ttry {\r\n\t\t\tlet res = await packageResultApi.update(dataSubmit);\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tonFetchData();\r\n\t\t\t\tsetIsModalVisible(false);\r\n\t\t\t\tshowNoti('succes', 'Chọn giáo viên thành công');\r\n\t\t\t\t('');\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isModalVisible) {\r\n\t\t\tif (dataRow) {\r\n\t\t\t\tform.setValue('ID', dataRow.ID);\r\n\t\t\t\tdataRow.TeacherID !== 0 && form.setValue('TeacherID', dataRow.TeacherID);\r\n\t\t\t}\r\n\t\t}\r\n\t}, [isModalVisible]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Tooltip title=\"Chọn giáo viên chấm bài\">\r\n\t\t\t\t<button className=\"btn btn-icon edit mr-1\" onClick={showModal}>\r\n\t\t\t\t\t<FormOutlined />\r\n\t\t\t\t</button>\r\n\t\t\t</Tooltip>\r\n\t\t\t<Modal title=\"Chọn giáo viên chấm bài\" visible={isModalVisible} onOk={handleOk} onCancel={handleCancel} footer={null}>\r\n\t\t\t\t<Form layout=\"vertical\" onFinish={form.handleSubmit(onSubmit)}>\r\n\t\t\t\t\t<div className=\"container-fluid\">\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t\t\t<SelectField\r\n\t\t\t\t\t\t\t\t\tform={form}\r\n\t\t\t\t\t\t\t\t\tname=\"TeacherID\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"Chọn giáo viên\"\r\n\t\t\t\t\t\t\t\t\toptionList={dataTeacher}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Giáo viên\"\r\n\t\t\t\t\t\t\t\t\t// isLoading={loadingTeacher}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary w-100\">\r\n\t\t\t\t\t\t\t\t\tLưu\r\n\t\t\t\t\t\t\t\t\t{isLoading && <Spin className=\"loading-base\" />}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form>\r\n\t\t\t</Modal>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default PackagePickTeacher;\r\n"]},"metadata":{},"sourceType":"module"}