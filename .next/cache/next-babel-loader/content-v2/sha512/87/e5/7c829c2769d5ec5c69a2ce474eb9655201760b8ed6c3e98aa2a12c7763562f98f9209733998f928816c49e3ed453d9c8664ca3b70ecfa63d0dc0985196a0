{"ast":null,"code":"import axios from 'axios';\nimport { getSession } from 'next-auth/client';\nimport _ from '~/appConfig';\nconst SHOW_LOG = false;\nconst NODE_STATUS = \"development\";\n\nconst isShowLog = e => {\n  if (e === '/api/Idioms/getRandoms' || e === '/api/Rules') {\n    return false;\n  } else {\n    return NODE_STATUS == 'production' && !!SHOW_LOG ? true : false;\n  }\n};\n\nfunction getUrl(config) {\n  return !!config.baseURL ? config.url.replace(config.baseURL, '').split('?')[0] : config.url;\n}\n\nexport const authHeader_X = async () => {\n  const session = await getSession();\n  return !!session && !!session.accessToken ? {\n    token: session.accessToken\n  } : {};\n};\nexport const authHeader_Bearer = async () => {\n  const session = await getSession();\n  return !!session && !!session.accessToken ? {\n    Authorization: 'Bearer ' + session.accessToken\n  } : {};\n};\nexport const instance = axios.create({\n  baseURL: _.hostURL,\n  headers: {\n    Accept: 'application/json'\n  }\n});\ninstance.interceptors.request.use(async config => {\n  const url = getUrl(config);\n  isShowLog(url) && console.log(`%c ${config.method.toUpperCase()} - ${url}:`, 'color: #0086b3; font-weight: bold', config);\n  return config;\n}, error => {\n  isShowLog('') && console.log(`%c ${error.response.status}  :`, 'color: red; font-weight: bold', error.response.data);\n  return Promise.reject(error);\n});\ninstance.interceptors.response.use(response => {\n  return response;\n}, function (error) {\n  if (!!(error !== null && error !== void 0 && error.response)) {\n    var _error$response, _error$response2, _error$response3;\n\n    isShowLog('') && console.log(`%c ${error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status}  :`, 'color: red; font-weight: bold', error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data);\n    return !!(error !== null && error !== void 0 && (_error$response3 = error.response) !== null && _error$response3 !== void 0 && _error$response3.data) ? Promise.reject(error.response.data) : Promise.reject(error);\n  } else if (error.request) {\n    var _error$response4, _error$response5;\n\n    isShowLog('') && console.log(`%c ${JSON.stringify(error)}  :`, 'color: red; font-weight: bold', error === null || error === void 0 ? void 0 : (_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.data);\n    return !!(error !== null && error !== void 0 && (_error$response5 = error.response) !== null && _error$response5 !== void 0 && _error$response5.data) ? Promise.reject(error.response.data) : Promise.reject(error);\n  } else {\n    var _error$response6;\n\n    isShowLog('') && console.log(`%c ${JSON.stringify(error)}  :`, 'color: red; font-weight: bold', 'Hình như là setting sai');\n    return !!(error !== null && error !== void 0 && (_error$response6 = error.response) !== null && _error$response6 !== void 0 && _error$response6.data) ? Promise.reject(error.response.data) : Promise.reject(error);\n  }\n});","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/services/instance.tsx"],"names":["axios","getSession","_","SHOW_LOG","NODE_STATUS","isShowLog","e","getUrl","config","baseURL","url","replace","split","authHeader_X","session","accessToken","token","authHeader_Bearer","Authorization","instance","create","hostURL","headers","Accept","interceptors","request","use","console","log","method","toUpperCase","error","response","status","data","Promise","reject","JSON","stringify"],"mappings":"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","sourcesContent":["import axios, { AxiosRequestConfig, AxiosResponse } from 'axios'\r\nimport { getSession } from 'next-auth/client'\r\nimport _ from '~/appConfig'\r\n\r\nconst SHOW_LOG = false\r\nconst NODE_STATUS: any = process.env.NODE_ENV\r\n\r\nconst isShowLog = (e: any) => {\r\n\tif (e === '/api/Idioms/getRandoms' || e === '/api/Rules') {\r\n\t\treturn false\r\n\t} else {\r\n\t\treturn NODE_STATUS == 'production' && !!SHOW_LOG ? true : false\r\n\t}\r\n}\r\n\r\nfunction getUrl(config: any) {\r\n\treturn !!config.baseURL ? config.url.replace(config.baseURL, '').split('?')[0] : config.url\r\n}\r\n\r\nexport const authHeader_X = async () => {\r\n\tconst session: any = await getSession()\r\n\treturn !!session && !!session.accessToken ? { token: session.accessToken } : {}\r\n}\r\nexport const authHeader_Bearer = async () => {\r\n\tconst session: any = await getSession()\r\n\treturn !!session && !!session.accessToken ? { Authorization: 'Bearer ' + session.accessToken } : {}\r\n}\r\n\r\nexport const instance = axios.create({\r\n\tbaseURL: _.hostURL,\r\n\theaders: {\r\n\t\tAccept: 'application/json'\r\n\t}\r\n})\r\n\r\ninstance.interceptors.request.use(\r\n\tasync (config: AxiosRequestConfig) => {\r\n\t\tconst url: any = getUrl(config)\r\n\t\tisShowLog(url) && console.log(`%c ${config.method.toUpperCase()} - ${url}:`, 'color: #0086b3; font-weight: bold', config)\r\n\t\treturn config\r\n\t},\r\n\t(error: any) => {\r\n\t\tisShowLog('') && console.log(`%c ${error.response.status}  :`, 'color: red; font-weight: bold', error.response.data)\r\n\t\treturn Promise.reject(error)\r\n\t}\r\n)\r\n\r\ninstance.interceptors.response.use(\r\n\t(response: AxiosResponse) => {\r\n\t\treturn response\r\n\t},\r\n\tfunction (error: any) {\r\n\t\tif (!!error?.response) {\r\n\t\t\tisShowLog('') && console.log(`%c ${error?.response?.status}  :`, 'color: red; font-weight: bold', error?.response?.data)\r\n\t\t\treturn !!error?.response?.data ? Promise.reject(error.response.data) : Promise.reject(error)\r\n\t\t} else if (error.request) {\r\n\t\t\tisShowLog('') && console.log(`%c ${JSON.stringify(error)}  :`, 'color: red; font-weight: bold', error?.response?.data)\r\n\t\t\treturn !!error?.response?.data ? Promise.reject(error.response.data) : Promise.reject(error)\r\n\t\t} else {\r\n\t\t\tisShowLog('') && console.log(`%c ${JSON.stringify(error)}  :`, 'color: red; font-weight: bold', 'Hình như là setting sai')\r\n\t\t\treturn !!error?.response?.data ? Promise.reject(error.response.data) : Promise.reject(error)\r\n\t\t}\r\n\t}\r\n)\r\n"]},"metadata":{},"sourceType":"module"}