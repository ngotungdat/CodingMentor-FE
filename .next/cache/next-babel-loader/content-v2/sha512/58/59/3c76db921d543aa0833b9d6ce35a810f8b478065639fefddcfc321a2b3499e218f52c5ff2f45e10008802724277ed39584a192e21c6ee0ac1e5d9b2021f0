{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\QuestionBank\\\\QuestionFormType\\\\TypingForm.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { CloseOutlined } from '@ant-design/icons';\nimport { Form, Input, Spin, Tooltip } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { Plus } from 'react-feather';\nimport { exerciseGroupApi } from '~/apiBase/';\nimport Editor from '~/components/Elements/Editor';\nimport EditorSimple from '~/components/Elements/EditorSimple';\nimport { useWrap } from '~/context/wrap';\nlet AnsID = 0;\n\nconst TypingForm = props => {\n  var _question$ExerciseLis2;\n\n  const {\n    questionData,\n    changeIsSubmit,\n    visible,\n    onChange,\n    isGroup\n  } = props;\n  const {\n    showNoti\n  } = useWrap();\n  const [form] = Form.useForm();\n  const {\n    0: question,\n    1: setQuestion\n  } = useState(null); // Dữ liệu câu hỏi + câu trả lời\n\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  const {\n    0: dataExercise,\n    1: setDataExercise\n  } = useState([]); // VỪA VÔ LẤY DỮ LIỆU\n\n  useEffect(() => {\n    visible ? dataGroupDetail() : setLoading(true);\n  }, [visible]);\n  useEffect(() => {\n    onChange(question);\n  }, [question]); // GET GROUP DETAIL DATA\n\n  const dataGroupDetail = async () => {\n    changeIsSubmit(true);\n\n    try {\n      let res = await exerciseGroupApi.getWithID(questionData.ID ? questionData.ID : questionData.ExerciseGroupID);\n\n      if (res.status == 200) {\n        if ((questionData === null || questionData === void 0 ? void 0 : questionData.ExerciseList.length) > 0) {\n          var _res$data$data, _res$data$data2;\n\n          // Thay thẻ div = input\n          let cloneValueEditor = (_res$data$data = res.data.data) === null || _res$data$data === void 0 ? void 0 : _res$data$data.Paragraph;\n          (_res$data$data2 = res.data.data) === null || _res$data$data2 === void 0 ? void 0 : _res$data$data2.ExerciseList.forEach(item => {\n            let indexInput = parseInt(item.inputID) + 1;\n            indexInput = indexInput.toString();\n            cloneValueEditor = cloneValueEditor.replace(`<div ques-id=\"${item.ID}\" id=\"${indexInput}\" class='space-editor' role='textbox' aria-labelledby='txtboxLabel' aria-multiline='true' contentEditable=\"true\">(${indexInput})</div>`, `<input id=\"${item.inputID}\" class=\"space-editor\" placeholder=\"(${indexInput})\">`);\n          });\n          setQuestion(_objectSpread(_objectSpread({}, res.data.data), {}, {\n            Paragraph: cloneValueEditor\n          }));\n        } else {\n          setQuestion(res.data.data);\n        }\n      }\n\n      res.status == 204 && showNoti('danger', 'Không có dữ liệu');\n    } catch (error) {\n      showNoti('danger', error === null || error === void 0 ? void 0 : error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const setDataEditor = e => {\n    setQuestion(_objectSpread(_objectSpread({}, question), {}, {\n      Paragraph: e\n    }));\n    onChange(_objectSpread(_objectSpread({}, question), {}, {\n      Paragraph: e\n    }));\n  };\n\n  const getDescribeAnswer = dataEditor => {\n    setQuestion(_objectSpread(_objectSpread({}, question), {}, {\n      DescribeAnswer: dataEditor\n    }));\n    onChange(_objectSpread(_objectSpread({}, question), {}, {\n      DescribeAnswer: dataEditor\n    }));\n  }; // HANDLE ADD QUESTION\n\n\n  const addQuestion = p => {\n    AnsID++;\n    let exerciseList = question === null || question === void 0 ? void 0 : question.ExerciseList;\n    let tempData = dataExercise;\n    let temp = {\n      inputID: p,\n      Content: '',\n      ExerciseGroupID: question.ID,\n      SubjectID: question.SubjectID,\n      SubjectName: question.SubjectName,\n      DescribeAnswer: '',\n      Level: question.Level,\n      LevelName: question.LevelName,\n      LinkAudio: null,\n      Type: question.Type,\n      TypeName: question.TypeName,\n      isAdd: true,\n      Enable: true,\n      ExerciseAnswer: [{\n        ID: AnsID,\n        AnswerContent: '',\n        isTrue: true,\n        Enable: true,\n        isAdd: true\n      }]\n    };\n    tempData.push(temp);\n    exerciseList.push(temp);\n    setDataExercise(tempData);\n    setQuestion(_objectSpread(_objectSpread({}, question), {}, {\n      ExerciseList: exerciseList\n    }));\n    onChange(_objectSpread(_objectSpread({}, question), {}, {\n      ExerciseList: exerciseList\n    }));\n  }; // HANDLE DELETE QUESTION\n\n\n  const deleteSingleQuestion = ID => {\n    let questionIndex = question.ExerciseList.findIndex(item => item.inputID == ID); // Lấy vị trí của cái ID truyền vào\n\n    let exerciseIndex = dataExercise.findIndex(item => item.inputID == ID); // Xóa bên Ex nếu nó khác -1\n\n    if (dataExercise[exerciseIndex]) {\n      dataExercise.splice(exerciseIndex, 1);\n    } // Xóa bên Quest nếu nó khác -1\n\n\n    if (question.ExerciseList[questionIndex]) {\n      if (question.ExerciseList[questionIndex].isAdd) {\n        question.ExerciseList.splice(questionIndex, 1);\n      } else {\n        question.ExerciseList[questionIndex].Enable = false;\n      }\n    } else {\n      console.log('Câu hỏi không tồn tại');\n    }\n\n    setDataExercise([...dataExercise]);\n    setQuestion(_objectSpread({}, question));\n    onChange(_objectSpread({}, question));\n  }; // HANDLE DELETE ALL QUESTION\n\n\n  const deleteAllQuestion = () => {\n    dataExercise === null || dataExercise === void 0 ? void 0 : dataExercise.splice(0, dataExercise.length); // Xóa tất cả tụi bên Ex\n\n    question.ExerciseList.forEach(item => {\n      item.Enable = false; // Xóa tất cả tụi bên này - gọi vậy để xóa trên data\n    });\n    setDataExercise([...dataExercise]);\n    setQuestion(_objectSpread(_objectSpread({}, question), {}, {\n      Paragraph: ''\n    }));\n    onChange(_objectSpread(_objectSpread({}, question), {}, {\n      Paragraph: ''\n    }));\n  }; // Lấy cái số hiện ra bên câu trả lời\n\n\n  const getQuestIndex = (ar, i) => {\n    let temp = [];\n\n    for (let i = 0; i < ar.length; i++) {\n      ar[i].Enable && temp.push(ar[i]);\n    }\n\n    return parseInt(temp.indexOf(i)) + 1;\n  }; // HANDLE ADD ANSWER\n\n\n  const handleAddAnswer = ID => {\n    AnsID++;\n    question.ExerciseList.every(item => {\n      if (item.inputID == ID) {\n        item.ExerciseAnswer.push({\n          ID: AnsID,\n          AnswerContent: '',\n          isTrue: true,\n          Enable: true,\n          isAdd: true\n        });\n        return false;\n      }\n\n      return true;\n    });\n    setQuestion(_objectSpread({}, question));\n  }; // ON CHANGE TEXT\n\n\n  const onChange_text = (e, AnswerID, QuestionID) => {\n    var _question$ExerciseLis;\n\n    let QuestionIndex = question === null || question === void 0 ? void 0 : (_question$ExerciseLis = question.ExerciseList) === null || _question$ExerciseLis === void 0 ? void 0 : _question$ExerciseLis.findIndex(item => item.Enable && item.inputID == QuestionID); // Get question index\n\n    let AnswerIndex = question.ExerciseList[QuestionIndex].ExerciseAnswer.findIndex(item => item.Enable && item.ID == AnswerID); // Get answer index\n\n    question.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex].AnswerContent = e.target.value; // Add text\n\n    setQuestion(_objectSpread({}, question));\n  }; // DELETE ANSWER\n\n\n  const deleteAnswerItem = (AnswerID, QuestionID) => {\n    let QuestionIndex = question.ExerciseList.findIndex(item => item.inputID == QuestionID); // - Get question index\n\n    let AnswerIndex = question.ExerciseList[QuestionIndex].ExerciseAnswer.findIndex(item => item.ID == AnswerID); // - Get answer index\n    // Action delete\n\n    if (question.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex].isAdd) {\n      question.ExerciseList[QuestionIndex].ExerciseAnswer.splice(AnswerIndex, 1);\n    } else {\n      question.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex].Enable = false;\n    }\n\n    setQuestion(_objectSpread({}, question));\n  }; // RENDER\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-create-question\",\n    children: visible && loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-100 text-center mt-3\",\n      children: /*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 5\n    }, this) : visible && /*#__PURE__*/_jsxDEV(Form, {\n      form: form,\n      layout: \"vertical\",\n      onFinish: () => {},\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-fluid\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6 col-12\",\n            children: /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"Question\",\n              label: \"N\\u1ED9i dung\",\n              children: /*#__PURE__*/_jsxDEV(Editor, {\n                exerciseList: dataExercise,\n                deleteAllQuestion: deleteAllQuestion,\n                deleteSingleQuestion: quesID => deleteSingleQuestion(quesID),\n                handleChange: e => setDataEditor(e) // Khi nó thay đổi\n                ,\n                isReset: false,\n                questionContent: question === null || question === void 0 ? void 0 : question.Paragraph // Câu hỏi được truyền vô\n                ,\n                questionData: question,\n                addQuestion: e => addQuestion(e),\n                visible: visible\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 11\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 10\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-6 col-12\",\n            style: {\n              borderLeft: '2px dotted #dbdbdb'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"style-label\",\n              style: {\n                textDecoration: 'underline'\n              },\n              children: \"\\u0110\\xE1p \\xE1n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 10\n            }, this), question === null || question === void 0 ? void 0 : (_question$ExerciseLis2 = question.ExerciseList) === null || _question$ExerciseLis2 === void 0 ? void 0 : _question$ExerciseLis2.map((itemQues, index) => {\n              var _itemQues$ExerciseAns;\n\n              return itemQues.Enable && /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-4\",\n                  style: {\n                    fontWeight: 500,\n                    color: '#525252'\n                  },\n                  children: [\"C\\xE2u: \", getQuestIndex(question.ExerciseList, itemQues)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 14\n                }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                  title: \"Th\\xEAm \\u0111\\xE1p \\xE1n\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn-add-answer\",\n                    onClick: () => handleAddAnswer(itemQues.inputID),\n                    children: /*#__PURE__*/_jsxDEV(Plus, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 230,\n                      columnNumber: 16\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 229,\n                    columnNumber: 15\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 14\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: (_itemQues$ExerciseAns = itemQues.ExerciseAnswer) === null || _itemQues$ExerciseAns === void 0 ? void 0 : _itemQues$ExerciseAns.map((itemAns, index) => itemAns.Enable && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-md-6 col-12\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"row-ans mt-3\",\n                      children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n                        className: \"mb-0\",\n                        children: /*#__PURE__*/_jsxDEV(Input, {\n                          value: itemAns.AnswerContent,\n                          className: \"style-input\",\n                          onChange: e => onChange_text(e, itemAns.ID, itemQues.inputID)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 240,\n                          columnNumber: 21\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 239,\n                        columnNumber: 20\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"delete-ans\",\n                        onClick: () => deleteAnswerItem(itemAns.ID, itemQues.inputID),\n                        children: /*#__PURE__*/_jsxDEV(CloseOutlined, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 247,\n                          columnNumber: 21\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 246,\n                        columnNumber: 20\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 238,\n                      columnNumber: 19\n                    }, this)\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 237,\n                    columnNumber: 18\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 14\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 13\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 9\n          }, this), !(isGroup !== null && isGroup !== void 0 && isGroup.status) && /*#__PURE__*/_jsxDEV(Form.Item, {\n            label: \"Gi\\u1EA3i th\\xEDch \\u0111\\xE1p \\xE1n\",\n            name: \"DescribeAnswer\",\n            children: /*#__PURE__*/_jsxDEV(EditorSimple, {\n              handleChange: value => getDescribeAnswer(value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 10\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 8\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 6\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 191,\n    columnNumber: 3\n  }, this);\n};\n\nexport default TypingForm;","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/QuestionBank/QuestionFormType/TypingForm.tsx"],"names":["CloseOutlined","Form","Input","Spin","Tooltip","React","useEffect","useState","Plus","exerciseGroupApi","Editor","EditorSimple","useWrap","AnsID","TypingForm","props","questionData","changeIsSubmit","visible","onChange","isGroup","showNoti","form","useForm","question","setQuestion","loading","setLoading","dataExercise","setDataExercise","dataGroupDetail","res","getWithID","ID","ExerciseGroupID","status","ExerciseList","length","cloneValueEditor","data","Paragraph","forEach","item","indexInput","parseInt","inputID","toString","replace","error","message","setDataEditor","e","getDescribeAnswer","dataEditor","DescribeAnswer","addQuestion","p","exerciseList","tempData","temp","Content","SubjectID","SubjectName","Level","LevelName","LinkAudio","Type","TypeName","isAdd","Enable","ExerciseAnswer","AnswerContent","isTrue","push","deleteSingleQuestion","questionIndex","findIndex","exerciseIndex","splice","console","log","deleteAllQuestion","getQuestIndex","ar","i","indexOf","handleAddAnswer","every","onChange_text","AnswerID","QuestionID","QuestionIndex","AnswerIndex","target","value","deleteAnswerItem","quesID","borderLeft","textDecoration","map","itemQues","index","fontWeight","color","itemAns"],"mappings":"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","sourcesContent":["import { CloseOutlined } from '@ant-design/icons'\r\nimport { Form, Input, Spin, Tooltip } from 'antd'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { Plus } from 'react-feather'\r\nimport { exerciseGroupApi } from '~/apiBase/'\r\nimport Editor from '~/components/Elements/Editor'\r\nimport EditorSimple from '~/components/Elements/EditorSimple'\r\nimport { useWrap } from '~/context/wrap'\r\n\r\nlet AnsID = 0\r\n\r\nconst TypingForm = (props) => {\r\n\tconst { questionData, changeIsSubmit, visible, onChange, isGroup } = props\r\n\tconst { showNoti } = useWrap()\r\n\tconst [form] = Form.useForm()\r\n\tconst [question, setQuestion] = useState<any>(null) // Dữ liệu câu hỏi + câu trả lời\r\n\tconst [loading, setLoading] = useState<any>(true)\r\n\tconst [dataExercise, setDataExercise] = useState<any>([])\r\n\r\n\t// VỪA VÔ LẤY DỮ LIỆU\r\n\tuseEffect(() => {\r\n\t\tvisible ? dataGroupDetail() : setLoading(true)\r\n\t}, [visible])\r\n\r\n\tuseEffect(() => {\r\n\t\tonChange(question)\r\n\t}, [question])\r\n\r\n\t// GET GROUP DETAIL DATA\r\n\tconst dataGroupDetail = async () => {\r\n\t\tchangeIsSubmit(true)\r\n\t\ttry {\r\n\t\t\tlet res: any = await exerciseGroupApi.getWithID(questionData.ID ? questionData.ID : questionData.ExerciseGroupID)\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tif (questionData?.ExerciseList.length > 0) {\r\n\t\t\t\t\t// Thay thẻ div = input\r\n\t\t\t\t\tlet cloneValueEditor = res.data.data?.Paragraph\r\n\t\t\t\t\tres.data.data?.ExerciseList.forEach((item: any) => {\r\n\t\t\t\t\t\tlet indexInput: any = parseInt(item.inputID) + 1\r\n\t\t\t\t\t\tindexInput = indexInput.toString()\r\n\t\t\t\t\t\tcloneValueEditor = cloneValueEditor.replace(\r\n\t\t\t\t\t\t\t`<div ques-id=\"${item.ID}\" id=\"${indexInput}\" class='space-editor' role='textbox' aria-labelledby='txtboxLabel' aria-multiline='true' contentEditable=\"true\">(${indexInput})</div>`,\r\n\t\t\t\t\t\t\t`<input id=\"${item.inputID}\" class=\"space-editor\" placeholder=\"(${indexInput})\">`\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsetQuestion({ ...res.data.data, Paragraph: cloneValueEditor })\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetQuestion(res.data.data)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tres.status == 204 && showNoti('danger', 'Không có dữ liệu')\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error?.message)\r\n\t\t} finally {\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst setDataEditor = (e: any) => {\r\n\t\tsetQuestion({ ...question, Paragraph: e })\r\n\t\tonChange({ ...question, Paragraph: e })\r\n\t}\r\n\r\n\tconst getDescribeAnswer = (dataEditor) => {\r\n\t\tsetQuestion({ ...question, DescribeAnswer: dataEditor })\r\n\t\tonChange({ ...question, DescribeAnswer: dataEditor })\r\n\t}\r\n\r\n\t// HANDLE ADD QUESTION\r\n\tconst addQuestion = (p: any) => {\r\n\t\tAnsID++\r\n\t\tlet exerciseList: any = question?.ExerciseList\r\n\t\tlet tempData: any = dataExercise\r\n\t\tlet temp: any = {\r\n\t\t\tinputID: p,\r\n\t\t\tContent: '',\r\n\t\t\tExerciseGroupID: question.ID,\r\n\t\t\tSubjectID: question.SubjectID,\r\n\t\t\tSubjectName: question.SubjectName,\r\n\t\t\tDescribeAnswer: '',\r\n\t\t\tLevel: question.Level,\r\n\t\t\tLevelName: question.LevelName,\r\n\t\t\tLinkAudio: null,\r\n\t\t\tType: question.Type,\r\n\t\t\tTypeName: question.TypeName,\r\n\t\t\tisAdd: true,\r\n\t\t\tEnable: true,\r\n\t\t\tExerciseAnswer: [\r\n\t\t\t\t{\r\n\t\t\t\t\tID: AnsID,\r\n\t\t\t\t\tAnswerContent: '',\r\n\t\t\t\t\tisTrue: true,\r\n\t\t\t\t\tEnable: true,\r\n\t\t\t\t\tisAdd: true\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t\ttempData.push(temp)\r\n\t\texerciseList.push(temp)\r\n\t\tsetDataExercise(tempData)\r\n\t\tsetQuestion({ ...question, ExerciseList: exerciseList })\r\n\t\tonChange({ ...question, ExerciseList: exerciseList })\r\n\t}\r\n\r\n\t// HANDLE DELETE QUESTION\r\n\tconst deleteSingleQuestion = (ID: any) => {\r\n\t\tlet questionIndex: any = question.ExerciseList.findIndex((item: any) => item.inputID == ID) // Lấy vị trí của cái ID truyền vào\r\n\t\tlet exerciseIndex: any = dataExercise.findIndex((item: any) => item.inputID == ID)\r\n\t\t// Xóa bên Ex nếu nó khác -1\r\n\t\tif (dataExercise[exerciseIndex]) {\r\n\t\t\tdataExercise.splice(exerciseIndex, 1)\r\n\t\t}\r\n\t\t// Xóa bên Quest nếu nó khác -1\r\n\t\tif (question.ExerciseList[questionIndex]) {\r\n\t\t\tif (question.ExerciseList[questionIndex].isAdd) {\r\n\t\t\t\tquestion.ExerciseList.splice(questionIndex, 1)\r\n\t\t\t} else {\r\n\t\t\t\tquestion.ExerciseList[questionIndex].Enable = false\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconsole.log('Câu hỏi không tồn tại')\r\n\t\t}\r\n\t\tsetDataExercise([...dataExercise])\r\n\t\tsetQuestion({ ...question })\r\n\t\tonChange({ ...question })\r\n\t}\r\n\r\n\t// HANDLE DELETE ALL QUESTION\r\n\tconst deleteAllQuestion = () => {\r\n\t\tdataExercise?.splice(0, dataExercise.length) // Xóa tất cả tụi bên Ex\r\n\t\tquestion.ExerciseList.forEach((item: any) => {\r\n\t\t\titem.Enable = false // Xóa tất cả tụi bên này - gọi vậy để xóa trên data\r\n\t\t})\r\n\t\tsetDataExercise([...dataExercise])\r\n\t\tsetQuestion({ ...question, Paragraph: '' })\r\n\t\tonChange({ ...question, Paragraph: '' })\r\n\t}\r\n\r\n\t// Lấy cái số hiện ra bên câu trả lời\r\n\tconst getQuestIndex = (ar: any, i: any) => {\r\n\t\tlet temp: any = []\r\n\t\tfor (let i = 0; i < ar.length; i++) {\r\n\t\t\tar[i].Enable && temp.push(ar[i])\r\n\t\t}\r\n\t\treturn parseInt(temp.indexOf(i)) + 1\r\n\t}\r\n\r\n\t// HANDLE ADD ANSWER\r\n\tconst handleAddAnswer = (ID: number) => {\r\n\t\tAnsID++\r\n\t\tquestion.ExerciseList.every((item: any) => {\r\n\t\t\tif (item.inputID == ID) {\r\n\t\t\t\titem.ExerciseAnswer.push({\r\n\t\t\t\t\tID: AnsID,\r\n\t\t\t\t\tAnswerContent: '',\r\n\t\t\t\t\tisTrue: true,\r\n\t\t\t\t\tEnable: true,\r\n\t\t\t\t\tisAdd: true\r\n\t\t\t\t})\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\treturn true\r\n\t\t})\r\n\t\tsetQuestion({ ...question })\r\n\t}\r\n\r\n\t// ON CHANGE TEXT\r\n\tconst onChange_text = (e: any, AnswerID: number, QuestionID: any) => {\r\n\t\tlet QuestionIndex: any = question?.ExerciseList?.findIndex((item: any) => item.Enable && item.inputID == QuestionID) // Get question index\r\n\t\tlet AnswerIndex: any = question.ExerciseList[QuestionIndex].ExerciseAnswer.findIndex((item: any) => item.Enable && item.ID == AnswerID) // Get answer index\r\n\t\tquestion.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex].AnswerContent = e.target.value // Add text\r\n\t\tsetQuestion({ ...question })\r\n\t}\r\n\r\n\t// DELETE ANSWER\r\n\tconst deleteAnswerItem = (AnswerID: number, QuestionID: number) => {\r\n\t\tlet QuestionIndex: any = question.ExerciseList.findIndex((item: any) => item.inputID == QuestionID) // - Get question index\r\n\t\tlet AnswerIndex: any = question.ExerciseList[QuestionIndex].ExerciseAnswer.findIndex((item: any) => item.ID == AnswerID) // - Get answer index\r\n\t\t// Action delete\r\n\t\tif (question.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex].isAdd) {\r\n\t\t\tquestion.ExerciseList[QuestionIndex].ExerciseAnswer.splice(AnswerIndex, 1)\r\n\t\t} else {\r\n\t\t\tquestion.ExerciseList[QuestionIndex].ExerciseAnswer[AnswerIndex].Enable = false\r\n\t\t}\r\n\t\tsetQuestion({ ...question })\r\n\t}\r\n\r\n\t// RENDER\r\n\treturn (\r\n\t\t<div className=\"form-create-question\">\r\n\t\t\t{visible && loading ? (\r\n\t\t\t\t<div className=\"w-100 text-center mt-3\">\r\n\t\t\t\t\t<Spin />\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\tvisible && (\r\n\t\t\t\t\t<Form form={form} layout=\"vertical\" onFinish={() => {}}>\r\n\t\t\t\t\t\t<div className=\"container-fluid\">\r\n\t\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t\t<div className=\"col-md-6 col-12\">\r\n\t\t\t\t\t\t\t\t\t<Form.Item name=\"Question\" label=\"Nội dung\">\r\n\t\t\t\t\t\t\t\t\t\t<Editor\r\n\t\t\t\t\t\t\t\t\t\t\texerciseList={dataExercise}\r\n\t\t\t\t\t\t\t\t\t\t\tdeleteAllQuestion={deleteAllQuestion}\r\n\t\t\t\t\t\t\t\t\t\t\tdeleteSingleQuestion={(quesID: number) => deleteSingleQuestion(quesID)}\r\n\t\t\t\t\t\t\t\t\t\t\thandleChange={(e: string) => setDataEditor(e)} // Khi nó thay đổi\r\n\t\t\t\t\t\t\t\t\t\t\tisReset={false}\r\n\t\t\t\t\t\t\t\t\t\t\tquestionContent={question?.Paragraph} // Câu hỏi được truyền vô\r\n\t\t\t\t\t\t\t\t\t\t\tquestionData={question}\r\n\t\t\t\t\t\t\t\t\t\t\taddQuestion={(e: any) => addQuestion(e)}\r\n\t\t\t\t\t\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div className=\"col-md-6 col-12\" style={{ borderLeft: '2px dotted #dbdbdb' }}>\r\n\t\t\t\t\t\t\t\t\t<p className=\"style-label\" style={{ textDecoration: 'underline' }}>\r\n\t\t\t\t\t\t\t\t\t\tĐáp án\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t{question?.ExerciseList?.map(\r\n\t\t\t\t\t\t\t\t\t\t(itemQues: any, index: any) =>\r\n\t\t\t\t\t\t\t\t\t\t\titemQues.Enable && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"mt-4\" style={{ fontWeight: 500, color: '#525252' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tCâu: {getQuestIndex(question.ExerciseList, itemQues)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip title=\"Thêm đáp án\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button className=\"btn-add-answer\" onClick={() => handleAddAnswer(itemQues.inputID)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Plus />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{itemQues.ExerciseAnswer?.map(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(itemAns: any, index: any) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titemAns.Enable && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col-md-6 col-12\" key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row-ans mt-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Form.Item className=\"mb-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={itemAns.AnswerContent}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"style-input\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e: any) => onChange_text(e, itemAns.ID, itemQues.inputID)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button className=\"delete-ans\" onClick={() => deleteAnswerItem(itemAns.ID, itemQues.inputID)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CloseOutlined />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{!isGroup?.status && (\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"Giải thích đáp án\" name=\"DescribeAnswer\">\r\n\t\t\t\t\t\t\t\t\t\t<EditorSimple handleChange={(value: any) => getDescribeAnswer(value)} />\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t)\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default TypingForm\r\n"]},"metadata":{},"sourceType":"module"}