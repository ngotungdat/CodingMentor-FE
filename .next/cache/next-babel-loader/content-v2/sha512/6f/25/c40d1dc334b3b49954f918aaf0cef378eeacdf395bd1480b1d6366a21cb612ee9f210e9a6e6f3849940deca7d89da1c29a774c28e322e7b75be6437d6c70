{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\Teacher\\\\Teacher\\\\TeacherDetail.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { useRouter } from 'next/router';\nimport { useEffect, useState } from 'react';\nimport TeacherProfile from '../TeacherProfile';\nimport { useWrap } from '~/context/wrap';\nimport { teacherApi } from '~/apiBase';\n\nvar TeacherDetail = function TeacherDetail() {\n  _s();\n\n  var router = useRouter();\n  var slug = router.query.slug;\n\n  var _useState = useState({}),\n      dataUser = _useState[0],\n      setDataUser = _useState[1];\n\n  var _useState2 = useState([]),\n      dataSubject = _useState2[0],\n      setDataSubject = _useState2[1];\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti;\n\n  var _useState3 = useState({\n    type: '',\n    status: false\n  }),\n      isLoading = _useState3[0],\n      setIsLoading = _useState3[1];\n\n  var fetchTeacherByID = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setIsLoading({\n                type: 'GET_BYID',\n                status: true\n              });\n              _context.prev = 1;\n              _context.next = 4;\n              return teacherApi.getById(Number(slug));\n\n            case 4:\n              res = _context.sent;\n\n              if (res.status === 200) {\n                setDataUser(res.data.data);\n              } else if (res.status === 204) {\n                showNoti('danger', 'Không tìm thấy');\n              }\n\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](1);\n              showNoti('danger', _context.t0.message);\n\n            case 11:\n              _context.prev = 11;\n              setIsLoading({\n                type: 'GET_BYID',\n                status: false\n              });\n              return _context.finish(11);\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 8, 11, 14]]);\n    }));\n\n    return function fetchTeacherByID() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var _updateTeacherID = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setIsLoading({\n                type: 'UPDATE_BYID',\n                status: true\n              });\n              _context2.prev = 1;\n              _context2.next = 4;\n              return teacherApi.update(data);\n\n            case 4:\n              res = _context2.sent;\n              (res === null || res === void 0 ? void 0 : res.status) == 200 && showNoti('success', 'Cập nhật thành công'), fetchTeacherByID();\n              _context2.next = 11;\n              break;\n\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](1);\n              showNoti('danger', _context2.t0.message);\n\n            case 11:\n              _context2.prev = 11;\n              setIsLoading({\n                type: 'UPDATE_BYID',\n                status: false\n              });\n              return _context2.finish(11);\n\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 8, 11, 14]]);\n    }));\n\n    return function updateTeacherID(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var fetchTeacherForSubject = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var res, result;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return teacherApi.getAllTeacherForSubject(Number(slug));\n\n            case 3:\n              res = _context3.sent;\n\n              if (res.status === 200) {\n                result = res.data.data.map(function (item, i) {\n                  return {\n                    key: item.ProgramID,\n                    ProgramName: item.ProgramName,\n                    Subject: item.Subject,\n                    IsSelected: item.IsSelected\n                  };\n                });\n                setDataSubject(result);\n              } else if (res.status === 204) {\n                showNoti('danger', 'Không tìm thấy');\n              }\n\n              _context3.next = 10;\n              break;\n\n            case 7:\n              _context3.prev = 7;\n              _context3.t0 = _context3[\"catch\"](0);\n              showNoti('danger', _context3.t0.message);\n\n            case 10:\n              _context3.prev = 10;\n              setIsLoading({\n                type: 'GET_BYID',\n                status: false\n              });\n              return _context3.finish(10);\n\n            case 13:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 7, 10, 13]]);\n    }));\n\n    return function fetchTeacherForSubject() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var _updateTeacherForSubject = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(data) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              _context4.next = 3;\n              return teacherApi.updateTeacherForSubject(data);\n\n            case 3:\n              res = _context4.sent;\n              (res === null || res === void 0 ? void 0 : res.status) == 200 && showNoti('success', 'Cập nhật thành công'), fetchTeacherForSubject();\n              _context4.next = 10;\n              break;\n\n            case 7:\n              _context4.prev = 7;\n              _context4.t0 = _context4[\"catch\"](0);\n              showNoti('danger', _context4.t0.message);\n\n            case 10:\n              _context4.prev = 10;\n              setIsLoading({\n                type: 'UPDATE_BYID',\n                status: false\n              });\n              return _context4.finish(10);\n\n            case 13:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[0, 7, 10, 13]]);\n    }));\n\n    return function updateTeacherForSubject(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    fetchTeacherByID();\n    fetchTeacherForSubject();\n  }, [slug]);\n  return /*#__PURE__*/_jsxDEV(TeacherProfile, {\n    updateTeacherID: function updateTeacherID(data) {\n      return _updateTeacherID(data);\n    },\n    updateTeacherForSubject: function updateTeacherForSubject(data) {\n      return _updateTeacherForSubject(data);\n    },\n    onFetchData: function onFetchData() {\n      fetchTeacherForSubject();\n    },\n    isLoading: isLoading,\n    dataSubject: dataSubject,\n    dataUser: dataUser,\n    userID: Number(slug)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 3\n  }, _this);\n};\n\n_s(TeacherDetail, \"MLeiUpHZ1V0UGgmtX8sPZtfn7/s=\", false, function () {\n  return [useRouter, useWrap];\n});\n\n_c = TeacherDetail;\nexport default TeacherDetail;\n\nvar _c;\n\n$RefreshReg$(_c, \"TeacherDetail\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/Teacher/Teacher/TeacherDetail.tsx"],"names":["useRouter","useEffect","useState","TeacherProfile","useWrap","teacherApi","TeacherDetail","router","slug","query","dataUser","setDataUser","dataSubject","setDataSubject","showNoti","type","status","isLoading","setIsLoading","fetchTeacherByID","getById","Number","res","data","message","updateTeacherID","update","fetchTeacherForSubject","getAllTeacherForSubject","result","map","item","i","key","ProgramID","ProgramName","Subject","IsSelected","updateTeacherForSubject"],"mappings":"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","sourcesContent":["import ProfileBase from '~/components/Profile';\r\nimport LayoutBase from '~/components/LayoutBase';\r\nimport { useRouter } from 'next/router';\r\nimport { useEffect, useState } from 'react';\r\nimport TeacherProfile from '../TeacherProfile';\r\nimport { useWrap } from '~/context/wrap';\r\nimport { teacherApi } from '~/apiBase';\r\n\r\nconst TeacherDetail = () => {\r\n\tconst router = useRouter();\r\n\tconst slug = router.query.slug;\r\n\tconst [dataUser, setDataUser] = useState({});\r\n\tconst [dataSubject, setDataSubject] = useState([]);\r\n\tconst { showNoti } = useWrap();\r\n\tconst [isLoading, setIsLoading] = useState({\r\n\t\ttype: '',\r\n\t\tstatus: false\r\n\t});\r\n\r\n\tconst fetchTeacherByID = async () => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'GET_BYID',\r\n\t\t\tstatus: true\r\n\t\t});\r\n\t\ttry {\r\n\t\t\tlet res = await teacherApi.getById(Number(slug));\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tsetDataUser(res.data.data);\r\n\t\t\t} else if (res.status === 204) {\r\n\t\t\t\tshowNoti('danger', 'Không tìm thấy');\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'GET_BYID',\r\n\t\t\t\tstatus: false\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst updateTeacherID = async (data) => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'UPDATE_BYID',\r\n\t\t\tstatus: true\r\n\t\t});\r\n\t\ttry {\r\n\t\t\tlet res = await teacherApi.update(data);\r\n\t\t\tres?.status == 200 && showNoti('success', 'Cập nhật thành công'), fetchTeacherByID();\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'UPDATE_BYID',\r\n\t\t\t\tstatus: false\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst fetchTeacherForSubject = async () => {\r\n\t\t// setIsLoading({\r\n\t\t//   type: \"GET_BYID\",\r\n\t\t//   status: true,\r\n\t\t// });\r\n\t\ttry {\r\n\t\t\tlet res = await teacherApi.getAllTeacherForSubject(Number(slug));\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tconst result = res.data.data.map((item, i) => ({\r\n\t\t\t\t\tkey: item.ProgramID,\r\n\t\t\t\t\tProgramName: item.ProgramName,\r\n\t\t\t\t\tSubject: item.Subject,\r\n\t\t\t\t\tIsSelected: item.IsSelected\r\n\t\t\t\t}));\r\n\t\t\t\tsetDataSubject(result);\r\n\t\t\t} else if (res.status === 204) {\r\n\t\t\t\tshowNoti('danger', 'Không tìm thấy');\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'GET_BYID',\r\n\t\t\t\tstatus: false\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst updateTeacherForSubject = async (data) => {\r\n\t\ttry {\r\n\t\t\tlet res = await teacherApi.updateTeacherForSubject(data);\r\n\t\t\tres?.status == 200 && showNoti('success', 'Cập nhật thành công'), fetchTeacherForSubject();\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message);\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({\r\n\t\t\t\ttype: 'UPDATE_BYID',\r\n\t\t\t\tstatus: false\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchTeacherByID();\r\n\t\tfetchTeacherForSubject();\r\n\t}, [slug]);\r\n\r\n\treturn (\r\n\t\t<TeacherProfile\r\n\t\t\tupdateTeacherID={(data) => updateTeacherID(data)}\r\n\t\t\tupdateTeacherForSubject={(data) => updateTeacherForSubject(data)}\r\n\t\t\tonFetchData={() => {\r\n\t\t\t\tfetchTeacherForSubject();\r\n\t\t\t}}\r\n\t\t\tisLoading={isLoading}\r\n\t\t\tdataSubject={dataSubject}\r\n\t\t\tdataUser={dataUser}\r\n\t\t\tuserID={Number(slug)}\r\n\t\t/>\r\n\t);\r\n};\r\nexport default TeacherDetail;\r\n"]},"metadata":{},"sourceType":"module"}