{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\CourseCalendar\\\\update-request.tsx\";\nimport { Button, Input, Popover, Spin } from 'antd';\nimport moment from 'moment';\nimport React, { useState, useEffect } from 'react';\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\nimport { useWrap } from '~/context/wrap';\nimport { CalendarApi } from '~/apiBase/Calendar/calendar';\nconst {\n  TextArea\n} = Input;\nmoment.locale('vi');\n\nconst UpdateRequest = props => {\n  const {\n    title,\n    ID,\n    getData,\n    Status,\n    event,\n    studentChangeData\n  } = props;\n  const {\n    showNoti,\n    userInformation\n  } = useWrap();\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: errorText,\n    1: setErrorText\n  } = useState('');\n  const {\n    0: reason,\n    1: setReason\n  } = useState('');\n  const {\n    0: request,\n    1: setRequest\n  } = useState('');\n  useEffect(() => {\n    setErrorText('');\n    setReason(event === null || event === void 0 ? void 0 : event.name);\n    getDataDetails();\n  }, []);\n\n  const getDataDetails = async () => {\n    try {\n      var _res$data, _res$data$data;\n\n      const res = await CalendarApi.getByID(event === null || event === void 0 ? void 0 : event.id);\n\n      if (!!(res !== null && res !== void 0 && (_res$data = res.data) !== null && _res$data !== void 0 && (_res$data$data = _res$data.data) !== null && _res$data$data !== void 0 && _res$data$data.StudentRequest)) {\n        var _res$data2, _res$data2$data;\n\n        setRequest(res === null || res === void 0 ? void 0 : (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : (_res$data2$data = _res$data2.data) === null || _res$data2$data === void 0 ? void 0 : _res$data2$data.StudentRequest);\n      }\n    } catch (error) {\n      showNoti('danger', error === null || error === void 0 ? void 0 : error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const _bookEvent = async Sta => {\n    setLoading(true);\n\n    try {\n      const res = await CalendarApi.update({\n        ID: ID,\n        StudentRequest: request,\n        title: reason\n      });\n\n      if (res.status == 200 || res.status == 204) {\n        showNoti('success', 'Thành công');\n        getData();\n        studentChangeData({\n          ID: ID\n        });\n      }\n    } catch (error) {\n      showNoti('danger', error === null || error === void 0 ? void 0 : error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const content = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-100 wrap-calendar-x\",\n      style: {\n        minWidth: 350\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-2\",\n        children: \"Nh\\u1EADp ti\\xEAu \\u0111\\u1EC1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(TextArea, {\n        value: reason,\n        onChange: e => setReason(e.target.value),\n        className: \"ant-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-2 mt-3\",\n        children: \"Nh\\u1EADp y\\xEAu c\\u1EA7u\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(TextArea, {\n        value: request,\n        onChange: e => setRequest(e.target.value),\n        className: \"ant-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => _bookEvent(3),\n        size: \"middle\",\n        className: \"btn-primary w-100 mt-3\",\n        children: [\"L\\u01B0u l\\u1EA1i \", loading && /*#__PURE__*/_jsxDEV(Spin, {\n          className: \"ml-2\",\n          size: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 26\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 4\n    }, this);\n  };\n\n  const isTeach = () => {\n    return !!userInformation && (userInformation.RoleID == 1 || userInformation.RoleID == 2) ? true : false;\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: !isTeach() && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrap-calendar-x\",\n      style: {\n        zIndex: 999\n      },\n      children: Status == 3 && /*#__PURE__*/_jsxDEV(Popover, {\n        content: content,\n        title: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontWeight: 'bold'\n          },\n          children: `Cập nhật: ${title}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 15\n        }, this),\n        trigger: \"hover\",\n        placement: \"rightTop\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          size: \"middle\",\n          className: \"btn-warning w-100 mt-2 shadow\",\n          children: [\"C\\u1EADp nh\\u1EADt \", loading && /*#__PURE__*/_jsxDEV(Spin, {\n            className: \"ml-2\",\n            size: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 30\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 8\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n};\n\nexport default UpdateRequest;","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/CourseCalendar/update-request.tsx"],"names":["Button","Input","Popover","Spin","moment","React","useState","useEffect","useWrap","CalendarApi","TextArea","locale","UpdateRequest","props","title","ID","getData","Status","event","studentChangeData","showNoti","userInformation","loading","setLoading","errorText","setErrorText","reason","setReason","request","setRequest","name","getDataDetails","res","getByID","id","data","StudentRequest","error","message","_bookEvent","Sta","update","status","content","minWidth","e","target","value","isTeach","RoleID","zIndex","fontWeight"],"mappings":"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","sourcesContent":["import { Button, Input, Popover, Spin } from 'antd'\r\nimport moment from 'moment'\r\nimport React, { useState, useEffect } from 'react'\r\nimport 'react-big-calendar/lib/css/react-big-calendar.css'\r\nimport { useWrap } from '~/context/wrap'\r\nimport _ from '~/appConfig'\r\nimport { CalendarApi } from '~/apiBase/Calendar/calendar'\r\n\r\nconst { TextArea } = Input\r\nmoment.locale('vi')\r\n\r\nconst UpdateRequest = (props: any) => {\r\n\tconst { title, ID, getData, Status, event, studentChangeData } = props\r\n\tconst { showNoti, userInformation } = useWrap()\r\n\r\n\tconst [loading, setLoading] = useState<boolean>(false)\r\n\tconst [errorText, setErrorText] = useState<any>('')\r\n\tconst [reason, setReason] = useState<any>('')\r\n\tconst [request, setRequest] = useState<any>('')\r\n\r\n\tuseEffect(() => {\r\n\t\tsetErrorText('')\r\n\t\tsetReason(event?.name)\r\n\t\tgetDataDetails()\r\n\t}, [])\r\n\r\n\tconst getDataDetails = async () => {\r\n\t\ttry {\r\n\t\t\tconst res: any = await CalendarApi.getByID(event?.id)\r\n\t\t\tif (!!res?.data?.data?.StudentRequest) {\r\n\t\t\t\tsetRequest(res?.data?.data?.StudentRequest)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error?.message)\r\n\t\t} finally {\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst _bookEvent = async (Sta: number) => {\r\n\t\tsetLoading(true)\r\n\r\n\t\ttry {\r\n\t\t\tconst res: any = await CalendarApi.update({ ID: ID, StudentRequest: request, title: reason })\r\n\t\t\tif (res.status == 200 || res.status == 204) {\r\n\t\t\t\tshowNoti('success', 'Thành công')\r\n\t\t\t\tgetData()\r\n\t\t\t\tstudentChangeData({ ID: ID })\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error?.message)\r\n\t\t} finally {\r\n\t\t\tsetLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst content = () => {\r\n\t\treturn (\r\n\t\t\t<div className=\"w-100 wrap-calendar-x\" style={{ minWidth: 350 }}>\r\n\t\t\t\t<div className=\"mb-2\">Nhập tiêu đề</div>\r\n\t\t\t\t<TextArea value={reason} onChange={(e: any) => setReason(e.target.value)} className=\"ant-input\" />\r\n\r\n\t\t\t\t<div className=\"mb-2 mt-3\">Nhập yêu cầu</div>\r\n\t\t\t\t<TextArea value={request} onChange={(e: any) => setRequest(e.target.value)} className=\"ant-input\" />\r\n\r\n\t\t\t\t<Button onClick={() => _bookEvent(3)} size=\"middle\" className=\"btn-primary w-100 mt-3\">\r\n\t\t\t\t\tLưu lại {loading && <Spin className=\"ml-2\" size=\"small\" />}\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst isTeach = () => {\r\n\t\treturn !!userInformation && (userInformation.RoleID == 1 || userInformation.RoleID == 2) ? true : false\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{!isTeach() && (\r\n\t\t\t\t<div className=\"wrap-calendar-x\" style={{ zIndex: 999 }}>\r\n\t\t\t\t\t{Status == 3 && (\r\n\t\t\t\t\t\t<Popover\r\n\t\t\t\t\t\t\tcontent={content}\r\n\t\t\t\t\t\t\ttitle={<div style={{ fontWeight: 'bold' }}>{`Cập nhật: ${title}`}</div>}\r\n\t\t\t\t\t\t\ttrigger=\"hover\"\r\n\t\t\t\t\t\t\tplacement=\"rightTop\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Button size=\"middle\" className=\"btn-warning w-100 mt-2 shadow\">\r\n\t\t\t\t\t\t\t\tCập nhật {loading && <Spin className=\"ml-2\" size=\"small\" />}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default UpdateRequest\r\n"]},"metadata":{},"sourceType":"module"}