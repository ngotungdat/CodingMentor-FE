{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\QuestionBank\\\\CreateQuestionForm.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { AppstoreAddOutlined, FormOutlined, PlusOutlined } from '@ant-design/icons';\nimport { Drawer, Modal, Spin, Tooltip } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { Edit, Plus } from 'react-feather';\nimport { exerciseGroupApi } from '~/apiBase';\nimport { useWrap } from '~/context/wrap';\nimport ChoiceForm from './QuestionFormType/ChoiceForm';\nimport DragForm from './QuestionFormType/DragForm';\nimport GroupForm from './QuestionFormType/GroupForm';\nimport MapForm from './QuestionFormType/MapForm';\nimport MultipleForm from './QuestionFormType/MultipleForm';\nimport SpeakingForm from './QuestionFormType/SpeakingForm';\nimport TypingForm from './QuestionFormType/TypingForm';\nimport WrittingForm from './QuestionFormType/WrittingForm';\n\nvar CreateQuestionForm = function CreateQuestionForm(props) {\n  _s();\n\n  var questionData = props.questionData,\n      isGroup = props.isGroup,\n      onFetchData = props.onFetchData,\n      handlePopover = props.handlePopover,\n      onEditData = props.onEditData,\n      onAddData = props.onAddData,\n      getActiveID = props.getActiveID,\n      onError = props.onError;\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti;\n\n  var _useState = useState(false),\n      visible = _useState[0],\n      setVisible = _useState[1];\n\n  var _useState2 = useState(false),\n      isSubmit = _useState2[0],\n      setIsSubmit = _useState2[1];\n\n  var _useState3 = useState(false),\n      isLoading = _useState3[0],\n      setIsLoading = _useState3[1];\n\n  var _useState4 = useState(''),\n      titleForm = _useState4[0],\n      setTitleForm = _useState4[1];\n\n  var _useState5 = useState(false),\n      _changeData = _useState5[0],\n      setChangeData = _useState5[1];\n\n  var _useState6 = useState(false),\n      isModalVisible = _useState6[0],\n      setIsModalVisible = _useState6[1];\n\n  var _useState7 = useState({}),\n      question = _useState7[0],\n      setQuestion = _useState7[1];\n\n  var showDrawer = function showDrawer() {\n    if (!!(questionData !== null && questionData !== void 0 && questionData.Level) || !!(questionData !== null && questionData !== void 0 && questionData.Type) || (questionData === null || questionData === void 0 ? void 0 : questionData.Type) !== 0) {\n      setVisible(true);\n    } else {\n      showNoti('danger', 'Bạn phải thêm các thông tin bên phải trước');\n      !!onError && onError('invalidData');\n    }\n  };\n\n  var onClose = function onClose(e) {\n    e.stopPropagation();\n\n    if (_changeData) {\n      setIsModalVisible(true);\n    } else {\n      setVisible(false);\n      setChangeData(false);\n    }\n  }; // ACTION TABLE\n\n\n  var clearID = function clearID() {\n    for (var i = 0; i < question.ExerciseList.length; i++) {\n      question.ExerciseList[i].ExerciseAnswer.forEach(function (item) {\n        if (item.isAdd) {\n          delete item.ID;\n        }\n      });\n    }\n\n    return question;\n  };\n\n  var updateData = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var newData, _res$data, res;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              newData = clearID();\n              console.log('updateData questionData', questionData);\n              console.log('newData', newData);\n              _context.prev = 3;\n              _context.next = 6;\n              return exerciseGroupApi.update(newData);\n\n            case 6:\n              res = _context.sent;\n              showNoti('success', res === null || res === void 0 ? void 0 : (_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.message);\n              _context.next = 14;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](3);\n              console.log(_context.t0);\n              showNoti('danger', (_context.t0 === null || _context.t0 === void 0 ? void 0 : _context.t0.message) || _context.t0);\n\n            case 14:\n              _context.prev = 14;\n              onFetchData();\n              setIsLoading(false);\n              return _context.finish(14);\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[3, 10, 14, 18]]);\n    }));\n\n    return function updateData() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleClose = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.stopPropagation();\n              setIsModalVisible(false);\n              setVisible(false);\n              setChangeData(false);\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleClose(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleCancel = function handleCancel() {\n    setIsModalVisible(false);\n  }; // ON SUBMIT DATA\n\n\n  var onSubmitData = function onSubmitData() {\n    setIsLoading(true);\n    console.log('onSubmitData - questionData:', questionData);\n    console.log('onSubmitData - isSubmit', isSubmit);\n    isSubmit && (questionData === null || questionData === void 0 ? void 0 : questionData.Type) == 3 && updateData();\n    isSubmit && (questionData === null || questionData === void 0 ? void 0 : questionData.Type) == 2 && updateData();\n    !isSubmit && setIsSubmit(true);\n  };\n\n  var onSuccessSubmit = function onSuccessSubmit(data) {\n    if (isSubmit) {\n      setIsSubmit(false);\n      setIsLoading(false);\n      setChangeData(false);\n      questionData.ID ? onEditData(data) : onAddData(data);\n      setVisible(false);\n    }\n  }; // ON EDIT GROUP ITEM\n\n\n  var onEditGroupItem = function onEditGroupItem() {\n    handlePopover();\n    showDrawer();\n  }; // ON ADD DATA TO GROUP\n\n\n  var onAddDataToGroup = function onAddDataToGroup() {\n    handlePopover();\n    showDrawer();\n  }; // RENDER FORM GROUP\n\n\n  var renderFormGroup = function renderFormGroup() {\n    var type = questionData.Type;\n\n    if (type) {\n      switch (type) {\n        default:\n          return /*#__PURE__*/_jsxDEV(GroupForm, {\n            visible: visible,\n            questionData: questionData,\n            isSubmit: isSubmit,\n            changeIsSubmit: onSuccessSubmit,\n            changeData: function changeData() {\n              return !_changeData && setChangeData(true);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 7\n          }, _this);\n      }\n    } else {\n      if (!(isGroup !== null && isGroup !== void 0 && isGroup.status)) {\n        renderFormSingle();\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-weight-bold\",\n          children: \"Vui l\\xF2ng ch\\u1ECDn d\\u1EA1ng c\\xE2u h\\u1ECFi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 12\n        }, _this);\n      }\n    }\n  }; // RENDER FORM SINGLE\n\n\n  var renderFormSingle = function renderFormSingle() {\n    var type = questionData === null || questionData === void 0 ? void 0 : questionData.Type;\n\n    switch (type) {\n      case 0:\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-weight-bold\",\n          children: \"Vui l\\xF2ng ch\\u1ECDn d\\u1EA1ng c\\xE2u h\\u1ECFi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 12\n        }, _this);\n        break;\n\n      case 1:\n        return /*#__PURE__*/_jsxDEV(ChoiceForm, {\n          isGroup: isGroup,\n          visible: visible,\n          questionData: questionData,\n          isSubmit: isSubmit,\n          changeIsSubmit: function changeIsSubmit(data) {\n            return onSuccessSubmit(data);\n          },\n          changeData: function changeData() {\n            return !_changeData && setChangeData(true);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 6\n        }, _this);\n        break;\n\n      case 2:\n        return /*#__PURE__*/_jsxDEV(DragForm, {\n          isGroup: isGroup,\n          visible: visible,\n          questionData: questionData,\n          isSubmit: isSubmit,\n          changeIsSubmit: setIsSubmit,\n          changeData: function changeData() {\n            return !_changeData && setChangeData(true);\n          },\n          onChange: function onChange(e) {\n            return setQuestion(e);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 6\n        }, _this);\n        break;\n\n      case 3:\n        return /*#__PURE__*/_jsxDEV(TypingForm, {\n          isGroup: isGroup,\n          visible: visible,\n          questionData: questionData,\n          isSubmit: isSubmit,\n          changeIsSubmit: setIsSubmit,\n          changeData: function changeData() {\n            return !_changeData && setChangeData(true);\n          },\n          onChange: function onChange(e) {\n            return setQuestion(e);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 6\n        }, _this);\n        break;\n\n      case 4:\n        return /*#__PURE__*/_jsxDEV(MultipleForm, {\n          isGroup: isGroup,\n          visible: visible,\n          questionData: questionData,\n          isSubmit: isSubmit,\n          changeIsSubmit: function changeIsSubmit(data) {\n            return onSuccessSubmit(data);\n          },\n          changeData: function changeData() {\n            return !_changeData && setChangeData(true);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 6\n        }, _this);\n        break;\n\n      case 5:\n        return /*#__PURE__*/_jsxDEV(MapForm, {\n          isGroup: isGroup,\n          visible: visible,\n          questionData: questionData,\n          isSubmit: isSubmit,\n          changeIsSubmit: onSuccessSubmit,\n          changeData: function changeData() {\n            return !_changeData && setChangeData(true);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 6\n        }, _this);\n        break;\n\n      case 6:\n        return /*#__PURE__*/_jsxDEV(WrittingForm, {\n          isGroup: isGroup,\n          visible: visible,\n          questionData: questionData,\n          isSubmit: isSubmit,\n          changeIsSubmit: function changeIsSubmit(data) {\n            return onSuccessSubmit(data);\n          },\n          changeData: function changeData() {\n            return !_changeData && setChangeData(true);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 6\n        }, _this);\n        break;\n\n      case 7:\n        return /*#__PURE__*/_jsxDEV(SpeakingForm, {\n          isGroup: isGroup,\n          visible: visible,\n          questionData: questionData,\n          isSubmit: isSubmit,\n          changeIsSubmit: function changeIsSubmit(data) {\n            return onSuccessSubmit(data);\n          },\n          changeData: function changeData() {\n            return !_changeData && setChangeData(true);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 6\n        }, _this);\n        break;\n\n      default:\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Vui l\\xF2ng ch\\u1ECDn d\\u1EA1ng c\\xE2u h\\u1ECFi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 12\n        }, _this);\n        break;\n    }\n  }; // RETURN TITLE FORM\n\n\n  var renderTitleForm = function renderTitleForm() {\n    var text = '';\n\n    if (questionData !== null && questionData !== void 0 && questionData.ID) {\n      if (!(isGroup !== null && isGroup !== void 0 && isGroup.status)) {\n        text = 'Form sửa câu hỏi';\n      } else {\n        text = 'Form sửa nhóm';\n      }\n    } else {\n      if (isGroup !== null && isGroup !== void 0 && isGroup.status) {\n        text = 'Form tạo nhóm';\n      } else {\n        text = 'Form tạo câu hỏi';\n      }\n    }\n\n    setTitleForm(text);\n    return text;\n  }; // RETURN BUTTON\n\n\n  var renderButton = function renderButton() {\n    if (questionData !== null && questionData !== void 0 && questionData.ID) {\n      if (isGroup !== null && isGroup !== void 0 && isGroup.status) {\n        return /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-icon edit\",\n          onClick: onEditGroupItem,\n          children: [/*#__PURE__*/_jsxDEV(FormOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 7\n          }, _this), \"S\\u1EEDa nh\\xF3m\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 6\n        }, _this);\n      } else {\n        if (questionData.ExerciseList) {\n          return /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-icon add\",\n            onClick: onAddDataToGroup,\n            children: [/*#__PURE__*/_jsxDEV(AppstoreAddOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 8\n            }, _this), questionData.Type == 3 || questionData.Type == 2 ? 'Thêm câu hỏi' : 'Thêm câu hỏi']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 7\n          }, _this);\n        } else {\n          return /*#__PURE__*/_jsxDEV(Tooltip, {\n            title: \"S\\u1EEDa c\\xE2u h\\u1ECFi\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-icon edit\",\n              onClick: showDrawer,\n              children: /*#__PURE__*/_jsxDEV(Edit, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 9\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 8\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 7\n          }, _this);\n        }\n      }\n    } else {\n      if (isGroup !== null && isGroup !== void 0 && isGroup.status) {\n        return /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-success\",\n          onClick: showDrawer,\n          children: [/*#__PURE__*/_jsxDEV(Plus, {\n            className: \"mr-2\",\n            style: {\n              width: '20px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 7\n          }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              display: 'inline-block',\n              verticalAlign: 'middle',\n              lineHeight: '4px'\n            },\n            children: \"T\\u1EA1o nh\\xF3m\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 7\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 6\n        }, _this);\n      } else {\n        if (isGroup !== null && isGroup !== void 0 && isGroup.id) {\n          return /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-icon add\",\n            onClick: onAddDataToGroup,\n            children: [/*#__PURE__*/_jsxDEV(AppstoreAddOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 8\n            }, _this), questionData.Type == 3 || questionData.Type == 2 ? 'Thêm/sửa câu hỏi' : 'Thêm câu hỏi']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 7\n          }, _this);\n        } else {\n          return /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-success btn-have-icon\",\n            onClick: showDrawer,\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"d-flex align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(PlusOutlined, {\n                className: \"mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 9\n              }, _this), \"T\\u1EA1o c\\xE2u h\\u1ECFi\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 8\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 7\n          }, _this);\n        }\n      }\n    }\n  };\n\n  useEffect(function () {\n    if (visible) {\n      renderTitleForm();\n      getActiveID && getActiveID(questionData.ID);\n      return;\n    }\n  }, [visible]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Ch\\xFA \\xFD\",\n      visible: isModalVisible,\n      onOk: handleClose,\n      onCancel: handleCancel,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontWeight: 500,\n          color: '#292929'\n        },\n        children: \"D\\u1EEF li\\u1EC7u n\\xE0y ch\\u01B0a \\u0111\\u01B0\\u1EE3c l\\u01B0u l\\u1EA1i. B\\u1EA1n c\\xF3 mu\\u1ED1n h\\u1EE7y t\\xE1c v\\u1EE5?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 5\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 4\n    }, _this), renderButton(), /*#__PURE__*/_jsxDEV(Drawer, {\n      title: titleForm,\n      placement: \"right\",\n      closable: false,\n      onClose: onClose,\n      visible: visible,\n      width: !(isGroup !== null && isGroup !== void 0 && isGroup.status) && (questionData.Type == 3 || questionData.Type == 2) ? 1300 : 800,\n      footer: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-light mr-2\",\n          onClick: onClose,\n          children: \"H\\u1EE7y t\\xE1c v\\u1EE5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 7\n        }, _this), (questionData === null || questionData === void 0 ? void 0 : questionData.Type) !== 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: function onClick() {\n            return onSubmitData();\n          },\n          children: [\"L\\u01B0u\", isLoading && /*#__PURE__*/_jsxDEV(Spin, {\n            className: \"loading-base\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 23\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 8\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 6\n      }, _this),\n      children: !(isGroup !== null && isGroup !== void 0 && isGroup.status) ? renderFormSingle() : renderFormGroup()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 4\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(CreateQuestionForm, \"kof+zzaD60VbZV+CJg4bX+v41ic=\", false, function () {\n  return [useWrap];\n});\n\n_c = CreateQuestionForm;\nexport default CreateQuestionForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateQuestionForm\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/QuestionBank/CreateQuestionForm.tsx"],"names":["AppstoreAddOutlined","FormOutlined","PlusOutlined","Drawer","Modal","Spin","Tooltip","React","useEffect","useState","Edit","Plus","exerciseGroupApi","useWrap","ChoiceForm","DragForm","GroupForm","MapForm","MultipleForm","SpeakingForm","TypingForm","WrittingForm","CreateQuestionForm","props","questionData","isGroup","onFetchData","handlePopover","onEditData","onAddData","getActiveID","onError","showNoti","visible","setVisible","isSubmit","setIsSubmit","isLoading","setIsLoading","titleForm","setTitleForm","changeData","setChangeData","isModalVisible","setIsModalVisible","question","setQuestion","showDrawer","Level","Type","onClose","e","stopPropagation","clearID","i","ExerciseList","length","ExerciseAnswer","forEach","item","isAdd","ID","updateData","newData","console","log","update","res","data","message","handleClose","handleCancel","onSubmitData","onSuccessSubmit","onEditGroupItem","onAddDataToGroup","renderFormGroup","type","status","renderFormSingle","renderTitleForm","text","renderButton","width","display","verticalAlign","lineHeight","id","fontWeight","color"],"mappings":"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","sourcesContent":["import { AppstoreAddOutlined, FormOutlined, PlusOutlined } from '@ant-design/icons'\r\nimport { Drawer, Modal, Spin, Tooltip } from 'antd'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { Edit, Plus } from 'react-feather'\r\nimport { exerciseGroupApi } from '~/apiBase'\r\nimport { useWrap } from '~/context/wrap'\r\nimport ChoiceForm from './QuestionFormType/ChoiceForm'\r\nimport DragForm from './QuestionFormType/DragForm'\r\nimport GroupForm from './QuestionFormType/GroupForm'\r\nimport MapForm from './QuestionFormType/MapForm'\r\nimport MultipleForm from './QuestionFormType/MultipleForm'\r\nimport SpeakingForm from './QuestionFormType/SpeakingForm'\r\nimport TypingForm from './QuestionFormType/TypingForm'\r\nimport WrittingForm from './QuestionFormType/WrittingForm'\r\n\r\nconst CreateQuestionForm = (props) => {\r\n\tconst { questionData, isGroup, onFetchData, handlePopover, onEditData, onAddData, getActiveID, onError } = props\r\n\r\n\tconst { showNoti } = useWrap()\r\n\r\n\tconst [visible, setVisible] = useState(false)\r\n\tconst [isSubmit, setIsSubmit] = useState(false)\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [titleForm, setTitleForm] = useState('')\r\n\tconst [changeData, setChangeData] = useState(false)\r\n\tconst [isModalVisible, setIsModalVisible] = useState(false)\r\n\tconst [question, setQuestion] = useState<any>({})\r\n\r\n\tconst showDrawer = () => {\r\n\t\tif (!!questionData?.Level || !!questionData?.Type || questionData?.Type !== 0) {\r\n\t\t\tsetVisible(true)\r\n\t\t} else {\r\n\t\t\tshowNoti('danger', 'Bạn phải thêm các thông tin bên phải trước')\r\n\t\t\t!!onError && onError('invalidData')\r\n\t\t}\r\n\t}\r\n\r\n\tconst onClose = (e) => {\r\n\t\te.stopPropagation()\r\n\t\tif (changeData) {\r\n\t\t\tsetIsModalVisible(true)\r\n\t\t} else {\r\n\t\t\tsetVisible(false)\r\n\t\t\tsetChangeData(false)\r\n\t\t}\r\n\t}\r\n\r\n\t// ACTION TABLE\r\n\tconst clearID = () => {\r\n\t\tfor (let i = 0; i < question.ExerciseList.length; i++) {\r\n\t\t\tquestion.ExerciseList[i].ExerciseAnswer.forEach((item: any) => {\r\n\t\t\t\tif (item.isAdd) {\r\n\t\t\t\t\tdelete item.ID\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn question\r\n\t}\r\n\r\n\tconst updateData = async () => {\r\n\t\tlet newData = clearID()\r\n\t\tconsole.log('updateData questionData', questionData)\r\n\t\tconsole.log('newData', newData)\r\n\t\ttry {\r\n\t\t\tconst res: any = await exerciseGroupApi.update(newData)\r\n\t\t\tshowNoti('success', res?.data?.message)\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error)\r\n\t\t\tshowNoti('danger', error?.message || error)\r\n\t\t} finally {\r\n\t\t\tonFetchData()\r\n\t\t\tsetIsLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleClose = async (e) => {\r\n\t\te.stopPropagation()\r\n\t\tsetIsModalVisible(false)\r\n\t\tsetVisible(false)\r\n\t\tsetChangeData(false)\r\n\t}\r\n\r\n\tconst handleCancel = () => {\r\n\t\tsetIsModalVisible(false)\r\n\t}\r\n\r\n\t// ON SUBMIT DATA\r\n\tconst onSubmitData = () => {\r\n\t\tsetIsLoading(true)\r\n\t\tconsole.log('onSubmitData - questionData:', questionData)\r\n\t\tconsole.log('onSubmitData - isSubmit', isSubmit)\r\n\t\tisSubmit && questionData?.Type == 3 && updateData()\r\n\t\tisSubmit && questionData?.Type == 2 && updateData()\r\n\t\t!isSubmit && setIsSubmit(true)\r\n\t}\r\n\r\n\tconst onSuccessSubmit = (data) => {\r\n\t\tif (isSubmit) {\r\n\t\t\tsetIsSubmit(false)\r\n\t\t\tsetIsLoading(false)\r\n\t\t\tsetChangeData(false)\r\n\t\t\tquestionData.ID ? onEditData(data) : onAddData(data)\r\n\t\t\tsetVisible(false)\r\n\t\t}\r\n\t}\r\n\r\n\t// ON EDIT GROUP ITEM\r\n\tconst onEditGroupItem = () => {\r\n\t\thandlePopover()\r\n\t\tshowDrawer()\r\n\t}\r\n\r\n\t// ON ADD DATA TO GROUP\r\n\tconst onAddDataToGroup = () => {\r\n\t\thandlePopover()\r\n\t\tshowDrawer()\r\n\t}\r\n\r\n\t// RENDER FORM GROUP\r\n\tconst renderFormGroup = () => {\r\n\t\tlet type = questionData.Type\r\n\t\tif (type) {\r\n\t\t\tswitch (type) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<GroupForm\r\n\t\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\t\tquestionData={questionData}\r\n\t\t\t\t\t\t\tisSubmit={isSubmit}\r\n\t\t\t\t\t\t\tchangeIsSubmit={onSuccessSubmit}\r\n\t\t\t\t\t\t\tchangeData={() => !changeData && setChangeData(true)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (!isGroup?.status) {\r\n\t\t\t\trenderFormSingle()\r\n\t\t\t} else {\r\n\t\t\t\treturn <p className=\"font-weight-bold\">Vui lòng chọn dạng câu hỏi</p>\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// RENDER FORM SINGLE\r\n\tconst renderFormSingle = () => {\r\n\t\tlet type = questionData?.Type\r\n\t\tswitch (type) {\r\n\t\t\tcase 0:\r\n\t\t\t\treturn <p className=\"font-weight-bold\">Vui lòng chọn dạng câu hỏi</p>\r\n\t\t\t\tbreak\r\n\t\t\tcase 1:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<ChoiceForm\r\n\t\t\t\t\t\tisGroup={isGroup}\r\n\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\tquestionData={questionData}\r\n\t\t\t\t\t\tisSubmit={isSubmit}\r\n\t\t\t\t\t\tchangeIsSubmit={(data: any) => onSuccessSubmit(data)}\r\n\t\t\t\t\t\tchangeData={() => !changeData && setChangeData(true)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)\r\n\t\t\t\tbreak\r\n\t\t\tcase 2:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<DragForm\r\n\t\t\t\t\t\tisGroup={isGroup}\r\n\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\tquestionData={questionData}\r\n\t\t\t\t\t\tisSubmit={isSubmit}\r\n\t\t\t\t\t\tchangeIsSubmit={setIsSubmit}\r\n\t\t\t\t\t\tchangeData={() => !changeData && setChangeData(true)}\r\n\t\t\t\t\t\tonChange={(e: any) => setQuestion(e)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)\r\n\t\t\t\tbreak\r\n\t\t\tcase 3:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<TypingForm\r\n\t\t\t\t\t\tisGroup={isGroup}\r\n\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\tquestionData={questionData}\r\n\t\t\t\t\t\tisSubmit={isSubmit}\r\n\t\t\t\t\t\tchangeIsSubmit={setIsSubmit}\r\n\t\t\t\t\t\tchangeData={() => !changeData && setChangeData(true)}\r\n\t\t\t\t\t\tonChange={(e: any) => setQuestion(e)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)\r\n\t\t\t\tbreak\r\n\t\t\tcase 4:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<MultipleForm\r\n\t\t\t\t\t\tisGroup={isGroup}\r\n\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\tquestionData={questionData}\r\n\t\t\t\t\t\tisSubmit={isSubmit}\r\n\t\t\t\t\t\tchangeIsSubmit={(data: any) => onSuccessSubmit(data)}\r\n\t\t\t\t\t\tchangeData={() => !changeData && setChangeData(true)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)\r\n\t\t\t\tbreak\r\n\t\t\tcase 5:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<MapForm\r\n\t\t\t\t\t\tisGroup={isGroup}\r\n\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\tquestionData={questionData}\r\n\t\t\t\t\t\tisSubmit={isSubmit}\r\n\t\t\t\t\t\tchangeIsSubmit={onSuccessSubmit}\r\n\t\t\t\t\t\tchangeData={() => !changeData && setChangeData(true)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)\r\n\t\t\t\tbreak\r\n\t\t\tcase 6:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<WrittingForm\r\n\t\t\t\t\t\tisGroup={isGroup}\r\n\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\tquestionData={questionData}\r\n\t\t\t\t\t\tisSubmit={isSubmit}\r\n\t\t\t\t\t\tchangeIsSubmit={(data: any) => onSuccessSubmit(data)}\r\n\t\t\t\t\t\tchangeData={() => !changeData && setChangeData(true)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)\r\n\t\t\t\tbreak\r\n\t\t\tcase 7:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<SpeakingForm\r\n\t\t\t\t\t\tisGroup={isGroup}\r\n\t\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\t\tquestionData={questionData}\r\n\t\t\t\t\t\tisSubmit={isSubmit}\r\n\t\t\t\t\t\tchangeIsSubmit={(data: any) => onSuccessSubmit(data)}\r\n\t\t\t\t\t\tchangeData={() => !changeData && setChangeData(true)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\treturn <p>Vui lòng chọn dạng câu hỏi</p>\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t}\r\n\r\n\t// RETURN TITLE FORM\r\n\tconst renderTitleForm = () => {\r\n\t\tlet text = ''\r\n\t\tif (questionData?.ID) {\r\n\t\t\tif (!isGroup?.status) {\r\n\t\t\t\ttext = 'Form sửa câu hỏi'\r\n\t\t\t} else {\r\n\t\t\t\ttext = 'Form sửa nhóm'\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (isGroup?.status) {\r\n\t\t\t\ttext = 'Form tạo nhóm'\r\n\t\t\t} else {\r\n\t\t\t\ttext = 'Form tạo câu hỏi'\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsetTitleForm(text)\r\n\t\treturn text\r\n\t}\r\n\r\n\t// RETURN BUTTON\r\n\tconst renderButton = () => {\r\n\t\tif (questionData?.ID) {\r\n\t\t\tif (isGroup?.status) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<button className=\"btn btn-icon edit\" onClick={onEditGroupItem}>\r\n\t\t\t\t\t\t<FormOutlined />\r\n\t\t\t\t\t\tSửa nhóm\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)\r\n\t\t\t} else {\r\n\t\t\t\tif (questionData.ExerciseList) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<button className=\"btn btn-icon add\" onClick={onAddDataToGroup}>\r\n\t\t\t\t\t\t\t<AppstoreAddOutlined />\r\n\t\t\t\t\t\t\t{questionData.Type == 3 || questionData.Type == 2 ? 'Thêm câu hỏi' : 'Thêm câu hỏi'}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Tooltip title=\"Sửa câu hỏi\">\r\n\t\t\t\t\t\t\t<button className=\"btn btn-icon edit\" onClick={showDrawer}>\r\n\t\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (isGroup?.status) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<button className=\"btn btn-success\" onClick={showDrawer}>\r\n\t\t\t\t\t\t<Plus className=\"mr-2\" style={{ width: '20px' }} />\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tdisplay: 'inline-block',\r\n\t\t\t\t\t\t\t\tverticalAlign: 'middle',\r\n\t\t\t\t\t\t\t\tlineHeight: '4px'\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tTạo nhóm\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)\r\n\t\t\t} else {\r\n\t\t\t\tif (isGroup?.id) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<button className=\"btn btn-icon add\" onClick={onAddDataToGroup}>\r\n\t\t\t\t\t\t\t<AppstoreAddOutlined />\r\n\t\t\t\t\t\t\t{questionData.Type == 3 || questionData.Type == 2 ? 'Thêm/sửa câu hỏi' : 'Thêm câu hỏi'}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<button className=\"btn btn-success btn-have-icon\" onClick={showDrawer}>\r\n\t\t\t\t\t\t\t<span className=\"d-flex align-items-center\">\r\n\t\t\t\t\t\t\t\t<PlusOutlined className=\"mr-1\" />\r\n\t\t\t\t\t\t\t\tTạo câu hỏi\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (visible) {\r\n\t\t\trenderTitleForm()\r\n\t\t\tgetActiveID && getActiveID(questionData.ID)\r\n\t\t\treturn\r\n\t\t}\r\n\t}, [visible])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Modal title=\"Chú ý\" visible={isModalVisible} onOk={handleClose} onCancel={handleCancel}>\r\n\t\t\t\t<p style={{ fontWeight: 500, color: '#292929' }}>Dữ liệu này chưa được lưu lại. Bạn có muốn hủy tác vụ?</p>\r\n\t\t\t</Modal>\r\n\t\t\t{renderButton()}\r\n\t\t\t<Drawer\r\n\t\t\t\ttitle={titleForm}\r\n\t\t\t\tplacement=\"right\"\r\n\t\t\t\tclosable={false}\r\n\t\t\t\tonClose={onClose}\r\n\t\t\t\tvisible={visible}\r\n\t\t\t\twidth={!isGroup?.status && (questionData.Type == 3 || questionData.Type == 2) ? 1300 : 800}\r\n\t\t\t\tfooter={\r\n\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t<button className=\"btn btn-light mr-2\" onClick={onClose}>\r\n\t\t\t\t\t\t\tHủy tác vụ\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t{questionData?.Type !== 0 && (\r\n\t\t\t\t\t\t\t<button className=\"btn btn-primary\" onClick={() => onSubmitData()}>\r\n\t\t\t\t\t\t\t\tLưu\r\n\t\t\t\t\t\t\t\t{isLoading && <Spin className=\"loading-base\" />}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t{!isGroup?.status ? renderFormSingle() : renderFormGroup()}\r\n\r\n\t\t\t\t{/* <GroupFormTyping\r\n          visible={visible}\r\n          questionData={questionData}\r\n          isSubmit={isSubmit}\r\n          changeIsSubmit={onSuccessSubmit}\r\n        /> */}\r\n\t\t\t</Drawer>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default CreateQuestionForm\r\n"]},"metadata":{},"sourceType":"module"}