{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\Sales\\\\SalerList\\\\SalerList.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport moment from 'moment';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { areaApi, branchApi, districtApi, staffApi, wardApi } from '~/apiBase';\nimport SortBox from '~/components/Elements/SortBox';\nimport PowerTable from '~/components/PowerTable';\nimport FilterColumn from '~/components/Tables/FilterColumn';\nimport { useWrap } from '~/context/wrap';\nimport { fmSelectArr } from '~/utils/functions';\nimport TeacherFilterForm from '../../Teacher/Teacher/TeacherFilterForm';\nimport SalerListForm from './SalerListForm';\nconst defaultAreaList = {\n  areaList: [],\n  districtList: [],\n  wardList: []\n};\nconst baseField = {\n  pageIndex: 1,\n  sort: 1,\n  sortType: false,\n  AreaID: '',\n  FullNameUnicode: '',\n  fromDate: '',\n  toDate: '',\n  StatusID: null,\n  RoleID: 6\n};\nconst optionGenderList = [{\n  title: 'Nữ',\n  value: 0\n}, {\n  title: 'Nam',\n  value: 1\n}, {\n  title: 'Khác',\n  value: 2\n}];\nconst optionStatusList = [{\n  title: 'Hoạt động',\n  value: 0\n}, {\n  title: 'Khóa',\n  value: 1\n}];\nconst sortOptionList = [{\n  dataSort: {\n    sort: 0,\n    sortType: true\n  },\n  value: 1,\n  text: 'Tên tăng dần'\n}, {\n  dataSort: {\n    sort: 0,\n    sortType: false\n  },\n  value: 2,\n  text: 'Tên giảm dần'\n}, {\n  dataSort: {\n    sort: 2,\n    sortType: true\n  },\n  value: 3,\n  text: 'Ngày nhận việc tăng dần'\n}, {\n  dataSort: {\n    sort: 2,\n    sortType: false\n  },\n  value: 4,\n  text: 'Ngày nhận việc giảm dần'\n}];\n\nconst SalerList = () => {\n  const {\n    0: salerList,\n    1: setSalerList\n  } = useState([]);\n  const {\n    0: optionAreaSystemList,\n    1: setOptionAreaSystemList\n  } = useState(defaultAreaList);\n  const {\n    0: branchList,\n    1: setBranchList\n  } = useState([]);\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState({\n    type: '',\n    status: false\n  });\n  const {\n    0: totalPage,\n    1: setTotalPage\n  } = useState(null);\n  const {\n    showNoti,\n    pageSize\n  } = useWrap();\n  const {\n    0: activeColumnSearch,\n    1: setActiveColumnSearch\n  } = useState('');\n\n  const listFieldInit = _objectSpread(_objectSpread({}, baseField), {}, {\n    pageSize: pageSize\n  });\n\n  let refValue = useRef({\n    sort: 1,\n    sortType: false,\n    pageIndex: 1,\n    pageSize: pageSize\n  });\n  const {\n    0: filters,\n    1: setFilters\n  } = useState(listFieldInit); // FILTER\n\n  const onFilter = obj => {\n    setFilters(_objectSpread(_objectSpread(_objectSpread({}, listFieldInit), refValue.current), {}, {\n      pageIndex: 1,\n      fromDate: moment(obj.fromDate).format('YYYY/MM/DD'),\n      toDate: moment(obj.toDate).format('YYYY/MM/DD')\n    }));\n  }; // PAGINATION\n\n\n  const getPagination = (pageIndex, pageSize) => {\n    if (!pageSize) pageSize = 10;\n    refValue.current = _objectSpread(_objectSpread({}, refValue.current), {}, {\n      pageSize,\n      pageIndex\n    });\n    setFilters(_objectSpread(_objectSpread({}, filters), refValue.current));\n  }; // SORT\n\n\n  const onSort = option => {\n    refValue.current = _objectSpread(_objectSpread({}, refValue.current), {}, {\n      sort: option.title.sort,\n      sortType: option.title.sortType\n    });\n    setFilters(_objectSpread(_objectSpread({}, listFieldInit), refValue.current));\n  }; // RESET SEARCH\n\n\n  const onResetSearch = () => {\n    setActiveColumnSearch('');\n    setFilters(_objectSpread(_objectSpread({}, listFieldInit), {}, {\n      pageSize: refValue.current.pageSize\n    }));\n  }; // ACTION SEARCH\n\n\n  const onSearch = (valueSearch, dataIndex) => {\n    setActiveColumnSearch(dataIndex);\n    setFilters(_objectSpread(_objectSpread(_objectSpread({}, listFieldInit), refValue.current), {}, {\n      pageIndex: 1,\n      [dataIndex]: valueSearch\n    }));\n  }; // GET AREA\n\n\n  const fetchAreaList = async () => {\n    try {\n      const res = await areaApi.getAll({\n        selectAll: true\n      });\n\n      if (res.status === 200 && res.data.totalRow && res.data.data.length) {\n        const newAreaList = fmSelectArr(res.data.data, 'AreaName', 'AreaID');\n        setOptionAreaSystemList(_objectSpread(_objectSpread({}, optionAreaSystemList), {}, {\n          areaList: newAreaList\n        }));\n      }\n    } catch (error) {}\n  };\n\n  useEffect(() => {\n    fetchAreaList();\n  }, []); // DISTRICT BY AREA\n\n  const fetchDistrictByAreaID = async id => {\n    try {\n      const res = await districtApi.getAll({\n        AreaID: id\n      });\n\n      if (res.status === 200 && res.data.totalRow && res.data.data.length) {\n        const newDistrictList = fmSelectArr(res.data.data, 'DistrictName', 'ID');\n        setOptionAreaSystemList(_objectSpread(_objectSpread({}, optionAreaSystemList), {}, {\n          districtList: newDistrictList,\n          wardList: []\n        }));\n      }\n    } catch (error) {}\n  }; // WARD BY DISTRICT\n\n\n  const fetchWardByDistrictID = async id => {\n    setIsLoading({\n      type: 'FETCH_WARD_BY_DISTRICT',\n      status: true\n    });\n\n    try {\n      const res = await wardApi.getAll({\n        DistrictID: id\n      });\n\n      if (res.status === 200 && res.data.totalRow && res.data.data.length) {\n        const newWardList = fmSelectArr(res.data.data, 'WardName', 'ID');\n        setOptionAreaSystemList(_objectSpread(_objectSpread({}, optionAreaSystemList), {}, {\n          wardList: newWardList\n        }));\n      }\n    } catch (error) {} finally {\n      setIsLoading({\n        type: 'FETCH_WARD_BY_DISTRICT',\n        status: false\n      });\n    }\n  }; // BRANCH BY AREA\n\n\n  const fetchBranch = async id => {\n    setIsLoading({\n      type: 'FETCH_DATA_BY_AREA',\n      status: true\n    });\n\n    try {\n      let res = await branchApi.getAll({\n        pageIndex: 1,\n        pageSize: pageSize\n      });\n\n      if (res.status === 200 && res.data.totalRow) {\n        const newBranchList = fmSelectArr(res.data.data, 'BranchName', 'ID');\n        setBranchList(newBranchList);\n      }\n\n      if (res.status === 204) {\n        setBranchList([]);\n      }\n    } catch (error) {} finally {\n      setIsLoading({\n        type: 'FETCH_DATA_BY_AREA',\n        status: false\n      });\n    }\n  }; // GET DATA IN FIRST TIME\n\n\n  const fetchSalerList = async () => {\n    setIsLoading({\n      type: 'GET_ALL',\n      status: true\n    });\n\n    try {\n      let res = await staffApi.getAll(filters);\n\n      if (res.status === 200) {\n        if (res.data.totalRow && res.data.data.length) {\n          setSalerList(res.data.data);\n          setTotalPage(res.data.totalRow);\n        }\n      }\n\n      if (res.status === 204) {\n        setSalerList([]);\n        setTotalPage(0);\n      }\n    } catch (error) {\n      showNoti('danger', error.message);\n    } finally {\n      setIsLoading({\n        type: 'GET_ALL',\n        status: false\n      });\n    }\n  };\n\n  useEffect(() => {\n    fetchSalerList();\n  }, [filters]); // CREATE\n\n  const onCreateTeacher = async data => {\n    try {\n      setIsLoading({\n        type: 'ADD_DATA',\n        status: true\n      });\n      const res = await staffApi.add(data);\n\n      if (res.status === 200) {\n        showNoti('success', res.data.message);\n        onResetSearch();\n        return true;\n      }\n    } catch (error) {\n      showNoti('danger', error.message);\n    } finally {\n      setIsLoading({\n        type: 'ADD_DATA',\n        status: false\n      });\n    }\n  }; // UPDATE\n\n\n  const onUpdateTeacher = async (newObj, idx) => {\n    setIsLoading({\n      type: 'ADD_DATA',\n      status: true\n    });\n    let res;\n\n    try {\n      const newSalerAPI = _objectSpread(_objectSpread({}, newObj), {}, {\n        Branch: newObj.Branch.join(',')\n      });\n\n      res = await staffApi.update(newSalerAPI);\n\n      if (res.status === 200) {\n        const newSalerList = [...salerList];\n        const newBranch = branchList.filter(ob => newObj.Branch.some(nb => nb === ob.value)).map(b => ({\n          ID: b.value,\n          BranchName: b.title\n        }));\n        newSalerList.splice(idx, 1, _objectSpread(_objectSpread({}, newObj), {}, {\n          Branch: newBranch\n        }));\n        setSalerList(newSalerList);\n        showNoti('success', res.data.message);\n      }\n    } catch (error) {\n      showNoti('danger', error.message);\n    } finally {\n      setIsLoading({\n        type: 'ADD_DATA',\n        status: false\n      });\n      return res;\n    }\n  };\n\n  const columns = [_objectSpread(_objectSpread({\n    title: 'Họ và tên',\n    dataIndex: 'FullNameUnicode'\n  }, FilterColumn('FullNameUnicode', onSearch, onResetSearch, 'text')), {}, {\n    className: activeColumnSearch === 'FullNameUnicode' ? 'active-column-search' : '',\n    render: text => /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"font-weight-black\",\n      children: text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 22\n    }, this)\n  }), _objectSpread(_objectSpread({\n    title: 'Tỉnh/Thành phố',\n    dataIndex: 'AreaName'\n  }, FilterColumn('AreaID', onSearch, onResetSearch, 'select', optionAreaSystemList.areaList)), {}, {\n    className: activeColumnSearch === 'AreaID' ? 'active-column-search' : '',\n    render: text => /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"font-weight-black\",\n      children: text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 22\n    }, this)\n  }), {\n    title: 'Giới tính',\n    dataIndex: 'Gender',\n    render: genderID => optionGenderList.find(o => o.value === genderID).title\n  }, {\n    title: 'SĐT',\n    dataIndex: 'Mobile'\n  }, {\n    title: 'Email',\n    dataIndex: 'Email'\n  }, {\n    title: 'Ngày nhận việc',\n    dataIndex: 'Jobdate',\n    render: date => date && moment(date).format('DD/MM/YYYY')\n  }, _objectSpread(_objectSpread({\n    title: 'Trạng thái',\n    dataIndex: 'StatusID',\n    width: 140\n  }, FilterColumn('StatusID', onSearch, onResetSearch, 'select', optionStatusList)), {}, {\n    render: status => status ? /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"tag gray\",\n      children: \"Kh\\xF3a\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 34\n    }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"tag green\",\n      children: \"Ho\\u1EA1t \\u0111\\u1ED9ng\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 75\n    }, this)\n  }), {\n    align: 'center',\n    render: (value, _, idx) => /*#__PURE__*/_jsxDEV(SalerListForm, {\n      isLoading: isLoading,\n      isUpdate: true,\n      updateObj: value,\n      optionStatusList: optionStatusList,\n      optionGenderList: optionGenderList,\n      optionAreaSystemList: optionAreaSystemList,\n      handleFetchDistrict: fetchDistrictByAreaID,\n      handleFetchWard: fetchWardByDistrictID,\n      optionBranchList: branchList,\n      handleFetchBranch: fetchBranch,\n      handleSubmit: onUpdateTeacher\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 5\n    }, this)\n  }];\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(PowerTable, {\n      currentPage: filters.pageIndex,\n      totalPage: totalPage,\n      getPagination: getPagination,\n      loading: isLoading,\n      addClass: \"basic-header\",\n      columns: columns,\n      dataSource: salerList,\n      TitlePage: \"Danh s\\xE1ch t\\u01B0 v\\u1EA5n vi\\xEAn\",\n      TitleCard: /*#__PURE__*/_jsxDEV(SalerListForm, {\n        isLoading: isLoading,\n        optionStatusList: optionStatusList,\n        optionGenderList: optionGenderList,\n        optionAreaSystemList: optionAreaSystemList,\n        handleFetchDistrict: fetchDistrictByAreaID,\n        handleFetchWard: fetchWardByDistrictID,\n        optionBranchList: branchList,\n        handleFetchBranch: fetchBranch,\n        handleSubmit: onCreateTeacher\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 6\n      }, this),\n      Extra: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"extra-table\",\n        children: [/*#__PURE__*/_jsxDEV(TeacherFilterForm, {\n          handleFilter: onFilter,\n          handleResetFilter: onResetSearch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(SortBox, {\n          width: 190,\n          handleSort: onSort,\n          dataOption: sortOptionList\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 4\n    }, this)\n  }, void 0, false);\n};\n\nexport default SalerList;","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/Sales/SalerList/SalerList.tsx"],"names":["moment","React","useEffect","useRef","useState","areaApi","branchApi","districtApi","staffApi","wardApi","SortBox","PowerTable","FilterColumn","useWrap","fmSelectArr","TeacherFilterForm","SalerListForm","defaultAreaList","areaList","districtList","wardList","baseField","pageIndex","sort","sortType","AreaID","FullNameUnicode","fromDate","toDate","StatusID","RoleID","optionGenderList","title","value","optionStatusList","sortOptionList","dataSort","text","SalerList","salerList","setSalerList","optionAreaSystemList","setOptionAreaSystemList","branchList","setBranchList","isLoading","setIsLoading","type","status","totalPage","setTotalPage","showNoti","pageSize","activeColumnSearch","setActiveColumnSearch","listFieldInit","refValue","filters","setFilters","onFilter","obj","current","format","getPagination","onSort","option","onResetSearch","onSearch","valueSearch","dataIndex","fetchAreaList","res","getAll","selectAll","data","totalRow","length","newAreaList","error","fetchDistrictByAreaID","id","newDistrictList","fetchWardByDistrictID","DistrictID","newWardList","fetchBranch","newBranchList","fetchSalerList","message","onCreateTeacher","add","onUpdateTeacher","newObj","idx","newSalerAPI","Branch","join","update","newSalerList","newBranch","filter","ob","some","nb","map","b","ID","BranchName","splice","columns","className","render","genderID","find","o","date","width","align","_"],"mappings":"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","sourcesContent":["import moment from 'moment'\r\nimport React, { useEffect, useRef, useState } from 'react'\r\nimport { areaApi, branchApi, districtApi, staffApi, wardApi } from '~/apiBase'\r\nimport SortBox from '~/components/Elements/SortBox'\r\nimport PowerTable from '~/components/PowerTable'\r\nimport FilterColumn from '~/components/Tables/FilterColumn'\r\nimport { useWrap } from '~/context/wrap'\r\nimport { fmSelectArr } from '~/utils/functions'\r\nimport TeacherFilterForm from '../../Teacher/Teacher/TeacherFilterForm'\r\nimport SalerListForm from './SalerListForm'\r\n\r\ntype IAreaList = {\r\n\tareaList: IOptionCommon[]\r\n\tdistrictList: IOptionCommon[]\r\n\twardList: IOptionCommon[]\r\n}\r\n\r\nconst defaultAreaList = {\r\n\tareaList: [],\r\n\tdistrictList: [],\r\n\twardList: []\r\n}\r\n\r\nconst baseField = {\r\n\tpageIndex: 1,\r\n\tsort: 1,\r\n\tsortType: false,\r\n\tAreaID: '',\r\n\tFullNameUnicode: '',\r\n\tfromDate: '',\r\n\ttoDate: '',\r\n\tStatusID: null,\r\n\tRoleID: 6\r\n}\r\n\r\nconst optionGenderList = [\r\n\t{ title: 'Nữ', value: 0 },\r\n\t{ title: 'Nam', value: 1 },\r\n\t{ title: 'Khác', value: 2 }\r\n]\r\n\r\nconst optionStatusList = [\r\n\t{ title: 'Hoạt động', value: 0 },\r\n\t{ title: 'Khóa', value: 1 }\r\n]\r\n\r\nconst sortOptionList = [\r\n\t{\r\n\t\tdataSort: {\r\n\t\t\tsort: 0,\r\n\t\t\tsortType: true\r\n\t\t},\r\n\t\tvalue: 1,\r\n\t\ttext: 'Tên tăng dần'\r\n\t},\r\n\t{\r\n\t\tdataSort: {\r\n\t\t\tsort: 0,\r\n\t\t\tsortType: false\r\n\t\t},\r\n\t\tvalue: 2,\r\n\t\ttext: 'Tên giảm dần'\r\n\t},\r\n\t{\r\n\t\tdataSort: {\r\n\t\t\tsort: 2,\r\n\t\t\tsortType: true\r\n\t\t},\r\n\t\tvalue: 3,\r\n\t\ttext: 'Ngày nhận việc tăng dần'\r\n\t},\r\n\t{\r\n\t\tdataSort: {\r\n\t\t\tsort: 2,\r\n\t\t\tsortType: false\r\n\t\t},\r\n\t\tvalue: 4,\r\n\t\ttext: 'Ngày nhận việc giảm dần'\r\n\t}\r\n]\r\n\r\nconst SalerList = () => {\r\n\tconst [salerList, setSalerList] = useState<IStaff[]>([])\r\n\tconst [optionAreaSystemList, setOptionAreaSystemList] = useState<IAreaList>(defaultAreaList)\r\n\tconst [branchList, setBranchList] = useState([])\r\n\tconst [isLoading, setIsLoading] = useState({ type: '', status: false })\r\n\tconst [totalPage, setTotalPage] = useState(null)\r\n\tconst { showNoti, pageSize } = useWrap()\r\n\tconst [activeColumnSearch, setActiveColumnSearch] = useState('')\r\n\r\n\tconst listFieldInit = { ...baseField, pageSize: pageSize }\r\n\r\n\tlet refValue = useRef({ sort: 1, sortType: false, pageIndex: 1, pageSize: pageSize })\r\n\r\n\tconst [filters, setFilters] = useState(listFieldInit)\r\n\r\n\t// FILTER\r\n\tconst onFilter = (obj) => {\r\n\t\tsetFilters({\r\n\t\t\t...listFieldInit,\r\n\t\t\t...refValue.current,\r\n\t\t\tpageIndex: 1,\r\n\t\t\tfromDate: moment(obj.fromDate).format('YYYY/MM/DD'),\r\n\t\t\ttoDate: moment(obj.toDate).format('YYYY/MM/DD')\r\n\t\t})\r\n\t}\r\n\r\n\t// PAGINATION\r\n\tconst getPagination = (pageIndex: number, pageSize: number) => {\r\n\t\tif (!pageSize) pageSize = 10\r\n\t\trefValue.current = { ...refValue.current, pageSize, pageIndex }\r\n\t\tsetFilters({ ...filters, ...refValue.current })\r\n\t}\r\n\r\n\t// SORT\r\n\tconst onSort = (option) => {\r\n\t\trefValue.current = { ...refValue.current, sort: option.title.sort, sortType: option.title.sortType }\r\n\t\tsetFilters({ ...listFieldInit, ...refValue.current })\r\n\t}\r\n\r\n\t// RESET SEARCH\r\n\tconst onResetSearch = () => {\r\n\t\tsetActiveColumnSearch('')\r\n\t\tsetFilters({ ...listFieldInit, pageSize: refValue.current.pageSize })\r\n\t}\r\n\r\n\t// ACTION SEARCH\r\n\tconst onSearch = (valueSearch, dataIndex) => {\r\n\t\tsetActiveColumnSearch(dataIndex)\r\n\t\tsetFilters({ ...listFieldInit, ...refValue.current, pageIndex: 1, [dataIndex]: valueSearch })\r\n\t}\r\n\r\n\t// GET AREA\r\n\tconst fetchAreaList = async () => {\r\n\t\ttry {\r\n\t\t\tconst res = await areaApi.getAll({ selectAll: true })\r\n\t\t\tif (res.status === 200 && res.data.totalRow && res.data.data.length) {\r\n\t\t\t\tconst newAreaList = fmSelectArr(res.data.data, 'AreaName', 'AreaID')\r\n\t\t\t\tsetOptionAreaSystemList({ ...optionAreaSystemList, areaList: newAreaList })\r\n\t\t\t}\r\n\t\t} catch (error) {}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchAreaList()\r\n\t}, [])\r\n\r\n\t// DISTRICT BY AREA\r\n\tconst fetchDistrictByAreaID = async (id: number) => {\r\n\t\ttry {\r\n\t\t\tconst res = await districtApi.getAll({ AreaID: id })\r\n\t\t\tif (res.status === 200 && res.data.totalRow && res.data.data.length) {\r\n\t\t\t\tconst newDistrictList = fmSelectArr(res.data.data, 'DistrictName', 'ID')\r\n\t\t\t\tsetOptionAreaSystemList({ ...optionAreaSystemList, districtList: newDistrictList, wardList: [] })\r\n\t\t\t}\r\n\t\t} catch (error) {}\r\n\t}\r\n\r\n\t// WARD BY DISTRICT\r\n\tconst fetchWardByDistrictID = async (id: number) => {\r\n\t\tsetIsLoading({ type: 'FETCH_WARD_BY_DISTRICT', status: true })\r\n\t\ttry {\r\n\t\t\tconst res = await wardApi.getAll({ DistrictID: id })\r\n\t\t\tif (res.status === 200 && res.data.totalRow && res.data.data.length) {\r\n\t\t\t\tconst newWardList = fmSelectArr(res.data.data, 'WardName', 'ID')\r\n\t\t\t\tsetOptionAreaSystemList({ ...optionAreaSystemList, wardList: newWardList })\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({ type: 'FETCH_WARD_BY_DISTRICT', status: false })\r\n\t\t}\r\n\t}\r\n\r\n\t// BRANCH BY AREA\r\n\tconst fetchBranch = async (id: number) => {\r\n\t\tsetIsLoading({ type: 'FETCH_DATA_BY_AREA', status: true })\r\n\t\ttry {\r\n\t\t\tlet res = await branchApi.getAll({ pageIndex: 1, pageSize: pageSize })\r\n\t\t\tif (res.status === 200 && res.data.totalRow) {\r\n\t\t\t\tconst newBranchList = fmSelectArr(res.data.data, 'BranchName', 'ID')\r\n\t\t\t\tsetBranchList(newBranchList)\r\n\t\t\t}\r\n\t\t\tif (res.status === 204) {\r\n\t\t\t\tsetBranchList([])\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({ type: 'FETCH_DATA_BY_AREA', status: false })\r\n\t\t}\r\n\t}\r\n\r\n\t// GET DATA IN FIRST TIME\r\n\tconst fetchSalerList = async () => {\r\n\t\tsetIsLoading({ type: 'GET_ALL', status: true })\r\n\t\ttry {\r\n\t\t\tlet res = await staffApi.getAll(filters)\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tif (res.data.totalRow && res.data.data.length) {\r\n\t\t\t\t\tsetSalerList(res.data.data)\r\n\t\t\t\t\tsetTotalPage(res.data.totalRow)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (res.status === 204) {\r\n\t\t\t\tsetSalerList([])\r\n\t\t\t\tsetTotalPage(0)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({ type: 'GET_ALL', status: false })\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchSalerList()\r\n\t}, [filters])\r\n\r\n\t// CREATE\r\n\tconst onCreateTeacher = async (data) => {\r\n\t\ttry {\r\n\t\t\tsetIsLoading({ type: 'ADD_DATA', status: true })\r\n\t\t\tconst res = await staffApi.add(data)\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tshowNoti('success', res.data.message)\r\n\t\t\t\tonResetSearch()\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({ type: 'ADD_DATA', status: false })\r\n\t\t}\r\n\t}\r\n\r\n\t// UPDATE\r\n\tconst onUpdateTeacher = async (newObj: any, idx: number) => {\r\n\t\tsetIsLoading({ type: 'ADD_DATA', status: true })\r\n\t\tlet res\r\n\t\ttry {\r\n\t\t\tconst newSalerAPI = { ...newObj, Branch: newObj.Branch.join(',') }\r\n\t\t\tres = await staffApi.update(newSalerAPI)\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tconst newSalerList = [...salerList]\r\n\t\t\t\tconst newBranch = branchList\r\n\t\t\t\t\t.filter((ob) => newObj.Branch.some((nb) => nb === ob.value))\r\n\t\t\t\t\t.map((b) => ({\r\n\t\t\t\t\t\tID: b.value,\r\n\t\t\t\t\t\tBranchName: b.title\r\n\t\t\t\t\t}))\r\n\t\t\t\tnewSalerList.splice(idx, 1, { ...newObj, Branch: newBranch })\r\n\t\t\t\tsetSalerList(newSalerList)\r\n\t\t\t\tshowNoti('success', res.data.message)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading({ type: 'ADD_DATA', status: false })\r\n\t\t\treturn res\r\n\t\t}\r\n\t}\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Họ và tên',\r\n\t\t\tdataIndex: 'FullNameUnicode',\r\n\t\t\t...FilterColumn('FullNameUnicode', onSearch, onResetSearch, 'text'),\r\n\t\t\tclassName: activeColumnSearch === 'FullNameUnicode' ? 'active-column-search' : '',\r\n\t\t\trender: (text) => <p className=\"font-weight-black\">{text}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Tỉnh/Thành phố',\r\n\t\t\tdataIndex: 'AreaName',\r\n\t\t\t...FilterColumn('AreaID', onSearch, onResetSearch, 'select', optionAreaSystemList.areaList),\r\n\t\t\tclassName: activeColumnSearch === 'AreaID' ? 'active-column-search' : '',\r\n\t\t\trender: (text) => <p className=\"font-weight-black\">{text}</p>\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Giới tính',\r\n\t\t\tdataIndex: 'Gender',\r\n\t\t\trender: (genderID) => optionGenderList.find((o) => o.value === genderID).title\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'SĐT',\r\n\t\t\tdataIndex: 'Mobile'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Email',\r\n\t\t\tdataIndex: 'Email'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Ngày nhận việc',\r\n\t\t\tdataIndex: 'Jobdate',\r\n\t\t\trender: (date) => date && moment(date).format('DD/MM/YYYY')\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Trạng thái',\r\n\t\t\tdataIndex: 'StatusID',\r\n\t\t\twidth: 140,\r\n\t\t\t...FilterColumn('StatusID', onSearch, onResetSearch, 'select', optionStatusList),\r\n\t\t\trender: (status) => (status ? <span className=\"tag gray\">Khóa</span> : <span className=\"tag green\">Hoạt động</span>)\r\n\t\t},\r\n\t\t{\r\n\t\t\talign: 'center',\r\n\t\t\trender: (value, _, idx) => (\r\n\t\t\t\t<SalerListForm\r\n\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\tisUpdate={true}\r\n\t\t\t\t\tupdateObj={value}\r\n\t\t\t\t\toptionStatusList={optionStatusList}\r\n\t\t\t\t\toptionGenderList={optionGenderList}\r\n\t\t\t\t\toptionAreaSystemList={optionAreaSystemList}\r\n\t\t\t\t\thandleFetchDistrict={fetchDistrictByAreaID}\r\n\t\t\t\t\thandleFetchWard={fetchWardByDistrictID}\r\n\t\t\t\t\toptionBranchList={branchList}\r\n\t\t\t\t\thandleFetchBranch={fetchBranch}\r\n\t\t\t\t\thandleSubmit={onUpdateTeacher}\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t}\r\n\t]\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<PowerTable\r\n\t\t\t\tcurrentPage={filters.pageIndex}\r\n\t\t\t\ttotalPage={totalPage}\r\n\t\t\t\tgetPagination={getPagination}\r\n\t\t\t\tloading={isLoading}\r\n\t\t\t\taddClass=\"basic-header\"\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\tdataSource={salerList}\r\n\t\t\t\tTitlePage=\"Danh sách tư vấn viên\"\r\n\t\t\t\tTitleCard={\r\n\t\t\t\t\t<SalerListForm\r\n\t\t\t\t\t\tisLoading={isLoading}\r\n\t\t\t\t\t\toptionStatusList={optionStatusList}\r\n\t\t\t\t\t\toptionGenderList={optionGenderList}\r\n\t\t\t\t\t\toptionAreaSystemList={optionAreaSystemList}\r\n\t\t\t\t\t\thandleFetchDistrict={fetchDistrictByAreaID}\r\n\t\t\t\t\t\thandleFetchWard={fetchWardByDistrictID}\r\n\t\t\t\t\t\toptionBranchList={branchList}\r\n\t\t\t\t\t\thandleFetchBranch={fetchBranch}\r\n\t\t\t\t\t\thandleSubmit={onCreateTeacher}\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t\tExtra={\r\n\t\t\t\t\t<div className=\"extra-table\">\r\n\t\t\t\t\t\t<TeacherFilterForm handleFilter={onFilter} handleResetFilter={onResetSearch} />\r\n\t\t\t\t\t\t<SortBox width={190} handleSort={onSort} dataOption={sortOptionList} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default SalerList\r\n"]},"metadata":{},"sourceType":"module"}