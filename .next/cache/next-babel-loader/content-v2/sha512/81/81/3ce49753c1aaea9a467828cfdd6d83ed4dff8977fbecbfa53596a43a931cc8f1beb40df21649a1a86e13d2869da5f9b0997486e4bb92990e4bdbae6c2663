{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\Package\\\\PackageStore\\\\PackageStoreForm\\\\PackageStoreForm.tsx\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { Form, Modal, Spin } from 'antd';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport EditorField from '~/components/FormControl/EditorField';\nimport InputTextField from '~/components/FormControl/InputTextField';\nimport RadioField from '~/components/FormControl/RadioField';\nimport { numberWithCommas } from '~/utils/functions';\nimport PackageStorePaymentMethods from '../PaymentMethodsContent/PaymentMethodsContent';\nimport Link from 'next/link';\nPackageStoreForm.propTypes = {\n  isLoading: PropTypes.shape({\n    type: PropTypes.string.isRequired,\n    status: PropTypes.bool.isRequired\n  }),\n  isAddPackageFree: PropTypes.bool,\n  packageItem: PropTypes.object,\n  handleSubmit: PropTypes.func\n};\nPackageStoreForm.defaultProps = {\n  isLoading: {\n    type: '',\n    status: false\n  },\n  isAddPackageFree: false,\n  packageItem: {},\n  handleSubmit: null\n};\n\nfunction PackageStoreForm(props) {\n  _s();\n\n  var isAddPackageFree = props.isAddPackageFree,\n      isLoading = props.isLoading,\n      packageItem = props.packageItem,\n      handleSubmit = props.handleSubmit;\n\n  var _useState = useState(false),\n      isModalVisible = _useState[0],\n      setIsModalVisible = _useState[1];\n\n  var _useState2 = useState(true),\n      showPaymentMethods = _useState2[0],\n      setShowPaymentMethods = _useState2[1];\n\n  var _useState3 = useState(0),\n      paymentMethodsType = _useState3[0],\n      setPaymentMethodsType = _useState3[1];\n\n  var openModal = function openModal() {\n    return setIsModalVisible(true);\n  };\n\n  var closeModal = function closeModal() {\n    return setIsModalVisible(false);\n  };\n\n  var schema = yup.object().shape({\n    Name: yup.string().required('Bạn không được để trống'),\n    Level: yup.string().required('Bạn không được để trống'),\n    Price: yup.string().required('Bạn không được để trống'),\n    PaymentMethodsID: yup.number().notRequired().when('Price', function (Price, schema) {\n      if (parseInt(Price)) {\n        return yup.number().oneOf([1, 2], 'Bạn không được để trống').required('Bạn không được để trống');\n      }\n\n      return yup.number().notRequired();\n    }),\n    Note: yup.string()\n  });\n  var defaultValuesInit = {\n    Name: '',\n    Level: 1,\n    Price: '',\n    PaymentMethodsID: 0,\n    Note: ''\n  };\n  var form = useForm({\n    defaultValues: defaultValuesInit,\n    resolver: yupResolver(schema)\n  });\n  useEffect(function () {\n    if (packageItem) {\n      var Price = packageItem.Price;\n      form.reset(_objectSpread(_objectSpread({}, packageItem), {}, {\n        Price: Price ? numberWithCommas(Price) : 'Miễn phí',\n        PaymentMethodsID: 0,\n        Note: ''\n      }));\n\n      if (Price) {\n        setShowPaymentMethods(true);\n      } else {\n        setShowPaymentMethods(false);\n      }\n    }\n  }, [packageItem]);\n\n  var checkHandleSubmit = function checkHandleSubmit(data) {\n    if (!handleSubmit) return;\n    handleSubmit(data).then(function (res) {\n      if ((res === null || res === void 0 ? void 0 : res.status) === 200) {\n        closeModal();\n        setPaymentMethodsType(0);\n        form.reset(_objectSpread(_objectSpread({}, packageItem), {}, {\n          Price: packageItem.Price ? numberWithCommas(packageItem.Price) : 'Miễn phí',\n          PaymentMethodsID: 0,\n          Note: ''\n        }));\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [(packageItem === null || packageItem === void 0 ? void 0 : packageItem.ButtonAddPackage) == 'unavailable' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: isAddPackageFree ? /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn btn-warning\",\n        onClick: openModal,\n        children: \"Th\\xEAm b\\u1ED9 \\u0111\\u1EC1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 7\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary\",\n        onClick: openModal,\n        children: \"Mua b\\u1ED9 \\u0111\\u1EC1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 7\n      }, this)\n    }, void 0, false) : /*#__PURE__*/_jsxDEV(Link, {\n      href: {\n        pathname: '/package/package-student/package-student-detail/[slug]',\n        query: {\n          slug: packageItem === null || packageItem === void 0 ? void 0 : packageItem.ID\n        }\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn btn-blue\",\n        children: \"Chi ti\\u1EBFt b\\u1ED9 \\u0111\\u1EC1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      style: {\n        top: 40\n      },\n      title: isAddPackageFree ? 'Thêm bộ đề miễn phí' : 'Xác nhận mua bộ đề',\n      visible: isModalVisible,\n      footer: null,\n      onCancel: closeModal,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrap-form\",\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          layout: \"vertical\",\n          onFinish: form.handleSubmit(checkHandleSubmit),\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-12 col-12\",\n              children: /*#__PURE__*/_jsxDEV(InputTextField, {\n                form: form,\n                name: \"Name\",\n                label: \"T\\xEAn b\\u1ED9 \\u0111\\u1EC1\",\n                placeholder: \"Nh\\u1EADp t\\xEAn b\\u1ED9 \\u0111\\u1EC1\",\n                disabled: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-12 col-12\",\n              children: /*#__PURE__*/_jsxDEV(InputTextField, {\n                form: form,\n                name: \"Price\",\n                label: \"Gi\\xE1\",\n                placeholder: \"Nh\\u1EADp gi\\xE1\",\n                handleFormatCurrency: numberWithCommas,\n                disabled: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 8\n            }, this), showPaymentMethods && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-md-12 col-12\",\n                style: {\n                  marginBottom: 12\n                },\n                children: [/*#__PURE__*/_jsxDEV(RadioField, {\n                  form: form,\n                  name: \"PaymentMethodsID\",\n                  label: \"H\\xECnh th\\u1EE9c thanh to\\xE1n\",\n                  style: {\n                    marginBottom: 4\n                  },\n                  radioList: [{\n                    label: 'Tiền mặt',\n                    value: 1\n                  }, {\n                    label: 'Chuyển khoản',\n                    value: 2\n                  }],\n                  handleChange: function handleChange(PaymentMethodsID) {\n                    setPaymentMethodsType(PaymentMethodsID);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 11\n                }, this), /*#__PURE__*/_jsxDEV(PackageStorePaymentMethods, {\n                  paymentMethodsType: paymentMethodsType\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 11\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-md-12 col-12\",\n                children: /*#__PURE__*/_jsxDEV(EditorField, {\n                  form: form,\n                  name: \"Note\",\n                  label: \"Ghi ch\\xFA\",\n                  height: 100\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-12 col-12 mt-3 \",\n              style: {\n                textAlign: 'center'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-primary\",\n                disabled: isLoading.type == 'ADD_DATA' && isLoading.status,\n                children: [isAddPackageFree ? 'Xác nhận' : 'Thanh toán', isLoading.type == 'ADD_DATA' && isLoading.status && /*#__PURE__*/_jsxDEV(Spin, {\n                  className: \"loading-base\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 63\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n}\n\n_s(PackageStoreForm, \"7RwlC5mKDo/yn6sLF4Kd9pFMUdA=\", false, function () {\n  return [useForm];\n});\n\n_c = PackageStoreForm;\nexport default PackageStoreForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"PackageStoreForm\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/Package/PackageStore/PackageStoreForm/PackageStoreForm.tsx"],"names":["yupResolver","Form","Modal","Spin","PropTypes","React","useEffect","useState","useForm","yup","EditorField","InputTextField","RadioField","numberWithCommas","PackageStorePaymentMethods","Link","PackageStoreForm","propTypes","isLoading","shape","type","string","isRequired","status","bool","isAddPackageFree","packageItem","object","handleSubmit","func","defaultProps","props","isModalVisible","setIsModalVisible","showPaymentMethods","setShowPaymentMethods","paymentMethodsType","setPaymentMethodsType","openModal","closeModal","schema","Name","required","Level","Price","PaymentMethodsID","number","notRequired","when","parseInt","oneOf","Note","defaultValuesInit","form","defaultValues","resolver","reset","checkHandleSubmit","data","then","res","ButtonAddPackage","pathname","query","slug","ID","top","marginBottom","label","value","textAlign"],"mappings":"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","sourcesContent":["import { yupResolver } from '@hookform/resolvers/yup'\r\nimport { Form, Modal, Spin } from 'antd'\r\nimport PropTypes from 'prop-types'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport * as yup from 'yup'\r\nimport EditorField from '~/components/FormControl/EditorField'\r\nimport InputTextField from '~/components/FormControl/InputTextField'\r\nimport RadioField from '~/components/FormControl/RadioField'\r\nimport { numberWithCommas } from '~/utils/functions'\r\nimport PackageStorePaymentMethods from '../PaymentMethodsContent/PaymentMethodsContent'\r\nimport Link from 'next/link'\r\n\r\nPackageStoreForm.propTypes = {\r\n\tisLoading: PropTypes.shape({\r\n\t\ttype: PropTypes.string.isRequired,\r\n\t\tstatus: PropTypes.bool.isRequired\r\n\t}),\r\n\tisAddPackageFree: PropTypes.bool,\r\n\tpackageItem: PropTypes.object,\r\n\thandleSubmit: PropTypes.func\r\n}\r\nPackageStoreForm.defaultProps = {\r\n\tisLoading: { type: '', status: false },\r\n\tisAddPackageFree: false,\r\n\tpackageItem: {},\r\n\thandleSubmit: null\r\n}\r\n\r\nfunction PackageStoreForm(props) {\r\n\tconst { isAddPackageFree, isLoading, packageItem, handleSubmit } = props\r\n\tconst [isModalVisible, setIsModalVisible] = useState(false)\r\n\tconst [showPaymentMethods, setShowPaymentMethods] = useState(true)\r\n\tconst [paymentMethodsType, setPaymentMethodsType] = useState(0)\r\n\r\n\tconst openModal = () => setIsModalVisible(true)\r\n\tconst closeModal = () => setIsModalVisible(false)\r\n\r\n\tconst schema = yup.object().shape({\r\n\t\tName: yup.string().required('Bạn không được để trống'),\r\n\t\tLevel: yup.string().required('Bạn không được để trống'),\r\n\t\tPrice: yup.string().required('Bạn không được để trống'),\r\n\t\tPaymentMethodsID: yup\r\n\t\t\t.number()\r\n\t\t\t.notRequired()\r\n\t\t\t.when('Price', (Price, schema) => {\r\n\t\t\t\tif (parseInt(Price)) {\r\n\t\t\t\t\treturn yup.number().oneOf([1, 2], 'Bạn không được để trống').required('Bạn không được để trống')\r\n\t\t\t\t}\r\n\t\t\t\treturn yup.number().notRequired()\r\n\t\t\t}),\r\n\t\tNote: yup.string()\r\n\t})\r\n\tconst defaultValuesInit = {\r\n\t\tName: '',\r\n\t\tLevel: 1,\r\n\t\tPrice: '',\r\n\t\tPaymentMethodsID: 0,\r\n\t\tNote: ''\r\n\t}\r\n\tconst form = useForm({\r\n\t\tdefaultValues: defaultValuesInit,\r\n\t\tresolver: yupResolver(schema)\r\n\t})\r\n\r\n\tuseEffect(() => {\r\n\t\tif (packageItem) {\r\n\t\t\tconst { Price } = packageItem\r\n\t\t\tform.reset({\r\n\t\t\t\t...packageItem,\r\n\t\t\t\tPrice: Price ? numberWithCommas(Price) : 'Miễn phí',\r\n\t\t\t\tPaymentMethodsID: 0,\r\n\t\t\t\tNote: ''\r\n\t\t\t})\r\n\t\t\tif (Price) {\r\n\t\t\t\tsetShowPaymentMethods(true)\r\n\t\t\t} else {\r\n\t\t\t\tsetShowPaymentMethods(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}, [packageItem])\r\n\r\n\tconst checkHandleSubmit = (data: { Name: string; Level: number; Price: string; PaymentMethodsID: number; Note: string }) => {\r\n\t\tif (!handleSubmit) return\r\n\t\thandleSubmit(data).then((res) => {\r\n\t\t\tif (res?.status === 200) {\r\n\t\t\t\tcloseModal()\r\n\t\t\t\tsetPaymentMethodsType(0)\r\n\t\t\t\tform.reset({\r\n\t\t\t\t\t...packageItem,\r\n\t\t\t\t\tPrice: packageItem.Price ? numberWithCommas(packageItem.Price) : 'Miễn phí',\r\n\t\t\t\t\tPaymentMethodsID: 0,\r\n\t\t\t\t\tNote: ''\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{packageItem?.ButtonAddPackage == 'unavailable' ? (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{isAddPackageFree ? (\r\n\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-warning\" onClick={openModal}>\r\n\t\t\t\t\t\t\tThêm bộ đề\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-primary\" onClick={openModal}>\r\n\t\t\t\t\t\t\tMua bộ đề\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</>\r\n\t\t\t) : (\r\n\t\t\t\t<Link\r\n\t\t\t\t\thref={{\r\n\t\t\t\t\t\tpathname: '/package/package-student/package-student-detail/[slug]',\r\n\t\t\t\t\t\tquery: { slug: packageItem?.ID }\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<button type=\"button\" className=\"btn btn-blue\">\r\n\t\t\t\t\t\tChi tiết bộ đề\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</Link>\r\n\t\t\t)}\r\n\r\n\t\t\t<Modal\r\n\t\t\t\tstyle={{ top: 40 }}\r\n\t\t\t\ttitle={isAddPackageFree ? 'Thêm bộ đề miễn phí' : 'Xác nhận mua bộ đề'}\r\n\t\t\t\tvisible={isModalVisible}\r\n\t\t\t\tfooter={null}\r\n\t\t\t\tonCancel={closeModal}\r\n\t\t\t>\r\n\t\t\t\t<div className=\"wrap-form\">\r\n\t\t\t\t\t<Form layout=\"vertical\" onFinish={form.handleSubmit(checkHandleSubmit)}>\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t<div className=\"col-md-12 col-12\">\r\n\t\t\t\t\t\t\t\t<InputTextField form={form} name=\"Name\" label=\"Tên bộ đề\" placeholder=\"Nhập tên bộ đề\" disabled={true} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-md-12 col-12\">\r\n\t\t\t\t\t\t\t\t<InputTextField\r\n\t\t\t\t\t\t\t\t\tform={form}\r\n\t\t\t\t\t\t\t\t\tname=\"Price\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"Giá\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Nhập giá\"\r\n\t\t\t\t\t\t\t\t\thandleFormatCurrency={numberWithCommas}\r\n\t\t\t\t\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{showPaymentMethods && (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<div className=\"col-md-12 col-12\" style={{ marginBottom: 12 }}>\r\n\t\t\t\t\t\t\t\t\t\t<RadioField\r\n\t\t\t\t\t\t\t\t\t\t\tform={form}\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"PaymentMethodsID\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Hình thức thanh toán\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ marginBottom: 4 }}\r\n\t\t\t\t\t\t\t\t\t\t\tradioList={[\r\n\t\t\t\t\t\t\t\t\t\t\t\t{ label: 'Tiền mặt', value: 1 },\r\n\t\t\t\t\t\t\t\t\t\t\t\t{ label: 'Chuyển khoản', value: 2 }\r\n\t\t\t\t\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t\t\t\t\thandleChange={(PaymentMethodsID: number) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetPaymentMethodsType(PaymentMethodsID)\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<PackageStorePaymentMethods paymentMethodsType={paymentMethodsType} />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"col-md-12 col-12\">\r\n\t\t\t\t\t\t\t\t\t\t<EditorField form={form} name=\"Note\" label=\"Ghi chú\" height={100} />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<div className=\"col-md-12 col-12 mt-3 \" style={{ textAlign: 'center' }}>\r\n\t\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary\" disabled={isLoading.type == 'ADD_DATA' && isLoading.status}>\r\n\t\t\t\t\t\t\t\t\t{isAddPackageFree ? 'Xác nhận' : 'Thanh toán'}\r\n\t\t\t\t\t\t\t\t\t{isLoading.type == 'ADD_DATA' && isLoading.status && <Spin className=\"loading-base\" />}\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default PackageStoreForm\r\n"]},"metadata":{},"sourceType":"module"}