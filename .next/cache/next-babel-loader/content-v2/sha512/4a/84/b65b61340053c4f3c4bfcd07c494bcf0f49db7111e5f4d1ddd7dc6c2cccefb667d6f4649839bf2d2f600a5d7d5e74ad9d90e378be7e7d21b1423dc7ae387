{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\CodingMentor\\\\CodingMentor-FE\\\\src\\\\components\\\\Elements\\\\EditorSimple\\\\Editor.tsx\";\nimport React, { useEffect, useState, useRef, useLayoutEffect } from 'react';\nimport ReactSummernote from 'react-summernote';\nimport { studentApi } from '~/apiBase';\nimport ReactHtmlParser from 'react-html-parser';\nimport { Modal, Input } from 'antd';\nimport 'bootstrap/js/src/modal';\nimport 'bootstrap/js/src/dropdown';\nimport 'bootstrap/js/src/tooltip';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'react-summernote/dist/react-summernote.css';\nimport 'react-summernote/lang/summernote-ru-RU';\nimport { PlusOutlined } from '@ant-design/icons';\n\nconst EditorSummernote = props => {\n  const {\n    getDataEditor,\n    questionContent,\n    isReset,\n    isTranslate,\n    defaultValue,\n    isSimpleTool,\n    height,\n    isFull\n  } = props;\n  let inputTranslate = useRef(null);\n  const {\n    0: valueEditor,\n    1: setValueEditor\n  } = useState(questionContent);\n  const {\n    0: textSelect,\n    1: setTextSelect\n  } = useState(null);\n  const {\n    0: textTranslate,\n    1: setTextTranslate\n  } = useState(null);\n  const {\n    0: isModalVisible,\n    1: setIsModalVisible\n  } = useState(false);\n  const {\n    0: dataTranslate,\n    1: setDataTranslate\n  } = useState([]);\n  const {\n    0: isAddTranslate,\n    1: setIsAddTranslate\n  } = useState(false);\n  const {\n    0: reloadContent,\n    1: setReloadContent\n  } = useState(false);\n  useEffect(() => {\n    !!defaultValue && setValueEditor(defaultValue);\n  }, []);\n\n  const showModal = type => {\n    setIsModalVisible(true);\n\n    if (type == 'add') {\n      setIsAddTranslate(true);\n    } else {\n      setIsAddTranslate(false);\n    }\n  };\n\n  const handleOk = () => {\n    if (isAddTranslate) {\n      if (textSelect) {\n        handleAddTranslate();\n      }\n    } else {\n      handleFixTranslate();\n    }\n\n    setIsModalVisible(false);\n  };\n\n  const handleCancel = () => {\n    setIsModalVisible(false);\n    setTextSelect(null);\n    setTextTranslate(null);\n  }; // GET TRANSLATE TEXT\n\n\n  const onChange_GetTranslateText = e => {\n    let text = e.target.value;\n    setTextTranslate(text);\n  };\n\n  const onKeyDown = e => {\n    if (e.key === 'Enter') {\n      handleAddTranslate();\n      setIsModalVisible(false);\n    }\n  }; // HANDLE FIX TRANSLATE\n\n\n  const handleFixTranslate = () => {\n    let elementNote = document.querySelectorAll('#editor-element .note-editable .text-note-of-translate');\n    elementNote.forEach((item, index) => {\n      let noteID = parseInt(item.getAttribute('data-note'));\n      let textItem = item.innerHTML;\n      let indexData = dataTranslate.findIndex(e => e.noteID === noteID);\n\n      if (dataTranslate[indexData].textTranslate !== textItem) {\n        item.innerHTML = dataTranslate[indexData].textTranslate;\n        item.setAttribute('title', dataTranslate[indexData].textTranslate);\n      }\n    });\n    setReloadContent(true);\n  }; // HANDLE ADD TRANSLATE\n\n\n  const handleAddTranslate = () => {\n    let elementEditor = document.querySelectorAll('#editor-element .note-editable');\n    let elementP = document.querySelectorAll('#editor-element .note-editable p');\n\n    const onAdd = item => {\n      let innerText = item.innerHTML;\n\n      if (innerText.includes(textSelect)) {\n        let noteID = null;\n\n        if (dataTranslate.length < 1) {\n          noteID = 0;\n        } else {\n          noteID = dataTranslate[dataTranslate.length - 1].noteID + 1;\n        }\n\n        item.innerHTML = innerText.replace(textSelect, `<input class=\"input-prevent-translate\"/><span title=\"${textTranslate}\" class=\"text-normal-of-translate\">${textSelect}<span data-note=\"${noteID}\" class=\"text-note-of-translate\">${textTranslate}</span></span><input class=\"input-prevent-translate\"/>`);\n        dataTranslate.push({\n          noteID: noteID,\n          textSelect: textSelect,\n          textTranslate: textTranslate\n        });\n        setDataTranslate([...dataTranslate]);\n      }\n    };\n\n    if (elementP.length > 0) {\n      elementP.forEach(item => {\n        onAdd(item);\n      });\n    } else {\n      onAdd(elementEditor[0]);\n    }\n\n    setTextTranslate(null);\n    setTextSelect(null);\n    setReloadContent(true);\n  };\n\n  const onFixTextTranslate = (e, noteID) => {\n    let text = e.target.value;\n    let index = dataTranslate.findIndex(item => item.noteID == noteID);\n    dataTranslate[index].textTranslate = text;\n    setDataTranslate([...dataTranslate]);\n  };\n\n  useEffect(() => {\n    let getNodes = str => new DOMParser().parseFromString(str, 'text/html').body.childNodes;\n\n    let editorElement = document.getElementById('editor-element');\n    editorElement.addEventListener('mouseup', e => {\n      var sel = window.getSelection && window.getSelection();\n\n      if (sel && sel.rangeCount > 0) {\n        let textSelect = window.getSelection().toString();\n        setTextSelect(textSelect);\n      }\n    });\n  }); // ON CHANGE\n\n  const onChange = content => {\n    getDataEditor(content);\n  }; // UPLOAD IMAGES\n\n\n  const onImageUpload = async fileList => {\n    try {\n      let res = await studentApi.uploadImage(fileList[0]);\n\n      if (res.status == 200) {\n        ReactSummernote.insertImage(res.data.data);\n      }\n    } catch (error) {}\n  };\n\n  useLayoutEffect(() => {\n    if (isModalVisible) {\n      inputTranslate.current && inputTranslate.current.select();\n    }\n  }, [isModalVisible]);\n  useEffect(() => {\n    if (reloadContent) {\n      let elementEditor = document.querySelectorAll('#editor-element .note-editable');\n      setValueEditor(elementEditor[0].innerHTML);\n      getDataEditor(elementEditor[0].innerHTML);\n      setReloadContent(false);\n    }\n  }, [reloadContent]); // HANDLE RESET\n\n  useEffect(() => {\n    isReset && (ReactSummernote.reset(), setValueEditor(''));\n  }, [isReset]);\n  useEffect(() => {\n    let elementNote = document.querySelectorAll('#editor-element .note-editable .text-normal-of-translate');\n\n    if (elementNote.length > 0) {\n      elementNote.forEach(item => {\n        let noteID = item.lastChild.attributes[0].nodeValue;\n        let textSelect = item.firstChild.nodeValue;\n        let textTranslate = item.lastChild.childNodes[0].nodeValue;\n        dataTranslate.push({\n          noteID: parseInt(noteID),\n          textSelect: textSelect,\n          textTranslate: textTranslate\n        });\n      });\n      setDataTranslate([...dataTranslate]);\n    }\n  }, []);\n\n  const getListTool = () => {\n    let temp = [];\n\n    if (!!isFull) {\n      temp = [['style', ['style']], ['font', ['bold', 'underline', 'clear']], ['color', ['color']], ['para', ['ul', 'ol', 'paragraph']], ['table', ['table']], ['insert', ['link', 'picture', 'video']], ['view', ['fullscreen', 'codeview', 'help']]];\n    } else if (isSimpleTool) {\n      temp = [['style', ['style']], ['font', ['bold', 'underline']], ['color', ['color']], ['fontname', ['fontname']], ['para', ['ol', 'paragraph']], ['insert', ['link']]];\n    } else {\n      temp = [['style', ['style']], ['font', ['bold', 'underline', 'clear']], ['fontname', ['fontname']], ['para', ['ul', 'ol', 'paragraph']], ['table', ['table']], ['insert', ['link', 'picture', 'video']], ['view', ['codeview', 'fullscreen']]];\n    }\n\n    return temp;\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Phi\\xEAn \\xE2m\",\n      visible: isModalVisible,\n      okText: \"L\\u01B0u\",\n      cancelText: \"H\\u1EE7y\",\n      onOk: handleOk,\n      onCancel: handleCancel,\n      children: isAddTranslate ? textSelect ? /*#__PURE__*/_jsxDEV(Input, {\n        allowClear: true,\n        id: \"input-translate\",\n        className: \"style-input\",\n        value: textTranslate,\n        onChange: onChange_GetTranslateText,\n        onKeyDown: onKeyDown,\n        ref: inputTranslate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 7\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontWeight: 500\n        },\n        children: \"Vui l\\xF2ng ch\\u1ECDn n\\u1ED9i dung c\\u1EA7n phi\\xEAn \\xE2m\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 7\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"detail-translate\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"text-center\",\n              children: \"N\\u1ED9i dung\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"text-center\",\n              children: \"Phi\\xEAn \\xE2m\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: dataTranslate.map((item, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.textSelect\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"text-center\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"show-text-translate\",\n                  type: \"text\",\n                  value: item.textTranslate,\n                  onChange: e => {\n                    onFixTextTranslate(e, item.noteID);\n                  },\n                  onKeyDown: e => {\n                    if (e.key === 'Enter') {\n                      handleFixTranslate();\n                      setIsModalVisible(false);\n                    }\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 12\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 11\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 10\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrap-editor\",\n      id: \"editor-element\",\n      style: {\n        borderRadius: 8\n      },\n      children: [isTranslate && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex align-items-center mb-2\",\n          style: {\n            display: 'flex',\n            flexDirection: 'row',\n            width: '100%',\n            justifyContent: 'flex-end'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-editor d-flex align-items-center mr-2\",\n            onClick: () => showModal('add'),\n            children: [/*#__PURE__*/_jsxDEV(PlusOutlined, {\n              className: \"mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 9\n            }, this), \" Th\\xEAm Phi\\xEAn \\xE2m\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 7\n        }, this)\n      }, void 0, false), /*#__PURE__*/_jsxDEV(ReactSummernote, {\n        value: valueEditor,\n        children: ReactHtmlParser(valueEditor),\n        options: {\n          lang: 'vn',\n          height: height || 220,\n          dialogsInBody: true,\n          toolbar: getListTool()\n        },\n        onChange: content => onChange(content),\n        onImageUpload: onImageUpload\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n\nexport default EditorSummernote;","map":{"version":3,"sources":["D:/MonaMedia/Project/CodingMentor/CodingMentor-FE/src/components/Elements/EditorSimple/Editor.tsx"],"names":["React","useEffect","useState","useRef","useLayoutEffect","ReactSummernote","studentApi","ReactHtmlParser","Modal","Input","PlusOutlined","EditorSummernote","props","getDataEditor","questionContent","isReset","isTranslate","defaultValue","isSimpleTool","height","isFull","inputTranslate","valueEditor","setValueEditor","textSelect","setTextSelect","textTranslate","setTextTranslate","isModalVisible","setIsModalVisible","dataTranslate","setDataTranslate","isAddTranslate","setIsAddTranslate","reloadContent","setReloadContent","showModal","type","handleOk","handleAddTranslate","handleFixTranslate","handleCancel","onChange_GetTranslateText","e","text","target","value","onKeyDown","key","elementNote","document","querySelectorAll","forEach","item","index","noteID","parseInt","getAttribute","textItem","innerHTML","indexData","findIndex","setAttribute","elementEditor","elementP","onAdd","innerText","includes","length","replace","push","onFixTextTranslate","getNodes","str","DOMParser","parseFromString","body","childNodes","editorElement","getElementById","addEventListener","sel","window","getSelection","rangeCount","toString","onChange","content","onImageUpload","fileList","res","uploadImage","status","insertImage","data","error","current","select","reset","lastChild","attributes","nodeValue","firstChild","getListTool","temp","fontWeight","map","borderRadius","display","flexDirection","width","justifyContent","lang","dialogsInBody","toolbar"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef, useLayoutEffect } from 'react'\r\nimport ReactSummernote from 'react-summernote'\r\nimport { studentApi } from '~/apiBase'\r\nimport ReactHtmlParser from 'react-html-parser'\r\nimport { Modal, Input } from 'antd'\r\nimport 'bootstrap/js/src/modal'\r\nimport 'bootstrap/js/src/dropdown'\r\nimport 'bootstrap/js/src/tooltip'\r\nimport 'bootstrap/dist/css/bootstrap.css'\r\nimport 'react-summernote/dist/react-summernote.css'\r\nimport 'react-summernote/lang/summernote-ru-RU'\r\nimport { PlusOutlined } from '@ant-design/icons'\r\n\r\ntype dataTranslate = Array<{\r\n\tnoteID: number\r\n\ttextSelect: string\r\n\ttextTranslate: string\r\n}>\r\n\r\nconst EditorSummernote = (props) => {\r\n\tconst { getDataEditor, questionContent, isReset, isTranslate, defaultValue, isSimpleTool, height, isFull } = props\r\n\tlet inputTranslate = useRef(null)\r\n\r\n\tconst [valueEditor, setValueEditor] = useState(questionContent)\r\n\tconst [textSelect, setTextSelect] = useState(null)\r\n\tconst [textTranslate, setTextTranslate] = useState(null)\r\n\tconst [isModalVisible, setIsModalVisible] = useState(false)\r\n\tconst [dataTranslate, setDataTranslate] = useState<dataTranslate>([])\r\n\tconst [isAddTranslate, setIsAddTranslate] = useState(false)\r\n\tconst [reloadContent, setReloadContent] = useState(false)\r\n\r\n\tuseEffect(() => {\r\n\t\t!!defaultValue && setValueEditor(defaultValue)\r\n\t}, [])\r\n\r\n\tconst showModal = (type) => {\r\n\t\tsetIsModalVisible(true)\r\n\t\tif (type == 'add') {\r\n\t\t\tsetIsAddTranslate(true)\r\n\t\t} else {\r\n\t\t\tsetIsAddTranslate(false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleOk = () => {\r\n\t\tif (isAddTranslate) {\r\n\t\t\tif (textSelect) {\r\n\t\t\t\thandleAddTranslate()\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\thandleFixTranslate()\r\n\t\t}\r\n\t\tsetIsModalVisible(false)\r\n\t}\r\n\r\n\tconst handleCancel = () => {\r\n\t\tsetIsModalVisible(false)\r\n\t\tsetTextSelect(null)\r\n\t\tsetTextTranslate(null)\r\n\t}\r\n\r\n\t// GET TRANSLATE TEXT\r\n\tconst onChange_GetTranslateText = (e) => {\r\n\t\tlet text = e.target.value\r\n\t\tsetTextTranslate(text)\r\n\t}\r\n\r\n\tconst onKeyDown = (e) => {\r\n\t\tif (e.key === 'Enter') {\r\n\t\t\thandleAddTranslate()\r\n\t\t\tsetIsModalVisible(false)\r\n\t\t}\r\n\t}\r\n\r\n\t// HANDLE FIX TRANSLATE\r\n\tconst handleFixTranslate = () => {\r\n\t\tlet elementNote = document.querySelectorAll('#editor-element .note-editable .text-note-of-translate')\r\n\t\telementNote.forEach((item, index) => {\r\n\t\t\tlet noteID = parseInt(item.getAttribute('data-note'))\r\n\t\t\tlet textItem = item.innerHTML\r\n\r\n\t\t\tlet indexData = dataTranslate.findIndex((e) => e.noteID === noteID)\r\n\t\t\tif (dataTranslate[indexData].textTranslate !== textItem) {\r\n\t\t\t\titem.innerHTML = dataTranslate[indexData].textTranslate\r\n\t\t\t\titem.setAttribute('title', dataTranslate[indexData].textTranslate)\r\n\t\t\t}\r\n\t\t})\r\n\t\tsetReloadContent(true)\r\n\t}\r\n\r\n\t// HANDLE ADD TRANSLATE\r\n\tconst handleAddTranslate = () => {\r\n\t\tlet elementEditor = document.querySelectorAll('#editor-element .note-editable')\r\n\t\tlet elementP = document.querySelectorAll('#editor-element .note-editable p')\r\n\r\n\t\tconst onAdd = (item) => {\r\n\t\t\tlet innerText = item.innerHTML\r\n\t\t\tif (innerText.includes(textSelect)) {\r\n\t\t\t\tlet noteID = null\r\n\t\t\t\tif (dataTranslate.length < 1) {\r\n\t\t\t\t\tnoteID = 0\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnoteID = dataTranslate[dataTranslate.length - 1].noteID + 1\r\n\t\t\t\t}\r\n\r\n\t\t\t\titem.innerHTML = innerText.replace(\r\n\t\t\t\t\ttextSelect,\r\n\t\t\t\t\t`<input class=\"input-prevent-translate\"/><span title=\"${textTranslate}\" class=\"text-normal-of-translate\">${textSelect}<span data-note=\"${noteID}\" class=\"text-note-of-translate\">${textTranslate}</span></span><input class=\"input-prevent-translate\"/>`\r\n\t\t\t\t)\r\n\r\n\t\t\t\tdataTranslate.push({\r\n\t\t\t\t\tnoteID: noteID,\r\n\t\t\t\t\ttextSelect: textSelect,\r\n\t\t\t\t\ttextTranslate: textTranslate\r\n\t\t\t\t})\r\n\t\t\t\tsetDataTranslate([...dataTranslate])\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (elementP.length > 0) {\r\n\t\t\telementP.forEach((item) => {\r\n\t\t\t\tonAdd(item)\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tonAdd(elementEditor[0])\r\n\t\t}\r\n\r\n\t\tsetTextTranslate(null)\r\n\t\tsetTextSelect(null)\r\n\t\tsetReloadContent(true)\r\n\t}\r\n\r\n\tconst onFixTextTranslate = (e, noteID) => {\r\n\t\tlet text = e.target.value\r\n\t\tlet index = dataTranslate.findIndex((item) => item.noteID == noteID)\r\n\r\n\t\tdataTranslate[index].textTranslate = text\r\n\t\tsetDataTranslate([...dataTranslate])\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tlet getNodes = (str) => new DOMParser().parseFromString(str, 'text/html').body.childNodes\r\n\r\n\t\tlet editorElement = document.getElementById('editor-element')\r\n\t\teditorElement.addEventListener('mouseup', (e) => {\r\n\t\t\tvar sel = window.getSelection && window.getSelection()\r\n\t\t\tif (sel && sel.rangeCount > 0) {\r\n\t\t\t\tlet textSelect = window.getSelection().toString()\r\n\t\t\t\tsetTextSelect(textSelect)\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n\r\n\t// ON CHANGE\r\n\tconst onChange = (content) => {\r\n\t\tgetDataEditor(content)\r\n\t}\r\n\r\n\t// UPLOAD IMAGES\r\n\tconst onImageUpload = async (fileList) => {\r\n\t\ttry {\r\n\t\t\tlet res = await studentApi.uploadImage(fileList[0])\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tReactSummernote.insertImage(res.data.data)\r\n\t\t\t}\r\n\t\t} catch (error) {}\r\n\t}\r\n\r\n\tuseLayoutEffect(() => {\r\n\t\tif (isModalVisible) {\r\n\t\t\tinputTranslate.current && inputTranslate.current.select()\r\n\t\t}\r\n\t}, [isModalVisible])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (reloadContent) {\r\n\t\t\tlet elementEditor = document.querySelectorAll('#editor-element .note-editable')\r\n\t\t\tsetValueEditor(elementEditor[0].innerHTML)\r\n\t\t\tgetDataEditor(elementEditor[0].innerHTML)\r\n\t\t\tsetReloadContent(false)\r\n\t\t}\r\n\t}, [reloadContent])\r\n\r\n\t// HANDLE RESET\r\n\tuseEffect(() => {\r\n\t\tisReset && (ReactSummernote.reset(), setValueEditor(''))\r\n\t}, [isReset])\r\n\r\n\tuseEffect(() => {\r\n\t\tlet elementNote = document.querySelectorAll('#editor-element .note-editable .text-normal-of-translate')\r\n\r\n\t\tif (elementNote.length > 0) {\r\n\t\t\telementNote.forEach((item: any) => {\r\n\t\t\t\tlet noteID = item.lastChild.attributes[0].nodeValue\r\n\t\t\t\tlet textSelect = item.firstChild.nodeValue\r\n\t\t\t\tlet textTranslate = item.lastChild.childNodes[0].nodeValue\r\n\t\t\t\tdataTranslate.push({\r\n\t\t\t\t\tnoteID: parseInt(noteID),\r\n\t\t\t\t\ttextSelect: textSelect,\r\n\t\t\t\t\ttextTranslate: textTranslate\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\tsetDataTranslate([...dataTranslate])\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst getListTool = () => {\r\n\t\tlet temp: any = []\r\n\t\tif (!!isFull) {\r\n\t\t\ttemp = [\r\n\t\t\t\t['style', ['style']],\r\n\t\t\t\t['font', ['bold', 'underline', 'clear']],\r\n\t\t\t\t['color', ['color']],\r\n\t\t\t\t['para', ['ul', 'ol', 'paragraph']],\r\n\t\t\t\t['table', ['table']],\r\n\t\t\t\t['insert', ['link', 'picture', 'video']],\r\n\t\t\t\t['view', ['fullscreen', 'codeview', 'help']]\r\n\t\t\t]\r\n\t\t} else if (isSimpleTool) {\r\n\t\t\ttemp = [\r\n\t\t\t\t['style', ['style']],\r\n\t\t\t\t['font', ['bold', 'underline']],\r\n\t\t\t\t['color', ['color']],\r\n\t\t\t\t['fontname', ['fontname']],\r\n\t\t\t\t['para', ['ol', 'paragraph']],\r\n\t\t\t\t['insert', ['link']]\r\n\t\t\t]\r\n\t\t} else {\r\n\t\t\ttemp = [\r\n\t\t\t\t['style', ['style']],\r\n\t\t\t\t['font', ['bold', 'underline', 'clear']],\r\n\t\t\t\t['fontname', ['fontname']],\r\n\t\t\t\t['para', ['ul', 'ol', 'paragraph']],\r\n\t\t\t\t['table', ['table']],\r\n\t\t\t\t['insert', ['link', 'picture', 'video']],\r\n\t\t\t\t['view', ['codeview', 'fullscreen']]\r\n\t\t\t]\r\n\t\t}\r\n\t\treturn temp\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Modal title=\"Phiên âm\" visible={isModalVisible} okText=\"Lưu\" cancelText=\"Hủy\" onOk={handleOk} onCancel={handleCancel}>\r\n\t\t\t\t{isAddTranslate ? (\r\n\t\t\t\t\ttextSelect ? (\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tallowClear\r\n\t\t\t\t\t\t\tid=\"input-translate\"\r\n\t\t\t\t\t\t\tclassName=\"style-input\"\r\n\t\t\t\t\t\t\tvalue={textTranslate}\r\n\t\t\t\t\t\t\tonChange={onChange_GetTranslateText}\r\n\t\t\t\t\t\t\tonKeyDown={onKeyDown}\r\n\t\t\t\t\t\t\tref={inputTranslate}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<p style={{ fontWeight: 500 }}>Vui lòng chọn nội dung cần phiên âm</p>\r\n\t\t\t\t\t)\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className=\"detail-translate\">\r\n\t\t\t\t\t\t<table>\r\n\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t<th className=\"text-center\">Nội dung</th>\r\n\t\t\t\t\t\t\t\t<th className=\"text-center\">Phiên âm</th>\r\n\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t{dataTranslate.map((item, index) => (\r\n\t\t\t\t\t\t\t\t\t<tr key={index}>\r\n\t\t\t\t\t\t\t\t\t\t<td>{item.textSelect}</td>\r\n\t\t\t\t\t\t\t\t\t\t<td className=\"text-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"show-text-translate\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={item.textTranslate}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonFixTextTranslate(e, item.noteID)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonKeyDown={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (e.key === 'Enter') {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleFixTranslate()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetIsModalVisible(false)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Modal>\r\n\t\t\t<div className=\"wrap-editor\" id=\"editor-element\" style={{ borderRadius: 8 }}>\r\n\t\t\t\t{isTranslate && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName=\"d-flex align-items-center mb-2\"\r\n\t\t\t\t\t\t\tstyle={{ display: 'flex', flexDirection: 'row', width: '100%', justifyContent: 'flex-end' }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<button className=\"btn-editor d-flex align-items-center mr-2\" onClick={() => showModal('add')}>\r\n\t\t\t\t\t\t\t\t<PlusOutlined className=\"mr-2\" /> Thêm Phiên âm\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<ReactSummernote\r\n\t\t\t\t\tvalue={valueEditor}\r\n\t\t\t\t\tchildren={ReactHtmlParser(valueEditor)}\r\n\t\t\t\t\toptions={{\r\n\t\t\t\t\t\tlang: 'vn',\r\n\t\t\t\t\t\theight: height || 220,\r\n\t\t\t\t\t\tdialogsInBody: true,\r\n\t\t\t\t\t\ttoolbar: getListTool()\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonChange={(content: any) => onChange(content)}\r\n\t\t\t\t\tonImageUpload={onImageUpload}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default EditorSummernote\r\n"]},"metadata":{},"sourceType":"module"}