{"ast":null,"code":"import _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\pages\\\\option\\\\consultation-status\\\\index.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport moment from 'moment';\nimport React, { useEffect, useState } from 'react';\nimport { consultationStatusApi } from '~/apiBase/options/consultation-status';\nimport ConsultationStatusDel from '~/components/Global/Option/ConsultationStatus/ConsultationStatusDel';\nimport ConsultationStatusForm from '~/components/Global/Option/ConsultationStatus/ConsultationStatusForm';\nimport LayoutBase from '~/components/LayoutBase';\nimport PowerTable from '~/components/PowerTable';\nimport { useWrap } from '~/context/wrap';\n\nvar ConsultationStatus = function ConsultationStatus() {\n  _s();\n\n  var columns = [{\n    title: 'Tình trạng tư vấn khách hàng',\n    dataIndex: 'Name',\n    render: function render(text) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-weight-primary\",\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 22\n      }, _this);\n    }\n  }, {\n    title: 'Người tạo',\n    dataIndex: 'ModifiedBy'\n  }, {\n    title: 'Ngày tạo',\n    dataIndex: 'ModifiedOn',\n    render: function render(date) {\n      return moment(date).format('DD/MM/YYYY');\n    }\n  }, {\n    render: function render(data) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(ConsultationStatusForm, {\n          infoDetail: data,\n          infoId: data.ID,\n          reloadData: function reloadData(firstPage) {\n            getDataConsultationStatus(firstPage);\n          },\n          currentPage: currentPage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(ConsultationStatusDel, {\n          infoId: data.ID,\n          reloadData: function reloadData(firstPage) {\n            getDataConsultationStatus(firstPage);\n          },\n          currentPage: currentPage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 6\n        }, _this)]\n      }, void 0, true);\n    }\n  }];\n\n  var _useState = useState(1),\n      currentPage = _useState[0],\n      setCurrentPage = _useState[1];\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti,\n      pageSize = _useWrap.pageSize;\n\n  var listParamsDefault = {\n    pageSize: pageSize,\n    pageIndex: currentPage\n  };\n\n  var _useState2 = useState(null),\n      totalPage = _useState2[0],\n      setTotalPage = _useState2[1];\n\n  var _useState3 = useState([]),\n      consultationStatus = _useState3[0],\n      setConsultationStatus = _useState3[1];\n\n  var _useState4 = useState(listParamsDefault),\n      params = _useState4[0],\n      setParams = _useState4[1];\n\n  var _useState5 = useState({\n    type: 'GET_ALL',\n    status: false\n  }),\n      isLoading = _useState5[0],\n      setIsLoading = _useState5[1];\n\n  var _getPagination = function getPagination(pageNumber) {\n    setCurrentPage(pageNumber);\n    setParams(_objectSpread(_objectSpread({}, params), {}, {\n      pageIndex: currentPage\n    }));\n  };\n\n  var getDataConsultationStatus = function getDataConsultationStatus(page) {\n    setIsLoading({\n      type: 'GET_ALL',\n      status: true\n    });\n\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return consultationStatusApi.getPaged(_objectSpread(_objectSpread({}, params), {}, {\n                pageIndex: page\n              }));\n\n            case 3:\n              res = _context.sent;\n              res.status == 200 && setConsultationStatus(res.data.data);\n\n              if (res.status == 204) {\n                showNoti('danger', 'Không tìm thấy dữ liệu!');\n                setCurrentPage(1);\n                setConsultationStatus([]);\n                setParams(listParamsDefault);\n              } else setTotalPage(res.data.totalRow);\n\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              showNoti('danger', _context.t0.message);\n\n            case 11:\n              _context.prev = 11;\n              setIsLoading({\n                type: 'GET_ALL',\n                status: false\n              });\n              return _context.finish(11);\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 8, 11, 14]]);\n    }))();\n  };\n\n  useEffect(function () {\n    getDataConsultationStatus(currentPage);\n  }, [params]);\n  return /*#__PURE__*/_jsxDEV(PowerTable, {\n    currentPage: currentPage,\n    loading: isLoading,\n    totalPage: totalPage && totalPage,\n    getPagination: function getPagination(pageNumber) {\n      return _getPagination(pageNumber);\n    },\n    addClass: \"basic-header\",\n    TitlePage: \"T\\xECnh tr\\u1EA1ng t\\u01B0 v\\u1EA5n kh\\xE1ch h\\xE0ng\",\n    TitleCard: /*#__PURE__*/_jsxDEV(ConsultationStatusForm, {\n      reloadData: function reloadData(firstPage) {\n        setCurrentPage(1);\n        getDataConsultationStatus(firstPage);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 5\n    }, _this),\n    dataSource: consultationStatus,\n    columns: columns\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 3\n  }, _this);\n};\n\n_s(ConsultationStatus, \"XpeUWuGyhAMkCqOaSIBmkS/gPwo=\", false, function () {\n  return [useWrap];\n});\n\n_c = ConsultationStatus;\nConsultationStatus.layout = LayoutBase;\nexport default ConsultationStatus;\n\nvar _c;\n\n$RefreshReg$(_c, \"ConsultationStatus\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/pages/option/consultation-status/index.tsx"],"names":["moment","React","useEffect","useState","consultationStatusApi","ConsultationStatusDel","ConsultationStatusForm","LayoutBase","PowerTable","useWrap","ConsultationStatus","columns","title","dataIndex","render","text","date","format","data","ID","firstPage","getDataConsultationStatus","currentPage","setCurrentPage","showNoti","pageSize","listParamsDefault","pageIndex","totalPage","setTotalPage","consultationStatus","setConsultationStatus","params","setParams","type","status","isLoading","setIsLoading","getPagination","pageNumber","page","getPaged","res","totalRow","message","layout"],"mappings":"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","sourcesContent":["import moment from 'moment'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { consultationStatusApi } from '~/apiBase/options/consultation-status'\r\nimport ConsultationStatusDel from '~/components/Global/Option/ConsultationStatus/ConsultationStatusDel'\r\nimport ConsultationStatusForm from '~/components/Global/Option/ConsultationStatus/ConsultationStatusForm'\r\nimport LayoutBase from '~/components/LayoutBase'\r\nimport PowerTable from '~/components/PowerTable'\r\nimport { useWrap } from '~/context/wrap'\r\n\r\nconst ConsultationStatus = () => {\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\ttitle: 'Tình trạng tư vấn khách hàng',\r\n\t\t\tdataIndex: 'Name',\r\n\t\t\trender: (text) => <p className=\"font-weight-primary\">{text}</p>\r\n\t\t},\r\n\t\t{ title: 'Người tạo', dataIndex: 'ModifiedBy' },\r\n\t\t{\r\n\t\t\ttitle: 'Ngày tạo',\r\n\t\t\tdataIndex: 'ModifiedOn',\r\n\t\t\trender: (date) => moment(date).format('DD/MM/YYYY')\r\n\t\t},\r\n\r\n\t\t{\r\n\t\t\trender: (data) => (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<ConsultationStatusForm\r\n\t\t\t\t\t\tinfoDetail={data}\r\n\t\t\t\t\t\tinfoId={data.ID}\r\n\t\t\t\t\t\treloadData={(firstPage) => {\r\n\t\t\t\t\t\t\tgetDataConsultationStatus(firstPage)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tcurrentPage={currentPage}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<ConsultationStatusDel\r\n\t\t\t\t\t\tinfoId={data.ID}\r\n\t\t\t\t\t\treloadData={(firstPage) => {\r\n\t\t\t\t\t\t\tgetDataConsultationStatus(firstPage)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tcurrentPage={currentPage}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</>\r\n\t\t\t)\r\n\t\t}\r\n\t]\r\n\tconst [currentPage, setCurrentPage] = useState(1)\r\n\r\n\tconst { showNoti, pageSize } = useWrap()\r\n\tconst listParamsDefault = {\r\n\t\tpageSize: pageSize,\r\n\t\tpageIndex: currentPage\r\n\t}\r\n\tconst [totalPage, setTotalPage] = useState(null)\r\n\tconst [consultationStatus, setConsultationStatus] = useState<IConsultationStatus[]>([])\r\n\tconst [params, setParams] = useState(listParamsDefault)\r\n\tconst [isLoading, setIsLoading] = useState({\r\n\t\ttype: 'GET_ALL',\r\n\t\tstatus: false\r\n\t})\r\n\r\n\tconst getPagination = (pageNumber: number) => {\r\n\t\tsetCurrentPage(pageNumber)\r\n\t\tsetParams({\r\n\t\t\t...params,\r\n\t\t\tpageIndex: currentPage\r\n\t\t})\r\n\t}\r\n\r\n\tconst getDataConsultationStatus = (page: any) => {\r\n\t\tsetIsLoading({\r\n\t\t\ttype: 'GET_ALL',\r\n\t\t\tstatus: true\r\n\t\t})\r\n\t\t;(async () => {\r\n\t\t\ttry {\r\n\t\t\t\tlet res = await consultationStatusApi.getPaged({\r\n\t\t\t\t\t...params,\r\n\t\t\t\t\tpageIndex: page\r\n\t\t\t\t})\r\n\t\t\t\tres.status == 200 && setConsultationStatus(res.data.data)\r\n\t\t\t\tif (res.status == 204) {\r\n\t\t\t\t\tshowNoti('danger', 'Không tìm thấy dữ liệu!')\r\n\t\t\t\t\tsetCurrentPage(1)\r\n\t\t\t\t\tsetConsultationStatus([])\r\n\t\t\t\t\tsetParams(listParamsDefault)\r\n\t\t\t\t} else setTotalPage(res.data.totalRow)\r\n\t\t\t} catch (error) {\r\n\t\t\t\tshowNoti('danger', error.message)\r\n\t\t\t} finally {\r\n\t\t\t\tsetIsLoading({\r\n\t\t\t\t\ttype: 'GET_ALL',\r\n\t\t\t\t\tstatus: false\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})()\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tgetDataConsultationStatus(currentPage)\r\n\t}, [params])\r\n\r\n\treturn (\r\n\t\t<PowerTable\r\n\t\t\tcurrentPage={currentPage}\r\n\t\t\tloading={isLoading}\r\n\t\t\ttotalPage={totalPage && totalPage}\r\n\t\t\tgetPagination={(pageNumber: number) => getPagination(pageNumber)}\r\n\t\t\taddClass=\"basic-header\"\r\n\t\t\tTitlePage=\"Tình trạng tư vấn khách hàng\"\r\n\t\t\tTitleCard={\r\n\t\t\t\t<ConsultationStatusForm\r\n\t\t\t\t\treloadData={(firstPage) => {\r\n\t\t\t\t\t\tsetCurrentPage(1)\r\n\t\t\t\t\t\tgetDataConsultationStatus(firstPage)\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t\tdataSource={consultationStatus}\r\n\t\t\tcolumns={columns}\r\n\t\t/>\r\n\t)\r\n}\r\nConsultationStatus.layout = LayoutBase\r\nexport default ConsultationStatus\r\n"]},"metadata":{},"sourceType":"module"}