{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\CodingMentor\\\\CodingMentor-FE\\\\src\\\\components\\\\Global\\\\CreateSelfCourse\\\\ScheduleSelf\\\\ScheduleSelfItem.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { Collapse, Spin } from 'antd';\nimport Checkbox from 'antd/lib/checkbox/Checkbox';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport SelectField from '~/components/FormControl/SelectField';\nimport { optionCommonPropTypes } from '~/utils/proptypes';\nconst {\n  Panel\n} = Collapse;\n\nconst ScheduleSelfItem = props => {\n  const {\n    handleChangeStatusSchedule,\n    handleChangeValueSchedule,\n    handleAheadSchedule,\n    //\n    scheduleObj,\n    isLoading,\n    isUnavailable,\n    isEditView,\n    isClickAheadSchedule,\n    //\n    handleCancelSchedule,\n    isCancelSchedule,\n    //\n    optionTeacherList,\n    optionStudyTime\n  } = props;\n  const {\n    ID,\n    SubjectName,\n    TeacherName,\n    Date,\n    TeacherID,\n    CaID,\n    StudyTimeID\n  } = scheduleObj;\n  const defaultValuesInit = {\n    TeacherID: 0,\n    StudyTimeID: 0\n  };\n  const schema = yup.object().shape({\n    StudyTimeID: yup.number().min(1, 'Bạn cần chọn ca học').required('Bạn không được để trống'),\n    TeacherID: yup.number().min(1, 'Bạn cần chọn giáo viên').required('Bạn không được để trống')\n  });\n  const form = useForm({\n    defaultValues: defaultValuesInit,\n    resolver: yupResolver(schema),\n    mode: 'all'\n  });\n\n  const checkHandleChangeStatusSchedule = (vl, type) => {\n    if (!handleChangeStatusSchedule) return;\n    handleChangeStatusSchedule(vl, type);\n  };\n\n  const checkHandleChangeValueSchedule = (uid, key, vl) => {\n    if (!handleChangeValueSchedule) return;\n    handleChangeValueSchedule(uid, key, vl);\n  };\n\n  const setSiblingsFieldToDefault = () => {\n    form.setValue('TeacherID', 0);\n  };\n\n  const checkHandleAheadSchedule = (courseScheduleId, teacherId) => {\n    if (!handleAheadSchedule) return;\n    handleAheadSchedule(courseScheduleId, teacherId);\n  };\n\n  const checkHandleCancelSchedule = sch => {\n    if (!handleCancelSchedule) return;\n    handleCancelSchedule(sch);\n  }; // CHECK IF VALUE DO NOT IN THE SELECT => CHANGE VALUE TO DEFAULT (0)\n\n\n  useEffect(() => {\n    form.clearErrors();\n\n    if ((isLoading.type === 'CHECK_SCHEDULE' || isLoading.type === 'ADD_DATA') && !isLoading.status && Array.isArray(optionTeacherList) && optionTeacherList.length > 0 && Array.isArray(optionStudyTime) && optionStudyTime.length > 0) {\n      if (isEditView) {\n        form.setValue('TeacherID', TeacherID);\n      } else {\n        form.setValue('TeacherID', optionTeacherList[0].value);\n      }\n\n      form.setValue('StudyTimeID', CaID || StudyTimeID);\n    }\n\n    if (isLoading.type === 'SCHEDULE_INVALID' && isLoading.status) {\n      var _optionTeacherList$, _optionStudyTime$;\n\n      form.setValue('TeacherID', (_optionTeacherList$ = optionTeacherList[0]) === null || _optionTeacherList$ === void 0 ? void 0 : _optionTeacherList$.value);\n      form.setValue('StudyTimeID', (_optionStudyTime$ = optionStudyTime[0]) === null || _optionStudyTime$ === void 0 ? void 0 : _optionStudyTime$.value);\n    }\n  }, [scheduleObj, optionTeacherList, optionStudyTime, isLoading]);\n  return /*#__PURE__*/_jsxDEV(Panel, _objectSpread(_objectSpread({}, props), {}, {\n    header: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"info-course-item\",\n      children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n        onChange: () => {\n          if (isUnavailable) {\n            // remove schedule from unavailable list\n            // add schedule to available list\n            checkHandleChangeStatusSchedule(scheduleObj, 2);\n          } else {\n            // remove schedule from available list\n            // add schedule to unavailable list\n            checkHandleChangeStatusSchedule(scheduleObj, 1);\n          }\n        },\n        checked: isUnavailable\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"title\",\n        children: \"Bu\\u1ED5i h\\u1ECDc t\\u1EF1 s\\u1EAFp x\\u1EBFp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"info-course-list\",\n        children: /*#__PURE__*/_jsxDEV(\"li\", {\n          children: SubjectName || 'Tên môn học'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }, this),\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"info-course-select\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12\",\n          children: /*#__PURE__*/_jsxDEV(SelectField, {\n            form: form,\n            name: \"StudyTimeID\",\n            placeholder: \"Ch\\u1ECDn ca\",\n            optionList: optionStudyTime,\n            onChangeSelect: value => {\n              setSiblingsFieldToDefault();\n              checkHandleChangeValueSchedule(ID, 'CaID', value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12\",\n          children: /*#__PURE__*/_jsxDEV(SelectField, {\n            form: form,\n            name: \"TeacherID\",\n            isLoading: isLoading.type === 'CHECK_SCHEDULE' && isLoading.status,\n            placeholder: \"Ch\\u1ECDn gi\\xE1o vi\\xEAn\",\n            optionList: optionTeacherList,\n            onChangeSelect: value => {\n              if (isEditView) {\n                checkHandleChangeValueSchedule(ID, 'TeacherID', value);\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 6\n        }, this), isCancelSchedule && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 text-right\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-secondary\",\n            disabled: isLoading.type === 'CANCEL_SCHEDULE' && isLoading.status,\n            onClick: () => checkHandleCancelSchedule(scheduleObj),\n            children: [\"H\\u1EE7y bu\\u1ED5i h\\u1ECDc\", isLoading.type === 'CANCEL_SCHEDULE' && isLoading.status && /*#__PURE__*/_jsxDEV(Spin, {\n              className: \"loading-base\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 70\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 4\n    }, this)\n  }), void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 3\n  }, this);\n};\n\nScheduleSelfItem.propTypes = {\n  handleChangeValueSchedule: PropTypes.func,\n  handleChangeStatusSchedule: PropTypes.func,\n  //\n  scheduleObj: PropTypes.shape({\n    ID: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    eventName: PropTypes.string,\n    Tiet: PropTypes.shape({\n      CurriculumsDetailID: PropTypes.number,\n      CurriculumsDetailName: PropTypes.string,\n      SubjectID: PropTypes.number\n    }),\n    TeacherID: PropTypes.number,\n    TeacherName: PropTypes.string,\n    CaID: PropTypes.number,\n    CaName: PropTypes.string,\n    StudyTimeID: PropTypes.number,\n    SubjectName: PropTypes.string,\n    Date: PropTypes.string\n  }),\n  isUnavailable: PropTypes.bool,\n  isEditView: PropTypes.bool,\n  isLoading: PropTypes.shape({\n    type: PropTypes.string.isRequired,\n    status: PropTypes.bool.isRequired\n  }),\n  //\n  handleAheadSchedule: PropTypes.func,\n  isClickAheadSchedule: PropTypes.bool,\n  //\n  handleCancelSchedule: PropTypes.func,\n  isCancelSchedule: PropTypes.bool,\n  //\n  optionTeacherList: optionCommonPropTypes,\n  optionStudyTime: optionCommonPropTypes\n};\nScheduleSelfItem.defaultProps = {\n  handleChangeValueSchedule: null,\n  handleChangeStatusSchedule: null,\n  //\n  scheduleObj: {},\n  isUnavailable: false,\n  isEditView: false,\n  isLoading: {\n    type: '',\n    status: false\n  },\n  //\n  handleAheadSchedule: null,\n  isClickAheadSchedule: false,\n  //\n  handleCancelSchedule: null,\n  isCancelSchedule: false,\n  //\n  optionTeacherList: [],\n  optionStudyTime: []\n};\nexport default ScheduleSelfItem;","map":{"version":3,"sources":["D:/MonaMedia/Project/CodingMentor/CodingMentor-FE/src/components/Global/CreateSelfCourse/ScheduleSelf/ScheduleSelfItem.tsx"],"names":["yupResolver","Collapse","Spin","Checkbox","PropTypes","React","useEffect","useForm","yup","SelectField","optionCommonPropTypes","Panel","ScheduleSelfItem","props","handleChangeStatusSchedule","handleChangeValueSchedule","handleAheadSchedule","scheduleObj","isLoading","isUnavailable","isEditView","isClickAheadSchedule","handleCancelSchedule","isCancelSchedule","optionTeacherList","optionStudyTime","ID","SubjectName","TeacherName","Date","TeacherID","CaID","StudyTimeID","defaultValuesInit","schema","object","shape","number","min","required","form","defaultValues","resolver","mode","checkHandleChangeStatusSchedule","vl","type","checkHandleChangeValueSchedule","uid","key","setSiblingsFieldToDefault","setValue","checkHandleAheadSchedule","courseScheduleId","teacherId","checkHandleCancelSchedule","sch","clearErrors","status","Array","isArray","length","value","propTypes","func","oneOfType","string","eventName","Tiet","CurriculumsDetailID","CurriculumsDetailName","SubjectID","CaName","bool","isRequired","defaultProps"],"mappings":"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","sourcesContent":["import { yupResolver } from '@hookform/resolvers/yup';\r\nimport { Collapse, Spin } from 'antd';\r\nimport Checkbox from 'antd/lib/checkbox/Checkbox';\r\nimport PropTypes from 'prop-types';\r\nimport React, { useEffect } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport * as yup from 'yup';\r\nimport SelectField from '~/components/FormControl/SelectField';\r\nimport { optionCommonPropTypes } from '~/utils/proptypes';\r\nconst { Panel } = Collapse;\r\n\r\nconst ScheduleSelfItem = (props) => {\r\n\tconst {\r\n\t\thandleChangeStatusSchedule,\r\n\t\thandleChangeValueSchedule,\r\n\t\thandleAheadSchedule,\r\n\t\t//\r\n\t\tscheduleObj,\r\n\t\tisLoading,\r\n\t\tisUnavailable,\r\n\t\tisEditView,\r\n\t\tisClickAheadSchedule,\r\n\t\t//\r\n\t\thandleCancelSchedule,\r\n\t\tisCancelSchedule,\r\n\t\t//\r\n\t\toptionTeacherList,\r\n\t\toptionStudyTime\r\n\t} = props;\r\n\tconst { ID, SubjectName, TeacherName, Date, TeacherID, CaID, StudyTimeID } = scheduleObj as ISCSchedule;\r\n\tconst defaultValuesInit = {\r\n\t\tTeacherID: 0,\r\n\t\tStudyTimeID: 0\r\n\t};\r\n\tconst schema = yup.object().shape({\r\n\t\tStudyTimeID: yup.number().min(1, 'Bạn cần chọn ca học').required('Bạn không được để trống'),\r\n\t\tTeacherID: yup.number().min(1, 'Bạn cần chọn giáo viên').required('Bạn không được để trống')\r\n\t});\r\n\r\n\tconst form = useForm({\r\n\t\tdefaultValues: defaultValuesInit,\r\n\t\tresolver: yupResolver(schema),\r\n\t\tmode: 'all'\r\n\t});\r\n\r\n\tconst checkHandleChangeStatusSchedule = (vl, type) => {\r\n\t\tif (!handleChangeStatusSchedule) return;\r\n\t\thandleChangeStatusSchedule(vl, type);\r\n\t};\r\n\tconst checkHandleChangeValueSchedule = (uid, key, vl) => {\r\n\t\tif (!handleChangeValueSchedule) return;\r\n\t\thandleChangeValueSchedule(uid, key, vl);\r\n\t};\r\n\tconst setSiblingsFieldToDefault = () => {\r\n\t\tform.setValue('TeacherID', 0);\r\n\t};\r\n\tconst checkHandleAheadSchedule = (courseScheduleId: number, teacherId: number) => {\r\n\t\tif (!handleAheadSchedule) return;\r\n\t\thandleAheadSchedule(courseScheduleId, teacherId);\r\n\t};\r\n\tconst checkHandleCancelSchedule = (sch: ISCSchedule) => {\r\n\t\tif (!handleCancelSchedule) return;\r\n\t\thandleCancelSchedule(sch);\r\n\t};\r\n\t// CHECK IF VALUE DO NOT IN THE SELECT => CHANGE VALUE TO DEFAULT (0)\r\n\tuseEffect(() => {\r\n\t\tform.clearErrors();\r\n\t\tif (\r\n\t\t\t(isLoading.type === 'CHECK_SCHEDULE' || isLoading.type === 'ADD_DATA') &&\r\n\t\t\t!isLoading.status &&\r\n\t\t\tArray.isArray(optionTeacherList) &&\r\n\t\t\toptionTeacherList.length > 0 &&\r\n\t\t\tArray.isArray(optionStudyTime) &&\r\n\t\t\toptionStudyTime.length > 0\r\n\t\t) {\r\n\t\t\tif (isEditView) {\r\n\t\t\t\tform.setValue('TeacherID', TeacherID);\r\n\t\t\t} else {\r\n\t\t\t\tform.setValue('TeacherID', optionTeacherList[0].value);\r\n\t\t\t}\r\n\t\t\tform.setValue('StudyTimeID', CaID || StudyTimeID);\r\n\t\t}\r\n\t\tif (isLoading.type === 'SCHEDULE_INVALID' && isLoading.status) {\r\n\t\t\tform.setValue('TeacherID', optionTeacherList[0]?.value);\r\n\t\t\tform.setValue('StudyTimeID', optionStudyTime[0]?.value);\r\n\t\t}\r\n\t}, [scheduleObj, optionTeacherList, optionStudyTime, isLoading]);\r\n\r\n\treturn (\r\n\t\t<Panel\r\n\t\t\t{...props}\r\n\t\t\theader={\r\n\t\t\t\t<div className=\"info-course-item\">\r\n\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\tonChange={() => {\r\n\t\t\t\t\t\t\tif (isUnavailable) {\r\n\t\t\t\t\t\t\t\t// remove schedule from unavailable list\r\n\t\t\t\t\t\t\t\t// add schedule to available list\r\n\t\t\t\t\t\t\t\tcheckHandleChangeStatusSchedule(scheduleObj, 2);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// remove schedule from available list\r\n\t\t\t\t\t\t\t\t// add schedule to unavailable list\r\n\t\t\t\t\t\t\t\tcheckHandleChangeStatusSchedule(scheduleObj, 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tchecked={isUnavailable}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<p className=\"title\">Buổi học tự sắp xếp</p>\r\n\t\t\t\t\t<ul className=\"info-course-list\">\r\n\t\t\t\t\t\t<li>{SubjectName || 'Tên môn học'}</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t<div className=\"info-course-select\">\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t<SelectField\r\n\t\t\t\t\t\t\tform={form}\r\n\t\t\t\t\t\t\tname=\"StudyTimeID\"\r\n\t\t\t\t\t\t\tplaceholder=\"Chọn ca\"\r\n\t\t\t\t\t\t\toptionList={optionStudyTime}\r\n\t\t\t\t\t\t\tonChangeSelect={(value) => {\r\n\t\t\t\t\t\t\t\tsetSiblingsFieldToDefault();\r\n\t\t\t\t\t\t\t\tcheckHandleChangeValueSchedule(ID, 'CaID', value);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t<SelectField\r\n\t\t\t\t\t\t\tform={form}\r\n\t\t\t\t\t\t\tname=\"TeacherID\"\r\n\t\t\t\t\t\t\tisLoading={isLoading.type === 'CHECK_SCHEDULE' && isLoading.status}\r\n\t\t\t\t\t\t\tplaceholder=\"Chọn giáo viên\"\r\n\t\t\t\t\t\t\toptionList={optionTeacherList}\r\n\t\t\t\t\t\t\tonChangeSelect={(value) => {\r\n\t\t\t\t\t\t\t\tif (isEditView) {\r\n\t\t\t\t\t\t\t\t\tcheckHandleChangeValueSchedule(ID, 'TeacherID', value);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{isCancelSchedule && (\r\n\t\t\t\t\t\t<div className=\"col-12 text-right\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-secondary\"\r\n\t\t\t\t\t\t\t\tdisabled={isLoading.type === 'CANCEL_SCHEDULE' && isLoading.status}\r\n\t\t\t\t\t\t\t\tonClick={() => checkHandleCancelSchedule(scheduleObj)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tHủy buổi học\r\n\t\t\t\t\t\t\t\t{isLoading.type === 'CANCEL_SCHEDULE' && isLoading.status && <Spin className=\"loading-base\" />}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{/* {isEditView && !isClickAheadSchedule && typeof ID === 'number' && (\r\n\t\t\t\t\t\t<div className=\"col-12 text-right\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-secondary\"\r\n\t\t\t\t\t\t\t\tdisabled={isLoading.type === 'AHEAD_SCHEDULE' && isLoading.status}\r\n\t\t\t\t\t\t\t\tonClick={() => checkHandleAheadSchedule(ID, TeacherID)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tLùi buổi học\r\n\t\t\t\t\t\t\t\t{isLoading.type === 'AHEAD_SCHEDULE' && isLoading.status && <Spin className=\"loading-base\" />}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)} */}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Panel>\r\n\t);\r\n};\r\nScheduleSelfItem.propTypes = {\r\n\thandleChangeValueSchedule: PropTypes.func,\r\n\thandleChangeStatusSchedule: PropTypes.func,\r\n\t//\r\n\tscheduleObj: PropTypes.shape({\r\n\t\tID: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\teventName: PropTypes.string,\r\n\t\tTiet: PropTypes.shape({\r\n\t\t\tCurriculumsDetailID: PropTypes.number,\r\n\t\t\tCurriculumsDetailName: PropTypes.string,\r\n\t\t\tSubjectID: PropTypes.number\r\n\t\t}),\r\n\t\tTeacherID: PropTypes.number,\r\n\t\tTeacherName: PropTypes.string,\r\n\t\tCaID: PropTypes.number,\r\n\t\tCaName: PropTypes.string,\r\n\t\tStudyTimeID: PropTypes.number,\r\n\t\tSubjectName: PropTypes.string,\r\n\t\tDate: PropTypes.string\r\n\t}),\r\n\tisUnavailable: PropTypes.bool,\r\n\tisEditView: PropTypes.bool,\r\n\tisLoading: PropTypes.shape({\r\n\t\ttype: PropTypes.string.isRequired,\r\n\t\tstatus: PropTypes.bool.isRequired\r\n\t}),\r\n\t//\r\n\thandleAheadSchedule: PropTypes.func,\r\n\tisClickAheadSchedule: PropTypes.bool,\r\n\t//\r\n\thandleCancelSchedule: PropTypes.func,\r\n\tisCancelSchedule: PropTypes.bool,\r\n\t//\r\n\toptionTeacherList: optionCommonPropTypes,\r\n\toptionStudyTime: optionCommonPropTypes\r\n};\r\nScheduleSelfItem.defaultProps = {\r\n\thandleChangeValueSchedule: null,\r\n\thandleChangeStatusSchedule: null,\r\n\t//\r\n\tscheduleObj: {},\r\n\tisUnavailable: false,\r\n\tisEditView: false,\r\n\tisLoading: { type: '', status: false },\r\n\t//\r\n\thandleAheadSchedule: null,\r\n\tisClickAheadSchedule: false,\r\n\t//\r\n\thandleCancelSchedule: null,\r\n\tisCancelSchedule: false,\r\n\t//\r\n\toptionTeacherList: [],\r\n\toptionStudyTime: []\r\n};\r\nexport default ScheduleSelfItem;\r\n"]},"metadata":{},"sourceType":"module"}