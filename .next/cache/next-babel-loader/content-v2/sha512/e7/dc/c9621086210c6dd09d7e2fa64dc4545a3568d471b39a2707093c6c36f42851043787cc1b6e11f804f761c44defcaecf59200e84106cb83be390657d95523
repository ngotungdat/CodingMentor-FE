{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\pages\\\\option\\\\term-of-service\\\\index.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport { Card, Button, Spin } from 'antd';\nimport EditorBase from '~/components/Elements/EditorBase';\nimport TitlePage from '~/components/TitlePage';\nimport LayoutBase from '~/components/LayoutBase';\nimport { rulesApi } from '~/apiBase';\nimport { useWrap } from '~/context/wrap';\n\nvar TermOfService = function TermOfService() {\n  _s();\n\n  var _useState = useState(null),\n      data = _useState[0],\n      setData = _useState[1];\n\n  var _useState2 = useState(''),\n      dataContent = _useState2[0],\n      setDataContent = _useState2[1];\n\n  var _useState3 = useState(false),\n      isLoading = _useState3[0],\n      setIsLoading = _useState3[1];\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti;\n\n  var fetchContract = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return rulesApi.getAll({});\n\n            case 3:\n              res = _context.sent;\n\n              if (res.status === 200) {\n                if (typeof res.data.data === 'object') {\n                  setData(res.data.data);\n                }\n              } else if (res.status === 204) {\n                showNoti('danger', 'Không tìm thấy');\n              }\n\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              showNoti('danger', _context.t0.message);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function fetchContract() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var changeContractContent = function changeContractContent(value) {\n    setDataContent(value);\n  };\n\n  var updateData = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (dataContent) {\n                _context2.next = 3;\n                break;\n              }\n\n              showNoti('danger', 'Bạn chưa sửa đổi');\n              return _context2.abrupt(\"return\");\n\n            case 3:\n              setIsLoading(true);\n              _context2.prev = 4;\n              _context2.next = 7;\n              return rulesApi.update(_objectSpread(_objectSpread({}, data), {}, {\n                RulesContent: dataContent\n              }));\n\n            case 7:\n              res = _context2.sent;\n              showNoti('success', res.data.message);\n              _context2.next = 14;\n              break;\n\n            case 11:\n              _context2.prev = 11;\n              _context2.t0 = _context2[\"catch\"](4);\n              showNoti('danger', _context2.t0.message);\n\n            case 14:\n              _context2.prev = 14;\n              setDataContent('');\n              setIsLoading(false);\n              return _context2.finish(14);\n\n            case 18:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[4, 11, 14, 18]]);\n    }));\n\n    return function updateData() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    fetchContract();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-12\",\n      children: [/*#__PURE__*/_jsxDEV(TitlePage, {\n        title: \"\\u0110i\\u1EC1u kho\\u1EA3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 5\n      }, _this), /*#__PURE__*/_jsxDEV(Card, {\n        children: [/*#__PURE__*/_jsxDEV(EditorBase, {\n          handleChangeDataEditor: changeContractContent,\n          content: data === null || data === void 0 ? void 0 : data.RulesContent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row pt-3\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12 d-flex justify-content-center\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                paddingRight: 5\n              },\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                type: \"primary\",\n                size: \"large\",\n                onClick: updateData,\n                children: [\"X\\xE1c nh\\u1EADn\", isLoading && /*#__PURE__*/_jsxDEV(Spin, {\n                  className: \"loading-base\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 69,\n                  columnNumber: 24\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 9\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 8\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 7\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 6\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 5\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 4\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 3\n  }, _this);\n};\n\n_s(TermOfService, \"L8z0MELV2saPA+vuDvRuIgWMmnI=\", false, function () {\n  return [useWrap];\n});\n\n_c = TermOfService;\nTermOfService.layout = LayoutBase;\nexport default TermOfService;\n\nvar _c;\n\n$RefreshReg$(_c, \"TermOfService\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/pages/option/term-of-service/index.tsx"],"names":["React","useEffect","useState","Card","Button","Spin","EditorBase","TitlePage","LayoutBase","rulesApi","useWrap","TermOfService","data","setData","dataContent","setDataContent","isLoading","setIsLoading","showNoti","fetchContract","getAll","res","status","message","changeContractContent","value","updateData","update","RulesContent","paddingRight","layout"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from 'react';\r\nimport { Card, Button, Spin } from 'antd';\r\nimport EditorBase from '~/components/Elements/EditorBase';\r\nimport TitlePage from '~/components/TitlePage';\r\nimport LayoutBase from '~/components/LayoutBase';\r\n\r\nimport { rulesApi } from '~/apiBase';\r\nimport { useWrap } from '~/context/wrap';\r\n\r\nconst TermOfService = () => {\r\n\tconst [data, setData] = useState(null);\r\n\tconst [dataContent, setDataContent] = useState('');\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\tconst { showNoti } = useWrap();\r\n\r\n\tconst fetchContract = async () => {\r\n\t\ttry {\r\n\t\t\tlet res = await rulesApi.getAll({});\r\n\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tif (typeof res.data.data === 'object') {\r\n\t\t\t\t\tsetData(res.data.data);\r\n\t\t\t\t}\r\n\t\t\t} else if (res.status === 204) {\r\n\t\t\t\tshowNoti('danger', 'Không tìm thấy');\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message);\r\n\t\t}\r\n\t};\r\n\tconst changeContractContent = (value) => {\r\n\t\tsetDataContent(value);\r\n\t};\r\n\tconst updateData = async () => {\r\n\t\tif (!dataContent) {\r\n\t\t\tshowNoti('danger', 'Bạn chưa sửa đổi');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetIsLoading(true);\r\n\t\ttry {\r\n\t\t\tlet res = await rulesApi.update({\r\n\t\t\t\t...data,\r\n\t\t\t\tRulesContent: dataContent\r\n\t\t\t});\r\n\t\t\tshowNoti('success', res.data.message);\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message);\r\n\t\t} finally {\r\n\t\t\tsetDataContent('');\r\n\t\t\tsetIsLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchContract();\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className=\"row\">\r\n\t\t\t<div className=\"col-12\">\r\n\t\t\t\t<TitlePage title=\"Điều khoản\" />\r\n\t\t\t\t<Card>\r\n\t\t\t\t\t<EditorBase handleChangeDataEditor={changeContractContent} content={data?.RulesContent} />\r\n\t\t\t\t\t<div className=\"row pt-3\">\r\n\t\t\t\t\t\t<div className=\"col-12 d-flex justify-content-center\">\r\n\t\t\t\t\t\t\t<div style={{ paddingRight: 5 }}>\r\n\t\t\t\t\t\t\t\t<Button type=\"primary\" size=\"large\" onClick={updateData}>\r\n\t\t\t\t\t\t\t\t\tXác nhận\r\n\t\t\t\t\t\t\t\t\t{isLoading && <Spin className=\"loading-base\" />}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Card>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\nTermOfService.layout = LayoutBase;\r\nexport default TermOfService;\r\n"]},"metadata":{},"sourceType":"module"}