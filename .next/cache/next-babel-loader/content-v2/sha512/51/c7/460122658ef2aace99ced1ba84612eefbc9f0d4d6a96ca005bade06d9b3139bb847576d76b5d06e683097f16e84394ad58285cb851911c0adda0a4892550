{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\ScheduleStudy\\\\Form\\\\ManyTeacher.tsx\";\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { Form, Popover, Spin } from 'antd';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport DateField from '~/components/FormControl/DateField';\nimport SelectField from '~/components/FormControl/SelectField';\nimport { optionCommonPropTypes } from '~/utils/proptypes';\nCheckManyEmptyTeacher.propTypes = {\n  optionList: PropTypes.shape({\n    branchList: optionCommonPropTypes,\n    studyTimeList: optionCommonPropTypes,\n    roomList: optionCommonPropTypes,\n    teacherList: optionCommonPropTypes\n  }),\n  isLoading: PropTypes.shape({\n    type: PropTypes.string.isRequired,\n    status: PropTypes.bool.isRequired\n  }),\n  handleFetchTeacher: PropTypes.func,\n  handleSubmit: PropTypes.func\n};\nCheckManyEmptyTeacher.defaultProps = {\n  optionList: {\n    branchList: [],\n    studyTimeList: [],\n    roomList: [],\n    teacherList: []\n  },\n  isLoading: {\n    type: '',\n    status: false\n  },\n  //\n  handleFetchTeacher: null,\n  handleSubmit: null\n};\n\nfunction CheckManyEmptyTeacher(props) {\n  const {\n    isLoading,\n    optionList,\n    handleFetchTeacher,\n    handleSubmit\n  } = props;\n  const {\n    branchList,\n    studyTimeList,\n    teacherList\n  } = optionList;\n  const {\n    0: showFilter,\n    1: showFilterSet\n  } = useState(false);\n\n  const funcShowFilter = () => {\n    showFilter ? showFilterSet(false) : showFilterSet(true);\n  };\n\n  const schema = yup.object().shape({\n    BranchID: yup.number().nullable().required('Bạn không được để trống'),\n    TeacherID: yup.array().min(1, 'Bạn phải chọn ít nhất 1 giáo viên').required('Bạn không được để trống'),\n    StudyTimeID: yup.array().min(1, 'Bạn phải chọn ít nhất 1 ca học').required('Bạn không được để trống'),\n    StartTime: yup.date().required('Bạn không được để trống'),\n    EndTime: yup.date().required('Bạn không được để trống').when('StartTime', (startDate, schema) => startDate && schema.min(startDate, `Ngày không hợp lệ`))\n  });\n  const defaultValuesInit = {\n    BranchID: null,\n    TeacherID: undefined,\n    StudyTimeID: undefined,\n    StartTime: moment().format('YYYY/MM/DD'),\n    EndTime: moment().add(1, 'months').format('YYYY/MM/DD')\n  };\n  const form = useForm({\n    defaultValues: defaultValuesInit,\n    resolver: yupResolver(schema)\n  });\n\n  const checkHandleFetchTeacher = value => {\n    if (!handleFetchTeacher) return;\n    form.setValue('TeacherID', undefined);\n    handleFetchTeacher(value);\n  };\n\n  const checkHandleSubmit = value => {\n    if (!handleSubmit) return;\n    handleSubmit(value).then(res => {\n      if (res && res.status === 200) {\n        funcShowFilter();\n      }\n    });\n  };\n\n  const handleResetFilter = () => {\n    form.reset({\n      BranchID: null,\n      TeacherID: undefined,\n      StudyTimeID: undefined,\n      StartTime: undefined,\n      EndTime: undefined\n    });\n  };\n\n  const content = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `wrap-filter small`,\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      layout: \"vertical\",\n      onFinish: form.handleSubmit(checkHandleSubmit),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-12\",\n          children: /*#__PURE__*/_jsxDEV(SelectField, {\n            form: form,\n            name: \"BranchID\",\n            label: \"Trung t\\xE2m\",\n            optionList: branchList,\n            placeholder: \"Ch\\u1ECDn trung t\\xE2m\",\n            isLoading: isLoading.type === 'FETCH_DATA' && isLoading.status,\n            onChangeSelect: vl => checkHandleFetchTeacher(vl),\n            isRequired: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-12\",\n          children: /*#__PURE__*/_jsxDEV(SelectField, {\n            form: form,\n            name: \"TeacherID\",\n            label: \"Gi\\xE1o vi\\xEAn\",\n            mode: \"multiple\",\n            optionList: teacherList,\n            placeholder: \"Ch\\u1ECDn gi\\xE1o vi\\xEAn\",\n            isLoading: isLoading.type === 'FETCH_TEACHER' && isLoading.status,\n            isRequired: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-12\",\n          children: /*#__PURE__*/_jsxDEV(SelectField, {\n            form: form,\n            name: \"StudyTimeID\",\n            label: \"Ca h\\u1ECDc\",\n            mode: \"multiple\",\n            optionList: studyTimeList,\n            placeholder: \"Ch\\u1ECDn ca h\\u1ECDc\",\n            isLoading: isLoading.type === 'FETCH_DATA' && isLoading.status,\n            isRequired: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6\",\n          children: /*#__PURE__*/_jsxDEV(DateField, {\n            form: form,\n            name: \"StartTime\",\n            label: \"T\\u1EEB ng\\xE0y\",\n            placeholder: \"Ch\\u1ECDn ng\\xE0y\",\n            isRequired: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6\",\n          children: /*#__PURE__*/_jsxDEV(DateField, {\n            form: form,\n            name: \"EndTime\",\n            label: \"\\u0110\\u1EBFn ng\\xE0y\",\n            placeholder: \"Ch\\u1ECDn ng\\xE0y\",\n            isRequired: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-12 mt-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-primary \",\n            disabled: isLoading.type == 'ADD_DATA' && isLoading.status,\n            children: [\"Ki\\u1EC3m tra\", isLoading.type == 'ADD_DATA' && isLoading.status && /*#__PURE__*/_jsxDEV(Spin, {\n              className: \"loading-base\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 61\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"light btn btn-secondary\",\n            style: {\n              marginLeft: '10px'\n            },\n            onClick: handleResetFilter,\n            children: \"Reset\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 3\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrap-filter-parent\",\n      children: /*#__PURE__*/_jsxDEV(Popover, {\n        placement: \"bottomRight\",\n        content: content,\n        trigger: \"click\",\n        visible: showFilter,\n        onVisibleChange: funcShowFilter,\n        overlayClassName: \"filter-popover\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"light btn btn-danger\",\n          children: \"Ki\\u1EC3m tra l\\u1ECBch tr\\u1ED1ng nhi\\u1EC1u gi\\xE1o vi\\xEAn\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 4\n    }, this)\n  }, void 0, false);\n}\n\nexport default CheckManyEmptyTeacher;","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/ScheduleStudy/Form/ManyTeacher.tsx"],"names":["yupResolver","Form","Popover","Spin","moment","PropTypes","React","useState","useForm","yup","DateField","SelectField","optionCommonPropTypes","CheckManyEmptyTeacher","propTypes","optionList","shape","branchList","studyTimeList","roomList","teacherList","isLoading","type","string","isRequired","status","bool","handleFetchTeacher","func","handleSubmit","defaultProps","props","showFilter","showFilterSet","funcShowFilter","schema","object","BranchID","number","nullable","required","TeacherID","array","min","StudyTimeID","StartTime","date","EndTime","when","startDate","defaultValuesInit","undefined","format","add","form","defaultValues","resolver","checkHandleFetchTeacher","value","setValue","checkHandleSubmit","then","res","handleResetFilter","reset","content","vl","marginLeft"],"mappings":"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","sourcesContent":["import { yupResolver } from '@hookform/resolvers/yup';\r\nimport { Form, Popover, Spin } from 'antd';\r\nimport moment from 'moment';\r\nimport PropTypes from 'prop-types';\r\nimport React, { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport * as yup from 'yup';\r\nimport DateField from '~/components/FormControl/DateField';\r\nimport SelectField from '~/components/FormControl/SelectField';\r\nimport { optionCommonPropTypes } from '~/utils/proptypes';\r\n\r\nCheckManyEmptyTeacher.propTypes = {\r\n\toptionList: PropTypes.shape({\r\n\t\tbranchList: optionCommonPropTypes,\r\n\t\tstudyTimeList: optionCommonPropTypes,\r\n\t\troomList: optionCommonPropTypes,\r\n\t\tteacherList: optionCommonPropTypes\r\n\t}),\r\n\tisLoading: PropTypes.shape({\r\n\t\ttype: PropTypes.string.isRequired,\r\n\t\tstatus: PropTypes.bool.isRequired\r\n\t}),\r\n\thandleFetchTeacher: PropTypes.func,\r\n\thandleSubmit: PropTypes.func\r\n};\r\nCheckManyEmptyTeacher.defaultProps = {\r\n\toptionList: {\r\n\t\tbranchList: [],\r\n\t\tstudyTimeList: [],\r\n\t\troomList: [],\r\n\t\tteacherList: []\r\n\t},\r\n\tisLoading: { type: '', status: false },\r\n\t//\r\n\thandleFetchTeacher: null,\r\n\thandleSubmit: null\r\n};\r\nfunction CheckManyEmptyTeacher(props) {\r\n\tconst { isLoading, optionList, handleFetchTeacher, handleSubmit } = props;\r\n\tconst { branchList, studyTimeList, teacherList } = optionList;\r\n\tconst [showFilter, showFilterSet] = useState(false);\r\n\r\n\tconst funcShowFilter = () => {\r\n\t\tshowFilter ? showFilterSet(false) : showFilterSet(true);\r\n\t};\r\n\r\n\tconst schema = yup.object().shape({\r\n\t\tBranchID: yup.number().nullable().required('Bạn không được để trống'),\r\n\t\tTeacherID: yup.array().min(1, 'Bạn phải chọn ít nhất 1 giáo viên').required('Bạn không được để trống'),\r\n\t\tStudyTimeID: yup.array().min(1, 'Bạn phải chọn ít nhất 1 ca học').required('Bạn không được để trống'),\r\n\t\tStartTime: yup.date().required('Bạn không được để trống'),\r\n\t\tEndTime: yup\r\n\t\t\t.date()\r\n\t\t\t.required('Bạn không được để trống')\r\n\t\t\t.when('StartTime', (startDate, schema) => startDate && schema.min(startDate, `Ngày không hợp lệ`))\r\n\t});\r\n\r\n\tconst defaultValuesInit = {\r\n\t\tBranchID: null,\r\n\t\tTeacherID: undefined,\r\n\t\tStudyTimeID: undefined,\r\n\t\tStartTime: moment().format('YYYY/MM/DD'),\r\n\t\tEndTime: moment().add(1, 'months').format('YYYY/MM/DD')\r\n\t};\r\n\r\n\tconst form = useForm({\r\n\t\tdefaultValues: defaultValuesInit,\r\n\t\tresolver: yupResolver(schema)\r\n\t});\r\n\r\n\tconst checkHandleFetchTeacher = (value) => {\r\n\t\tif (!handleFetchTeacher) return;\r\n\t\tform.setValue('TeacherID', undefined);\r\n\t\thandleFetchTeacher(value);\r\n\t};\r\n\r\n\tconst checkHandleSubmit = (value) => {\r\n\t\tif (!handleSubmit) return;\r\n\t\thandleSubmit(value).then((res) => {\r\n\t\t\tif (res && res.status === 200) {\r\n\t\t\t\tfuncShowFilter();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tconst handleResetFilter = () => {\r\n\t\tform.reset({\r\n\t\t\tBranchID: null,\r\n\t\t\tTeacherID: undefined,\r\n\t\t\tStudyTimeID: undefined,\r\n\t\t\tStartTime: undefined,\r\n\t\t\tEndTime: undefined\r\n\t\t});\r\n\t};\r\n\tconst content = (\r\n\t\t<div className={`wrap-filter small`}>\r\n\t\t\t<Form layout=\"vertical\" onFinish={form.handleSubmit(checkHandleSubmit)}>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-md-12\">\r\n\t\t\t\t\t\t<SelectField\r\n\t\t\t\t\t\t\tform={form}\r\n\t\t\t\t\t\t\tname=\"BranchID\"\r\n\t\t\t\t\t\t\tlabel=\"Trung tâm\"\r\n\t\t\t\t\t\t\toptionList={branchList}\r\n\t\t\t\t\t\t\tplaceholder=\"Chọn trung tâm\"\r\n\t\t\t\t\t\t\tisLoading={isLoading.type === 'FETCH_DATA' && isLoading.status}\r\n\t\t\t\t\t\t\tonChangeSelect={(vl) => checkHandleFetchTeacher(vl)}\r\n\t\t\t\t\t\t\tisRequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"col-md-12\">\r\n\t\t\t\t\t\t<SelectField\r\n\t\t\t\t\t\t\tform={form}\r\n\t\t\t\t\t\t\tname=\"TeacherID\"\r\n\t\t\t\t\t\t\tlabel=\"Giáo viên\"\r\n\t\t\t\t\t\t\tmode=\"multiple\"\r\n\t\t\t\t\t\t\toptionList={teacherList}\r\n\t\t\t\t\t\t\tplaceholder=\"Chọn giáo viên\"\r\n\t\t\t\t\t\t\tisLoading={isLoading.type === 'FETCH_TEACHER' && isLoading.status}\r\n\t\t\t\t\t\t\tisRequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-md-12\">\r\n\t\t\t\t\t\t<SelectField\r\n\t\t\t\t\t\t\tform={form}\r\n\t\t\t\t\t\t\tname=\"StudyTimeID\"\r\n\t\t\t\t\t\t\tlabel=\"Ca học\"\r\n\t\t\t\t\t\t\tmode=\"multiple\"\r\n\t\t\t\t\t\t\toptionList={studyTimeList}\r\n\t\t\t\t\t\t\tplaceholder=\"Chọn ca học\"\r\n\t\t\t\t\t\t\tisLoading={isLoading.type === 'FETCH_DATA' && isLoading.status}\r\n\t\t\t\t\t\t\tisRequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-md-6\">\r\n\t\t\t\t\t\t<DateField form={form} name=\"StartTime\" label=\"Từ ngày\" placeholder=\"Chọn ngày\" isRequired />\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"col-md-6\">\r\n\t\t\t\t\t\t<DateField form={form} name=\"EndTime\" label=\"Đến ngày\" placeholder=\"Chọn ngày\" isRequired />\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"col-md-12 mt-3\">\r\n\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary \" disabled={isLoading.type == 'ADD_DATA' && isLoading.status}>\r\n\t\t\t\t\t\t\tKiểm tra\r\n\t\t\t\t\t\t\t{isLoading.type == 'ADD_DATA' && isLoading.status && <Spin className=\"loading-base\" />}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\tclassName=\"light btn btn-secondary\"\r\n\t\t\t\t\t\t\tstyle={{ marginLeft: '10px' }}\r\n\t\t\t\t\t\t\tonClick={handleResetFilter}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tReset\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Form>\r\n\t\t</div>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"wrap-filter-parent\">\r\n\t\t\t\t<Popover\r\n\t\t\t\t\tplacement=\"bottomRight\"\r\n\t\t\t\t\tcontent={content}\r\n\t\t\t\t\ttrigger=\"click\"\r\n\t\t\t\t\tvisible={showFilter}\r\n\t\t\t\t\tonVisibleChange={funcShowFilter}\r\n\t\t\t\t\toverlayClassName=\"filter-popover\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<button className=\"light btn btn-danger\">Kiểm tra lịch trống nhiều giáo viên</button>\r\n\t\t\t\t</Popover>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default CheckManyEmptyTeacher;\r\n"]},"metadata":{},"sourceType":"module"}