{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\ExamList\\\\ExamShow\\\\TypingList.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useState } from 'react';\nimport ReactHtmlParser from 'react-html-parser';\nimport { useDoingTest } from '~/context/useDoingTest';\nimport { useDoneTest } from '~/context/useDoneTest';\n\nconst TypingList = props => {\n  const {\n    doneTestData\n  } = useDoneTest();\n  const {\n    dataQuestion,\n    listQuestionID,\n    isDoingTest\n  } = props;\n  const {\n    activeID,\n    getActiveID,\n    packageResult,\n    getPackageResult,\n    getListPicked,\n    removeListPicked\n  } = useDoingTest();\n  const {\n    0: listInput,\n    1: setListInput\n  } = useState([]);\n  const {\n    0: listCorrectAnswer,\n    1: setListCorrectAnswer\n  } = useState([]);\n  const {\n    0: isActive,\n    1: setIsActive\n  } = useState(null);\n  const {\n    0: loadFirst,\n    1: setLoadFirst\n  } = useState(false);\n  useEffect(() => {\n    if (dataQuestion.Paragraph !== '') {\n      let spaceEditor = document.querySelectorAll('.box-typing .space-editor');\n\n      if (spaceEditor && spaceEditor.length > 0) {\n        spaceEditor.forEach((item, index) => {\n          let quesID = parseInt(item.getAttribute('ques-id')); // Sắp xếp lại thứ tự các ô input trong đoạn văn\n\n          let indexQues = null;\n\n          if (listQuestionID.includes(quesID)) {\n            indexQues = listQuestionID.indexOf(quesID);\n          }\n\n          if (indexQues) {\n            let positionSpace = document.querySelectorAll('.box-typing .position-space');\n\n            if (positionSpace.length < spaceEditor.length) {\n              let span = document.createElement('span');\n              span.classList.add('position-space');\n              span.id = quesID.toString();\n\n              if (quesID === activeID) {\n                span.classList.add('active');\n              }\n\n              span.append(`(${indexQues + 1})`);\n              item.innerHTML = '';\n              item.before(span);\n            }\n          }\n        });\n      }\n    }\n  }, [listQuestionID]); // ----------- ALL ACTION IN DOINGTEST -------------\n\n  const returnPosition = quesID => {\n    let text = '';\n    let indexQuestion = listQuestionID.findIndex(id => id === quesID);\n    text = (indexQuestion + 1).toString() + '/';\n    return text;\n  };\n\n  const handleChangeText = (text, quesID) => {\n    // Find index\n    let indexQuestion = packageResult.SetPackageResultDetailInfoList.findIndex(item => item.ExamTopicDetailID === dataQuestion.ID);\n    let indexQuestionDetail = packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList.findIndex(item => item.ExerciseID === quesID); // Add new answer to list - Kiểm tra xem mảng có data chưa, nếu chưa thì thêm mới, ngược lại thì cập nhật object\n    // Đối với loại Điền từ thì mảng chỉ có 1 object đáp án\n\n    if (packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[indexQuestionDetail].SetPackageExerciseAnswerStudentList.length == 0) {\n      packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[indexQuestionDetail].SetPackageExerciseAnswerStudentList.push({\n        AnswerID: 0,\n        AnswerContent: text,\n        FileAudio: ''\n      });\n    } else {\n      packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[indexQuestionDetail].SetPackageExerciseAnswerStudentList[0].AnswerContent = text;\n    }\n\n    getPackageResult(_objectSpread({}, packageResult));\n  };\n\n  useEffect(() => {\n    if (!doneTestData) {\n      if (isDoingTest) {\n        if (dataQuestion.Paragraph !== '') {\n          let spaceEditor = document.querySelectorAll('.doingtest-group .box-typing .space-editor');\n\n          if (spaceEditor && spaceEditor.length > 0) {\n            spaceEditor.forEach((item, index) => {\n              let quesID = parseInt(item.getAttribute('ques-id')); // Trường hợp điền từ xong một lát quay lại vẫn còn\n\n              let indexQuestion = packageResult.SetPackageResultDetailInfoList.findIndex(item => item.ExamTopicDetailID === dataQuestion.ID);\n              let indexQuestionDetail = packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList.findIndex(item => item.ExerciseID === quesID);\n\n              if (packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[indexQuestionDetail].SetPackageExerciseAnswerStudentList.length > 0) {\n                if (!loadFirst) {\n                  item.innerHTML = packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[indexQuestionDetail].SetPackageExerciseAnswerStudentList[0].AnswerContent;\n                  setLoadFirst(true);\n                } else {\n                  if (activeID === isActive) {\n                    item.innerHTML = packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[indexQuestionDetail].SetPackageExerciseAnswerStudentList[0].AnswerContent;\n                  }\n                }\n              } //Tìm và active đúng ô input\n\n\n              item.classList.remove('active-type-input');\n\n              if (quesID === activeID) {\n                item.classList.add('active-type-input');\n              }\n            });\n          }\n        }\n      }\n    } else {\n      if (dataQuestion.Paragraph !== '') {\n        let spaceEditor = document.querySelectorAll('.box-typing  .space-editor');\n        spaceEditor.forEach(item => {\n          item.setAttribute('contenteditable', 'false');\n          let quesID = parseInt(item.getAttribute('ques-id'));\n          dataQuestion.ExerciseTopic.every(ques => {\n            if (ques.ExerciseID === quesID) {\n              // Check this answer is right or wrong\n              if (ques.isTrue) {\n                item.classList.add('right-answer');\n              } else {\n                item.classList.add('wrong-answer');\n              } // Find answer content of user\n\n\n              if (ques.ExerciseAnswer.length > 0) {\n                if (ques.ExerciseAnswer[0].AnswerContent && ques.ExerciseAnswer[0].AnswerContent !== '') {\n                  item.innerHTML = ques.ExerciseAnswer[0].AnswerContent;\n                } else {\n                  item.classList.add('center-row');\n                } // Tạo đáp án đúng để hover\n\n\n                let getNodes = str => new DOMParser().parseFromString(str, 'text/html').body.childNodes;\n\n                let node = getNodes(`<div class=\"tooltip-answer\" id=\"${quesID}\">${ques.ExerciseAnswer[0].ExerciseAnswerContent}</div>`);\n                item.appendChild(node[0]);\n                listCorrectAnswer.push({\n                  id: ques.ExerciseAnswer[0].ExerciseAnswerID,\n                  content: ques.ExerciseAnswer[0].ExerciseAnswerContent\n                });\n              }\n\n              return false;\n            }\n\n            return true;\n          });\n          setListCorrectAnswer([...listCorrectAnswer]);\n        });\n      }\n    }\n\n    if (doneTestData || isDoingTest) {\n      // -- Sắp xếp lại vị trí\n      let positionSpace = document.querySelectorAll('.position-space');\n      positionSpace.forEach(item => {\n        item.classList.remove('active');\n\n        if (parseInt(item.id) === activeID) {\n          item.classList.add('active');\n        }\n      });\n    }\n  }, [activeID]);\n  useEffect(() => {\n    if (doneTestData) {\n      if (listCorrectAnswer.length > 0) {\n        let spaceEditor = document.querySelectorAll('.test-wrapper .box-typing .space-editor');\n        let tooltipAns = document.querySelectorAll('.test-wrapper .box-typing .tooltip-answer');\n        spaceEditor.forEach(item => {\n          // Mouse over\n          item.addEventListener('mouseover', event => {\n            let quesID = item.getAttribute('ques-id');\n            tooltipAns.forEach(e => {\n              if (e.id === quesID) {\n                e.classList.remove('d-none');\n                e.classList.add('d-block');\n              }\n            });\n          }); // Mouse out\n\n          item.addEventListener('mouseout', () => {\n            let quesID = item.getAttribute('ques-id');\n            tooltipAns.forEach(e => {\n              if (e.id === quesID) {\n                e.classList.remove('d-block');\n                e.classList.add('d-none');\n              }\n            });\n          });\n        });\n      }\n    }\n  }, [listCorrectAnswer]);\n  useEffect(() => {\n    if (!doneTestData) {\n      let el = document.querySelectorAll('.doingtest-group .box-typing .space-editor');\n      el.forEach(item => {\n        listInput.push(item.innerHTML);\n        let quesID = parseInt(item.getAttribute('ques-id'));\n        item.addEventListener('click', event => {\n          event.preventDefault();\n          getActiveID(quesID);\n          setIsActive(quesID);\n        });\n        item.addEventListener('keyup', event => {\n          const input = event.target;\n          handleChangeText(input.innerText, quesID); // Điều kiện đề input co giãn theo text\n\n          let lengthText = input.innerText.length;\n\n          if (lengthText > 14) {\n            item.classList.add('auto');\n          } else {\n            item.classList.remove('auto');\n\n            if (lengthText < 1) {\n              removeListPicked(quesID);\n            } else {\n              getListPicked(quesID);\n            }\n          }\n        });\n      });\n      setListInput([...listInput]);\n    }\n  }, []);\n\n  const convertHTML = e => {\n    // Thay thẻ div = input\n    let cloneValueEditor = dataQuestion.Paragraph;\n    console.log('dataQuestion: ', dataQuestion);\n\n    if ((dataQuestion === null || dataQuestion === void 0 ? void 0 : dataQuestion.ExerciseTopic.length) > 0) {\n      let cloneValueEditor = dataQuestion.Paragraph;\n      dataQuestion.ExerciseTopic.forEach((item, index) => {\n        let indexInput = parseInt(item.ExerciseID) + 1;\n        let temp = index + 1;\n        indexInput = indexInput.toString();\n        cloneValueEditor = cloneValueEditor.replace(`<div ques-id=\"${item.ExerciseID}\" id=\"${temp}\" class='space-editor' role='textbox' aria-labelledby='txtboxLabel' aria-multiline='true' contentEditable=\"true\">(${temp})</div>`, `<input id=\"${index}\" class=\"space-editor\" placeholder=\"(${temp})\">`);\n      });\n      return cloneValueEditor;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"\",\n      children: ReactHtmlParser(dataQuestion.Content)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 4\n    }, this), ReactHtmlParser(convertHTML(`${dataQuestion.Paragraph}`)), doneTestData && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrap-list-answer-typing mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n          className: \"mb-2\",\n          children: \"\\u0110\\xE1p \\xE1n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"list-answer-typing w-100  pl-0\",\n          children: dataQuestion === null || dataQuestion === void 0 ? void 0 : dataQuestion.ExerciseTopic.map(item => item.ExerciseAnswer.length > 0 && /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"answer-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"number\",\n              children: returnPosition(item.ExerciseID)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 12\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text\",\n              children: item.ExerciseAnswer[0].ExerciseAnswerContent\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 12\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 11\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 6\n      }, this)\n    }, void 0, false)]\n  }, void 0, true);\n};\n\nexport default TypingList;","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/ExamList/ExamShow/TypingList.tsx"],"names":["React","useEffect","useState","ReactHtmlParser","useDoingTest","useDoneTest","TypingList","props","doneTestData","dataQuestion","listQuestionID","isDoingTest","activeID","getActiveID","packageResult","getPackageResult","getListPicked","removeListPicked","listInput","setListInput","listCorrectAnswer","setListCorrectAnswer","isActive","setIsActive","loadFirst","setLoadFirst","Paragraph","spaceEditor","document","querySelectorAll","length","forEach","item","index","quesID","parseInt","getAttribute","indexQues","includes","indexOf","positionSpace","span","createElement","classList","add","id","toString","append","innerHTML","before","returnPosition","text","indexQuestion","findIndex","handleChangeText","SetPackageResultDetailInfoList","ExamTopicDetailID","ID","indexQuestionDetail","SetPackageExerciseStudentInfoList","ExerciseID","SetPackageExerciseAnswerStudentList","push","AnswerID","AnswerContent","FileAudio","remove","setAttribute","ExerciseTopic","every","ques","isTrue","ExerciseAnswer","getNodes","str","DOMParser","parseFromString","body","childNodes","node","ExerciseAnswerContent","appendChild","ExerciseAnswerID","content","tooltipAns","addEventListener","event","e","el","preventDefault","input","target","innerText","lengthText","convertHTML","cloneValueEditor","console","log","indexInput","temp","replace","Content","map"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport ReactHtmlParser from 'react-html-parser'\r\nimport { useDoingTest } from '~/context/useDoingTest'\r\nimport { useDoneTest } from '~/context/useDoneTest'\r\n\r\nconst TypingList = (props) => {\r\n\tconst { doneTestData } = useDoneTest()\r\n\tconst { dataQuestion, listQuestionID, isDoingTest } = props\r\n\tconst { activeID, getActiveID, packageResult, getPackageResult, getListPicked, removeListPicked } = useDoingTest()\r\n\tconst [listInput, setListInput] = useState([])\r\n\tconst [listCorrectAnswer, setListCorrectAnswer] = useState([])\r\n\tconst [isActive, setIsActive] = useState(null)\r\n\tconst [loadFirst, setLoadFirst] = useState(false)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (dataQuestion.Paragraph !== '') {\r\n\t\t\tlet spaceEditor = document.querySelectorAll('.box-typing .space-editor')\r\n\t\t\tif (spaceEditor && spaceEditor.length > 0) {\r\n\t\t\t\tspaceEditor.forEach((item, index) => {\r\n\t\t\t\t\tlet quesID = parseInt(item.getAttribute('ques-id'))\r\n\t\t\t\t\t// Sắp xếp lại thứ tự các ô input trong đoạn văn\r\n\t\t\t\t\tlet indexQues = null\r\n\t\t\t\t\tif (listQuestionID.includes(quesID)) {\r\n\t\t\t\t\t\tindexQues = listQuestionID.indexOf(quesID)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (indexQues) {\r\n\t\t\t\t\t\tlet positionSpace = document.querySelectorAll('.box-typing .position-space')\r\n\t\t\t\t\t\tif (positionSpace.length < spaceEditor.length) {\r\n\t\t\t\t\t\t\tlet span = document.createElement('span')\r\n\t\t\t\t\t\t\tspan.classList.add('position-space')\r\n\t\t\t\t\t\t\tspan.id = quesID.toString()\r\n\t\t\t\t\t\t\tif (quesID === activeID) {\r\n\t\t\t\t\t\t\t\tspan.classList.add('active')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tspan.append(`(${indexQues + 1})`)\r\n\r\n\t\t\t\t\t\t\titem.innerHTML = ''\r\n\t\t\t\t\t\t\titem.before(span)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}, [listQuestionID])\r\n\r\n\t// ----------- ALL ACTION IN DOINGTEST -------------\r\n\r\n\tconst returnPosition = (quesID) => {\r\n\t\tlet text = ''\r\n\t\tlet indexQuestion = listQuestionID.findIndex((id) => id === quesID)\r\n\t\ttext = (indexQuestion + 1).toString() + '/'\r\n\t\treturn text\r\n\t}\r\n\r\n\tconst handleChangeText = (text, quesID) => {\r\n\t\t// Find index\r\n\t\tlet indexQuestion = packageResult.SetPackageResultDetailInfoList.findIndex((item) => item.ExamTopicDetailID === dataQuestion.ID)\r\n\t\tlet indexQuestionDetail = packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList.findIndex(\r\n\t\t\t(item) => item.ExerciseID === quesID\r\n\t\t)\r\n\t\t// Add new answer to list - Kiểm tra xem mảng có data chưa, nếu chưa thì thêm mới, ngược lại thì cập nhật object\r\n\t\t// Đối với loại Điền từ thì mảng chỉ có 1 object đáp án\r\n\t\tif (\r\n\t\t\tpackageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[indexQuestionDetail]\r\n\t\t\t\t.SetPackageExerciseAnswerStudentList.length == 0\r\n\t\t) {\r\n\t\t\tpackageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[\r\n\t\t\t\tindexQuestionDetail\r\n\t\t\t].SetPackageExerciseAnswerStudentList.push({\r\n\t\t\t\tAnswerID: 0,\r\n\t\t\t\tAnswerContent: text,\r\n\t\t\t\tFileAudio: ''\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tpackageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[\r\n\t\t\t\tindexQuestionDetail\r\n\t\t\t].SetPackageExerciseAnswerStudentList[0].AnswerContent = text\r\n\t\t}\r\n\t\tgetPackageResult({ ...packageResult })\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!doneTestData) {\r\n\t\t\tif (isDoingTest) {\r\n\t\t\t\tif (dataQuestion.Paragraph !== '') {\r\n\t\t\t\t\tlet spaceEditor = document.querySelectorAll('.doingtest-group .box-typing .space-editor')\r\n\t\t\t\t\tif (spaceEditor && spaceEditor.length > 0) {\r\n\t\t\t\t\t\tspaceEditor.forEach((item, index) => {\r\n\t\t\t\t\t\t\tlet quesID = parseInt(item.getAttribute('ques-id'))\r\n\t\t\t\t\t\t\t// Trường hợp điền từ xong một lát quay lại vẫn còn\r\n\t\t\t\t\t\t\tlet indexQuestion = packageResult.SetPackageResultDetailInfoList.findIndex(\r\n\t\t\t\t\t\t\t\t(item) => item.ExamTopicDetailID === dataQuestion.ID\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\tlet indexQuestionDetail = packageResult.SetPackageResultDetailInfoList[\r\n\t\t\t\t\t\t\t\tindexQuestion\r\n\t\t\t\t\t\t\t].SetPackageExerciseStudentInfoList.findIndex((item) => item.ExerciseID === quesID)\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tpackageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[indexQuestionDetail]\r\n\t\t\t\t\t\t\t\t\t.SetPackageExerciseAnswerStudentList.length > 0\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tif (!loadFirst) {\r\n\t\t\t\t\t\t\t\t\titem.innerHTML =\r\n\t\t\t\t\t\t\t\t\t\tpackageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[\r\n\t\t\t\t\t\t\t\t\t\t\tindexQuestionDetail\r\n\t\t\t\t\t\t\t\t\t\t].SetPackageExerciseAnswerStudentList[0].AnswerContent\r\n\t\t\t\t\t\t\t\t\tsetLoadFirst(true)\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (activeID === isActive) {\r\n\t\t\t\t\t\t\t\t\t\titem.innerHTML =\r\n\t\t\t\t\t\t\t\t\t\t\tpackageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[\r\n\t\t\t\t\t\t\t\t\t\t\t\tindexQuestionDetail\r\n\t\t\t\t\t\t\t\t\t\t\t].SetPackageExerciseAnswerStudentList[0].AnswerContent\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//Tìm và active đúng ô input\r\n\t\t\t\t\t\t\titem.classList.remove('active-type-input')\r\n\t\t\t\t\t\t\tif (quesID === activeID) {\r\n\t\t\t\t\t\t\t\titem.classList.add('active-type-input')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (dataQuestion.Paragraph !== '') {\r\n\t\t\t\tlet spaceEditor = document.querySelectorAll('.box-typing  .space-editor')\r\n\t\t\t\tspaceEditor.forEach((item) => {\r\n\t\t\t\t\titem.setAttribute('contenteditable', 'false')\r\n\t\t\t\t\tlet quesID = parseInt(item.getAttribute('ques-id'))\r\n\t\t\t\t\tdataQuestion.ExerciseTopic.every((ques) => {\r\n\t\t\t\t\t\tif (ques.ExerciseID === quesID) {\r\n\t\t\t\t\t\t\t// Check this answer is right or wrong\r\n\t\t\t\t\t\t\tif (ques.isTrue) {\r\n\t\t\t\t\t\t\t\titem.classList.add('right-answer')\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\titem.classList.add('wrong-answer')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// Find answer content of user\r\n\t\t\t\t\t\t\tif (ques.ExerciseAnswer.length > 0) {\r\n\t\t\t\t\t\t\t\tif (ques.ExerciseAnswer[0].AnswerContent && ques.ExerciseAnswer[0].AnswerContent !== '') {\r\n\t\t\t\t\t\t\t\t\titem.innerHTML = ques.ExerciseAnswer[0].AnswerContent\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\titem.classList.add('center-row')\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t// Tạo đáp án đúng để hover\r\n\t\t\t\t\t\t\t\tlet getNodes = (str) => new DOMParser().parseFromString(str, 'text/html').body.childNodes\r\n\t\t\t\t\t\t\t\tlet node = getNodes(`<div class=\"tooltip-answer\" id=\"${quesID}\">${ques.ExerciseAnswer[0].ExerciseAnswerContent}</div>`)\r\n\t\t\t\t\t\t\t\titem.appendChild(node[0])\r\n\t\t\t\t\t\t\t\tlistCorrectAnswer.push({\r\n\t\t\t\t\t\t\t\t\tid: ques.ExerciseAnswer[0].ExerciseAnswerID,\r\n\t\t\t\t\t\t\t\t\tcontent: ques.ExerciseAnswer[0].ExerciseAnswerContent\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsetListCorrectAnswer([...listCorrectAnswer])\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (doneTestData || isDoingTest) {\r\n\t\t\t// -- Sắp xếp lại vị trí\r\n\t\t\tlet positionSpace = document.querySelectorAll('.position-space')\r\n\t\t\tpositionSpace.forEach((item) => {\r\n\t\t\t\titem.classList.remove('active')\r\n\t\t\t\tif (parseInt(item.id) === activeID) {\r\n\t\t\t\t\titem.classList.add('active')\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}, [activeID])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (doneTestData) {\r\n\t\t\tif (listCorrectAnswer.length > 0) {\r\n\t\t\t\tlet spaceEditor = document.querySelectorAll('.test-wrapper .box-typing .space-editor')\r\n\t\t\t\tlet tooltipAns = document.querySelectorAll('.test-wrapper .box-typing .tooltip-answer')\r\n\t\t\t\tspaceEditor.forEach((item) => {\r\n\t\t\t\t\t// Mouse over\r\n\t\t\t\t\titem.addEventListener('mouseover', (event: MouseEvent) => {\r\n\t\t\t\t\t\tlet quesID = item.getAttribute('ques-id')\r\n\t\t\t\t\t\ttooltipAns.forEach((e) => {\r\n\t\t\t\t\t\t\tif (e.id === quesID) {\r\n\t\t\t\t\t\t\t\te.classList.remove('d-none')\r\n\t\t\t\t\t\t\t\te.classList.add('d-block')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// Mouse out\r\n\t\t\t\t\titem.addEventListener('mouseout', () => {\r\n\t\t\t\t\t\tlet quesID = item.getAttribute('ques-id')\r\n\t\t\t\t\t\ttooltipAns.forEach((e) => {\r\n\t\t\t\t\t\t\tif (e.id === quesID) {\r\n\t\t\t\t\t\t\t\te.classList.remove('d-block')\r\n\t\t\t\t\t\t\t\te.classList.add('d-none')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}, [listCorrectAnswer])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!doneTestData) {\r\n\t\t\tlet el = document.querySelectorAll('.doingtest-group .box-typing .space-editor')\r\n\t\t\tel.forEach((item) => {\r\n\t\t\t\tlistInput.push(item.innerHTML)\r\n\t\t\t\tlet quesID = parseInt(item.getAttribute('ques-id'))\r\n\t\t\t\titem.addEventListener('click', (event) => {\r\n\t\t\t\t\tevent.preventDefault()\r\n\t\t\t\t\tgetActiveID(quesID)\r\n\t\t\t\t\tsetIsActive(quesID)\r\n\t\t\t\t})\r\n\t\t\t\titem.addEventListener('keyup', (event) => {\r\n\t\t\t\t\tconst input = event.target as HTMLElement\r\n\t\t\t\t\thandleChangeText(input.innerText, quesID)\r\n\t\t\t\t\t// Điều kiện đề input co giãn theo text\r\n\t\t\t\t\tlet lengthText = input.innerText.length\r\n\t\t\t\t\tif (lengthText > 14) {\r\n\t\t\t\t\t\titem.classList.add('auto')\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\titem.classList.remove('auto')\r\n\t\t\t\t\t\tif (lengthText < 1) {\r\n\t\t\t\t\t\t\tremoveListPicked(quesID)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tgetListPicked(quesID)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\tsetListInput([...listInput])\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst convertHTML = (e: any) => {\r\n\t\t// Thay thẻ div = input\r\n\t\tlet cloneValueEditor = dataQuestion.Paragraph\r\n\r\n\t\tconsole.log('dataQuestion: ', dataQuestion)\r\n\r\n\t\tif (dataQuestion?.ExerciseTopic.length > 0) {\r\n\t\t\tlet cloneValueEditor = dataQuestion.Paragraph\r\n\t\t\tdataQuestion.ExerciseTopic.forEach((item: any, index: any) => {\r\n\t\t\t\tlet indexInput: any = parseInt(item.ExerciseID) + 1\r\n\t\t\t\tlet temp = index + 1\r\n\r\n\t\t\t\tindexInput = indexInput.toString()\r\n\r\n\t\t\t\tcloneValueEditor = cloneValueEditor.replace(\r\n\t\t\t\t\t`<div ques-id=\"${item.ExerciseID}\" id=\"${temp}\" class='space-editor' role='textbox' aria-labelledby='txtboxLabel' aria-multiline='true' contentEditable=\"true\">(${temp})</div>`,\r\n\t\t\t\t\t`<input id=\"${index}\" class=\"space-editor\" placeholder=\"(${temp})\">`\r\n\t\t\t\t)\r\n\t\t\t})\r\n\t\t\treturn cloneValueEditor\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"\">{ReactHtmlParser(dataQuestion.Content)}</div>\r\n\r\n\t\t\t{/* <div className=\"box-typing\" style={{ marginLeft: -15 }}> */}\r\n\t\t\t{ReactHtmlParser(convertHTML(`${dataQuestion.Paragraph}`))}\r\n\t\t\t{/* </div> */}\r\n\r\n\t\t\t{/* <div className=\"box-typing col-lg-6 col-md-12 mt-5\" style={{ marginLeft: -15 }}>\r\n\t\t\t\t{ReactHtmlParser(convertHTML(`${dataQuestion.Paragraph}`))}\r\n\t\t\t</div> */}\r\n\r\n\t\t\t{doneTestData && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className=\"wrap-list-answer-typing mt-4\">\r\n\t\t\t\t\t\t<h6 className=\"mb-2\">Đáp án</h6>\r\n\t\t\t\t\t\t<ul className=\"list-answer-typing w-100  pl-0\">\r\n\t\t\t\t\t\t\t{dataQuestion?.ExerciseTopic.map(\r\n\t\t\t\t\t\t\t\t(item) =>\r\n\t\t\t\t\t\t\t\t\titem.ExerciseAnswer.length > 0 && (\r\n\t\t\t\t\t\t\t\t\t\t<li className=\"answer-item\">\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"number\">{returnPosition(item.ExerciseID)}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text\">{item.ExerciseAnswer[0].ExerciseAnswerContent}</span>\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default TypingList\r\n"]},"metadata":{},"sourceType":"module"}