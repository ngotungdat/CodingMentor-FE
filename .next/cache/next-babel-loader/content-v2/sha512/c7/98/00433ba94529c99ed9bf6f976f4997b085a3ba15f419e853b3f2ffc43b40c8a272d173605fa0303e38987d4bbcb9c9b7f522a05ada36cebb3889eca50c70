{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\CodingMentor\\\\CodingMentor-FE\\\\src\\\\components\\\\Global\\\\CreateCourse\\\\Schedule\\\\ScheduleItem.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport { Collapse } from 'antd';\nimport Checkbox from 'antd/lib/checkbox/Checkbox';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useForm } from 'react-hook-form';\nimport * as yup from 'yup';\nimport SelectField from '~/components/FormControl/SelectField';\nimport { optionCommonPropTypes } from '~/utils/proptypes';\nconst {\n  Panel\n} = Collapse;\n\nconst ScheduleItem = props => {\n  const {\n    handleChangeStatusSchedule,\n    handleChangeValueSchedule,\n    //\n    scheduleObj,\n    isLoading,\n    isUpdate,\n    //\n    optionRoomAndTeacherForADay,\n    optionStudyTime\n  } = props;\n  const {\n    ID,\n    eventName,\n    Tiet,\n    CaID,\n    // EDIT\n    Date,\n    TeacherName,\n    RoomName,\n    SubjectName\n  } = scheduleObj;\n  const defaultValuesInit = {\n    RoomID: 0,\n    TeacherID: 0,\n    StudyTimeID: CaID\n  };\n  const schema = yup.object().shape({\n    StudyTimeID: yup.number().min(1, 'Bạn cần chọn ca học').required('Bạn không được để trống'),\n    TeacherID: yup.number().min(1, 'Bạn cần chọn giáo viên').required('Bạn không được để trống'),\n    RoomID: yup.number().min(1, 'Bạn cần chọn phòng').required('Bạn không được để trống')\n  });\n  const form = useForm({\n    defaultValues: defaultValuesInit,\n    resolver: yupResolver(schema),\n    mode: 'all'\n  });\n\n  const checkHandleChangeStatusSchedule = (vl, type) => {\n    if (!handleChangeStatusSchedule) return;\n    handleChangeStatusSchedule(vl, type);\n  };\n\n  const checkHandleChangeValueSchedule = (uid, key, vl) => {\n    if (!handleChangeValueSchedule) return;\n    handleChangeValueSchedule(uid, key, vl);\n  };\n\n  const setSiblingsFieldToDefault = () => {\n    form.setValue('RoomID', 0);\n    form.setValue('TeacherID', 0);\n  }; // CHECK IF VALUE DO NOT IN THE SELECT => CHANGE VALUE TO DEFAULT (0)\n\n\n  useEffect(() => {\n    form.clearErrors();\n\n    if (isLoading.type === 'CHECK_SCHEDULE' && !isLoading.status) {\n      let {\n        ID,\n        RoomID,\n        TeacherID,\n        CaID,\n        StudyTimeID\n      } = scheduleObj;\n      const {\n        optionRoomList,\n        optionTeacherList\n      } = optionRoomAndTeacherForADay;\n\n      if (optionRoomList.length && optionTeacherList.length) {\n        form.setValue('StudyTimeID', CaID || StudyTimeID); // NEED TO SET SELECT ROOM OR SELECT TEACHER TO DEFAULT IF DONT HAVE VALUE FROM API RETURN\n\n        if (!optionRoomList.some(o => o.value === RoomID)) {\n          form.setValue('RoomID', 0);\n          checkHandleChangeValueSchedule(ID, 'RoomID', 0);\n        } else {\n          form.setValue('RoomID', RoomID);\n        }\n\n        if (!optionTeacherList.some(o => o.value === TeacherID)) {\n          form.setValue('TeacherID', 0);\n          checkHandleChangeValueSchedule(ID, 'TeacherID', 0);\n        } else {\n          form.setValue('TeacherID', TeacherID);\n        }\n      }\n    }\n  }, [scheduleObj, optionRoomAndTeacherForADay, isLoading]);\n  return /*#__PURE__*/_jsxDEV(Panel, _objectSpread(_objectSpread({}, props), {}, {\n    header: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"info-course-item\",\n      children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n        onChange: () => {\n          if (isUpdate) {\n            // remove schedule from unavailable list\n            // add schedule to available list\n            checkHandleChangeStatusSchedule(scheduleObj, 2);\n          } else {\n            // remove schedule from available list\n            // add schedule to unavailable list\n            checkHandleChangeStatusSchedule(scheduleObj, 1);\n          }\n        },\n        checked: isUpdate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"title\",\n        children: eventName || `${moment(Date).format('DD/MM')} - ${TeacherName} - ${RoomName}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"info-course-list\",\n        children: /*#__PURE__*/_jsxDEV(\"li\", {\n          children: (Tiet === null || Tiet === void 0 ? void 0 : Tiet.CurriculumsDetailName) || SubjectName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }, this),\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"info-course-select\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-6\",\n          children: /*#__PURE__*/_jsxDEV(SelectField, {\n            form: form,\n            name: \"RoomID\",\n            isLoading: isLoading.type === 'CHECK_SCHEDULE' && isLoading.status,\n            placeholder: \"Ch\\u1ECDn ph\\xF2ng\",\n            optionList: optionRoomAndTeacherForADay.optionRoomList,\n            onChangeSelect: value => {\n              checkHandleChangeValueSchedule(ID, 'RoomID', value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-6\",\n          children: /*#__PURE__*/_jsxDEV(SelectField, {\n            form: form,\n            name: \"StudyTimeID\",\n            placeholder: \"Ch\\u1ECDn ca\",\n            optionList: optionStudyTime,\n            onChangeSelect: value => {\n              setSiblingsFieldToDefault();\n              checkHandleChangeValueSchedule(ID, 'CaID', value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 mt-2\",\n          children: /*#__PURE__*/_jsxDEV(SelectField, {\n            form: form,\n            name: \"TeacherID\",\n            isLoading: isLoading.type === 'CHECK_SCHEDULE' && isLoading.status,\n            placeholder: \"Ch\\u1ECDn gi\\xE1o vi\\xEAn\",\n            optionList: optionRoomAndTeacherForADay.optionTeacherList,\n            onChangeSelect: value => {\n              checkHandleChangeValueSchedule(ID, 'TeacherID', value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 4\n    }, this)\n  }), void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 3\n  }, this);\n};\n\nScheduleItem.propTypes = {\n  handleChangeValueSchedule: PropTypes.func,\n  handleChangeStatusSchedule: PropTypes.func,\n  //\n  scheduleObj: PropTypes.shape({\n    ID: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    eventName: PropTypes.string,\n    Tiet: PropTypes.shape({\n      CurriculumsDetailID: PropTypes.number,\n      CurriculumsDetailName: PropTypes.string,\n      SubjectID: PropTypes.number\n    }),\n    TeacherID: PropTypes.number,\n    TeacherName: PropTypes.string,\n    CaID: PropTypes.number,\n    CaName: PropTypes.string,\n    RoomID: PropTypes.number,\n    RoomName: PropTypes.string,\n    StudyTimeID: PropTypes.number,\n    SubjectName: PropTypes.string,\n    Date: PropTypes.string\n  }),\n  isUpdate: PropTypes.bool,\n  isLoading: PropTypes.shape({\n    type: PropTypes.string.isRequired,\n    status: PropTypes.bool.isRequired\n  }),\n  //\n  optionRoomAndTeacherForADay: PropTypes.shape({\n    optionRoomList: optionCommonPropTypes,\n    optionTeacherList: optionCommonPropTypes\n  }),\n  optionStudyTime: optionCommonPropTypes\n};\nScheduleItem.defaultProps = {\n  handleChangeValueSchedule: null,\n  handleChangeStatusSchedule: null,\n  //\n  scheduleObj: {},\n  isUpdate: false,\n  isLoading: {\n    type: '',\n    status: false\n  },\n  positionInScheduleList: null,\n  //\n  optionRoomAndTeacherForADay: {\n    optionRoomList: [],\n    optionTeacherList: []\n  },\n  optionStudyTime: []\n};\nexport default /*#__PURE__*/React.memo(ScheduleItem);","map":{"version":3,"sources":["D:/MonaMedia/Project/CodingMentor/CodingMentor-FE/src/components/Global/CreateCourse/Schedule/ScheduleItem.tsx"],"names":["yupResolver","Collapse","Checkbox","moment","PropTypes","React","useEffect","useForm","yup","SelectField","optionCommonPropTypes","Panel","ScheduleItem","props","handleChangeStatusSchedule","handleChangeValueSchedule","scheduleObj","isLoading","isUpdate","optionRoomAndTeacherForADay","optionStudyTime","ID","eventName","Tiet","CaID","Date","TeacherName","RoomName","SubjectName","defaultValuesInit","RoomID","TeacherID","StudyTimeID","schema","object","shape","number","min","required","form","defaultValues","resolver","mode","checkHandleChangeStatusSchedule","vl","type","checkHandleChangeValueSchedule","uid","key","setSiblingsFieldToDefault","setValue","clearErrors","status","optionRoomList","optionTeacherList","length","some","o","value","format","CurriculumsDetailName","propTypes","func","oneOfType","string","CurriculumsDetailID","SubjectID","CaName","bool","isRequired","defaultProps","positionInScheduleList","memo"],"mappings":";;;;;;;;;AAAA,SAASA,WAAT,QAA4B,yBAA5B;AACA,SAASC,QAAT,QAAyB,MAAzB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,OAAOC,WAAP,MAAwB,sCAAxB;AACA,SAASC,qBAAT,QAAsC,mBAAtC;AACA,MAAM;AAAEC,EAAAA;AAAF,IAAYV,QAAlB;;AAEA,MAAMW,YAAY,GAAIC,KAAD,IAAW;AAC/B,QAAM;AACLC,IAAAA,0BADK;AAELC,IAAAA,yBAFK;AAGL;AACAC,IAAAA,WAJK;AAKLC,IAAAA,SALK;AAMLC,IAAAA,QANK;AAOL;AACAC,IAAAA,2BARK;AASLC,IAAAA;AATK,MAUFP,KAVJ;AAWA,QAAM;AACLQ,IAAAA,EADK;AAELC,IAAAA,SAFK;AAGLC,IAAAA,IAHK;AAILC,IAAAA,IAJK;AAKL;AACAC,IAAAA,IANK;AAOLC,IAAAA,WAPK;AAQLC,IAAAA,QARK;AASLC,IAAAA;AATK,MAUFZ,WAVJ;AAYA,QAAMa,iBAAiB,GAAG;AACzBC,IAAAA,MAAM,EAAE,CADiB;AAEzBC,IAAAA,SAAS,EAAE,CAFc;AAGzBC,IAAAA,WAAW,EAAER;AAHY,GAA1B;AAKA,QAAMS,MAAM,GAAGzB,GAAG,CAAC0B,MAAJ,GAAaC,KAAb,CAAmB;AACjCH,IAAAA,WAAW,EAAExB,GAAG,CAAC4B,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoB,qBAApB,EAA2CC,QAA3C,CAAoD,yBAApD,CADoB;AAEjCP,IAAAA,SAAS,EAAEvB,GAAG,CAAC4B,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoB,wBAApB,EAA8CC,QAA9C,CAAuD,yBAAvD,CAFsB;AAGjCR,IAAAA,MAAM,EAAEtB,GAAG,CAAC4B,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoB,oBAApB,EAA0CC,QAA1C,CAAmD,yBAAnD;AAHyB,GAAnB,CAAf;AAMA,QAAMC,IAAI,GAAGhC,OAAO,CAAC;AACpBiC,IAAAA,aAAa,EAAEX,iBADK;AAEpBY,IAAAA,QAAQ,EAAEzC,WAAW,CAACiC,MAAD,CAFD;AAGpBS,IAAAA,IAAI,EAAE;AAHc,GAAD,CAApB;;AAMA,QAAMC,+BAA+B,GAAG,CAACC,EAAD,EAAKC,IAAL,KAAc;AACrD,QAAI,CAAC/B,0BAAL,EAAiC;AACjCA,IAAAA,0BAA0B,CAAC8B,EAAD,EAAKC,IAAL,CAA1B;AACA,GAHD;;AAIA,QAAMC,8BAA8B,GAAG,CAACC,GAAD,EAAMC,GAAN,EAAWJ,EAAX,KAAkB;AACxD,QAAI,CAAC7B,yBAAL,EAAgC;AAChCA,IAAAA,yBAAyB,CAACgC,GAAD,EAAMC,GAAN,EAAWJ,EAAX,CAAzB;AACA,GAHD;;AAIA,QAAMK,yBAAyB,GAAG,MAAM;AACvCV,IAAAA,IAAI,CAACW,QAAL,CAAc,QAAd,EAAwB,CAAxB;AACAX,IAAAA,IAAI,CAACW,QAAL,CAAc,WAAd,EAA2B,CAA3B;AACA,GAHD,CAjD+B,CAsD/B;;;AACA5C,EAAAA,SAAS,CAAC,MAAM;AACfiC,IAAAA,IAAI,CAACY,WAAL;;AACA,QAAIlC,SAAS,CAAC4B,IAAV,KAAmB,gBAAnB,IAAuC,CAAC5B,SAAS,CAACmC,MAAtD,EAA8D;AAC7D,UAAI;AAAE/B,QAAAA,EAAF;AAAMS,QAAAA,MAAN;AAAcC,QAAAA,SAAd;AAAyBP,QAAAA,IAAzB;AAA+BQ,QAAAA;AAA/B,UAA+ChB,WAAnD;AACA,YAAM;AAAEqC,QAAAA,cAAF;AAAkBC,QAAAA;AAAlB,UAAwCnC,2BAA9C;;AAEA,UAAIkC,cAAc,CAACE,MAAf,IAAyBD,iBAAiB,CAACC,MAA/C,EAAuD;AACtDhB,QAAAA,IAAI,CAACW,QAAL,CAAc,aAAd,EAA6B1B,IAAI,IAAIQ,WAArC,EADsD,CAEtD;;AACA,YAAI,CAACqB,cAAc,CAACG,IAAf,CAAqBC,CAAD,IAAOA,CAAC,CAACC,KAAF,KAAY5B,MAAvC,CAAL,EAAqD;AACpDS,UAAAA,IAAI,CAACW,QAAL,CAAc,QAAd,EAAwB,CAAxB;AACAJ,UAAAA,8BAA8B,CAACzB,EAAD,EAAK,QAAL,EAAe,CAAf,CAA9B;AACA,SAHD,MAGO;AACNkB,UAAAA,IAAI,CAACW,QAAL,CAAc,QAAd,EAAwBpB,MAAxB;AACA;;AAED,YAAI,CAACwB,iBAAiB,CAACE,IAAlB,CAAwBC,CAAD,IAAOA,CAAC,CAACC,KAAF,KAAY3B,SAA1C,CAAL,EAA2D;AAC1DQ,UAAAA,IAAI,CAACW,QAAL,CAAc,WAAd,EAA2B,CAA3B;AACAJ,UAAAA,8BAA8B,CAACzB,EAAD,EAAK,WAAL,EAAkB,CAAlB,CAA9B;AACA,SAHD,MAGO;AACNkB,UAAAA,IAAI,CAACW,QAAL,CAAc,WAAd,EAA2BnB,SAA3B;AACA;AACD;AACD;AACD,GAxBQ,EAwBN,CAACf,WAAD,EAAcG,2BAAd,EAA2CF,SAA3C,CAxBM,CAAT;AA0BA,sBACC,QAAC,KAAD,kCACKJ,KADL;AAEC,IAAA,MAAM,eACL;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA,8BACC,QAAC,QAAD;AACC,QAAA,QAAQ,EAAE,MAAM;AACf,cAAIK,QAAJ,EAAc;AACb;AACA;AACAyB,YAAAA,+BAA+B,CAAC3B,WAAD,EAAc,CAAd,CAA/B;AACA,WAJD,MAIO;AACN;AACA;AACA2B,YAAAA,+BAA+B,CAAC3B,WAAD,EAAc,CAAd,CAA/B;AACA;AACD,SAXF;AAYC,QAAA,OAAO,EAAEE;AAZV;AAAA;AAAA;AAAA;AAAA,cADD,eAeC;AAAG,QAAA,SAAS,EAAC,OAAb;AAAA,kBAAsBI,SAAS,IAAK,GAAEnB,MAAM,CAACsB,IAAD,CAAN,CAAakC,MAAb,CAAoB,OAApB,CAA6B,MAAKjC,WAAY,MAAKC,QAAS;AAAlG;AAAA;AAAA;AAAA;AAAA,cAfD,eAgBC;AAAI,QAAA,SAAS,EAAC,kBAAd;AAAA,+BACC;AAAA,oBAAK,CAAAJ,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEqC,qBAAN,KAA+BhC;AAApC;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,cAhBD;AAAA;AAAA;AAAA;AAAA;AAAA,YAHF;AAAA,2BAyBC;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA,6BACC;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA,gCACC;AAAK,UAAA,SAAS,EAAC,OAAf;AAAA,iCACC,QAAC,WAAD;AACC,YAAA,IAAI,EAAEW,IADP;AAEC,YAAA,IAAI,EAAC,QAFN;AAGC,YAAA,SAAS,EAAEtB,SAAS,CAAC4B,IAAV,KAAmB,gBAAnB,IAAuC5B,SAAS,CAACmC,MAH7D;AAIC,YAAA,WAAW,EAAC,oBAJb;AAKC,YAAA,UAAU,EAAEjC,2BAA2B,CAACkC,cALzC;AAMC,YAAA,cAAc,EAAGK,KAAD,IAAW;AAC1BZ,cAAAA,8BAA8B,CAACzB,EAAD,EAAK,QAAL,EAAeqC,KAAf,CAA9B;AACA;AARF;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,gBADD,eAaC;AAAK,UAAA,SAAS,EAAC,OAAf;AAAA,iCACC,QAAC,WAAD;AACC,YAAA,IAAI,EAAEnB,IADP;AAEC,YAAA,IAAI,EAAC,aAFN;AAGC,YAAA,WAAW,EAAC,cAHb;AAIC,YAAA,UAAU,EAAEnB,eAJb;AAKC,YAAA,cAAc,EAAGsC,KAAD,IAAW;AAC1BT,cAAAA,yBAAyB;AACzBH,cAAAA,8BAA8B,CAACzB,EAAD,EAAK,MAAL,EAAaqC,KAAb,CAA9B;AACA;AARF;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,gBAbD,eAyBC;AAAK,UAAA,SAAS,EAAC,aAAf;AAAA,iCACC,QAAC,WAAD;AACC,YAAA,IAAI,EAAEnB,IADP;AAEC,YAAA,IAAI,EAAC,WAFN;AAGC,YAAA,SAAS,EAAEtB,SAAS,CAAC4B,IAAV,KAAmB,gBAAnB,IAAuC5B,SAAS,CAACmC,MAH7D;AAIC,YAAA,WAAW,EAAC,2BAJb;AAKC,YAAA,UAAU,EAAEjC,2BAA2B,CAACmC,iBALzC;AAMC,YAAA,cAAc,EAAGI,KAAD,IAAW;AAC1BZ,cAAAA,8BAA8B,CAACzB,EAAD,EAAK,WAAL,EAAkBqC,KAAlB,CAA9B;AACA;AARF;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,gBAzBD;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA;AAzBD;AAAA;AAAA;AAAA;AAAA,UADD;AAoEA,CArJD;;AAsJA9C,YAAY,CAACiD,SAAb,GAAyB;AACxB9C,EAAAA,yBAAyB,EAAEX,SAAS,CAAC0D,IADb;AAExBhD,EAAAA,0BAA0B,EAAEV,SAAS,CAAC0D,IAFd;AAGxB;AACA9C,EAAAA,WAAW,EAAEZ,SAAS,CAAC+B,KAAV,CAAgB;AAC5Bd,IAAAA,EAAE,EAAEjB,SAAS,CAAC2D,SAAV,CAAoB,CAAC3D,SAAS,CAAC4D,MAAX,EAAmB5D,SAAS,CAACgC,MAA7B,CAApB,CADwB;AAE5Bd,IAAAA,SAAS,EAAElB,SAAS,CAAC4D,MAFO;AAG5BzC,IAAAA,IAAI,EAAEnB,SAAS,CAAC+B,KAAV,CAAgB;AACrB8B,MAAAA,mBAAmB,EAAE7D,SAAS,CAACgC,MADV;AAErBwB,MAAAA,qBAAqB,EAAExD,SAAS,CAAC4D,MAFZ;AAGrBE,MAAAA,SAAS,EAAE9D,SAAS,CAACgC;AAHA,KAAhB,CAHsB;AAQ5BL,IAAAA,SAAS,EAAE3B,SAAS,CAACgC,MARO;AAS5BV,IAAAA,WAAW,EAAEtB,SAAS,CAAC4D,MATK;AAU5BxC,IAAAA,IAAI,EAAEpB,SAAS,CAACgC,MAVY;AAW5B+B,IAAAA,MAAM,EAAE/D,SAAS,CAAC4D,MAXU;AAY5BlC,IAAAA,MAAM,EAAE1B,SAAS,CAACgC,MAZU;AAa5BT,IAAAA,QAAQ,EAAEvB,SAAS,CAAC4D,MAbQ;AAc5BhC,IAAAA,WAAW,EAAE5B,SAAS,CAACgC,MAdK;AAe5BR,IAAAA,WAAW,EAAExB,SAAS,CAAC4D,MAfK;AAgB5BvC,IAAAA,IAAI,EAAErB,SAAS,CAAC4D;AAhBY,GAAhB,CAJW;AAsBxB9C,EAAAA,QAAQ,EAAEd,SAAS,CAACgE,IAtBI;AAuBxBnD,EAAAA,SAAS,EAAEb,SAAS,CAAC+B,KAAV,CAAgB;AAC1BU,IAAAA,IAAI,EAAEzC,SAAS,CAAC4D,MAAV,CAAiBK,UADG;AAE1BjB,IAAAA,MAAM,EAAEhD,SAAS,CAACgE,IAAV,CAAeC;AAFG,GAAhB,CAvBa;AA2BxB;AACAlD,EAAAA,2BAA2B,EAAEf,SAAS,CAAC+B,KAAV,CAAgB;AAC5CkB,IAAAA,cAAc,EAAE3C,qBAD4B;AAE5C4C,IAAAA,iBAAiB,EAAE5C;AAFyB,GAAhB,CA5BL;AAgCxBU,EAAAA,eAAe,EAAEV;AAhCO,CAAzB;AAkCAE,YAAY,CAAC0D,YAAb,GAA4B;AAC3BvD,EAAAA,yBAAyB,EAAE,IADA;AAE3BD,EAAAA,0BAA0B,EAAE,IAFD;AAG3B;AACAE,EAAAA,WAAW,EAAE,EAJc;AAK3BE,EAAAA,QAAQ,EAAE,KALiB;AAM3BD,EAAAA,SAAS,EAAE;AAAE4B,IAAAA,IAAI,EAAE,EAAR;AAAYO,IAAAA,MAAM,EAAE;AAApB,GANgB;AAO3BmB,EAAAA,sBAAsB,EAAE,IAPG;AAQ3B;AACApD,EAAAA,2BAA2B,EAAE;AAC5BkC,IAAAA,cAAc,EAAE,EADY;AAE5BC,IAAAA,iBAAiB,EAAE;AAFS,GATF;AAa3BlC,EAAAA,eAAe,EAAE;AAbU,CAA5B;AAeA,4BAAef,KAAK,CAACmE,IAAN,CAAW5D,YAAX,CAAf","sourcesContent":["import { yupResolver } from '@hookform/resolvers/yup'\r\nimport { Collapse } from 'antd'\r\nimport Checkbox from 'antd/lib/checkbox/Checkbox'\r\nimport moment from 'moment'\r\nimport PropTypes from 'prop-types'\r\nimport React, { useEffect } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport * as yup from 'yup'\r\nimport SelectField from '~/components/FormControl/SelectField'\r\nimport { optionCommonPropTypes } from '~/utils/proptypes'\r\nconst { Panel } = Collapse\r\n\r\nconst ScheduleItem = (props) => {\r\n\tconst {\r\n\t\thandleChangeStatusSchedule,\r\n\t\thandleChangeValueSchedule,\r\n\t\t//\r\n\t\tscheduleObj,\r\n\t\tisLoading,\r\n\t\tisUpdate,\r\n\t\t//\r\n\t\toptionRoomAndTeacherForADay,\r\n\t\toptionStudyTime\r\n\t} = props\r\n\tconst {\r\n\t\tID,\r\n\t\teventName,\r\n\t\tTiet,\r\n\t\tCaID,\r\n\t\t// EDIT\r\n\t\tDate,\r\n\t\tTeacherName,\r\n\t\tRoomName,\r\n\t\tSubjectName\r\n\t} = scheduleObj\r\n\r\n\tconst defaultValuesInit = {\r\n\t\tRoomID: 0,\r\n\t\tTeacherID: 0,\r\n\t\tStudyTimeID: CaID\r\n\t}\r\n\tconst schema = yup.object().shape({\r\n\t\tStudyTimeID: yup.number().min(1, 'Bạn cần chọn ca học').required('Bạn không được để trống'),\r\n\t\tTeacherID: yup.number().min(1, 'Bạn cần chọn giáo viên').required('Bạn không được để trống'),\r\n\t\tRoomID: yup.number().min(1, 'Bạn cần chọn phòng').required('Bạn không được để trống')\r\n\t})\r\n\r\n\tconst form = useForm({\r\n\t\tdefaultValues: defaultValuesInit,\r\n\t\tresolver: yupResolver(schema),\r\n\t\tmode: 'all'\r\n\t})\r\n\r\n\tconst checkHandleChangeStatusSchedule = (vl, type) => {\r\n\t\tif (!handleChangeStatusSchedule) return\r\n\t\thandleChangeStatusSchedule(vl, type)\r\n\t}\r\n\tconst checkHandleChangeValueSchedule = (uid, key, vl) => {\r\n\t\tif (!handleChangeValueSchedule) return\r\n\t\thandleChangeValueSchedule(uid, key, vl)\r\n\t}\r\n\tconst setSiblingsFieldToDefault = () => {\r\n\t\tform.setValue('RoomID', 0)\r\n\t\tform.setValue('TeacherID', 0)\r\n\t}\r\n\r\n\t// CHECK IF VALUE DO NOT IN THE SELECT => CHANGE VALUE TO DEFAULT (0)\r\n\tuseEffect(() => {\r\n\t\tform.clearErrors()\r\n\t\tif (isLoading.type === 'CHECK_SCHEDULE' && !isLoading.status) {\r\n\t\t\tlet { ID, RoomID, TeacherID, CaID, StudyTimeID } = scheduleObj\r\n\t\t\tconst { optionRoomList, optionTeacherList } = optionRoomAndTeacherForADay\r\n\r\n\t\t\tif (optionRoomList.length && optionTeacherList.length) {\r\n\t\t\t\tform.setValue('StudyTimeID', CaID || StudyTimeID)\r\n\t\t\t\t// NEED TO SET SELECT ROOM OR SELECT TEACHER TO DEFAULT IF DONT HAVE VALUE FROM API RETURN\r\n\t\t\t\tif (!optionRoomList.some((o) => o.value === RoomID)) {\r\n\t\t\t\t\tform.setValue('RoomID', 0)\r\n\t\t\t\t\tcheckHandleChangeValueSchedule(ID, 'RoomID', 0)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tform.setValue('RoomID', RoomID)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!optionTeacherList.some((o) => o.value === TeacherID)) {\r\n\t\t\t\t\tform.setValue('TeacherID', 0)\r\n\t\t\t\t\tcheckHandleChangeValueSchedule(ID, 'TeacherID', 0)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tform.setValue('TeacherID', TeacherID)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}, [scheduleObj, optionRoomAndTeacherForADay, isLoading])\r\n\r\n\treturn (\r\n\t\t<Panel\r\n\t\t\t{...props}\r\n\t\t\theader={\r\n\t\t\t\t<div className=\"info-course-item\">\r\n\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\tonChange={() => {\r\n\t\t\t\t\t\t\tif (isUpdate) {\r\n\t\t\t\t\t\t\t\t// remove schedule from unavailable list\r\n\t\t\t\t\t\t\t\t// add schedule to available list\r\n\t\t\t\t\t\t\t\tcheckHandleChangeStatusSchedule(scheduleObj, 2)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// remove schedule from available list\r\n\t\t\t\t\t\t\t\t// add schedule to unavailable list\r\n\t\t\t\t\t\t\t\tcheckHandleChangeStatusSchedule(scheduleObj, 1)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tchecked={isUpdate}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<p className=\"title\">{eventName || `${moment(Date).format('DD/MM')} - ${TeacherName} - ${RoomName}`}</p>\r\n\t\t\t\t\t<ul className=\"info-course-list\">\r\n\t\t\t\t\t\t<li>{Tiet?.CurriculumsDetailName || SubjectName}</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t<div className=\"info-course-select\">\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-6\">\r\n\t\t\t\t\t\t<SelectField\r\n\t\t\t\t\t\t\tform={form}\r\n\t\t\t\t\t\t\tname=\"RoomID\"\r\n\t\t\t\t\t\t\tisLoading={isLoading.type === 'CHECK_SCHEDULE' && isLoading.status}\r\n\t\t\t\t\t\t\tplaceholder=\"Chọn phòng\"\r\n\t\t\t\t\t\t\toptionList={optionRoomAndTeacherForADay.optionRoomList}\r\n\t\t\t\t\t\t\tonChangeSelect={(value) => {\r\n\t\t\t\t\t\t\t\tcheckHandleChangeValueSchedule(ID, 'RoomID', value)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-6\">\r\n\t\t\t\t\t\t<SelectField\r\n\t\t\t\t\t\t\tform={form}\r\n\t\t\t\t\t\t\tname=\"StudyTimeID\"\r\n\t\t\t\t\t\t\tplaceholder=\"Chọn ca\"\r\n\t\t\t\t\t\t\toptionList={optionStudyTime}\r\n\t\t\t\t\t\t\tonChangeSelect={(value) => {\r\n\t\t\t\t\t\t\t\tsetSiblingsFieldToDefault()\r\n\t\t\t\t\t\t\t\tcheckHandleChangeValueSchedule(ID, 'CaID', value)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col-12 mt-2\">\r\n\t\t\t\t\t\t<SelectField\r\n\t\t\t\t\t\t\tform={form}\r\n\t\t\t\t\t\t\tname=\"TeacherID\"\r\n\t\t\t\t\t\t\tisLoading={isLoading.type === 'CHECK_SCHEDULE' && isLoading.status}\r\n\t\t\t\t\t\t\tplaceholder=\"Chọn giáo viên\"\r\n\t\t\t\t\t\t\toptionList={optionRoomAndTeacherForADay.optionTeacherList}\r\n\t\t\t\t\t\t\tonChangeSelect={(value) => {\r\n\t\t\t\t\t\t\t\tcheckHandleChangeValueSchedule(ID, 'TeacherID', value)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Panel>\r\n\t)\r\n}\r\nScheduleItem.propTypes = {\r\n\thandleChangeValueSchedule: PropTypes.func,\r\n\thandleChangeStatusSchedule: PropTypes.func,\r\n\t//\r\n\tscheduleObj: PropTypes.shape({\r\n\t\tID: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n\t\teventName: PropTypes.string,\r\n\t\tTiet: PropTypes.shape({\r\n\t\t\tCurriculumsDetailID: PropTypes.number,\r\n\t\t\tCurriculumsDetailName: PropTypes.string,\r\n\t\t\tSubjectID: PropTypes.number\r\n\t\t}),\r\n\t\tTeacherID: PropTypes.number,\r\n\t\tTeacherName: PropTypes.string,\r\n\t\tCaID: PropTypes.number,\r\n\t\tCaName: PropTypes.string,\r\n\t\tRoomID: PropTypes.number,\r\n\t\tRoomName: PropTypes.string,\r\n\t\tStudyTimeID: PropTypes.number,\r\n\t\tSubjectName: PropTypes.string,\r\n\t\tDate: PropTypes.string\r\n\t}),\r\n\tisUpdate: PropTypes.bool,\r\n\tisLoading: PropTypes.shape({\r\n\t\ttype: PropTypes.string.isRequired,\r\n\t\tstatus: PropTypes.bool.isRequired\r\n\t}),\r\n\t//\r\n\toptionRoomAndTeacherForADay: PropTypes.shape({\r\n\t\toptionRoomList: optionCommonPropTypes,\r\n\t\toptionTeacherList: optionCommonPropTypes\r\n\t}),\r\n\toptionStudyTime: optionCommonPropTypes\r\n}\r\nScheduleItem.defaultProps = {\r\n\thandleChangeValueSchedule: null,\r\n\thandleChangeStatusSchedule: null,\r\n\t//\r\n\tscheduleObj: {},\r\n\tisUpdate: false,\r\n\tisLoading: { type: '', status: false },\r\n\tpositionInScheduleList: null,\r\n\t//\r\n\toptionRoomAndTeacherForADay: {\r\n\t\toptionRoomList: [],\r\n\t\toptionTeacherList: []\r\n\t},\r\n\toptionStudyTime: []\r\n}\r\nexport default React.memo(ScheduleItem)\r\n"]},"metadata":{},"sourceType":"module"}