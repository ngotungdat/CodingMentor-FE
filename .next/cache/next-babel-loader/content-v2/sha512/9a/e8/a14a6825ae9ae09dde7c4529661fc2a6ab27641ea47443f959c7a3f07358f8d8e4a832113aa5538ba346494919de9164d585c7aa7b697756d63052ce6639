{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\DoingTest\\\\MainTest.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { CheckCircleOutlined, CloseOutlined, LeftOutlined, ProfileFilled, RightOutlined } from '@ant-design/icons';\nimport { Card, Checkbox, Modal, Skeleton, Spin } from 'antd';\nimport dynamic from 'next/dynamic';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { doingTestApi, examAppointmentResultApi, examDetailApi } from '~/apiBase';\nimport { homeworkResultApi } from '~/apiBase/course-detail/home-work-result';\nimport { courseExamApi } from '~/apiBase/package/course-exam';\nimport CountDown from '~/components/Elements/CountDown/CountDown';\nimport DecideModal from '~/components/Elements/DecideModal';\nimport { useDoingTest } from '~/context/useDoingTest';\nimport { useWrap } from '~/context/wrap';\nimport TimeUpModal from './TimeUpModal';\nvar ListQuestion = dynamic(_c = function _c() {\n  return import('~/components/Global/DoingTest/ListQuestion');\n}, {\n  loading: function loading() {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 17\n    }, _this);\n  },\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('~/components/Global/DoingTest/ListQuestion')];\n    },\n    modules: [\"..\\\\components\\\\Global\\\\DoingTest\\\\MainTest.tsx -> \" + '~/components/Global/DoingTest/ListQuestion']\n  }\n});\n_c2 = ListQuestion;\n\nvar MainTest = function MainTest(props) {\n  _s();\n\n  var _router$query6;\n\n  var _useDoingTest = useDoingTest(),\n      getListQuestionID = _useDoingTest.getListQuestionID,\n      getActiveID = _useDoingTest.getActiveID,\n      activeID = _useDoingTest.activeID,\n      listPicked = _useDoingTest.listPicked;\n\n  var examID = props.examID,\n      infoExam = props.infoExam,\n      packageDetailID = props.packageDetailID,\n      dataDoneTest = props.dataDoneTest,\n      isDone = props.isDone,\n      listIDFromDoneTest = props.listIDFromDoneTest,\n      listGroupIDFromDoneTest = props.listGroupIDFromDoneTest,\n      closeMainTest = props.closeMainTest,\n      type = props.type,\n      CurriculumDetailID = props.CurriculumDetailID;\n  var listTodoApi = {\n    pageIndex: 1,\n    pageSize: 999,\n    ExamTopicID: examID\n  };\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti;\n\n  var _useState = useState(listTodoApi),\n      todoApi = _useState[0],\n      setTodoApi = _useState[1];\n\n  var _useState2 = useState(false),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var _useState3 = useState(null),\n      dataQuestion = _useState3[0],\n      setDataQuestion = _useState3[1];\n\n  var _useState4 = useState(false),\n      isGroup = _useState4[0],\n      setIsGroup = _useState4[1];\n\n  var _useState5 = useState(null),\n      addMinutes = _useState5[0],\n      setAddMinutes = _useState5[1];\n\n  var _useState6 = useState(false),\n      isModalVisible = _useState6[0],\n      setIsModalVisible = _useState6[1];\n\n  var _useState7 = useState([]),\n      listQuestionID = _useState7[0],\n      setListQuestionID = _useState7[1]; // Lấy tất cả ID đã có\n\n\n  var _useState8 = useState([]),\n      listGroupID = _useState8[0],\n      setListGroupID = _useState8[1]; // Lấy tất cả group ID đã có\n\n\n  var _useState9 = useState({\n    start: 0,\n    end: null\n  }),\n      spaceQuestion = _useState9[0],\n      setSpaceQuestion = _useState9[1];\n\n  var _useState10 = useState(1),\n      pageCurrent = _useState10[0],\n      setPageCurrent = _useState10[1];\n\n  var _useState11 = useState([]),\n      listPreview = _useState11[0],\n      setListPreview = _useState11[1];\n\n  var router = useRouter(); // const packageID = router.query.packageDetailID as string;\n\n  var _useDoingTest2 = useDoingTest(),\n      packageResult = _useDoingTest2.packageResult,\n      getPackageResult = _useDoingTest2.getPackageResult;\n\n  var _useWrap2 = useWrap(),\n      userInformation = _useWrap2.userInformation;\n\n  var _useState12 = useState(false),\n      loadingSubmit = _useState12[0],\n      setLoadingSubmit = _useState12[1];\n\n  var _useState13 = useState(false),\n      isLong = _useState13[0],\n      setIsLong = _useState13[1];\n\n  var _useState14 = useState(false),\n      isModalConfirm = _useState14[0],\n      setIsModalConfirm = _useState14[1];\n\n  var _useState15 = useState(false),\n      isModalSuccess = _useState15[0],\n      setIsModalSuccess = _useState15[1];\n\n  var _useState16 = useState(false),\n      openTimeUpModal = _useState16[0],\n      setOpenTimeUpModal = _useState16[1];\n\n  var _useState17 = useState(false),\n      checkTested = _useState17[0],\n      setCheckTested = _useState17[1];\n\n  var _useState18 = useState(false),\n      openPagi = _useState18[0],\n      setOpenPagi = _useState18[1]; // Use for list question in mobile\n\n\n  var _useState19 = useState(''),\n      child = _useState19[0],\n      setChild = _useState19[1];\n\n  var checkIsTested = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setIsLoading(true);\n              _context.prev = 1;\n              _context.next = 4;\n              return examAppointmentResultApi.checkIsTested(packageDetailID);\n\n            case 4:\n              res = _context.sent;\n\n              if (res.status == 200) {\n                if (res.data.data) {\n                  setCheckTested(true);\n                  setIsLoading(false);\n                } else {\n                  getListQuestion();\n                }\n              }\n\n              _context.next = 12;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](1);\n              console.log(_context.t0);\n              setIsLoading(false);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 8]]);\n    }));\n\n    return function checkIsTested() {\n      return _ref.apply(this, arguments);\n    };\n  }(); // --- GET LIST QUESTION ---\n\n\n  var getListQuestion = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var cloneListQuestionID, cloneListGroupID, res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              cloneListQuestionID = _toConsumableArray(listQuestionID);\n              cloneListGroupID = _toConsumableArray(listGroupID);\n              setIsLoading(true);\n              _context2.prev = 3;\n              _context2.next = 6;\n              return examDetailApi.getAll(todoApi);\n\n            case 6:\n              res = _context2.sent;\n\n              if (res.status == 200) {\n                setDataQuestion(res.data.data); // Add questionid to list\n\n                res.data.data.forEach(function (item, index) {\n                  if (item.Enable) {\n                    item.ExerciseGroupID !== 0 && cloneListGroupID.push(item.ExerciseGroupID);\n                    item.ExerciseTopic.forEach(function (ques) {\n                      cloneListQuestionID.push(ques.ExerciseID);\n                    });\n                  }\n                }); // Calculate space question\n\n                checkSpaceQuestionAtFirst(res.data.data);\n                setListGroupID(_toConsumableArray(cloneListGroupID));\n                setListQuestionID(_toConsumableArray(cloneListQuestionID));\n              }\n\n              if (res.status == 204) {\n                setDataQuestion([]);\n              }\n\n              _context2.next = 14;\n              break;\n\n            case 11:\n              _context2.prev = 11;\n              _context2.t0 = _context2[\"catch\"](3);\n              showNoti('danger', _context2.t0.message);\n\n            case 14:\n              _context2.prev = 14;\n              setIsLoading(false);\n              return _context2.finish(14);\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[3, 11, 14, 17]]);\n    }));\n\n    return function getListQuestion() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var checkSpaceQuestionAtFirst = function checkSpaceQuestionAtFirst(data) {\n    if (data[0].ExerciseGroupID !== 0) {\n      setIsGroup(true);\n      setSpaceQuestion({\n        start: 0,\n        end: 1\n      });\n    } else {\n      data.every(function (item, index) {\n        if (index == spaceQuestion.start + 1) {\n          if (item.ExerciseGroupID !== 0) {\n            setSpaceQuestion(_objectSpread(_objectSpread({}, spaceQuestion), {}, {\n              end: index\n            }));\n            return false;\n          } else {\n            setIsGroup(false);\n            setSpaceQuestion(_objectSpread(_objectSpread({}, spaceQuestion), {}, {\n              end: index + 1\n            }));\n            return false;\n          }\n        }\n\n        return true;\n      });\n    }\n  }; // -- CHECK IS SINGLE\n\n\n  var checkIsSingle = function checkIsSingle(indexCurrent) {\n    if (indexCurrent !== spaceQuestion.start && indexCurrent !== 0 && indexCurrent !== spaceQuestion.end) {\n      if (spaceQuestion.end - spaceQuestion.start == 2) {\n        if (indexCurrent > spaceQuestion.start && indexCurrent < spaceQuestion.end) {\n          indexCurrent = indexCurrent - 1;\n        }\n      }\n    }\n\n    dataQuestion.every(function (item, index) {\n      if (index == indexCurrent + 1) {\n        if (item.ExerciseGroupID !== 0) {\n          // nếu là group\n          setSpaceQuestion({\n            start: indexCurrent,\n            end: index\n          });\n          return false;\n        } else {\n          setSpaceQuestion({\n            start: indexCurrent,\n            end: index + 1\n          });\n          return false;\n        }\n      }\n\n      return true;\n    });\n\n    if (indexCurrent + 1 === dataQuestion.length) {\n      setSpaceQuestion({\n        start: indexCurrent,\n        end: indexCurrent + 1\n      });\n    }\n  }; // -- CHECK IS GROUP --\n\n\n  var checkIsGroup = function checkIsGroup(page) {\n    var exerciseID = listQuestionID[page - 1];\n    dataQuestion.every(function (item, index) {\n      // Kiểm tra nếu trong list Exercise Topic có exercise ID thì bắt đầu lấy được vị trí\n      if (item.ExerciseTopic.some(function (object) {\n        return object['ExerciseID'] == exerciseID;\n      })) {\n        // Kiểm tra ở vị trí này là câu hỏi nhóm hay đơn\n        if (item.ExerciseGroupID !== 0) {\n          // Nếu là nhóm\n          setSpaceQuestion({\n            start: index,\n            end: index + 1\n          });\n          setIsGroup(true);\n        } else {\n          setIsGroup(false);\n          checkIsSingle(index);\n        }\n\n        return false;\n      }\n\n      return true;\n    }); // return isGroup;\n  }; // --- ON CHAGNE PAGINATION\n\n\n  var onChange_pagination = function onChange_pagination(e, page) {\n    setPageCurrent(page);\n\n    if (e !== 'x') {\n      e.preventDefault();\n    } // setActiveID(listQuestionID[page - 1]);\n\n\n    getActiveID(listQuestionID[page - 1]);\n    checkIsGroup(page);\n  }; // - Previous page\n\n\n  var onChange_PreviousPage = function onChange_PreviousPage() {\n    listQuestionID.every(function (item, index) {\n      if (item === activeID) {\n        if (index == 0) {\n          setPageCurrent(listQuestionID.length);\n          checkIsGroup(listQuestionID.length);\n          getActiveID(listQuestionID[listQuestionID.length - 1]);\n        } else {\n          setPageCurrent(function (pageCurrent) {\n            return pageCurrent - 1;\n          });\n          checkIsGroup(pageCurrent - 1);\n          getActiveID(listQuestionID[index - 1]);\n        }\n\n        return false;\n      }\n\n      return true;\n    });\n  }; // - Next Page\n\n\n  var onChange_NextPage = function onChange_NextPage(e) {\n    listQuestionID.every(function (item, index) {\n      if (item === activeID) {\n        if (index === listQuestionID.length - 1) {\n          setPageCurrent(1);\n          checkIsGroup(1);\n          getActiveID(listQuestionID[0]);\n        } else {\n          setPageCurrent(function (pageCurrent) {\n            return pageCurrent + 1;\n          });\n          checkIsGroup(pageCurrent + 1);\n          getActiveID(listQuestionID[index + 1]);\n        }\n\n        return false;\n      }\n\n      return true;\n    });\n  }; // - Preview\n\n\n  function onChange_preview(e) {\n    var checked = e.target.checked;\n\n    if (!listPreview.includes(activeID)) {\n      listPreview.push(activeID);\n      setListPreview(_toConsumableArray(listPreview));\n    } else {\n      var newListPreview = listPreview.filter(function (item) {\n        return item -= activeID;\n      });\n      setListPreview(_toConsumableArray(newListPreview));\n    }\n  } // --- TIME UP ---\n\n\n  var timeUp = function timeUp() {\n    setOpenTimeUpModal(true);\n    setTimeout(function () {\n      setOpenTimeUpModal(false);\n      onSubmit_DoingTest();\n    }, 1500);\n  }; // --- ACTION SHOW MODAL ---\n\n\n  var handleOk = function handleOk() {\n    setIsModalVisible(false);\n  };\n\n  var handleCancel = function handleCancel() {\n    setIsModalVisible(false);\n  };\n\n  var remakeData = function remakeData() {\n    var cloneData = _objectSpread({}, packageResult);\n\n    var dataSubmit = null;\n    cloneData.SetPackageResultDetailInfoList.forEach(function (item) {\n      if (item.Type == 3 || item.Type == 2 || item.Type == 5) {\n        item.SetPackageExerciseStudentInfoList.forEach(function (e) {\n          if (e.SetPackageExerciseAnswerStudentList.length == 0) {\n            e.SetPackageExerciseAnswerStudentList.push({\n              AnswerID: 0,\n              AnswerContent: '',\n              FileAudio: ''\n            });\n          }\n        });\n      }\n    }); // Kiểm tra bài test thuộc dạng nào (type)\n    // test - Kiểm tra đầu vào\n    // examination - Đề bán, đề thi\n    // check - Đề kiểm tra\n\n    var deleteOldElement = function deleteOldElement(data, type) {\n      var dataClone = _objectSpread({}, data);\n\n      switch (type) {\n        case 'test':\n          dataClone.ExamAppointmentResultDetailInfoList.forEach(function (item) {\n            delete item['SetPackageExerciseStudentInfoList'];\n            item.ExamAppointmentExerciseStudentInfoList.forEach(function (ans) {\n              delete ans['SetPackageExerciseAnswerStudentList'];\n            });\n          });\n          break;\n\n        case 'check':\n          dataClone.CourseExamresultDetailInfoList.forEach(function (item) {\n            delete item['SetPackageExerciseStudentInfoList'];\n            item.CourseExamExerciseStudentInfoList.forEach(function (ans) {\n              delete ans['SetPackageExerciseAnswerStudentList'];\n            });\n          });\n          break;\n\n        default:\n          break;\n      }\n\n      return dataClone;\n    };\n\n    switch (type) {\n      case 'test':\n        var dataTestFirst = {\n          StudentID: null,\n          ExamAppointmentID: null,\n          ExamAppointmentResultDetailInfoList: []\n        };\n        dataTestFirst.StudentID = cloneData.StudentID;\n        dataTestFirst.ExamAppointmentID = cloneData.SetPackageDetailID;\n        dataTestFirst.ExamAppointmentResultDetailInfoList = [];\n        cloneData.SetPackageResultDetailInfoList.forEach(function (ques) {\n          //@ts-ignore\n          ques.ExamAppointmentExerciseStudentInfoList = _toConsumableArray(ques.SetPackageExerciseStudentInfoList); //@ts-ignore\n\n          dataTestFirst.ExamAppointmentResultDetailInfoList.push(ques);\n          dataTestFirst.ExamAppointmentResultDetailInfoList.forEach(function (item) {\n            item.ExamAppointmentExerciseStudentInfoList.forEach(function (ans) {\n              //@ts-ignore\n              ans.ExamAppointmentExerciseAnswerStudentList = _toConsumableArray(ans.SetPackageExerciseAnswerStudentList);\n            });\n          });\n        }); // dataTestFirst = deleteOldElement(dataTestFirst, 'test');\n\n        dataSubmit = _objectSpread({}, dataTestFirst);\n        break;\n\n      case 'check':\n        var dataCheck = {\n          StudentID: null,\n          CourseID: null,\n          CurriculumDetailID: parseInt(CurriculumDetailID),\n          CourseExamresultDetailInfoList: []\n        };\n        dataCheck.StudentID = cloneData.StudentID;\n        dataCheck.CourseID = cloneData.SetPackageDetailID;\n        dataCheck.CourseExamresultDetailInfoList = [];\n        cloneData.SetPackageResultDetailInfoList.forEach(function (ques) {\n          //@ts-ignore\n          ques.CourseExamExerciseStudentInfoList = _toConsumableArray(ques.SetPackageExerciseStudentInfoList); //@ts-ignore\n\n          dataCheck.CourseExamresultDetailInfoList.push(ques);\n          dataCheck.CourseExamresultDetailInfoList.forEach(function (item) {\n            item.CourseExamExerciseStudentInfoList.forEach(function (ans) {\n              //@ts-ignore\n              ans.CourseExamExerciseAnswerStudentList = _toConsumableArray(ans.SetPackageExerciseAnswerStudentList);\n            });\n          });\n        }); // dataCheck = deleteOldElement(dataCheck, 'check');\n\n        dataSubmit = _objectSpread({}, dataCheck);\n        break;\n\n      case 'examination':\n        dataSubmit = _objectSpread({}, cloneData);\n        break;\n\n      default:\n        break;\n    }\n\n    return dataSubmit;\n  }; // ===== ON SUBMIT DOING TEST =====\n\n\n  var returnRouter = function returnRouter(data) {\n    var _router$query, _router$query2, _router$query3, _router$query4;\n\n    var obj = {};\n    console.log('returnRouter: ', data);\n\n    switch (type) {\n      case 'test':\n        obj = {\n          pathname: '/customer/service/service-test-student/detail/[slug]',\n          query: {\n            slug: data.ExamAppointmentID,\n            examID: data.ExamTopicID,\n            ExamAppointmentResultID: data.ID\n          }\n        };\n        break;\n\n      case 'check':\n        obj = {\n          pathname: '/course-exam/detail/[slug]',\n          query: {\n            slug: data.ID,\n            examID: data.ExamTopicID,\n            packageDetailID: (_router$query = router.query) === null || _router$query === void 0 ? void 0 : _router$query.packageDetailID\n          }\n        };\n        break;\n\n      default:\n        obj = {\n          pathname: (_router$query2 = router.query) !== null && _router$query2 !== void 0 && _router$query2.isExercise ? 'course/exercise/result/[slug]' : '/package/package-result-student/detail/[slug]',\n          query: {\n            slug: (_router$query3 = router.query) !== null && _router$query3 !== void 0 && _router$query3.isExercise ? data.HomeworkID : data.ID,\n            examID: data.ExamTopicID,\n            packageDetailID: (_router$query4 = router.query) === null || _router$query4 === void 0 ? void 0 : _router$query4.packageDetailID\n          }\n        };\n        break;\n    }\n\n    return obj;\n  };\n\n  var onSubmit_DoingTest = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var _router$query5;\n\n      var dataSubmit, res;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              setIsModalConfirm(false);\n              setLoadingSubmit(true);\n              dataSubmit = remakeData();\n              console.log('dataSubmit: ', dataSubmit);\n              res = null;\n              _context3.prev = 5;\n              _context3.t0 = type;\n              _context3.next = _context3.t0 === 'test' ? 9 : _context3.t0 === 'check' ? 13 : _context3.t0 === 'examination' ? 17 : 28;\n              break;\n\n            case 9:\n              _context3.next = 11;\n              return examAppointmentResultApi.add(dataSubmit);\n\n            case 11:\n              res = _context3.sent;\n              return _context3.abrupt(\"break\", 29);\n\n            case 13:\n              _context3.next = 15;\n              return courseExamApi.add(dataSubmit);\n\n            case 15:\n              res = _context3.sent;\n              return _context3.abrupt(\"break\", 29);\n\n            case 17:\n              if (!((_router$query5 = router.query) !== null && _router$query5 !== void 0 && _router$query5.isExercise)) {\n                _context3.next = 23;\n                break;\n              }\n\n              _context3.next = 20;\n              return homeworkResultApi.add(_objectSpread({}, dataSubmit));\n\n            case 20:\n              _context3.t1 = _context3.sent;\n              _context3.next = 26;\n              break;\n\n            case 23:\n              _context3.next = 25;\n              return doingTestApi.add(dataSubmit);\n\n            case 25:\n              _context3.t1 = _context3.sent;\n\n            case 26:\n              res = _context3.t1;\n              return _context3.abrupt(\"break\", 29);\n\n            case 28:\n              return _context3.abrupt(\"break\", 29);\n\n            case 29:\n              if (res.status === 200) {\n                setIsModalSuccess(true);\n                setTimeout(function () {\n                  router.push(returnRouter(res.data.data));\n                }, 1000);\n              }\n\n              _context3.next = 35;\n              break;\n\n            case 32:\n              _context3.prev = 32;\n              _context3.t2 = _context3[\"catch\"](5);\n              showNoti('danger', _context3.t2.message);\n\n            case 35:\n              _context3.prev = 35;\n              setLoadingSubmit(false);\n              return _context3.finish(35);\n\n            case 38:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[5, 32, 35, 38]]);\n    }));\n\n    return function onSubmit_DoingTest() {\n      return _ref3.apply(this, arguments);\n    };\n  }(); // Return text confirm\n\n\n  var returnTextConfirm = function returnTextConfirm() {\n    var textConfirm = 'Bạn có chắc muốn nộp bài?';\n\n    if (listPicked.length < listQuestionID.length) {\n      var numberOfQuestion = listQuestionID.length - listPicked.length;\n      textConfirm = \"B\\u1EA1n c\\xF2n \".concat(numberOfQuestion, \" c\\xE2u ch\\u01B0a l\\xE0m. B\\u1EA1n c\\xF3 ch\\u1EAFc mu\\u1ED1n n\\u1ED9p b\\xE0i?\");\n    }\n\n    return textConfirm;\n  };\n\n  var handleClick_openPagi = function handleClick_openPagi() {\n    setOpenPagi(!openPagi);\n  }; // ===== ALL USE EFFECT ====\n\n\n  useEffect(function () {\n    if (!isDone) {\n      if (type === 'test') {\n        checkIsTested();\n      } else {\n        getListQuestion();\n      }\n\n      packageResult.SetPackageDetailID = parseInt(packageDetailID);\n      getPackageResult(_objectSpread({}, packageResult));\n    } else {\n      setDataQuestion(dataDoneTest);\n      checkSpaceQuestionAtFirst(dataDoneTest);\n      setListQuestionID(listIDFromDoneTest);\n      setListGroupID(listGroupIDFromDoneTest);\n    }\n  }, []);\n  useEffect(function () {\n    if ((listQuestionID === null || listQuestionID === void 0 ? void 0 : listQuestionID.length) > 0) {\n      getListQuestionID(listQuestionID);\n      getActiveID(listQuestionID[0]); // setActiveID(listQuestionID[0]);\n    }\n  }, [listQuestionID]); // Use to check\n  // useEffect(() => {\n  // \tif (spaceQuestion.start !== null && spaceQuestion.end !== null) {\n  // \t\tdataQuestion.slice(spaceQuestion.start, spaceQuestion.end).map((item) => console.log('ITEM ACTIVE: ', item));\n  // \t}\n  // }, [spaceQuestion]);\n\n  useEffect(function () {\n    if (userInformation) {\n      getPackageResult(_objectSpread(_objectSpread({}, packageResult), {}, {\n        SetPackageDetailID: parseInt(packageDetailID),\n        StudentID: userInformation.UserInformationID\n      }));\n    }\n  }, [userInformation]);\n  useEffect(function () {\n    if (!isDone) {\n      if ((dataQuestion === null || dataQuestion === void 0 ? void 0 : dataQuestion.length) > 0) {\n        dataQuestion.forEach(function (item, index) {\n          var listQuestion = [];\n          item.ExerciseTopic.forEach(function (ques, index) {\n            listQuestion.push({\n              ExerciseID: ques.ExerciseID,\n              SetPackageExerciseAnswerStudentList: []\n            });\n          });\n          packageResult.SetPackageResultDetailInfoList.push({\n            ExamTopicDetailID: item.ID,\n            ExerciseGroupID: item.ExerciseGroupID,\n            Level: item.Level,\n            Type: item.Type,\n            SkillID: item.SkillID,\n            SetPackageExerciseStudentInfoList: listQuestion\n          });\n          getPackageResult(_objectSpread({}, packageResult));\n        });\n      }\n    }\n\n    if (dataQuestion !== null && dataQuestion !== undefined) {\n      onChange_pagination('x', 1);\n    }\n  }, [dataQuestion]);\n  useEffect(function () {\n    if (infoExam && dataQuestion) {\n      // Run time\n      var add_minutes = function (dt, minutes) {\n        return new Date(dt.getTime() + minutes * 60000);\n      }(new Date(), infoExam.Time);\n\n      setAddMinutes(add_minutes);\n    }\n  }, [infoExam, dataQuestion]);\n\n  var alertUser = function alertUser(e) {\n    e.preventDefault();\n    e.returnValue = '';\n    console.log('IS RELOADDD');\n  };\n\n  useEffect(function () {\n    var testFooter = document.getElementById('test-footer');\n\n    if (testFooter) {\n      var heightFooter = testFooter.offsetHeight;\n\n      if (heightFooter > 70) {\n        setIsLong(true);\n      }\n    }\n\n    if (!dataDoneTest) {\n      if (!isModalSuccess) {\n        window.addEventListener('beforeunload', alertUser);\n        return function () {\n          window.removeEventListener('beforeunload', alertUser);\n        };\n      }\n    }\n  });\n  useEffect(function () {\n    if (activeID) {\n      var index = listQuestionID.findIndex(function (id) {\n        return id === activeID;\n      });\n      setPageCurrent(index + 1);\n    }\n  }, [activeID]);\n  console.log(addMinutes);\n\n  var _useState20 = useState(false),\n      isPlaying = _useState20[0],\n      setIsPlaying = _useState20[1];\n\n  var audio = useRef(null);\n\n  var playSound = function playSound() {\n    if (!isPlaying) {\n      audio.current.play();\n      setIsPlaying(true);\n    } else {\n      audio.current.pause();\n      setIsPlaying(false);\n    }\n  };\n\n  var controlVolume = function controlVolume(value) {\n    var customValue = value / 100;\n    audio.current.volume = customValue;\n  };\n\n  console.log('router.query?.isExercise: ', (_router$query6 = router.query) === null || _router$query6 === void 0 ? void 0 : _router$query6.isExercise);\n\n  var convertData = function convertData(json) {\n    var stringified = JSON.stringify(json);\n    stringified = stringified.replace('SetPackageResultDetailInfoList', 'HomeworkResultDetailInfoList');\n\n    while (stringified.indexOf('SetPackageExerciseStudentInfoList') !== -1 || stringified.indexOf('SetPackageExerciseAnswerStudentList') !== -1) {\n      stringified = stringified.replace('SetPackageExerciseStudentInfoList', 'HomeworkExerciseStudentInfoList');\n      stringified = stringified.replace('SetPackageExerciseAnswerStudentList', 'HomeworkExerciseAnswerStudentList');\n    }\n\n    var jsonObject = JSON.parse(stringified);\n    return jsonObject;\n  };\n\n  var onSubmitExercise = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var dataSubmit, res;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              console.log('====================================');\n              console.log('onSubmitExercise');\n              setIsModalConfirm(false);\n              setLoadingSubmit(true);\n              dataSubmit = remakeData();\n              res = null;\n              console.log('dataSubmit: ', convertData(_objectSpread(_objectSpread({}, dataSubmit), {}, {\n                HomeworkID: dataSubmit.SetPackageDetailID\n              })));\n              _context4.prev = 7;\n              _context4.next = 10;\n              return homeworkResultApi.add(convertData(_objectSpread(_objectSpread({}, dataSubmit), {}, {\n                HomeworkID: dataSubmit.SetPackageDetailID\n              })));\n\n            case 10:\n              res = _context4.sent;\n\n              if (res.status === 200) {\n                setIsModalSuccess(true);\n                setTimeout(function () {\n                  router.push(returnRouter(res.data.data[0]));\n                }, 1000);\n              }\n\n              _context4.next = 17;\n              break;\n\n            case 14:\n              _context4.prev = 14;\n              _context4.t0 = _context4[\"catch\"](7);\n              showNoti('danger', _context4.t0.message);\n\n            case 17:\n              _context4.prev = 17;\n              setLoadingSubmit(false);\n              return _context4.finish(17);\n\n            case 20:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[7, 14, 17, 20]]);\n    }));\n\n    return function onSubmitExercise() {\n      return _ref4.apply(this, arguments);\n    };\n  }(); // On Drop\n\n\n  var drop = function drop(ev) {\n    ev.preventDefault();\n    var data = ev.dataTransfer.getData('text');\n    data && ev.target.appendChild(document.getElementById(data));\n\n    var nodeList = _toConsumableArray(ev.target.childNodes); // nodeList.forEach((item) => {\n    // \tdataAnswer.every((element) => {\n    // \t\tif (element.ansID === parseInt(item.id)) {\n    // \t\t\t// Xử lí mảng dataAnswer\n    // \t\t\telement.ansID = null\n    // \t\t\telement.html = null\n    // \t\t\telement.text = null\n    // \t\t\tsetDataAnswer([...dataAnswer])\n    // \t\t\t// Xử lí package\n    // \t\t\tlet indexQuestionDetail = packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList.findIndex(\n    // \t\t\t\t(e) => e.ExerciseID === element.quesID\n    // \t\t\t)\n    // \t\t\tpackageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[\n    // \t\t\t\tindexQuestionDetail\n    // \t\t\t].SetPackageExerciseAnswerStudentList = []\n    // \t\t\tgetPackageResult({ ...packageResult })\n    // \t\t\treturn false\n    // \t\t}\n    // \t\treturn true\n    // \t})\n    // })\n\n  };\n\n  var isDrag = function isDrag() {\n    var flag = 0;\n\n    for (var i = 0; i < dataQuestion.length; i++) {\n      for (var j = 0; j < ((_dataQuestion$i = dataQuestion[i]) === null || _dataQuestion$i === void 0 ? void 0 : _dataQuestion$i.ExerciseTopic.length); j++) {\n        var _dataQuestion$i, _dataQuestion$i2, _dataQuestion$i2$Exer, _dataQuestion$i3;\n\n        if (((_dataQuestion$i2 = dataQuestion[i]) === null || _dataQuestion$i2 === void 0 ? void 0 : (_dataQuestion$i2$Exer = _dataQuestion$i2.ExerciseTopic[j]) === null || _dataQuestion$i2$Exer === void 0 ? void 0 : _dataQuestion$i2$Exer.ExerciseID) == activeID && ((_dataQuestion$i3 = dataQuestion[i]) === null || _dataQuestion$i3 === void 0 ? void 0 : _dataQuestion$i3.Type) == 2) {\n          flag = 0;\n          return true;\n        }\n      }\n    }\n\n    return false;\n  };\n\n  console.log('======================');\n  console.log('activeID: ', activeID);\n  console.log('dataQuestion: ', dataQuestion);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"test-wrapper doing-test \".concat(isDone && 'done-test'),\n    children: [/*#__PURE__*/_jsxDEV(TimeUpModal, {\n      isVisible: openTimeUpModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 752,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Th\\xF4ng b\\xE1o\",\n      footer: null,\n      className: \"\",\n      visible: isModalSuccess,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-submit-success-test\",\n        children: [/*#__PURE__*/_jsxDEV(CheckCircleOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 756,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text\",\n          children: \"N\\u1ED9p b\\xE0i th\\xE0nh c\\xF4ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 757,\n          columnNumber: 6\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 755,\n        columnNumber: 5\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 754,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(DecideModal, {\n      isOpen: isModalConfirm,\n      isCancel: function isCancel() {\n        return setIsModalConfirm(false);\n      },\n      isOk: function isOk() {\n        var _router$query7;\n\n        ((_router$query7 = router.query) === null || _router$query7 === void 0 ? void 0 : _router$query7.isExercise) == 'true' ? onSubmitExercise() : onSubmit_DoingTest();\n      },\n      content: returnTextConfirm()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 761,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Ch\\xFA \\xFD!\",\n      visible: isModalVisible,\n      okText: \"\\u0110\\u1ED3ng \\xFD\",\n      cancelText: \"\\u0110\\xF3ng\",\n      onOk: handleOk,\n      onCancel: handleCancel,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontWeight: 500\n        },\n        children: \"B\\u1EA1n ch\\u01B0a ch\\u1ECDn \\u0111\\u1EC1 thi. Chuy\\u1EC3n \\u0111\\u1EBFn trang b\\u1ED9 \\u0111\\u1EC1?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 771,\n        columnNumber: 5\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 770,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(Card, {\n      className: \"test-card\",\n      title: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"test-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"test-title-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"name-type-test\",\n            children: infoExam === null || infoExam === void 0 ? void 0 : infoExam.Name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 780,\n            columnNumber: 8\n          }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"info-user\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: infoExam === null || infoExam === void 0 ? void 0 : infoExam.ProgramName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 782,\n              columnNumber: 9\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 781,\n            columnNumber: 8\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 779,\n          columnNumber: 7\n        }, _this), infoExam !== null && (infoExam === null || infoExam === void 0 ? void 0 : infoExam.Audio) !== undefined && infoExam.Audio !== null && infoExam.Audio !== '' && /*#__PURE__*/_jsxDEV(\"audio\", {\n          className: \"none-poiter hide-on-mobile\",\n          autoPlay: true,\n          controls: true,\n          ref: audio,\n          onEnded: function onEnded() {\n            return setIsPlaying(false);\n          },\n          children: /*#__PURE__*/_jsxDEV(\"source\", {\n            src: infoExam.Audio,\n            type: \"audio/mpeg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 788,\n            columnNumber: 9\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 787,\n          columnNumber: 8\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 778,\n        columnNumber: 6\n      }, _this),\n      extra: infoExam && (dataQuestion === null || dataQuestion === void 0 ? void 0 : dataQuestion.length) > 0 && addMinutes && /*#__PURE__*/_jsxDEV(CountDown, {\n        addMinutes: addMinutes,\n        onFinish: function onFinish() {\n          return !isModalVisible && timeUp();\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 796,\n        columnNumber: 20\n      }, _this),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '100%',\n          height: '105%',\n          display: 'flex',\n          flexDirection: 'column'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '100%',\n            height: '90%'\n          },\n          children: dataQuestion !== null && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: isDrag() ? 'test-body' : 'test-body',\n              children: [loadingSubmit && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"loading-submit text-center\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-100 text-center\",\n                  children: [/*#__PURE__*/_jsxDEV(Spin, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 807,\n                    columnNumber: 13\n                  }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mt-3\",\n                    style: {\n                      fontStyle: 'italic',\n                      fontWeight: 500\n                    },\n                    children: \"\\u0110ang ti\\u1EBFn h\\xE0nh n\\u1ED9p b\\xE0i...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 808,\n                    columnNumber: 13\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 806,\n                  columnNumber: 12\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 805,\n                columnNumber: 11\n              }, _this), isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-100 mt-4 \",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-50\",\n                  children: [/*#__PURE__*/_jsxDEV(Skeleton, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 818,\n                    columnNumber: 13\n                  }, _this), /*#__PURE__*/_jsxDEV(Skeleton, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 819,\n                    columnNumber: 13\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 817,\n                  columnNumber: 12\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 816,\n                columnNumber: 11\n              }, _this) : (dataQuestion === null || dataQuestion === void 0 ? void 0 : dataQuestion.length) > 0 ? dataQuestion.slice(spaceQuestion.start, spaceQuestion.end).map(function (item, index) {\n                if (isGroup) {\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"doingtest-group\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"\",\n                      style: {\n                        height: '100%'\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col-lg-6 col-md-12 col-sm-12 col-12 pl-0 pl-0-mobile\",\n                        style: {\n                          height: '100%'\n                        },\n                        children: /*#__PURE__*/_jsxDEV(ListQuestion, {\n                          setChild: setChild,\n                          dataQuestion: item,\n                          listQuestionID: listQuestionID,\n                          openPagi: openPagi\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 829,\n                          columnNumber: 17\n                        }, _this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 828,\n                        columnNumber: 16\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 827,\n                      columnNumber: 15\n                    }, _this)\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 826,\n                    columnNumber: 14\n                  }, _this);\n                } else {\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"doingtest-single\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"row\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col-12\",\n                        children: /*#__PURE__*/_jsxDEV(ListQuestion, {\n                          dataQuestion: item,\n                          listQuestionID: listQuestionID\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 839,\n                          columnNumber: 17\n                        }, _this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 838,\n                        columnNumber: 16\n                      }, _this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 837,\n                      columnNumber: 15\n                    }, _this)\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 836,\n                    columnNumber: 14\n                  }, _this);\n                }\n              }) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-100 text-center\",\n                children: !checkTested ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    fontWeight: 500\n                  },\n                  children: \"\\u0110\\u1EC1 thi n\\xE0y ch\\u01B0a c\\xF3 c\\xE2u h\\u1ECFi\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 849,\n                  columnNumber: 13\n                }, _this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      fontWeight: 500\n                    },\n                    children: \"B\\u1EA1n \\u0111\\xE3 l\\xE0m \\u0111\\u1EC1 test n\\xE0y r\\u1ED3i\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 852,\n                    columnNumber: 14\n                  }, _this), /*#__PURE__*/_jsxDEV(Link, {\n                    href: {\n                      pathname: '/customer/service/service-test-student'\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"a\", {\n                      className: \"btn btn-warning\",\n                      children: \"Tho\\xE1t ra\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 858,\n                      columnNumber: 15\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 853,\n                    columnNumber: 14\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 851,\n                  columnNumber: 13\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 847,\n                columnNumber: 11\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 803,\n              columnNumber: 9\n            }, _this)\n          }, void 0, false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 800,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(Modal, {\n          title: \"Basic Modal\",\n          visible: false,\n          onOk: handleClick_openPagi,\n          onCancel: handleClick_openPagi,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: 0\n            },\n            children: (dataQuestion === null || dataQuestion === void 0 ? void 0 : dataQuestion.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"footer-pagination row-pagination \".concat(openPagi ? 'show-mobile' : ''),\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"close-icon\",\n                onClick: handleClick_openPagi,\n                children: /*#__PURE__*/_jsxDEV(CloseOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 874,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 873,\n                columnNumber: 10\n              }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"pagi-name\",\n                children: \"Danh s\\xE1ch c\\xE2u h\\u1ECFi\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 876,\n                columnNumber: 10\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"box-preview\",\n                children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                  checked: listPreview.includes(activeID) ? true : false,\n                  onChange: onChange_preview,\n                  children: \"Preview\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 878,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 877,\n                columnNumber: 10\n              }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"pagi-btn previous\",\n                onClick: onChange_PreviousPage,\n                children: /*#__PURE__*/_jsxDEV(LeftOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 883,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 882,\n                columnNumber: 10\n              }, _this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"list-answer\",\n                children: (listQuestionID === null || listQuestionID === void 0 ? void 0 : listQuestionID.length) > 0 && listQuestionID.map(function (questionID, index) {\n                  return /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: \"item \",\n                    value: questionID,\n                    style: {\n                      marginBottom: isLong ? '10px' : ''\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"a\", {\n                      href: \"\",\n                      onClick: function onClick(e) {\n                        return onChange_pagination(e, index + 1);\n                      },\n                      className: \"\\n                      \\t\\t\".concat(questionID == activeID ? 'activeDoing' : '', \"\\n                      \\t\\t\").concat(listPicked.includes(questionID) ? 'checked' : '', \" \").concat(listPreview.includes(questionID) ? 'checked_preview' : ''),\n                      children: index + 1\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 889,\n                      columnNumber: 14\n                    }, _this)\n                  }, questionID, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 888,\n                    columnNumber: 13\n                  }, _this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 885,\n                columnNumber: 10\n              }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"pagi-btn next\",\n                onClick: onChange_NextPage,\n                children: /*#__PURE__*/_jsxDEV(RightOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 902,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 901,\n                columnNumber: 10\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 872,\n              columnNumber: 9\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 870,\n            columnNumber: 7\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 869,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: -100\n          },\n          children: (dataQuestion === null || dataQuestion === void 0 ? void 0 : dataQuestion.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: !openPagi ? 'test-footer' : 'test-footer-mobile',\n            id: \"test-footer\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pagination-mobile \",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"listQuestion\",\n                onClick: handleClick_openPagi,\n                children: /*#__PURE__*/_jsxDEV(ProfileFilled, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 914,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 913,\n                columnNumber: 10\n              }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"pagi-btn previous\",\n                onClick: onChange_PreviousPage,\n                children: /*#__PURE__*/_jsxDEV(LeftOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 917,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 916,\n                columnNumber: 10\n              }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"pagi-btn next\",\n                onClick: onChange_NextPage,\n                children: /*#__PURE__*/_jsxDEV(RightOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 920,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 919,\n                columnNumber: 10\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 912,\n              columnNumber: 9\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"footer-pagination row-pagination \".concat(openPagi ? 'show-mobile' : ''),\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"close-icon\",\n                onClick: handleClick_openPagi,\n                children: /*#__PURE__*/_jsxDEV(CloseOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 925,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 924,\n                columnNumber: 10\n              }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"pagi-name\",\n                children: \"Danh s\\xE1ch c\\xE2u h\\u1ECFi\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 927,\n                columnNumber: 10\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"box-preview\",\n                children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                  checked: listPreview.includes(activeID) ? true : false,\n                  onChange: onChange_preview,\n                  children: \"Preview\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 929,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 928,\n                columnNumber: 10\n              }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"pagi-btn previous\",\n                onClick: onChange_PreviousPage,\n                children: /*#__PURE__*/_jsxDEV(LeftOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 934,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 933,\n                columnNumber: 10\n              }, _this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"list-answer\",\n                children: (listQuestionID === null || listQuestionID === void 0 ? void 0 : listQuestionID.length) > 0 && listQuestionID.map(function (questionID, index) {\n                  return /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: \"item \",\n                    value: questionID,\n                    style: {\n                      marginBottom: isLong ? '10px' : ''\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"a\", {\n                      href: \"\",\n                      onClick: function onClick(e) {\n                        return onChange_pagination(e, index + 1);\n                      },\n                      className: \"\\n                      \\t\\t\".concat(questionID == activeID ? 'activeDoing' : '', \"\\n                      \\t\\t\").concat(listPicked.includes(questionID) ? 'checked' : '', \" \").concat(listPreview.includes(questionID) ? 'checked_preview' : ''),\n                      children: index + 1\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 940,\n                      columnNumber: 14\n                    }, _this)\n                  }, questionID, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 939,\n                    columnNumber: 13\n                  }, _this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 936,\n                columnNumber: 10\n              }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"pagi-btn next\",\n                onClick: onChange_NextPage,\n                children: /*#__PURE__*/_jsxDEV(RightOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 953,\n                  columnNumber: 11\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 952,\n                columnNumber: 10\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 923,\n              columnNumber: 9\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"footer-submit text-right\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-primary\",\n                onClick: function onClick() {\n                  return !dataDoneTest ? setIsModalConfirm(true) : closeMainTest && closeMainTest();\n                },\n                children: !dataDoneTest ? 'Nộp bài' : 'Đóng'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 957,\n                columnNumber: 10\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 956,\n              columnNumber: 9\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 911,\n            columnNumber: 8\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 909,\n          columnNumber: 6\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 799,\n        columnNumber: 5\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 775,\n      columnNumber: 4\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 750,\n    columnNumber: 3\n  }, _this);\n};\n\n_s(MainTest, \"nEj0ORoH5ko/3QtLIFUv0m/JrRk=\", false, function () {\n  return [useDoingTest, useWrap, useRouter, useDoingTest, useWrap];\n});\n\n_c3 = MainTest;\nexport default MainTest;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"ListQuestion$dynamic\");\n$RefreshReg$(_c2, \"ListQuestion\");\n$RefreshReg$(_c3, \"MainTest\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/DoingTest/MainTest.tsx"],"names":["CheckCircleOutlined","CloseOutlined","LeftOutlined","ProfileFilled","RightOutlined","Card","Checkbox","Modal","Skeleton","Spin","dynamic","Link","useRouter","React","useEffect","useRef","useState","doingTestApi","examAppointmentResultApi","examDetailApi","homeworkResultApi","courseExamApi","CountDown","DecideModal","useDoingTest","useWrap","TimeUpModal","ListQuestion","loading","ssr","MainTest","props","getListQuestionID","getActiveID","activeID","listPicked","examID","infoExam","packageDetailID","dataDoneTest","isDone","listIDFromDoneTest","listGroupIDFromDoneTest","closeMainTest","type","CurriculumDetailID","listTodoApi","pageIndex","pageSize","ExamTopicID","showNoti","todoApi","setTodoApi","isLoading","setIsLoading","dataQuestion","setDataQuestion","isGroup","setIsGroup","addMinutes","setAddMinutes","isModalVisible","setIsModalVisible","listQuestionID","setListQuestionID","listGroupID","setListGroupID","start","end","spaceQuestion","setSpaceQuestion","pageCurrent","setPageCurrent","listPreview","setListPreview","router","packageResult","getPackageResult","userInformation","loadingSubmit","setLoadingSubmit","isLong","setIsLong","isModalConfirm","setIsModalConfirm","isModalSuccess","setIsModalSuccess","openTimeUpModal","setOpenTimeUpModal","checkTested","setCheckTested","openPagi","setOpenPagi","child","setChild","checkIsTested","res","status","data","getListQuestion","console","log","cloneListQuestionID","cloneListGroupID","getAll","forEach","item","index","Enable","ExerciseGroupID","push","ExerciseTopic","ques","ExerciseID","checkSpaceQuestionAtFirst","message","every","checkIsSingle","indexCurrent","length","checkIsGroup","page","exerciseID","some","object","onChange_pagination","e","preventDefault","onChange_PreviousPage","onChange_NextPage","onChange_preview","checked","target","includes","newListPreview","filter","timeUp","setTimeout","onSubmit_DoingTest","handleOk","handleCancel","remakeData","cloneData","dataSubmit","SetPackageResultDetailInfoList","Type","SetPackageExerciseStudentInfoList","SetPackageExerciseAnswerStudentList","AnswerID","AnswerContent","FileAudio","deleteOldElement","dataClone","ExamAppointmentResultDetailInfoList","ExamAppointmentExerciseStudentInfoList","ans","CourseExamresultDetailInfoList","CourseExamExerciseStudentInfoList","dataTestFirst","StudentID","ExamAppointmentID","SetPackageDetailID","ExamAppointmentExerciseAnswerStudentList","dataCheck","CourseID","parseInt","CourseExamExerciseAnswerStudentList","returnRouter","obj","pathname","query","slug","ExamAppointmentResultID","ID","isExercise","HomeworkID","add","returnTextConfirm","textConfirm","numberOfQuestion","handleClick_openPagi","UserInformationID","listQuestion","ExamTopicDetailID","Level","SkillID","undefined","add_minutes","dt","minutes","Date","getTime","Time","alertUser","returnValue","testFooter","document","getElementById","heightFooter","offsetHeight","window","addEventListener","removeEventListener","findIndex","id","isPlaying","setIsPlaying","audio","playSound","current","play","pause","controlVolume","value","customValue","volume","convertData","json","stringified","JSON","stringify","replace","indexOf","jsonObject","parse","onSubmitExercise","drop","ev","dataTransfer","getData","appendChild","nodeList","childNodes","isDrag","flag","i","j","fontWeight","Name","ProgramName","Audio","width","height","display","flexDirection","fontStyle","slice","map","marginBottom","questionID"],"mappings":"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","sourcesContent":["import { CheckCircleOutlined, CloseOutlined, LeftOutlined, ProfileFilled, RightOutlined } from '@ant-design/icons'\r\nimport { Card, Checkbox, Modal, Skeleton, Spin } from 'antd'\r\nimport dynamic from 'next/dynamic'\r\nimport Link from 'next/link'\r\nimport { useRouter } from 'next/router'\r\nimport React, { useEffect, useRef, useState } from 'react'\r\nimport { doingTestApi, examAppointmentResultApi, examDetailApi } from '~/apiBase'\r\nimport { homeworkResultApi } from '~/apiBase/course-detail/home-work-result'\r\nimport { courseExamApi } from '~/apiBase/package/course-exam'\r\nimport CountDown from '~/components/Elements/CountDown/CountDown'\r\nimport DecideModal from '~/components/Elements/DecideModal'\r\nimport { useDoingTest } from '~/context/useDoingTest'\r\nimport { useWrap } from '~/context/wrap'\r\nimport TimeUpModal from './TimeUpModal'\r\n\r\nconst ListQuestion = dynamic(() => import('~/components/Global/DoingTest/ListQuestion'), {\r\n\tloading: () => <p>...</p>,\r\n\tssr: false\r\n})\r\n\r\nconst MainTest = (props) => {\r\n\tconst { getListQuestionID, getActiveID, activeID, listPicked } = useDoingTest()\r\n\tconst {\r\n\t\texamID,\r\n\t\tinfoExam,\r\n\t\tpackageDetailID,\r\n\t\tdataDoneTest,\r\n\t\tisDone,\r\n\t\tlistIDFromDoneTest,\r\n\t\tlistGroupIDFromDoneTest,\r\n\t\tcloseMainTest,\r\n\t\ttype,\r\n\t\tCurriculumDetailID\r\n\t} = props\r\n\tconst listTodoApi = {\r\n\t\tpageIndex: 1,\r\n\t\tpageSize: 999,\r\n\t\tExamTopicID: examID\r\n\t}\r\n\r\n\tconst { showNoti } = useWrap()\r\n\tconst [todoApi, setTodoApi] = useState(listTodoApi)\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst [dataQuestion, setDataQuestion] = useState<IExamDetail[]>(null)\r\n\tconst [isGroup, setIsGroup] = useState(false)\r\n\tconst [addMinutes, setAddMinutes] = useState(null)\r\n\tconst [isModalVisible, setIsModalVisible] = useState(false)\r\n\tconst [listQuestionID, setListQuestionID] = useState([]) // Lấy tất cả ID đã có\r\n\tconst [listGroupID, setListGroupID] = useState([]) // Lấy tất cả group ID đã có\r\n\tconst [spaceQuestion, setSpaceQuestion] = useState({\r\n\t\tstart: 0,\r\n\t\tend: null\r\n\t})\r\n\tconst [pageCurrent, setPageCurrent] = useState<number>(1)\r\n\tconst [listPreview, setListPreview] = useState<Array<number>>([])\r\n\tconst router = useRouter()\r\n\t// const packageID = router.query.packageDetailID as string;\r\n\tconst { packageResult, getPackageResult } = useDoingTest()\r\n\tconst { userInformation } = useWrap()\r\n\tconst [loadingSubmit, setLoadingSubmit] = useState(false)\r\n\tconst [isLong, setIsLong] = useState(false)\r\n\tconst [isModalConfirm, setIsModalConfirm] = useState(false)\r\n\tconst [isModalSuccess, setIsModalSuccess] = useState(false)\r\n\tconst [openTimeUpModal, setOpenTimeUpModal] = useState(false)\r\n\tconst [checkTested, setCheckTested] = useState(false)\r\n\tconst [openPagi, setOpenPagi] = useState(false) // Use for list question in mobile\r\n\tconst [child, setChild] = useState<any>('')\r\n\r\n\tconst checkIsTested = async () => {\r\n\t\tsetIsLoading(true)\r\n\t\ttry {\r\n\t\t\tlet res = await examAppointmentResultApi.checkIsTested(packageDetailID)\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tif (res.data.data) {\r\n\t\t\t\t\tsetCheckTested(true)\r\n\t\t\t\t\tsetIsLoading(false)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgetListQuestion()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error)\r\n\t\t\tsetIsLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\t// --- GET LIST QUESTION ---\r\n\tconst getListQuestion = async () => {\r\n\t\tlet cloneListQuestionID = [...listQuestionID]\r\n\t\tlet cloneListGroupID = [...listGroupID]\r\n\t\tsetIsLoading(true)\r\n\t\ttry {\r\n\t\t\tlet res = await examDetailApi.getAll(todoApi)\r\n\t\t\tif (res.status == 200) {\r\n\t\t\t\tsetDataQuestion(res.data.data)\r\n\r\n\t\t\t\t// Add questionid to list\r\n\t\t\t\tres.data.data.forEach((item, index) => {\r\n\t\t\t\t\tif (item.Enable) {\r\n\t\t\t\t\t\titem.ExerciseGroupID !== 0 && cloneListGroupID.push(item.ExerciseGroupID)\r\n\t\t\t\t\t\titem.ExerciseTopic.forEach((ques) => {\r\n\t\t\t\t\t\t\tcloneListQuestionID.push(ques.ExerciseID)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\t// Calculate space question\r\n\t\t\t\tcheckSpaceQuestionAtFirst(res.data.data)\r\n\r\n\t\t\t\tsetListGroupID([...cloneListGroupID])\r\n\t\t\t\tsetListQuestionID([...cloneListQuestionID])\r\n\t\t\t}\r\n\t\t\tif (res.status == 204) {\r\n\t\t\t\tsetDataQuestion([])\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst checkSpaceQuestionAtFirst = (data) => {\r\n\t\tif (data[0].ExerciseGroupID !== 0) {\r\n\t\t\tsetIsGroup(true)\r\n\t\t\tsetSpaceQuestion({\r\n\t\t\t\tstart: 0,\r\n\t\t\t\tend: 1\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tdata.every((item, index) => {\r\n\t\t\t\tif (index == spaceQuestion.start + 1) {\r\n\t\t\t\t\tif (item.ExerciseGroupID !== 0) {\r\n\t\t\t\t\t\tsetSpaceQuestion({\r\n\t\t\t\t\t\t\t...spaceQuestion,\r\n\t\t\t\t\t\t\tend: index\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetIsGroup(false)\r\n\t\t\t\t\t\tsetSpaceQuestion({\r\n\t\t\t\t\t\t\t...spaceQuestion,\r\n\t\t\t\t\t\t\tend: index + 1\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn true\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// -- CHECK IS SINGLE\r\n\tconst checkIsSingle = (indexCurrent) => {\r\n\t\tif (indexCurrent !== spaceQuestion.start && indexCurrent !== 0 && indexCurrent !== spaceQuestion.end) {\r\n\t\t\tif (spaceQuestion.end - spaceQuestion.start == 2) {\r\n\t\t\t\tif (indexCurrent > spaceQuestion.start && indexCurrent < spaceQuestion.end) {\r\n\t\t\t\t\tindexCurrent = indexCurrent - 1\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdataQuestion.every((item, index) => {\r\n\t\t\tif (index == indexCurrent + 1) {\r\n\t\t\t\tif (item.ExerciseGroupID !== 0) {\r\n\t\t\t\t\t// nếu là group\r\n\r\n\t\t\t\t\tsetSpaceQuestion({\r\n\t\t\t\t\t\tstart: indexCurrent,\r\n\t\t\t\t\t\tend: index\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn false\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetSpaceQuestion({\r\n\t\t\t\t\t\tstart: indexCurrent,\r\n\t\t\t\t\t\tend: index + 1\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn true\r\n\t\t})\r\n\r\n\t\tif (indexCurrent + 1 === dataQuestion.length) {\r\n\t\t\tsetSpaceQuestion({\r\n\t\t\t\tstart: indexCurrent,\r\n\t\t\t\tend: indexCurrent + 1\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// -- CHECK IS GROUP --\r\n\tconst checkIsGroup = (page: number) => {\r\n\t\tlet exerciseID = listQuestionID[page - 1]\r\n\r\n\t\tdataQuestion.every((item, index) => {\r\n\t\t\t// Kiểm tra nếu trong list Exercise Topic có exercise ID thì bắt đầu lấy được vị trí\r\n\t\t\tif (item.ExerciseTopic.some((object) => object['ExerciseID'] == exerciseID)) {\r\n\t\t\t\t// Kiểm tra ở vị trí này là câu hỏi nhóm hay đơn\r\n\t\t\t\tif (item.ExerciseGroupID !== 0) {\r\n\t\t\t\t\t// Nếu là nhóm\r\n\t\t\t\t\tsetSpaceQuestion({\r\n\t\t\t\t\t\tstart: index,\r\n\t\t\t\t\t\tend: index + 1\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsetIsGroup(true)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetIsGroup(false)\r\n\t\t\t\t\tcheckIsSingle(index)\r\n\t\t\t\t}\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\treturn true\r\n\t\t})\r\n\r\n\t\t// return isGroup;\r\n\t}\r\n\r\n\t// --- ON CHAGNE PAGINATION\r\n\r\n\tconst onChange_pagination = (e, page: number) => {\r\n\t\tsetPageCurrent(page)\r\n\t\tif (e !== 'x') {\r\n\t\t\te.preventDefault()\r\n\t\t}\r\n\t\t// setActiveID(listQuestionID[page - 1]);\r\n\t\tgetActiveID(listQuestionID[page - 1])\r\n\r\n\t\tcheckIsGroup(page)\r\n\t}\r\n\r\n\t// - Previous page\r\n\tconst onChange_PreviousPage = () => {\r\n\t\tlistQuestionID.every((item, index) => {\r\n\t\t\tif (item === activeID) {\r\n\t\t\t\tif (index == 0) {\r\n\t\t\t\t\tsetPageCurrent(listQuestionID.length)\r\n\t\t\t\t\tcheckIsGroup(listQuestionID.length)\r\n\t\t\t\t\tgetActiveID(listQuestionID[listQuestionID.length - 1])\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetPageCurrent((pageCurrent) => pageCurrent - 1)\r\n\t\t\t\t\tcheckIsGroup(pageCurrent - 1)\r\n\t\t\t\t\tgetActiveID(listQuestionID[index - 1])\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\treturn true\r\n\t\t})\r\n\t}\r\n\r\n\t// - Next Page\r\n\tconst onChange_NextPage = (e) => {\r\n\t\tlistQuestionID.every((item, index) => {\r\n\t\t\tif (item === activeID) {\r\n\t\t\t\tif (index === listQuestionID.length - 1) {\r\n\t\t\t\t\tsetPageCurrent(1)\r\n\t\t\t\t\tcheckIsGroup(1)\r\n\t\t\t\t\tgetActiveID(listQuestionID[0])\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetPageCurrent((pageCurrent) => pageCurrent + 1)\r\n\t\t\t\t\tcheckIsGroup(pageCurrent + 1)\r\n\t\t\t\t\tgetActiveID(listQuestionID[index + 1])\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\treturn true\r\n\t\t})\r\n\t}\r\n\r\n\t// - Preview\r\n\tfunction onChange_preview(e) {\r\n\t\tconst checked = e.target.checked\r\n\t\tif (!listPreview.includes(activeID)) {\r\n\t\t\tlistPreview.push(activeID)\r\n\t\t\tsetListPreview([...listPreview])\r\n\t\t} else {\r\n\t\t\tlet newListPreview = listPreview.filter((item) => (item! -= activeID))\r\n\t\t\tsetListPreview([...newListPreview])\r\n\t\t}\r\n\t}\r\n\r\n\t// --- TIME UP ---\r\n\tconst timeUp = () => {\r\n\t\tsetOpenTimeUpModal(true)\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetOpenTimeUpModal(false)\r\n\t\t\tonSubmit_DoingTest()\r\n\t\t}, 1500)\r\n\t}\r\n\r\n\t// --- ACTION SHOW MODAL ---\r\n\tconst handleOk = () => {\r\n\t\tsetIsModalVisible(false)\r\n\t}\r\n\r\n\tconst handleCancel = () => {\r\n\t\tsetIsModalVisible(false)\r\n\t}\r\n\r\n\tconst remakeData = () => {\r\n\t\tlet cloneData = { ...packageResult }\r\n\t\tlet dataSubmit = null\r\n\r\n\t\tcloneData.SetPackageResultDetailInfoList.forEach((item) => {\r\n\t\t\tif (item.Type == 3 || item.Type == 2 || item.Type == 5) {\r\n\t\t\t\titem.SetPackageExerciseStudentInfoList.forEach((e) => {\r\n\t\t\t\t\tif (e.SetPackageExerciseAnswerStudentList.length == 0) {\r\n\t\t\t\t\t\te.SetPackageExerciseAnswerStudentList.push({\r\n\t\t\t\t\t\t\tAnswerID: 0,\r\n\t\t\t\t\t\t\tAnswerContent: '',\r\n\t\t\t\t\t\t\tFileAudio: ''\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\t// Kiểm tra bài test thuộc dạng nào (type)\r\n\t\t// test - Kiểm tra đầu vào\r\n\t\t// examination - Đề bán, đề thi\r\n\t\t// check - Đề kiểm tra\r\n\r\n\t\tconst deleteOldElement = (data: any, type: string) => {\r\n\t\t\tlet dataClone = { ...data }\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase 'test':\r\n\t\t\t\t\tdataClone.ExamAppointmentResultDetailInfoList.forEach((item) => {\r\n\t\t\t\t\t\tdelete item['SetPackageExerciseStudentInfoList']\r\n\t\t\t\t\t\titem.ExamAppointmentExerciseStudentInfoList.forEach((ans) => {\r\n\t\t\t\t\t\t\tdelete ans['SetPackageExerciseAnswerStudentList']\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 'check':\r\n\t\t\t\t\tdataClone.CourseExamresultDetailInfoList.forEach((item) => {\r\n\t\t\t\t\t\tdelete item['SetPackageExerciseStudentInfoList']\r\n\t\t\t\t\t\titem.CourseExamExerciseStudentInfoList.forEach((ans) => {\r\n\t\t\t\t\t\t\tdelete ans['SetPackageExerciseAnswerStudentList']\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\tbreak\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak\r\n\t\t\t}\r\n\r\n\t\t\treturn dataClone\r\n\t\t}\r\n\r\n\t\tswitch (type) {\r\n\t\t\tcase 'test':\r\n\t\t\t\tlet dataTestFirst: ITestFirst = {\r\n\t\t\t\t\tStudentID: null,\r\n\t\t\t\t\tExamAppointmentID: null,\r\n\t\t\t\t\tExamAppointmentResultDetailInfoList: []\r\n\t\t\t\t}\r\n\t\t\t\tdataTestFirst.StudentID = cloneData.StudentID\r\n\t\t\t\tdataTestFirst.ExamAppointmentID = cloneData.SetPackageDetailID\r\n\t\t\t\tdataTestFirst.ExamAppointmentResultDetailInfoList = []\r\n\r\n\t\t\t\tcloneData.SetPackageResultDetailInfoList.forEach((ques) => {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tques.ExamAppointmentExerciseStudentInfoList = [...ques.SetPackageExerciseStudentInfoList]\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tdataTestFirst.ExamAppointmentResultDetailInfoList.push(ques)\r\n\r\n\t\t\t\t\tdataTestFirst.ExamAppointmentResultDetailInfoList.forEach((item) => {\r\n\t\t\t\t\t\titem.ExamAppointmentExerciseStudentInfoList.forEach((ans) => {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tans.ExamAppointmentExerciseAnswerStudentList = [...ans.SetPackageExerciseAnswerStudentList]\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\r\n\t\t\t\t// dataTestFirst = deleteOldElement(dataTestFirst, 'test');\r\n\t\t\t\tdataSubmit = { ...dataTestFirst }\r\n\r\n\t\t\t\tbreak\r\n\r\n\t\t\tcase 'check':\r\n\t\t\t\tlet dataCheck: ITestCheck = {\r\n\t\t\t\t\tStudentID: null,\r\n\t\t\t\t\tCourseID: null,\r\n\t\t\t\t\tCurriculumDetailID: parseInt(CurriculumDetailID),\r\n\t\t\t\t\tCourseExamresultDetailInfoList: []\r\n\t\t\t\t}\r\n\t\t\t\tdataCheck.StudentID = cloneData.StudentID\r\n\t\t\t\tdataCheck.CourseID = cloneData.SetPackageDetailID\r\n\t\t\t\tdataCheck.CourseExamresultDetailInfoList = []\r\n\r\n\t\t\t\tcloneData.SetPackageResultDetailInfoList.forEach((ques) => {\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tques.CourseExamExerciseStudentInfoList = [...ques.SetPackageExerciseStudentInfoList]\r\n\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\tdataCheck.CourseExamresultDetailInfoList.push(ques)\r\n\r\n\t\t\t\t\tdataCheck.CourseExamresultDetailInfoList.forEach((item) => {\r\n\t\t\t\t\t\titem.CourseExamExerciseStudentInfoList.forEach((ans) => {\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\tans.CourseExamExerciseAnswerStudentList = [...ans.SetPackageExerciseAnswerStudentList]\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\r\n\t\t\t\t// dataCheck = deleteOldElement(dataCheck, 'check');\r\n\t\t\t\tdataSubmit = { ...dataCheck }\r\n\t\t\t\tbreak\r\n\t\t\tcase 'examination':\r\n\t\t\t\tdataSubmit = { ...cloneData }\r\n\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tbreak\r\n\t\t}\r\n\r\n\t\treturn dataSubmit\r\n\t}\r\n\r\n\t// ===== ON SUBMIT DOING TEST =====\r\n\tconst returnRouter = (data) => {\r\n\t\tlet obj = {}\r\n\r\n\t\tconsole.log('returnRouter: ', data)\r\n\r\n\t\tswitch (type) {\r\n\t\t\tcase 'test':\r\n\t\t\t\tobj = {\r\n\t\t\t\t\tpathname: '/customer/service/service-test-student/detail/[slug]',\r\n\t\t\t\t\tquery: { slug: data.ExamAppointmentID, examID: data.ExamTopicID, ExamAppointmentResultID: data.ID }\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\r\n\t\t\tcase 'check':\r\n\t\t\t\tobj = {\r\n\t\t\t\t\tpathname: '/course-exam/detail/[slug]',\r\n\t\t\t\t\tquery: { slug: data.ID, examID: data.ExamTopicID, packageDetailID: router.query?.packageDetailID }\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tobj = {\r\n\t\t\t\t\tpathname: router.query?.isExercise ? 'course/exercise/result/[slug]' : '/package/package-result-student/detail/[slug]',\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\tslug: router.query?.isExercise ? data.HomeworkID : data.ID,\r\n\t\t\t\t\t\texamID: data.ExamTopicID,\r\n\t\t\t\t\t\tpackageDetailID: router.query?.packageDetailID\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\t\t}\r\n\r\n\t\treturn obj\r\n\t}\r\n\r\n\tconst onSubmit_DoingTest = async () => {\r\n\t\tsetIsModalConfirm(false)\r\n\t\tsetLoadingSubmit(true)\r\n\t\tlet dataSubmit = remakeData()\r\n\r\n\t\tconsole.log('dataSubmit: ', dataSubmit)\r\n\r\n\t\tlet res = null\r\n\r\n\t\ttry {\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase 'test': // Kiểm tra đầu vào\r\n\t\t\t\t\tres = await examAppointmentResultApi.add(dataSubmit)\r\n\t\t\t\t\tbreak\r\n\r\n\t\t\t\tcase 'check': // Kiểm tra trong khóa học\r\n\t\t\t\t\tres = await courseExamApi.add(dataSubmit)\r\n\t\t\t\t\tbreak\r\n\r\n\t\t\t\tcase 'examination': // Thi cử - đề bán\r\n\t\t\t\t\tres = router.query?.isExercise ? await homeworkResultApi.add({ ...dataSubmit }) : await doingTestApi.add(dataSubmit)\r\n\t\t\t\t\tbreak\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak\r\n\t\t\t}\r\n\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tsetIsModalSuccess(true)\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\trouter.push(returnRouter(res.data.data))\r\n\t\t\t\t}, 1000)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetLoadingSubmit(false)\r\n\t\t}\r\n\t}\r\n\r\n\t// Return text confirm\r\n\tconst returnTextConfirm = () => {\r\n\t\tlet textConfirm = 'Bạn có chắc muốn nộp bài?'\r\n\t\tif (listPicked.length < listQuestionID.length) {\r\n\t\t\tlet numberOfQuestion = listQuestionID.length - listPicked.length\r\n\t\t\ttextConfirm = `Bạn còn ${numberOfQuestion} câu chưa làm. Bạn có chắc muốn nộp bài?`\r\n\t\t}\r\n\r\n\t\treturn textConfirm\r\n\t}\r\n\r\n\tconst handleClick_openPagi = () => {\r\n\t\tsetOpenPagi(!openPagi)\r\n\t}\r\n\r\n\t// ===== ALL USE EFFECT ====\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!isDone) {\r\n\t\t\tif (type === 'test') {\r\n\t\t\t\tcheckIsTested()\r\n\t\t\t} else {\r\n\t\t\t\tgetListQuestion()\r\n\t\t\t}\r\n\r\n\t\t\tpackageResult.SetPackageDetailID = parseInt(packageDetailID)\r\n\t\t\tgetPackageResult({ ...packageResult })\r\n\t\t} else {\r\n\t\t\tsetDataQuestion(dataDoneTest)\r\n\t\t\tcheckSpaceQuestionAtFirst(dataDoneTest)\r\n\t\t\tsetListQuestionID(listIDFromDoneTest)\r\n\t\t\tsetListGroupID(listGroupIDFromDoneTest)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (listQuestionID?.length > 0) {\r\n\t\t\tgetListQuestionID(listQuestionID)\r\n\t\t\tgetActiveID(listQuestionID[0])\r\n\t\t\t// setActiveID(listQuestionID[0]);\r\n\t\t}\r\n\t}, [listQuestionID])\r\n\r\n\t// Use to check\r\n\t// useEffect(() => {\r\n\t// \tif (spaceQuestion.start !== null && spaceQuestion.end !== null) {\r\n\t// \t\tdataQuestion.slice(spaceQuestion.start, spaceQuestion.end).map((item) => console.log('ITEM ACTIVE: ', item));\r\n\t// \t}\r\n\t// }, [spaceQuestion]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (userInformation) {\r\n\t\t\tgetPackageResult({\r\n\t\t\t\t...packageResult,\r\n\t\t\t\tSetPackageDetailID: parseInt(packageDetailID),\r\n\t\t\t\tStudentID: userInformation.UserInformationID\r\n\t\t\t})\r\n\t\t}\r\n\t}, [userInformation])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!isDone) {\r\n\t\t\tif (dataQuestion?.length > 0) {\r\n\t\t\t\tdataQuestion.forEach((item, index) => {\r\n\t\t\t\t\tlet listQuestion = []\r\n\r\n\t\t\t\t\titem.ExerciseTopic.forEach((ques, index) => {\r\n\t\t\t\t\t\tlistQuestion.push({\r\n\t\t\t\t\t\t\tExerciseID: ques.ExerciseID,\r\n\t\t\t\t\t\t\tSetPackageExerciseAnswerStudentList: []\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tpackageResult.SetPackageResultDetailInfoList.push({\r\n\t\t\t\t\t\tExamTopicDetailID: item.ID,\r\n\t\t\t\t\t\tExerciseGroupID: item.ExerciseGroupID,\r\n\t\t\t\t\t\tLevel: item.Level,\r\n\t\t\t\t\t\tType: item.Type,\r\n\t\t\t\t\t\tSkillID: item.SkillID,\r\n\t\t\t\t\t\tSetPackageExerciseStudentInfoList: listQuestion\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tgetPackageResult({\r\n\t\t\t\t\t\t...packageResult\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (dataQuestion !== null && dataQuestion !== undefined) {\r\n\t\t\tonChange_pagination('x', 1)\r\n\t\t}\r\n\t}, [dataQuestion])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (infoExam && dataQuestion) {\r\n\t\t\t// Run time\r\n\t\t\tconst add_minutes = (function (dt, minutes) {\r\n\t\t\t\treturn new Date(dt.getTime() + minutes * 60000)\r\n\t\t\t})(new Date(), infoExam.Time)\r\n\t\t\tsetAddMinutes(add_minutes)\r\n\t\t}\r\n\t}, [infoExam, dataQuestion])\r\n\r\n\tconst alertUser = (e) => {\r\n\t\te.preventDefault()\r\n\t\te.returnValue = ''\r\n\t\tconsole.log('IS RELOADDD')\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tlet testFooter = document.getElementById('test-footer')\r\n\t\tif (testFooter) {\r\n\t\t\tlet heightFooter = testFooter.offsetHeight\r\n\t\t\tif (heightFooter > 70) {\r\n\t\t\t\tsetIsLong(true)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!dataDoneTest) {\r\n\t\t\tif (!isModalSuccess) {\r\n\t\t\t\twindow.addEventListener('beforeunload', alertUser)\r\n\t\t\t\treturn () => {\r\n\t\t\t\t\twindow.removeEventListener('beforeunload', alertUser)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\tuseEffect(() => {\r\n\t\tif (activeID) {\r\n\t\t\tlet index = listQuestionID.findIndex((id) => id === activeID)\r\n\t\t\tsetPageCurrent(index + 1)\r\n\t\t}\r\n\t}, [activeID])\r\n\r\n\tconsole.log(addMinutes)\r\n\r\n\tconst [isPlaying, setIsPlaying] = useState(false)\r\n\tconst audio = useRef(null)\r\n\r\n\tconst playSound = () => {\r\n\t\tif (!isPlaying) {\r\n\t\t\taudio.current.play()\r\n\t\t\tsetIsPlaying(true)\r\n\t\t} else {\r\n\t\t\taudio.current.pause()\r\n\t\t\tsetIsPlaying(false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst controlVolume = (value) => {\r\n\t\tlet customValue = value / 100\r\n\t\taudio.current.volume = customValue\r\n\t}\r\n\r\n\tconsole.log('router.query?.isExercise: ', router.query?.isExercise)\r\n\r\n\tconst convertData = (json) => {\r\n\t\tvar stringified = JSON.stringify(json)\r\n\t\tstringified = stringified.replace('SetPackageResultDetailInfoList', 'HomeworkResultDetailInfoList')\r\n\t\twhile (\r\n\t\t\tstringified.indexOf('SetPackageExerciseStudentInfoList') !== -1 ||\r\n\t\t\tstringified.indexOf('SetPackageExerciseAnswerStudentList') !== -1\r\n\t\t) {\r\n\t\t\tstringified = stringified.replace('SetPackageExerciseStudentInfoList', 'HomeworkExerciseStudentInfoList')\r\n\t\t\tstringified = stringified.replace('SetPackageExerciseAnswerStudentList', 'HomeworkExerciseAnswerStudentList')\r\n\t\t}\r\n\t\tvar jsonObject = JSON.parse(stringified)\r\n\t\treturn jsonObject\r\n\t}\r\n\r\n\tconst onSubmitExercise = async () => {\r\n\t\tconsole.log('====================================')\r\n\t\tconsole.log('onSubmitExercise')\r\n\r\n\t\tsetIsModalConfirm(false)\r\n\t\tsetLoadingSubmit(true)\r\n\t\tlet dataSubmit = remakeData()\r\n\r\n\t\tlet res = null\r\n\r\n\t\tconsole.log('dataSubmit: ', convertData({ ...dataSubmit, HomeworkID: dataSubmit.SetPackageDetailID }))\r\n\r\n\t\ttry {\r\n\t\t\tres = await homeworkResultApi.add(convertData({ ...dataSubmit, HomeworkID: dataSubmit.SetPackageDetailID }))\r\n\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tsetIsModalSuccess(true)\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\trouter.push(returnRouter(res.data.data[0]))\r\n\t\t\t\t}, 1000)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetLoadingSubmit(false)\r\n\t\t}\r\n\t}\r\n\r\n\t// On Drop\r\n\tconst drop = (ev) => {\r\n\t\tev.preventDefault()\r\n\t\tvar data = ev.dataTransfer.getData('text')\r\n\t\tdata && ev.target.appendChild(document.getElementById(data))\r\n\r\n\t\tlet nodeList = [...ev.target.childNodes]\r\n\r\n\t\t// nodeList.forEach((item) => {\r\n\t\t// \tdataAnswer.every((element) => {\r\n\t\t// \t\tif (element.ansID === parseInt(item.id)) {\r\n\t\t// \t\t\t// Xử lí mảng dataAnswer\r\n\t\t// \t\t\telement.ansID = null\r\n\t\t// \t\t\telement.html = null\r\n\t\t// \t\t\telement.text = null\r\n\t\t// \t\t\tsetDataAnswer([...dataAnswer])\r\n\r\n\t\t// \t\t\t// Xử lí package\r\n\t\t// \t\t\tlet indexQuestionDetail = packageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList.findIndex(\r\n\t\t// \t\t\t\t(e) => e.ExerciseID === element.quesID\r\n\t\t// \t\t\t)\r\n\t\t// \t\t\tpackageResult.SetPackageResultDetailInfoList[indexQuestion].SetPackageExerciseStudentInfoList[\r\n\t\t// \t\t\t\tindexQuestionDetail\r\n\t\t// \t\t\t].SetPackageExerciseAnswerStudentList = []\r\n\r\n\t\t// \t\t\tgetPackageResult({ ...packageResult })\r\n\t\t// \t\t\treturn false\r\n\t\t// \t\t}\r\n\t\t// \t\treturn true\r\n\t\t// \t})\r\n\t\t// })\r\n\t}\r\n\r\n\tconst isDrag = () => {\r\n\t\tlet flag = 0\r\n\t\tfor (let i = 0; i < dataQuestion.length; i++) {\r\n\t\t\tfor (let j = 0; j < dataQuestion[i]?.ExerciseTopic.length; j++) {\r\n\t\t\t\tif (dataQuestion[i]?.ExerciseTopic[j]?.ExerciseID == activeID && dataQuestion[i]?.Type == 2) {\r\n\t\t\t\t\tflag = 0\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false\r\n\t}\r\n\r\n\tconsole.log('======================')\r\n\r\n\tconsole.log('activeID: ', activeID)\r\n\tconsole.log('dataQuestion: ', dataQuestion)\r\n\r\n\treturn (\r\n\t\t<div className={`test-wrapper doing-test ${isDone && 'done-test'}`}>\r\n\t\t\t{/** Modal báo hết giờ làm bài */}\r\n\t\t\t<TimeUpModal isVisible={openTimeUpModal} />\r\n\t\t\t{/* Modal báo thành công **/}\r\n\t\t\t<Modal title=\"Thông báo\" footer={null} className=\"\" visible={isModalSuccess}>\r\n\t\t\t\t<div className=\"modal-submit-success-test\">\r\n\t\t\t\t\t<CheckCircleOutlined />\r\n\t\t\t\t\t<p className=\"text\">Nộp bài thành công</p>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t\t{/* Modal xác nhận submit **/}\r\n\t\t\t<DecideModal\r\n\t\t\t\tisOpen={isModalConfirm}\r\n\t\t\t\tisCancel={() => setIsModalConfirm(false)}\r\n\t\t\t\tisOk={() => {\r\n\t\t\t\t\trouter.query?.isExercise == 'true' ? onSubmitExercise() : onSubmit_DoingTest()\r\n\t\t\t\t}}\r\n\t\t\t\tcontent={returnTextConfirm()}\r\n\t\t\t/>\r\n\t\t\t{/* Modal hết giờ làm bài **/}\r\n\t\t\t<Modal title=\"Chú ý!\" visible={isModalVisible} okText=\"Đồng ý\" cancelText=\"Đóng\" onOk={handleOk} onCancel={handleCancel}>\r\n\t\t\t\t<p style={{ fontWeight: 500 }}>Bạn chưa chọn đề thi. Chuyển đến trang bộ đề?</p>\r\n\t\t\t</Modal>\r\n\r\n\t\t\t{/* Card Main Test **/}\r\n\t\t\t<Card\r\n\t\t\t\tclassName=\"test-card\"\r\n\t\t\t\ttitle={\r\n\t\t\t\t\t<div className=\"test-info\">\r\n\t\t\t\t\t\t<div className=\"test-title-info\">\r\n\t\t\t\t\t\t\t<h6 className=\"name-type-test\">{infoExam?.Name}</h6>\r\n\t\t\t\t\t\t\t<p className=\"info-user\">\r\n\t\t\t\t\t\t\t\t<span>{infoExam?.ProgramName}</span>\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{infoExam !== null && infoExam?.Audio !== undefined && infoExam.Audio !== null && infoExam.Audio !== '' && (\r\n\t\t\t\t\t\t\t<audio className=\"none-poiter hide-on-mobile\" autoPlay={true} controls ref={audio} onEnded={() => setIsPlaying(false)}>\r\n\t\t\t\t\t\t\t\t<source src={infoExam.Audio} type=\"audio/mpeg\" />\r\n\t\t\t\t\t\t\t</audio>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\textra={\r\n\t\t\t\t\tinfoExam &&\r\n\t\t\t\t\tdataQuestion?.length > 0 &&\r\n\t\t\t\t\taddMinutes && <CountDown addMinutes={addMinutes} onFinish={() => !isModalVisible && timeUp()} />\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t<div style={{ width: '100%', height: '105%', display: 'flex', flexDirection: 'column' }}>\r\n\t\t\t\t\t<div style={{ width: '100%', height: '90%' }}>\r\n\t\t\t\t\t\t{dataQuestion !== null && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<div className={isDrag() ? 'test-body' : 'test-body'}>\r\n\t\t\t\t\t\t\t\t\t{loadingSubmit && (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"loading-submit text-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-100 text-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Spin />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"mt-3\" style={{ fontStyle: 'italic', fontWeight: 500 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tĐang tiến hành nộp bài...\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t{isLoading ? (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"w-100 mt-4 \">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-50\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton />\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t) : dataQuestion?.length > 0 ? (\r\n\t\t\t\t\t\t\t\t\t\tdataQuestion.slice(spaceQuestion.start, spaceQuestion.end).map((item, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (isGroup) {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"doingtest-group\" key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"\" style={{ height: '100%' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col-lg-6 col-md-12 col-sm-12 col-12 pl-0 pl-0-mobile\" style={{ height: '100%' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ListQuestion setChild={setChild} dataQuestion={item} listQuestionID={listQuestionID} openPagi={openPagi} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"doingtest-single\" key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col-12\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ListQuestion dataQuestion={item} listQuestionID={listQuestionID} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"w-100 text-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t{!checkTested ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p style={{ fontWeight: 500 }}>Đề thi này chưa có câu hỏi</p>\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p style={{ fontWeight: 500 }}>Bạn đã làm đề test này rồi</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpathname: '/customer/service/service-test-student'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a className=\"btn btn-warning\">Thoát ra</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<Modal title=\"Basic Modal\" visible={false} onOk={handleClick_openPagi} onCancel={handleClick_openPagi}>\r\n\t\t\t\t\t\t<div style={{ marginBottom: 0 }}>\r\n\t\t\t\t\t\t\t{dataQuestion?.length > 0 && (\r\n\t\t\t\t\t\t\t\t<div className={`footer-pagination row-pagination ${openPagi ? 'show-mobile' : ''}`}>\r\n\t\t\t\t\t\t\t\t\t<button className=\"close-icon\" onClick={handleClick_openPagi}>\r\n\t\t\t\t\t\t\t\t\t\t<CloseOutlined />\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<p className=\"pagi-name\">Danh sách câu hỏi</p>\r\n\t\t\t\t\t\t\t\t\t<div className=\"box-preview\">\r\n\t\t\t\t\t\t\t\t\t\t<Checkbox checked={listPreview.includes(activeID) ? true : false} onChange={onChange_preview}>\r\n\t\t\t\t\t\t\t\t\t\t\tPreview\r\n\t\t\t\t\t\t\t\t\t\t</Checkbox>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<button className=\"pagi-btn previous\" onClick={onChange_PreviousPage}>\r\n\t\t\t\t\t\t\t\t\t\t<LeftOutlined />\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<ul className=\"list-answer\">\r\n\t\t\t\t\t\t\t\t\t\t{listQuestionID?.length > 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\tlistQuestionID.map((questionID, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li className={`item `} value={questionID} key={questionID} style={{ marginBottom: isLong ? '10px' : '' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref=\"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => onChange_pagination(e, index + 1)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`\r\n                      \t\t${questionID == activeID ? 'activeDoing' : ''}\r\n                      \t\t${listPicked.includes(questionID) ? 'checked' : ''} ${listPreview.includes(questionID) ? 'checked_preview' : ''}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{index + 1}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t<button className=\"pagi-btn next\" onClick={onChange_NextPage}>\r\n\t\t\t\t\t\t\t\t\t\t<RightOutlined />\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Modal>\r\n\r\n\t\t\t\t\t<div style={{ marginBottom: -100 }}>\r\n\t\t\t\t\t\t{dataQuestion?.length > 0 && (\r\n\t\t\t\t\t\t\t<div className={!openPagi ? 'test-footer' : 'test-footer-mobile'} id=\"test-footer\">\r\n\t\t\t\t\t\t\t\t<div className=\"pagination-mobile \">\r\n\t\t\t\t\t\t\t\t\t<button className=\"listQuestion\" onClick={handleClick_openPagi}>\r\n\t\t\t\t\t\t\t\t\t\t<ProfileFilled />\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<button className=\"pagi-btn previous\" onClick={onChange_PreviousPage}>\r\n\t\t\t\t\t\t\t\t\t\t<LeftOutlined />\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<button className=\"pagi-btn next\" onClick={onChange_NextPage}>\r\n\t\t\t\t\t\t\t\t\t\t<RightOutlined />\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className={`footer-pagination row-pagination ${openPagi ? 'show-mobile' : ''}`}>\r\n\t\t\t\t\t\t\t\t\t<button className=\"close-icon\" onClick={handleClick_openPagi}>\r\n\t\t\t\t\t\t\t\t\t\t<CloseOutlined />\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<p className=\"pagi-name\">Danh sách câu hỏi</p>\r\n\t\t\t\t\t\t\t\t\t<div className=\"box-preview\">\r\n\t\t\t\t\t\t\t\t\t\t<Checkbox checked={listPreview.includes(activeID) ? true : false} onChange={onChange_preview}>\r\n\t\t\t\t\t\t\t\t\t\t\tPreview\r\n\t\t\t\t\t\t\t\t\t\t</Checkbox>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<button className=\"pagi-btn previous\" onClick={onChange_PreviousPage}>\r\n\t\t\t\t\t\t\t\t\t\t<LeftOutlined />\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<ul className=\"list-answer\">\r\n\t\t\t\t\t\t\t\t\t\t{listQuestionID?.length > 0 &&\r\n\t\t\t\t\t\t\t\t\t\t\tlistQuestionID.map((questionID, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li className={`item `} value={questionID} key={questionID} style={{ marginBottom: isLong ? '10px' : '' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thref=\"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => onChange_pagination(e, index + 1)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`\r\n                      \t\t${questionID == activeID ? 'activeDoing' : ''}\r\n                      \t\t${listPicked.includes(questionID) ? 'checked' : ''} ${listPreview.includes(questionID) ? 'checked_preview' : ''}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{index + 1}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t<button className=\"pagi-btn next\" onClick={onChange_NextPage}>\r\n\t\t\t\t\t\t\t\t\t\t<RightOutlined />\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"footer-submit text-right\">\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-primary\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => (!dataDoneTest ? setIsModalConfirm(true) : closeMainTest && closeMainTest())}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{!dataDoneTest ? 'Nộp bài' : 'Đóng'}\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{/* </div> */}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Card>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default MainTest\r\n"]},"metadata":{},"sourceType":"module"}