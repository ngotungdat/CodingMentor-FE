{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\Global\\\\Option\\\\Contract\\\\Contract.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Card, Popover, Spin, Tooltip } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { contractApi } from '~/apiBase/options/contract';\nimport EditorBase from '~/components/Elements/EditorBase';\nimport TitlePage from '~/components/TitlePage';\nimport { useWrap } from '~/context/wrap';\n\nvar Contract = function Contract() {\n  _s();\n\n  var _useState = useState(null),\n      contract = _useState[0],\n      setContract = _useState[1];\n\n  var _useState2 = useState(''),\n      contractContent = _useState2[0],\n      setContractContent = _useState2[1];\n\n  var _useState3 = useState(false),\n      isLoading = _useState3[0],\n      setIsLoading = _useState3[1];\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti;\n\n  var codeEditorList = [{\n    label: '{khoahoc}',\n    desc: ' Khóa học'\n  }, {\n    label: '{chuongtrinh}',\n    desc: ' Chương trình'\n  }, {\n    label: '{batdau}',\n    desc: ' Thời gian bắt đầu'\n  }, {\n    label: '{ketthuc}',\n    desc: ' Thời gian kết thúc'\n  }, {\n    label: '{hinhthucthanhtoan}',\n    desc: 'Hình thức thanh toán'\n  }, {\n    label: '{hovaten}',\n    desc: ' Họ và tên'\n  }, {\n    label: '{sodienthoai}',\n    desc: ' Số điện thoại'\n  }, {\n    label: '{email}',\n    desc: 'Email khách hàng'\n  }, {\n    label: '{cmnd}',\n    desc: ' CMND'\n  }, {\n    label: '{ngaycap}',\n    desc: ' Ngày cấp'\n  }, {\n    label: '{noicap}',\n    desc: ' Nơi cấp'\n  }, {\n    label: '{diachi}',\n    desc: ' Địa chỉ'\n  }, {\n    label: '{lydo}',\n    desc: ' Lý do xuất phiếu'\n  }, {\n    label: '{dachi}',\n    desc: ' Số tiền chi ra'\n  }, {\n    label: '{dathu}',\n    desc: ' Số tiền thu vào'\n  }, {\n    label: '{nguoinhanphieu}',\n    desc: ' Người nhận phiếu ký tên'\n  }, {\n    label: '{nhanvienxuat}',\n    desc: ' Nhân viên xuất phiếu ký tên'\n  }, {\n    label: '{ngay}',\n    desc: ' Ngày'\n  }, {\n    label: '{thang}',\n    desc: ' Tháng'\n  }, {\n    label: '{nam}',\n    desc: ' Năm'\n  }];\n\n  var fetchContract = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setIsLoading(true);\n              _context.prev = 1;\n              _context.next = 4;\n              return contractApi.getAll({});\n\n            case 4:\n              res = _context.sent;\n\n              if (res.status === 200) {\n                if (typeof res.data.data === 'object' && res.data.data !== null) {\n                  setContract(res.data.data);\n                }\n              } else if (res.status === 204) {\n                showNoti('danger', 'Không tìm thấy');\n              }\n\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](1);\n              showNoti('danger', _context.t0.message);\n\n            case 11:\n              _context.prev = 11;\n              setIsLoading(false);\n              return _context.finish(11);\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 8, 11, 14]]);\n    }));\n\n    return function fetchContract() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    fetchContract();\n  }, []);\n\n  var changeContractContent = function changeContractContent(value) {\n    setContractContent(value);\n  };\n\n  var updateContract = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (contractContent) {\n                _context2.next = 3;\n                break;\n              }\n\n              showNoti('danger', 'Bạn chưa sưa đổi');\n              return _context2.abrupt(\"return\");\n\n            case 3:\n              setIsLoading(true);\n              _context2.prev = 4;\n              _context2.next = 7;\n              return contractApi.update(_objectSpread(_objectSpread({}, contract), {}, {\n                ContractContent: contractContent\n              }));\n\n            case 7:\n              res = _context2.sent;\n\n              if (res.status === 200) {\n                showNoti('success', res.data.message);\n              }\n\n              _context2.next = 14;\n              break;\n\n            case 11:\n              _context2.prev = 11;\n              _context2.t0 = _context2[\"catch\"](4);\n              showNoti('danger', _context2.t0.message);\n\n            case 14:\n              _context2.prev = 14;\n              setContractContent('');\n              setIsLoading(false);\n              return _context2.finish(14);\n\n            case 18:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[4, 11, 14, 18]]);\n    }));\n\n    return function updateContract() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row\",\n    children: [/*#__PURE__*/_jsxDEV(TitlePage, {\n      title: \"H\\u1EE3p \\u0111\\u1ED3ng\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-12\",\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        className: \"\".concat(isLoading ? 'custom-loading' : ''),\n        style: {\n          position: 'relative'\n        },\n        extra: /*#__PURE__*/_jsxDEV(Popover, {\n          placement: \"bottomRight\",\n          content: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"invoice-editor-list\",\n            children: codeEditorList.map(function (c, idx) {\n              return /*#__PURE__*/_jsxDEV(Tooltip, {\n                title: \"Nh\\u1EA5n \\u0111\\u1EC3 sao ch\\xE9p\",\n                placement: \"left\",\n                className: \"invoice-editor-item\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  onClick: function onClick() {\n                    navigator.clipboard.writeText(c.label);\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [c.label, \":\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 105,\n                    columnNumber: 13\n                  }, _this), \"\".concat(c.desc)]\n                }, idx, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 99,\n                  columnNumber: 12\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 11\n              }, _this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 9\n          }, _this),\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"btn-code-editor\",\n            style: {\n              position: 'relative'\n            },\n            type: \"primary\",\n            children: \"M\\xE3 h\\u01B0\\u1EDBng d\\u1EABn\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 8\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 7\n        }, _this),\n        children: [/*#__PURE__*/_jsxDEV(EditorBase, {\n          content: contract === null || contract === void 0 ? void 0 : contract.ContractContent,\n          handleChangeDataEditor: changeContractContent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pt-3 d-flex justify-content-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              paddingRight: 5\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-primary\",\n              disabled: isLoading,\n              onClick: updateContract,\n              children: [\"X\\xE1c nh\\u1EADn\", isLoading && /*#__PURE__*/_jsxDEV(Spin, {\n                className: \"loading-base\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 23\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 8\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 7\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(Spin, {\n          className: \"custom-loading-icon\",\n          size: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 6\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 5\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 4\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 3\n  }, _this);\n};\n\n_s(Contract, \"u1krDeA2d3OyNiYD1aBT9oOL9TE=\", false, function () {\n  return [useWrap];\n});\n\n_c = Contract;\nexport default Contract;\n\nvar _c;\n\n$RefreshReg$(_c, \"Contract\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/Global/Option/Contract/Contract.tsx"],"names":["Card","Popover","Spin","Tooltip","React","useEffect","useState","contractApi","EditorBase","TitlePage","useWrap","Contract","contract","setContract","contractContent","setContractContent","isLoading","setIsLoading","showNoti","codeEditorList","label","desc","fetchContract","getAll","res","status","data","message","changeContractContent","value","updateContract","update","ContractContent","position","map","c","idx","navigator","clipboard","writeText","paddingRight"],"mappings":"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","sourcesContent":["import { Card, Popover, Spin, Tooltip } from 'antd'\r\nimport { ifError } from 'assert'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { contractApi } from '~/apiBase/options/contract'\r\nimport EditorBase from '~/components/Elements/EditorBase'\r\nimport TitlePage from '~/components/TitlePage'\r\nimport { useWrap } from '~/context/wrap'\r\n\r\nconst Contract = () => {\r\n\tconst [contract, setContract] = useState(null)\r\n\tconst [contractContent, setContractContent] = useState('')\r\n\tconst [isLoading, setIsLoading] = useState(false)\r\n\tconst { showNoti } = useWrap()\r\n\r\n\tconst codeEditorList = [\r\n\t\t{ label: '{khoahoc}', desc: ' Khóa học' },\r\n\t\t{ label: '{chuongtrinh}', desc: ' Chương trình' },\r\n\t\t{ label: '{batdau}', desc: ' Thời gian bắt đầu' },\r\n\t\t{ label: '{ketthuc}', desc: ' Thời gian kết thúc' },\r\n\t\t{ label: '{hinhthucthanhtoan}', desc: 'Hình thức thanh toán' },\r\n\t\t{ label: '{hovaten}', desc: ' Họ và tên' },\r\n\t\t{ label: '{sodienthoai}', desc: ' Số điện thoại' },\r\n\t\t{ label: '{email}', desc: 'Email khách hàng' },\r\n\t\t{ label: '{cmnd}', desc: ' CMND' },\r\n\t\t{ label: '{ngaycap}', desc: ' Ngày cấp' },\r\n\t\t{ label: '{noicap}', desc: ' Nơi cấp' },\r\n\t\t{ label: '{diachi}', desc: ' Địa chỉ' },\r\n\t\t{ label: '{lydo}', desc: ' Lý do xuất phiếu' },\r\n\t\t{ label: '{dachi}', desc: ' Số tiền chi ra' },\r\n\t\t{ label: '{dathu}', desc: ' Số tiền thu vào' },\r\n\t\t{ label: '{nguoinhanphieu}', desc: ' Người nhận phiếu ký tên' },\r\n\t\t{ label: '{nhanvienxuat}', desc: ' Nhân viên xuất phiếu ký tên' },\r\n\t\t{ label: '{ngay}', desc: ' Ngày' },\r\n\t\t{ label: '{thang}', desc: ' Tháng' },\r\n\t\t{ label: '{nam}', desc: ' Năm' }\r\n\t]\r\n\r\n\tconst fetchContract = async () => {\r\n\t\tsetIsLoading(true)\r\n\t\ttry {\r\n\t\t\tlet res = await contractApi.getAll({})\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tif (typeof res.data.data === 'object' && res.data.data !== null) {\r\n\t\t\t\t\tsetContract(res.data.data)\r\n\t\t\t\t}\r\n\t\t\t} else if (res.status === 204) {\r\n\t\t\t\tshowNoti('danger', 'Không tìm thấy')\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetIsLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchContract()\r\n\t}, [])\r\n\r\n\tconst changeContractContent = (value) => {\r\n\t\tsetContractContent(value)\r\n\t}\r\n\tconst updateContract = async () => {\r\n\t\tif (!contractContent) {\r\n\t\t\tshowNoti('danger', 'Bạn chưa sưa đổi')\r\n\t\t\treturn\r\n\t\t}\r\n\t\tsetIsLoading(true)\r\n\t\ttry {\r\n\t\t\tlet res = await contractApi.update({\r\n\t\t\t\t...contract,\r\n\t\t\t\tContractContent: contractContent\r\n\t\t\t})\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tshowNoti('success', res.data.message)\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tshowNoti('danger', error.message)\r\n\t\t} finally {\r\n\t\t\tsetContractContent('')\r\n\t\t\tsetIsLoading(false)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"row\">\r\n\t\t\t<TitlePage title=\"Hợp đồng\" />\r\n\t\t\t<div className=\"col-12\">\r\n\t\t\t\t<Card\r\n\t\t\t\t\tclassName={`${isLoading ? 'custom-loading' : ''}`}\r\n\t\t\t\t\tstyle={{ position: 'relative' }}\r\n\t\t\t\t\textra={\r\n\t\t\t\t\t\t<Popover\r\n\t\t\t\t\t\t\tplacement=\"bottomRight\"\r\n\t\t\t\t\t\t\tcontent={\r\n\t\t\t\t\t\t\t\t<div className=\"invoice-editor-list\">\r\n\t\t\t\t\t\t\t\t\t{codeEditorList.map((c, idx) => (\r\n\t\t\t\t\t\t\t\t\t\t<Tooltip title=\"Nhấn để sao chép\" placement=\"left\" className=\"invoice-editor-item\">\r\n\t\t\t\t\t\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnavigator.clipboard.writeText(c.label)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{c.label}:</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{`${c.desc}`}\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<a className=\"btn-code-editor\" style={{ position: 'relative' }} type=\"primary\">\r\n\t\t\t\t\t\t\t\tMã hướng dẫn\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</Popover>\r\n\t\t\t\t\t}\r\n\t\t\t\t>\r\n\t\t\t\t\t<EditorBase content={contract?.ContractContent} handleChangeDataEditor={changeContractContent} />\r\n\t\t\t\t\t<div className=\"pt-3 d-flex justify-content-center\">\r\n\t\t\t\t\t\t<div style={{ paddingRight: 5 }}>\r\n\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn btn-primary\" disabled={isLoading} onClick={updateContract}>\r\n\t\t\t\t\t\t\t\tXác nhận\r\n\t\t\t\t\t\t\t\t{isLoading && <Spin className=\"loading-base\" />}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Spin className=\"custom-loading-icon\" size=\"large\" />\r\n\t\t\t\t</Card>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Contract\r\n"]},"metadata":{},"sourceType":"module"}