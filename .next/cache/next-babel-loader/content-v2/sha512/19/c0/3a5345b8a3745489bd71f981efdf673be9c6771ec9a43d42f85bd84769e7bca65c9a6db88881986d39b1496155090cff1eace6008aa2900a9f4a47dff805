{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"D:\\\\MonaMedia\\\\Project\\\\IELTS-NguyenHuyen-FE\\\\IELTS-Nguyen-Huyen\\\\src\\\\components\\\\CourseCalendar\\\\modal-create-event.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { Modal, Select, Spin, TimePicker } from 'antd';\nimport moment from 'moment';\nimport React, { useState, useEffect } from 'react';\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\nimport { useWrap } from '~/context/wrap';\nimport { CalendarApi } from '~/apiBase/Calendar/calendar';\nvar Option = Select.Option;\nmoment.locale('vi');\n\nvar ModalCreateEvent = function ModalCreateEvent(props) {\n  _s();\n\n  var visible = props.visible,\n      setVisible = props.setVisible,\n      date = props.date,\n      courses = props.courses,\n      getData = props.getData;\n\n  var _useWrap = useWrap(),\n      showNoti = _useWrap.showNoti;\n\n  var _useState = useState({}),\n      selected = _useState[0],\n      setSelected = _useState[1];\n\n  var _useState2 = useState(''),\n      startTime = _useState2[0],\n      setStartTime = _useState2[1];\n\n  var _useState3 = useState(''),\n      endTime = _useState3[0],\n      setEndTime = _useState3[1];\n\n  var _useState4 = useState(false),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(''),\n      errorText = _useState5[0],\n      setErrorText = _useState5[1];\n\n  useEffect(function () {\n    !visible && setSelected({}), setStartTime(''), setEndTime('');\n  }, [visible]);\n\n  var onChange = function onChange(value) {\n    var indexSelected = courses.findIndex(function (e) {\n      return (e === null || e === void 0 ? void 0 : e.VideoCourseID) == value;\n    });\n    setSelected(courses[indexSelected]);\n    return null;\n  };\n\n  useEffect(function () {\n    if (!!startTime) {\n      var temp = new Date(startTime);\n      var timestamp = Math.floor(temp / 1000);\n      var tempDate = new Date((timestamp + parseInt(selected === null || selected === void 0 ? void 0 : selected.LimitMinutes) * 60) * 1000);\n      setEndTime(tempDate);\n    }\n  }, [startTime, selected]);\n  useEffect(function () {\n    setErrorText('');\n  }, [selected, startTime]);\n\n  var _createEvent = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var temp, res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n\n              if (selected !== null && selected !== void 0 && selected.VideoCourseID) {\n                _context.next = 5;\n                break;\n              }\n\n              setErrorText('Vui lòng chọn khóa học');\n              _context.next = 23;\n              break;\n\n            case 5:\n              if (startTime) {\n                _context.next = 9;\n                break;\n              }\n\n              setErrorText('Vui lòng chọn ngày bắt đầu');\n              _context.next = 23;\n              break;\n\n            case 9:\n              temp = {\n                VideoCourseID: selected === null || selected === void 0 ? void 0 : selected.VideoCourseID,\n                OpenDate: moment(date === null || date === void 0 ? void 0 : date.start).format('YYYY/MM/DD'),\n                sTime: moment(startTime).format('HH:mm'),\n                eTime: moment(endTime).format('HH:mm')\n              };\n              _context.prev = 10;\n              _context.next = 13;\n              return CalendarApi.add(temp);\n\n            case 13:\n              res = _context.sent;\n\n              if (res.status == 200 || res.status == 204) {\n                showNoti('success', 'Thành công');\n                getData();\n                setVisible(false);\n              }\n\n              _context.next = 20;\n              break;\n\n            case 17:\n              _context.prev = 17;\n              _context.t0 = _context[\"catch\"](10);\n              showNoti('danger', _context.t0 === null || _context.t0 === void 0 ? void 0 : _context.t0.message);\n\n            case 20:\n              _context.prev = 20;\n              setLoading(false);\n              return _context.finish(20);\n\n            case 23:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[10, 17, 20, 23]]);\n    }));\n\n    return function _createEvent() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Modal, {\n      className: \"wrap-calendar-x\",\n      title: !!(date !== null && date !== void 0 && date.start) ? 'Thêm lịch ngày: ' + moment(date === null || date === void 0 ? void 0 : date.start).format('DD-MM-YYYY') : 'Thêm lịch',\n      visible: visible,\n      onCancel: function onCancel() {\n        return setVisible(false);\n      },\n      onOk: function onOk() {\n        return _createEvent();\n      },\n      cancelText: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\",\n        children: \"Hu\\u1EF7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, _this),\n      okText: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btn-primary save\",\n        children: [\"L\\u01B0u l\\u1EA1i \", loading && /*#__PURE__*/_jsxDEV(Spin, {\n          className: \"ml-2\",\n          size: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 67\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, _this),\n      centered: true,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-12 col-12\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-2\",\n          children: [\"Ch\\u1ECDn kh\\xF3a h\\u1ECDc \", /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: 'red'\n            },\n            children: \" *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 21\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(Select, {\n          disabled: loading,\n          className: \"w-100\",\n          showSearch: true,\n          value: (selected === null || selected === void 0 ? void 0 : selected.VideoCourseID) || undefined,\n          placeholder: \"Ch\\u1ECDn kh\\xF3a h\\u1ECDc\",\n          optionFilterProp: \"children\",\n          onChange: onChange,\n          filterOption: function filterOption(input, option) {\n            return option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0;\n          },\n          children: !!courses && courses.map(function (item) {\n            return /*#__PURE__*/_jsxDEV(Option, {\n              value: item === null || item === void 0 ? void 0 : item.VideoCourseID,\n              children: item === null || item === void 0 ? void 0 : item.VideoCourseName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 48\n            }, _this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 6\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 5\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row col-12 m-0 p-0\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6 col-12\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-2 mt-4\",\n            children: [\"Ch\\u1ECDn gi\\u1EDD b\\u1EAFt \\u0111\\u1EA7u \", /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: 'red'\n              },\n              children: \" *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 25\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 7\n          }, _this), /*#__PURE__*/_jsxDEV(TimePicker, {\n            disabled: loading,\n            value: !!startTime ? moment(startTime, 'HH:mm') : null,\n            onChange: function onChange(e) {\n              return setStartTime(e === null || e === void 0 ? void 0 : e._d);\n            },\n            className: \"ant-input\",\n            placeholder: \"B\\u1EAFt \\u0111\\u1EA7u\",\n            format: 'HH:mm'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 7\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6 col-12\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-2 mt-4\",\n            children: \"Gi\\u1EDD k\\u1EBFt th\\xFAc\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 7\n          }, _this), /*#__PURE__*/_jsxDEV(TimePicker, {\n            value: !!endTime && endTime != 'Invalid Date' ? moment(endTime, 'HH:mm') : null,\n            disabled: true,\n            className: \"ant-input\",\n            placeholder: \"H\\xE3y ch\\u1ECDn gi\\u1EDD b\\u1EAFt \\u0111\\u1EA7u\",\n            format: 'HH:mm'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 7\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 6\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 5\n      }, _this), !!errorText && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-6 col-12 mt-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: 'red'\n          },\n          children: errorText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 7\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 6\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 4\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 3\n  }, _this);\n};\n\n_s(ModalCreateEvent, \"rQU41uyOhe7MUMjKaWEa2KeW4t0=\", false, function () {\n  return [useWrap];\n});\n\n_c = ModalCreateEvent;\nexport default ModalCreateEvent;\n\nvar _c;\n\n$RefreshReg$(_c, \"ModalCreateEvent\");","map":{"version":3,"sources":["D:/MonaMedia/Project/IELTS-NguyenHuyen-FE/IELTS-Nguyen-Huyen/src/components/CourseCalendar/modal-create-event.tsx"],"names":["Modal","Select","Spin","TimePicker","moment","React","useState","useEffect","useWrap","CalendarApi","Option","locale","ModalCreateEvent","props","visible","setVisible","date","courses","getData","showNoti","selected","setSelected","startTime","setStartTime","endTime","setEndTime","loading","setLoading","errorText","setErrorText","onChange","value","indexSelected","findIndex","e","VideoCourseID","temp","Date","timestamp","Math","floor","tempDate","parseInt","LimitMinutes","_createEvent","OpenDate","start","format","sTime","eTime","add","res","status","message","color","undefined","input","option","children","toLowerCase","indexOf","map","item","VideoCourseName","_d"],"mappings":"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","sourcesContent":["import { Modal, Select, Spin, TimePicker } from 'antd'\r\nimport moment from 'moment'\r\nimport React, { useState, useEffect } from 'react'\r\nimport 'react-big-calendar/lib/css/react-big-calendar.css'\r\nimport { useWrap } from '~/context/wrap'\r\nimport _ from '~/appConfig'\r\nimport { CalendarApi } from '~/apiBase/Calendar/calendar'\r\n\r\nconst { Option } = Select\r\nmoment.locale('vi')\r\n\r\nconst ModalCreateEvent = (props: any) => {\r\n\tconst { visible, setVisible, date, courses, getData } = props\r\n\tconst { showNoti } = useWrap()\r\n\r\n\tconst [selected, setSelected] = useState<any>({})\r\n\tconst [startTime, setStartTime] = useState<any>('')\r\n\tconst [endTime, setEndTime] = useState<any>('')\r\n\tconst [loading, setLoading] = useState<boolean>(false)\r\n\r\n\tconst [errorText, setErrorText] = useState<any>('')\r\n\r\n\tuseEffect(() => {\r\n\t\t!visible && setSelected({}), setStartTime(''), setEndTime('')\r\n\t}, [visible])\r\n\r\n\tconst onChange = (value: string) => {\r\n\t\tlet indexSelected = courses.findIndex((e: any) => e?.VideoCourseID == value)\r\n\t\tsetSelected(courses[indexSelected])\r\n\t\treturn null\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!!startTime) {\r\n\t\t\tconst temp: any = new Date(startTime)\r\n\t\t\tconst timestamp = Math.floor(temp / 1000)\r\n\t\t\tvar tempDate = new Date((timestamp + parseInt(selected?.LimitMinutes) * 60) * 1000)\r\n\t\t\tsetEndTime(tempDate)\r\n\t\t}\r\n\t}, [startTime, selected])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetErrorText('')\r\n\t}, [selected, startTime])\r\n\r\n\tconst _createEvent = async () => {\r\n\t\tsetLoading(true)\r\n\t\tif (!selected?.VideoCourseID) {\r\n\t\t\tsetErrorText('Vui lòng chọn khóa học')\r\n\t\t} else {\r\n\t\t\tif (!startTime) {\r\n\t\t\t\tsetErrorText('Vui lòng chọn ngày bắt đầu')\r\n\t\t\t} else {\r\n\t\t\t\tlet temp = {\r\n\t\t\t\t\tVideoCourseID: selected?.VideoCourseID,\r\n\t\t\t\t\tOpenDate: moment(date?.start).format('YYYY/MM/DD'),\r\n\t\t\t\t\tsTime: moment(startTime).format('HH:mm'),\r\n\t\t\t\t\teTime: moment(endTime).format('HH:mm')\r\n\t\t\t\t}\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst res: any = await CalendarApi.add(temp)\r\n\t\t\t\t\tif (res.status == 200 || res.status == 204) {\r\n\t\t\t\t\t\tshowNoti('success', 'Thành công')\r\n\t\t\t\t\t\tgetData()\r\n\t\t\t\t\t\tsetVisible(false)\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tshowNoti('danger', error?.message)\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tsetLoading(false)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Modal\r\n\t\t\t\tclassName=\"wrap-calendar-x\"\r\n\t\t\t\ttitle={!!date?.start ? 'Thêm lịch ngày: ' + moment(date?.start).format('DD-MM-YYYY') : 'Thêm lịch'}\r\n\t\t\t\tvisible={visible}\r\n\t\t\t\tonCancel={() => setVisible(false)}\r\n\t\t\t\tonOk={() => _createEvent()}\r\n\t\t\t\tcancelText={<div className=\"\">Huỷ</div>}\r\n\t\t\t\tokText={<div className=\"btn-primary save\">Lưu lại {loading && <Spin className=\"ml-2\" size=\"small\" />}</div>}\r\n\t\t\t\tcentered\r\n\t\t\t>\r\n\t\t\t\t<div className=\"col-md-12 col-12\">\r\n\t\t\t\t\t<div className=\"mb-2\">\r\n\t\t\t\t\t\tChọn khóa học <span style={{ color: 'red' }}> *</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\t\tclassName=\"w-100\"\r\n\t\t\t\t\t\tshowSearch\r\n\t\t\t\t\t\tvalue={selected?.VideoCourseID || undefined}\r\n\t\t\t\t\t\tplaceholder=\"Chọn khóa học\"\r\n\t\t\t\t\t\toptionFilterProp=\"children\"\r\n\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t\tfilterOption={(input, option: any) => option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{!!courses && courses.map((item: any) => <Option value={item?.VideoCourseID}>{item?.VideoCourseName}</Option>)}\r\n\t\t\t\t\t</Select>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"row col-12 m-0 p-0\">\r\n\t\t\t\t\t<div className=\"col-md-6 col-12\">\r\n\t\t\t\t\t\t<div className=\"mb-2 mt-4\">\r\n\t\t\t\t\t\t\tChọn giờ bắt đầu <span style={{ color: 'red' }}> *</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<TimePicker\r\n\t\t\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\t\t\tvalue={!!startTime ? moment(startTime, 'HH:mm') : null}\r\n\t\t\t\t\t\t\tonChange={(e: any) => setStartTime(e?._d)}\r\n\t\t\t\t\t\t\tclassName=\"ant-input\"\r\n\t\t\t\t\t\t\tplaceholder=\"Bắt đầu\"\r\n\t\t\t\t\t\t\tformat={'HH:mm'}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"col-md-6 col-12\">\r\n\t\t\t\t\t\t<div className=\"mb-2 mt-4\">Giờ kết thúc</div>\r\n\t\t\t\t\t\t<TimePicker\r\n\t\t\t\t\t\t\tvalue={!!endTime && endTime != 'Invalid Date' ? moment(endTime, 'HH:mm') : null}\r\n\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\tclassName=\"ant-input\"\r\n\t\t\t\t\t\t\tplaceholder=\"Hãy chọn giờ bắt đầu\"\r\n\t\t\t\t\t\t\tformat={'HH:mm'}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{!!errorText && (\r\n\t\t\t\t\t<div className=\"col-md-6 col-12 mt-3\">\r\n\t\t\t\t\t\t<div style={{ color: 'red' }}>{errorText}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default ModalCreateEvent\r\n"]},"metadata":{},"sourceType":"module"}